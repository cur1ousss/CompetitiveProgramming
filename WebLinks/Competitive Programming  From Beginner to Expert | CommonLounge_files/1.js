webpackJsonp([1],{1591:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return p});var a=n(1),s=n.n(a),l=n(17),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=!1,p=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),c(t,[{key:"componentDidMount",value:function(){this.initScript()}},{key:"initScript",value:function(){u||(!function(){var e,t,n=document,o=n.getElementById,i=n.createElement,r=n.getElementsByTagName,a="typef_orm";o.call(n,a)||(e=i.call(n,"script"),e.id=a,e.src="https://embed.typeform.com/embed.js",t=r.call(n,"script")[0],t.parentNode.insertBefore(e,t))}(),u=!0)}},{key:"render",value:function(){return l.a?s.a.createElement("a",{className:"typeform-share button",href:this.props.url,"data-mode":"popup","data-auto-open":!0,target:"_blank"}," "):s.a.createElement("div",{className:"typeform-widget","data-url":this.props.url,"data-transparency":"50","data-hide-headers":!0,"data-hide-footer":!0})}}]),t}(s.a.PureComponent)},827:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentUser:e.get("currentLoggedInUser"),users:e.get("users"),notifications:e.get("notifications"),notificationsFeed:e.get("notificationsFeed"),isFetchingNotifications:e.getIn(["pagination","notifications","isFetching"],!1),currentOffsetBeingFetched:e.getIn(["pagination","notifications","currentOffsetBeingFetched"],0)}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Notifications",function(){return N}),n.d(t,"NotificationsContainer",function(){return j});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(891)),f=n.n(p),d=n(39),m=(n.n(d),n(132)),h=(n.n(m),n(899)),b=n.n(h),g=n(133),y=n(887),v=(n(134),n(97)),w=n(323),E=n(38),k=n(894),C=n.n(k),O=(n(324),n(131)),_=n(32),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),N=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.fetchNotifications(0),n.isDataAvailable=n.isDataAvailable.bind(n),n.onNotificationClick=n.onNotificationClick.bind(n),n.loadMore=n.loadMore.bind(n),n}return r(t,e),P(t,[{key:"loadMore",value:function(){this.props.fetchNotifications()}},{key:"onNotificationClick",value:function(e){this.props.toggleNotificationRead([e])}},{key:"componentWillUnmount",value:function(){}},{key:"isDataAvailable",value:function(){return this.props.notificationsFeed.size}},{key:"render",value:function(){var e=this,t=n.i(w.a)(null),o=null;this.props.currentUser&&(o=this.props.notificationsFeed.map(function(t,o){var i=e.props.notifications.get(t);return l.a.createElement(u.Link,{to:i.get("mainObjectPath"),className:"no-decoration",key:o,onClick:function(){return e.onNotificationClick(i.get("eid"))}},l.a.createElement("div",{className:i.get("isRead")?"notification read":"notification unread"},l.a.createElement(g.a,{preserveOriginal:!0,size:50,className:"avatar-image",src:i.get("avatar")?i.get("avatar"):i.get("avatarName")?null:C.a,name:i.get("avatarName")}),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"text"},n.i(O.k)(i.get("genericTemplate").toJS())),l.a.createElement("div",{className:"timeago label"},l.a.createElement("span",{className:"emoji"},i.get("emoji")),l.a.createElement(f.a,{date:i.get("dt")})))))}));var i=this.props.isFetchingNotifications?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),0==this.props.currentOffsetBeingFetched?l.a.createElement("div",{className:"loading-text no-uppercase"},"Checking for new notifications…"):l.a.createElement("div",{className:"loading-text"},"Loading…")):null,r=0!=this.props.isPage;return l.a.createElement("div",{className:r?"page notifications-page":"notifications-container"},r?l.a.createElement(t,{checkAuthOn:"load",allowLurker:!0,to:"/notifications"}):null,r?l.a.createElement(y.a,{noBack:!0,isNav:!0}):null,this.props.currentUser&&this.props.users.get(this.props.currentUser).get("unreadNotificationsCount")>0&&(0!=this.props.currentOffsetBeingFetched||!this.props.isFetchingNotifications)?l.a.createElement("div",{className:r?"mark-all-as-read-button with-margin-top":"mark-all-as-read-button",onClick:this.props.markAllNotificationsAsRead},"Mark all as read"):null,0===this.props.currentOffsetBeingFetched?i:null,this.props.notifications.size?o:this.props.isFetchingNotifications?null:l.a.createElement("div",{className:"onboarding-text-label"},"You have no notifications (yet)."),r?l.a.createElement(b.a,{onEnter:this.loadMore,scrollableAncestor:n.i(_.f)()?window:null,bottomOffset:"-200px"}):l.a.createElement("div",{className:"show-older-notifications-button"},l.a.createElement(u.Link,{to:"/notifications"},"Show older notifications")),0!=this.props.currentOffsetBeingFetched?i:null)}}]),t}(l.a.PureComponent),j=n.i(c.connect)(a,{fetchNotifications:E.z,toggleNotificationRead:E.A,markAllNotificationsAsRead:E.B,resetPagination:E.C})(N)},840:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{certificates:e.get("certificates"),currentLoggedInUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Certificate",function(){return m}),n.d(t,"CertificateContainer",function(){return h});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(887)),p=n(38),f=n(134),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDataAvailable=n.isDataAvailable.bind(n),n.props.fetchCertificate(n.props.params.certificateExternalId),n}return r(t,e),d(t,[{key:"fetchCommunities",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.fetchCommunityMetadata(this.props.params.communityId,null,["followers","accessLevel","isModerator","followersCount"])}},{key:"isDataAvailable",value:function(){var e=this.props.certificates.get(this.props.params.certificateExternalId);return e&&e.get("img")}},{key:"render",value:function(){var e=this.props.params.certificateExternalId;if(!this.isDataAvailable())return l.a.createElement("div",{className:"certificate-page page"},l.a.createElement(u.a,null),l.a.createElement(f.a,null));var t=this.props.certificates.get(e);return l.a.createElement("div",{className:"certificate-page page"},l.a.createElement(u.a,{routerGoBack:!0}),l.a.createElement("img",{className:"certificate-img",src:t.get("img")}))}}]),t}(l.a.PureComponent),h=n.i(c.connect)(a,{fetchCertificate:p.N})(m)},841:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{myCommunities:e.get("myCommunities"),isFetchingMyCommunities:e.get("isFetchingMyCommunities")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Communities",function(){return v}),n.d(t,"CommunitiesContainer",function(){return w});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),f=(n.n(p),n(887)),d=n(972),m=n(38),h=n(323),b=n(927),g=n(97),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchCommunities=n.fetchCommunities.bind(n),n.onChange=n.onChange.bind(n),n.fetchCommunities(),n.state={deferredSearchQuery:null,isFetchingSearch:!1},n}return r(t,e),y(t,[{key:"fetchCommunities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.props.fetchUserCommunities(e)}},{key:"onChange",value:function(e){var t=this;this.state.isFetchingSearch?this.setState({deferredSearchQuery:e}):(this.setState({isFetchingSearch:!0}),this.fetchCommunities(e),window.setTimeout(function(){if(t.state.deferredSearchQuery){var e=t.state.deferredSearchQuery;t.setState({deferredSearchQuery:null,isFetchingSearch:!1}),t.onChange(e)}else t.setState({isFetchingSearch:!1})},500))}},{key:"render",value:function(){var e=n.i(h.a)(null),t=this.props.myCommunities.get("shortcuts").slice(0,5).toJS(),o=this.props.myCommunities.get("moderating").toJS(),i=this.props.myCommunities.get("member").toJS(),r=this.props.myCommunities.get("following").toJS(),a=r.filter(function(e){return-1==i.indexOf(e)&&-1==o.indexOf(e)}),s=i.filter(function(e){return-1==o.indexOf(e)}),c=n.i(p.fromJS)(t).map(function(e,t){return l.a.createElement(d.a,{communityId:e,shouldLinkToCommunity:!0,showCommunityBio:!0,isBioEditable:!0})}),m=n.i(p.fromJS)(o).map(function(e,t){return l.a.createElement(d.a,{communityId:e,shouldLinkToCommunity:!0,showCommunityBio:!0,isBioEditable:!0})}),y=n.i(p.fromJS)(s).map(function(e,t){return l.a.createElement(d.a,{communityId:e,shouldLinkToCommunity:!0,showCommunityBio:!0,isBioEditable:!0})}),v=n.i(p.fromJS)(a).map(function(e,t){return l.a.createElement(d.a,{communityId:e,shouldLinkToCommunity:!0,showCommunityBio:!0,isBioEditable:!0})});return l.a.createElement("div",{className:"communities-page page"},l.a.createElement(e,{checkAuthOn:"load",allowLurker:!0,to:"/me/communities"}),l.a.createElement(f.a,{routerGoBack:!0}),l.a.createElement(b.a,{placeholder:"Search your communities",onChange:this.onChange}),l.a.createElement("div",{className:"communities-list list"},this.props.isFetchingMyCommunities?l.a.createElement("div",{className:"loader-div"},l.a.createElement(g.a,null),l.a.createElement("div",{className:"loading-text"},"Loading Your Communities…")):null,c.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Shortcuts"),l.a.createElement("div",{className:"section-items"},c)):null,m.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Moderating"),l.a.createElement("div",{className:"section-items"},m)):null,y.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Member"),l.a.createElement("div",{className:"section-items"},y)):null,0==m.size&&0==y.size&&0==v.size?null:l.a.createElement("div",{className:"section-heading"},"Following"),this.props.isFetchingMyCommunities?null:v.size>0?l.a.createElement("div",{className:"section-items"},v):l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},"Communities you follow will appear here.",l.a.createElement("br",null),"Discover some communities ",l.a.createElement(u.Link,{to:"/search/communities"},"here!"))),this.props.isFetchingMyCommunities?null:[l.a.createElement(u.Link,{to:"/search/communities"},l.a.createElement("div",{className:"action-button large no-height no-width centered"},"Find more communities")),l.a.createElement(u.Link,{to:"/community/new"},l.a.createElement("div",{className:"action-button large blue no-height no-width centered"},"Start your own community"))])}}]),t}(l.a.PureComponent),w=n.i(c.connect)(a,{fetchUserCommunities:m.F})(v)},848:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContributeForm",function(){return h}),n.d(t,"ContributeFormContainer",function(){return b});var s=n(1),l=n.n(s),c=n(887),u=n(1591),p=n(37),f=(n.n(p),n(39)),d=(n.n(f),n(15)),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),h=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),m(t,[{key:"render",value:function(){var e=this.props.users.getIn([this.props.currentLoggedInUser],n.i(f.Map)()),t="?first_name="+e.getIn(["firstName"],"")+"&email="+e.getIn(["email"],"")+"&eid="+e.getIn(["eid"],""),o=this.props.route&&this.props.route.type,i="volunteer"==o?"https://commonlounge.typeform.com/to/gfCfXk":"https://commonlounge.typeform.com/to/X6Dh2X";return l.a.createElement("div",{className:"contribute-form"},l.a.createElement(c.a,{noBack:!0,isNav:!0}),l.a.createElement(u.a,{url:""+i+t}))}}]),t}(l.a.PureComponent),b=n.i(p.connect)(a,{})(n.i(d.withRouter)(h))},856:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ForgotPassword",function(){return d}),n.d(t,"ForgotPasswordContainer",function(){return m});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(136)),p=n(887),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.currentUser&&window.location.replace(window.site+"/home"),n}return r(t,e),f(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"page sign-in-page commonlounge-landing-page"},l.a.createElement(p.a,{noBack:!0,isNav:!0}),l.a.createElement("div",{className:"heading"}),l.a.createElement("div",{className:"landing-logo"},"CommonLounge"),l.a.createElement(u.a,{isForgotPassword:!0}))}}]),t}(l.a.PureComponent),m=n.i(c.connect)(a)(d)},863:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{isEmailChangeRequestSuccess:e.get("isEmailChangeRequestSuccess"),isEmailChangeRequestFetching:e.get("isEmailChangeRequestFetching"),currentLoggedInUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Message",function(){return g}),n.d(t,"MessageContainer",function(){return y});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(323),n(887)),f=n(136),d=n(38),m=n(58),h=n(97),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:""},n.validateEmail=n.validateEmail.bind(n),n.handleEmailChange=n.handleEmailChange.bind(n),n.handleEmailKeyPress=n.handleEmailKeyPress.bind(n),n.handleEmailSubmit=n.handleEmailSubmit.bind(n),n}return r(t,e),b(t,[{key:"validateEmail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.email;return t.length<6?(e||alert("The email seems too short. Please contact us at hello@commonlounge.com to create an account."),!1):!(t.length>254)||(e||alert("No email address cannot be longer than 254 characters. Please contact us at hello@commonlounge.com to create an account."),!1)}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleEmailKeyPress",value:function(e){13==(e.keyCode||e.which)&&this.handleEmailSubmit()}},{key:"handleEmailSubmit",value:function(){this.validateEmail()&&!0!==this.props.isEmailChangeRequestFetching&&this.props.changeEmail(this.state.email,n.i(m.c)("f",window.location.href),n.i(m.c)("next",window.location.href),!1)}},{key:"render",value:function(){var e=this.props.params.type,t="",n=null;switch(e){case"email":t=l.a.createElement("span",null,"Oops! Your Facebook email seems to be invalid. Enter your email address below. ",l.a.createElement("br",null),"Once you're done, we'll take you back to Facebook to complete the sign up process. Don't worry, we promise you'll be ready to use CommonLounge in just 15 seconds."),n=l.a.createElement("div",{className:"message"},l.a.createElement("input",{type:"email",ref:"email_input",spellCheck:"false",className:"email",placeholder:"your-name@domain.com",value:this.state.email,onChange:this.handleEmailChange,onKeyPress:this.handleEmailKeyPress,autoFocus:"autofocus"}),this.state.email.length>5?l.a.createElement("div",{className:"button",onClick:this.handleEmailSubmit},"Submit"):null);break;case"fb-auth-canceled":t="It seems like you canceled the Facebook authentication process. Please try connecting your Facebook again.",n=l.a.createElement(f.a,{onlyDisplayFB:!0});break;case"email-change-error":t="It seems like you clicked on an invalid link to change your email. Please request a fresh link from your settings page.",n=l.a.createElement(u.Link,{to:"/profile/settings"},l.a.createElement("div",{className:"action-button centered large blue no-height"},"Go to Settings"));break;case"email-login-error":t="The login and password combination you provided was incorrect or you don't have an account with us. You can try again or create an account below:",n=l.a.createElement(f.a,{isSignIn:!0});break;case"email-change-success":t="Your email has been updated!",n=l.a.createElement(u.Link,{to:"/home"},l.a.createElement("div",{className:"action-button centered large blue no-height"},"Go to Home"));break;case"email-verify-error":t="It seems like you clicked on an invalid link to verify your email. You can try signing up again below:",n=l.a.createElement(f.a,null);break;case"forgot-password-error":t="It seems like you clicked on an invalid link to verify your email. You can request for a fresh link below:",n=l.a.createElement(f.a,{isForgotPassword:!0});break;case"email-verify-success":t="Your account is now active with the email you provided. Please log in below:",n=l.a.createElement(f.a,{isSignIn:!0});break;case"email-change-pending":t="Please check your email for next steps. You can close this tab if you want.";break;case"user-fb-profile-already-exists":t="You have already associated another Facebook account with your profile. Email us at hello@commonlounge.com if you want to replace the existing facebook account.";break;case"fb-profile-already-associated":t="The Facebook profile you tried to connect to your account has another account associated with it. This usually happens if you created an account earlier using Sign Up With Facebook. If you want to merge the two accounts, please email us at hello@commonlounge.com";break;default:t="An error occured or this page isn't available. Could be anything. We don't really know. However, we've been notified and will fix it as fast as possible!",n=l.a.createElement("div",{className:"action-button-group"},l.a.createElement(u.Link,{to:"/home"},l.a.createElement("button",{className:"action-button large with-margin-bottom"},"Go to Home")))}return l.a.createElement("div",{className:"page message-page commonlounge-landing-page"},l.a.createElement(p.a,{noBack:!0,isNav:!0}),l.a.createElement("div",{className:"heading"}),l.a.createElement(u.Link,{className:"landing-logo no-decoration",to:"/"},"CommonLounge"),l.a.createElement("div",{className:"message top"},t),this.props.isEmailChangeRequestFetching||this.props.isEmailChangeRequestSuccess?l.a.createElement("div",{className:"loader-div"},l.a.createElement(h.a,null),l.a.createElement("div",{className:"loading-text"},"Submitting your email request…")):null,n)}}]),t}(l.a.PureComponent),y=n.i(c.connect)(a,{changeEmail:d.R})(n.i(u.withRouter)(g))},869:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n.n(a),l=n(887),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isPasswordValid:!1},n.onPasswordChange=n.onPasswordChange.bind(n),n.validatePassword=n.validatePassword.bind(n),window.currentLoggedInUser&&window.location.replace(window.site+"/home"),n}return r(t,e),c(t,[{key:"validatePassword",value:function(e){return!(e.length<8)&&!(e.length>50)}},{key:"onPasswordChange",value:function(e){this.setState({isPasswordValid:this.validatePassword(e.target.value)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"page reset-password-page"},s.a.createElement(l.a,{noBack:!0,isNav:!0}),s.a.createElement("div",{className:"sign-in-sign-up"},s.a.createElement("div",{className:"email-section with-margin"},s.a.createElement("form",{action:"/forgot-password-complete/",method:"post"},s.a.createElement("div",{className:"label input-label"},"New Password"),s.a.createElement("input",{className:"password-input",placeholder:"Enter a new password",maxLength:"50",type:"password",name:"new_password",value:this.state.password,onChange:this.onPasswordChange}),s.a.createElement("input",{type:"hidden",value:this.props.params.eid,name:"eid"}),s.a.createElement("input",{type:"hidden",value:this.props.params.code,name:"code"}),s.a.createElement("button",{type:"submit",className:"action-button large with-margin-left",disabled:!this.state.isPasswordValid},"Login")),s.a.createElement("div",{className:"label pwd-info"},"Your password must be at least 8 characters long "))))}}]),t}(s.a.PureComponent);t.default=u},871:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n.n(a),l=n(887),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isPasswordValid:!1},n.onPasswordChange=n.onPasswordChange.bind(n),n.validatePassword=n.validatePassword.bind(n),n.onFormSubmit=n.onFormSubmit.bind(n),window.currentLoggedInUser&&window.location.replace(window.site+"/home"),n}return r(t,e),c(t,[{key:"validatePassword",value:function(e){return!(e.length<8)&&!(e.length>50)}},{key:"onPasswordChange",value:function(e){var t=e.target.value;this.setState({isPasswordValid:this.validatePassword(t),password:t})}},{key:"onFormSubmit",value:function(){this.state.isPasswordValid&&this.setState({isPasswordValid:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"page set-password-page"},s.a.createElement(l.a,{noBack:!0,isNav:!0}),s.a.createElement("div",{className:"sign-in-sign-up"},s.a.createElement("div",{className:"email-section with-margin"},s.a.createElement("form",{action:"/create-email-user-complete/",method:"post",onSubmit:this.onFormSubmit},s.a.createElement("div",{className:"label input-label"},"Password"),s.a.createElement("input",{className:"password-input",placeholder:"Set a password",maxLength:"50",type:"password",name:"password",autoFocus:"autofocus",value:this.state.password,onChange:this.onPasswordChange}),s.a.createElement("input",{type:"hidden",value:this.props.params.eid,name:"eid"}),s.a.createElement("input",{type:"hidden",value:this.props.params.code,name:"code"}),s.a.createElement("button",{type:"submit",className:"action-button large with-margin-left",disabled:!this.state.isPasswordValid},"Finish Sign Up")),s.a.createElement("div",{className:"label pwd-info"},"Your password must be at least 8 characters long "))))}}]),t}(s.a.PureComponent);t.default=u},873:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SignIn",function(){return d}),n.d(t,"SignInContainer",function(){return m});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(136)),p=n(887),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.currentUser&&window.location.replace(window.site+"/home"),n}return r(t,e),f(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"page sign-in-page commonlounge-landing-page"},l.a.createElement(p.a,{noBack:!0,isNav:!0}),l.a.createElement("div",{className:"heading"}),l.a.createElement("div",{className:"landing-logo"},"CommonLounge"),l.a.createElement(u.a,{isSignIn:!0}))}}]),t}(l.a.PureComponent),m=n.i(c.connect)(a)(d)},874:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SignUp",function(){return d}),n.d(t,"SignUpContainer",function(){return m});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(136)),p=n(887),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.currentUser&&window.location.replace(window.site+"/home"),n}return r(t,e),f(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"page sign-in-page commonlounge-landing-page"},l.a.createElement(p.a,{noBack:!0,isNav:!0}),l.a.createElement("div",{className:"heading"}),l.a.createElement("div",{className:"landing-logo"},"CommonLounge"),l.a.createElement(u.a,{isSignUp:!0}))}}]),t}(l.a.PureComponent),m=n.i(c.connect)(a)(d)},881:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{users:e.get("users"),discussions:e.get("discussions"),discussionPosts:e.get("discussionPosts"),communities:e.get("communities")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UserList",function(){return v}),n.d(t,"UserListContainer",function(){return w});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(891)),p=(n.n(u),n(39)),f=(n.n(p),n(15)),d=(n.n(f),n(887)),m=n(889),h=n(38),b=n(132),g=n.n(b),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.location.pathname,a=r.split("/");if(-1!=r.indexOf("post"))n.state={id:n.props.params.postId,prop:a[a.length-1],type:"discussionPosts",toolbarName:"like",toolbarProp:"upvoteCount",toolbarValuePath:["upvoteCount"]};else if(-1!=r.indexOf("discussion"))n.state={id:n.props.params.discussionId,prop:a[a.length-1],type:"discussions",toolbarName:"follower",toolbarProp:"followersCount",toolbarValuePath:["followersCount"]};else if(-1!=r.indexOf("profile")){var s="followers"==a[a.length-1]?"followers":"followees",l="followers"==a[a.length-1]?["stats","followersCount"]:["stats","followeesCount"];n.state={id:n.props.params.userId,prop:a[a.length-1],type:"users",toolbarName:s,toolbarProp:"stats",toolbarValuePath:l}}return n.fetchData(),n}return r(t,e),y(t,[{key:"isDataAvailable",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.type){case"discussions":case"discussionPosts":case"users":return this.props[this.state.type].get(this.state.id)&&this.props[this.state.type].get(this.state.id).get(this.state.prop);default:return!1}}},{key:"fetchData",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.type){case"discussions":this.isDataAvailable()||this.props.fetchDiscussionMetadata(this.state.id,null,[this.state.prop,this.state.toolbarProp]);break;case"discussionPosts":this.isDataAvailable()||this.props.fetchDiscussionPostMetadata(this.state.id,[this.state.prop,this.state.toolbarProp]);break;case"users":this.isDataAvailable()||this.props.fetchUserMetadata(this.state.id,[this.state.prop,this.state.toolbarProp])}}},{key:"render",value:function(){if(!this.isDataAvailable())return null;var e=this.props[this.state.type].get(this.state.id),t=e.get(this.state.prop),n=t.map(function(e,t){return l.a.createElement(m.a,{shouldLinkToUser:!0,key:t,userId:e})});return l.a.createElement("div",{className:"user-list page"},l.a.createElement(d.a,{routerGoBack:!0}),l.a.createElement("div",{className:"list user-list"},l.a.createElement("div",{className:"heading"},e.getIn(this.state.toolbarValuePath)+" "+g()(this.state.toolbarName,e.getIn(this.state.toolbarValuePath))),l.a.createElement("div",{className:"section-items"},n)))}}]),t}(l.a.PureComponent),w=n.i(c.connect)(a,{fetchDiscussionMetadata:h.e,fetchUserMetadata:h.l,fetchDiscussionPostMetadata:h.W,fetchCommunityMetadata:h.X})(v)},887:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentUser:e.get("currentLoggedInUser"),users:e.get("users"),visitedPaths:e.get("visitedPaths")}}n.d(t,"a",function(){return k});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(59)),f=n.n(p),d=n(134),m=n(133),h=(n(323),n(897)),b=n(889),g=n(827),y=n(17),v=n(38),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSignInSignUpModalOpen:!1,isProfileOptionsModalOpen:!1,isNotificationsModalOpen:!1,isMobile:y.h},n.onProfileIconClick=n.onProfileIconClick.bind(n),n.routerGoBack=n.routerGoBack.bind(n),n.onLogout=n.onLogout.bind(n),n.onGoProClick=n.onGoProClick.bind(n),n}return r(t,e),w(t,[{key:"onGoProClick",value:function(){this.props.fetchPixelInformation("click.top_nav_bar_go_pro")}},{key:"routerGoBack",value:function(){this.props.visitedPaths.size>1?this.props.router.goBack():u.browserHistory.push("/")}},{key:"onProfileIconClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({isProfileOptionsModalOpen:!this.state.isProfileOptionsModalOpen})}},{key:"onLogout",value:function(e){this.setState({loggingOut:!0})}},{key:"render",value:function(){var e=this,t=this.props.isNav?"":" desktop-only",n=this.props.classModifier||"",o=this.props.users.getIn([this.props.currentUser]),i=o&&"active"==o.getIn(["plan","status"])?o.getIn(["plan","type"]):null,r=this.props.users.getIn([this.props.currentUser,"unreadNotificationsCount"],0),a=this.props.users.getIn([this.props.currentUser,"unreadThreadCount"],0),s=this.state.isMobile?"":i?l.a.createElement("span",null,"CommonLounge",l.a.createElement("span",{className:"pro-label"},i)):"CommonLounge",c="avatar-image";return this.state.isMobile?a>0?c+=" flair medium message-icon":r>0&&(c+=" flair medium notification-icon"):a>0&&(c+=" flair medium message-icon"),l.a.createElement("div",{className:"topbar"+n},l.a.createElement("div",{className:"topbar-content"},l.a.createElement(f.a,{isOpen:this.state.isProfileOptionsModalOpen,onRequestClose:function(){return e.setState({isProfileOptionsModalOpen:!1})},overlayClassName:"modal-overlay profile-options-modal-overlay",className:"modal-content profile-options-modal-content"},l.a.createElement(b.a,{hideFollowButton:!0,userId:this.props.currentUser,shouldLinkToUser:!0,byline:i?"Pro Member":"View Profile"}),l.a.createElement(u.Link,{to:"/profile/subscriptions"},l.a.createElement("button",{className:"button profile-option-button"},"Enrollments")),l.a.createElement(u.Link,{to:"/profile/bookmarks"},l.a.createElement("button",{className:"button profile-option-button with-border-bottom"},"Bookmarks")),this.state.isMobile?l.a.createElement(u.Link,{to:"/notifications"},l.a.createElement("button",{className:"button profile-option-button"},"Notifications",r>0?l.a.createElement("span",{className:"red"}," (",r,")"):null)):null,l.a.createElement(u.Link,{to:"/inbox"},l.a.createElement("button",{className:"button profile-option-button with-border-bottom"},"Inbox",a>0?l.a.createElement("span",{className:"red"}," (",a,")"):null)),l.a.createElement(u.Link,{to:"/contribute"},l.a.createElement("button",{className:"button profile-option-button"},"How to contribute")),l.a.createElement(u.Link,{to:"/discussion/new?type=playlist"},l.a.createElement("button",{className:"button profile-option-button"},"Create a course")),l.a.createElement(u.Link,{to:"/discussion/new?type=wiki"},l.a.createElement("button",{className:"button profile-option-button with-border-bottom"},"Write a tutorial")),l.a.createElement(u.Link,{to:"/profile"},l.a.createElement("button",{className:"button profile-option-button"},"Profile")),l.a.createElement(u.Link,{to:"/profile/settings"},l.a.createElement("button",{className:"button profile-option-button"},"Settings")),l.a.createElement(u.Link,{to:"/referral"},l.a.createElement("button",{className:"button profile-option-button"},"Get a free month 🎁")),l.a.createElement("a",{href:"/logout/",onClick:this.onLogout},l.a.createElement("button",{className:"button profile-option-button"},"Logout"))),l.a.createElement(f.a,{isOpen:this.state.isNotificationsModalOpen,onRequestClose:function(){return e.setState({isNotificationsModalOpen:!1})},overlayClassName:"modal-overlay notifications-modal-overlay",className:"modal-content notifications-modal-content"},l.a.createElement(g.NotificationsContainer,{isPage:!1})),l.a.createElement(f.a,{isOpen:this.state.loggingOut,overlayClassName:"modal-overlay",className:"modal-content"},l.a.createElement(d.a,{customText:"Logging you out…"})),this.props.shomHome?l.a.createElement("div",{className:"left"},l.a.createElement(u.Link,{to:"/",className:"home no-decoration",activeClassName:"active",title:"Home"},s),this.props.children):null,this.props.noBack?null:l.a.createElement("div",{className:"left"},l.a.createElement("span",{className:"back-icon",onClick:this.props.routerGoBack?this.routerGoBack:this.props.goBack,title:"Back"}),l.a.createElement(u.Link,{to:"/",className:"home desktop-only no-decoration",activeClassName:"active",title:"Home"},s),this.props.children),this.props.isNav?l.a.createElement("div",{className:"left"},l.a.createElement(u.Link,{to:"/",className:"home no-decoration",activeClassName:"active",title:"Home"},s),this.props.children):null,this.props.currentUser?l.a.createElement("div",{className:"shifted-right"},l.a.createElement(u.Link,{to:"/search",className:"search",activeClassName:"active",title:"Search for people, communities, topics, discussions or replies"}),l.a.createElement(u.Link,{to:"/about",className:"thin-button no-decoration"},"About"),l.a.createElement(u.Link,{to:"/upgrade",className:i?"thin-button no-decoration":"thin-button no-decoration never-hide",onClick:this.onGoProClick},"Pricing"),this.props.infoUrl?l.a.createElement(u.Link,{to:this.props.infoUrl,className:"info",title:"Community Info"}):null,this.props.addUrl?l.a.createElement(u.Link,{to:this.props.addUrl,className:"add",title:"Start a new community"}):null,l.a.createElement("a",{className:this.props.currentUser&&r>0?"notifications unread"+t:"notifications"+t,activeClassName:"active",onClick:function(){e.setState({isNotificationsModalOpen:!0})}}),l.a.createElement("a",{className:this.props.currentUser?"avatar profile":"profile",onClick:this.onProfileIconClick},this.props.currentUser?l.a.createElement(m.a,{className:c,size:"25",name:this.props.users.get(this.props.currentUser).get("displayName"),src:this.props.users.get(this.props.currentUser).get("avatarUrl")}):null),this.props.onToggleSidebar?this.props.isRightSidebarOpen?l.a.createElement("div",{className:"close"}):l.a.createElement("div",{className:"hamburger",onClick:this.props.onToggleSidebar}):null):this.props.isNav||this.props.showSignUpInfoIfLoggedOut?l.a.createElement("div",{className:"shifted-right"},l.a.createElement(u.Link,{to:"/search",className:"search",activeClassName:"active",title:"Search for people, communities, topics, discussions or replies"}),l.a.createElement(u.Link,{to:"/about",className:"thin-button no-decoration"},"About"),l.a.createElement(u.Link,{to:"/upgrade",className:i?"thin-button no-decoration":"thin-button no-decoration never-hide",onClick:this.onGoProClick},"Pricing"),l.a.createElement("button",{className:"sign-up zoom-on-hover zoom-to-normal",onClick:function(){return e.setState({isSignInSignUpModalOpen:!0})}},"Get Started"),l.a.createElement(h.a,{postSignInSignUpTo:this.props.postSignInSignUpTo,isModalOpen:this.state.isSignInSignUpModalOpen,onRequestClose:function(){return e.setState({isSignInSignUpModalOpen:!1})}}),l.a.createElement(u.Link,{to:"/search/communities",className:this.props.forceShowCommunities?"explore":"explore{modifierString}",activeClassName:"active",checkAuthOn:"click",title:"Explore"}),this.props.onToggleSidebar?this.props.isRightSidebarOpen?l.a.createElement("div",{className:"close"}):l.a.createElement("div",{className:"hamburger",onClick:this.props.onToggleSidebar}):null):null))}}]),t}(l.a.PureComponent),k=n.i(c.connect)(a,{fetchPixelInformation:v.a})(n.i(u.withRouter)(E))},888:function(e,t,n){"use strict";function o(e){var t=new Date(e),n=(t.getDate(),t.getMonth(),t.getFullYear(),Math.round((Date.now()-t)/6048e5));return n>51?Math.round(n/52)+"y":n+"w"}function i(e){var t=Math.floor(e/3600),n=Math.floor(e/60%60),o=e%60,i="";return t>0&&(i+=t+" "+l()("hour",t)+" "),n>0&&(i+=n+" "+l()("minute",n)+" "),o>0&&(i+=o+" "+l()("second",o)),i}function r(e){var t=new Date,n=new Date(e),o=null;if(o=t-n>6048e5?{type:"full",format:{day:"2-digit",month:"2-digit",year:"2-digit"}}:t-n>864e5?{type:"mid",format:{weekday:"short"}}:{type:"short",format:{hour:"2-digit",minute:"2-digit"}},c[o.type][e])return c[o.type][e];var i=n.toLocaleString([],o.format);return c[o.type][e]=i,i}function a(e){return e?(e instanceof Date||(e=new Date(e)),e.toLocaleString([],{day:"2-digit",month:"short",year:"numeric"})):null}t.d=o,t.a=i,t.c=r,t.b=a;var s=n(132),l=n.n(s),c={full:{},mid:{},short:{}}},889:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return k});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(133)),p=n(890),f=n(38),d=n(15),m=(n.n(d),n(323)),h=n(894),b=n.n(h),g=n(888),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return r(t,e),y(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow "+this.props.displayName+"?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"action-container",onClick:this.onClick},this.props.isFollowing?l.a.createElement("button",{className:"action-button following"},"Following"):l.a.createElement("button",{className:"action-button follow"},"Follow"))}}]),t}(l.a.PureComponent),w=n.i(m.a)(v),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleUserFollow=n.toggleUserFollow.bind(n),n.onContentClick=n.onContentClick.bind(n),n.handleBioChange=n.handleBioChange.bind(n),n.onKeyPressForBio=n.onKeyPressForBio.bind(n),n.onDoneEditingBio=n.onDoneEditingBio.bind(n),n.state={hasCommunityBio:!(!e.communityId||!e.users.getIn([e.userId,"communitiesBio",e.communityId],!1)),hasBio:!!e.users.getIn([e.userId,"bio"],!1),byline:e.byline?e.byline:e.communityId?e.users.getIn([e.userId,"communitiesBio",e.communityId],e.users.getIn([e.userId,"bio"],"")):e.users.getIn([e.userId,"bio"],""),isEditingBio:!1},n}return r(t,e),y(t,[{key:"toggleUserFollow",value:function(){var e=this.props.userId;this.props.toggleUserFollow(e)}},{key:"onContentClick",value:function(e){this.props.shouldLinkToUser?d.browserHistory.push("/profile/"+this.props.userId):e.target.classList.contains("byline")&&this.props.isBioEditable&&this.setState({isEditingBio:!0})}},{key:"handleBioChange",value:function(e){this.setState({byline:e.target.value})}},{key:"onKeyPressForBio",value:function(e){13==(e.code||e.which)&&this.onDoneEditingBio()}},{key:"onDoneEditingBio",value:function(){this.props.communityId?this.props.editCommunityBio(this.props.communityId,this.state.byline):this.props.editProfile(this.props.currentLoggedInUser,{bio:this.state.byline},!1),this.setState({isEditingBio:!1,hasCommunityBio:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({hasCommunityBio:!(!e.communityId||!e.users.getIn([e.userId,"communitiesBio",e.communityId],!1)),hasBio:!!e.users.getIn([e.userId,"bio"],!1),byline:e.byline?e.byline:e.communityId?e.users.getIn([e.userId,"communitiesBio",e.communityId],e.users.getIn([e.userId,"bio"],"")):e.users.getIn([e.userId,"bio"],"")})}},{key:"render",value:function(){var e=this,t=this.props.users.get(this.props.userId);if(!t)return l.a.createElement("div",{className:"user-box"},l.a.createElement("div",{onClick:this.onContentClick},l.a.createElement(u.a,{className:"avatar-image",size:"30",src:b.a,name:"C L"})),l.a.createElement("div",{className:"shifted-right"},l.a.createElement("div",{className:"byline"},"Ask a question or start a poll…")));var o=this.state.byline,i="avatar-image";i+=this.props.flair?" flair "+this.props.flair:"",i+=this.props.shouldLinkToUser?" clickable":"";var r="user-box box";return r+=this.props.isCompact?" compact":"",r+=this.props.isSelected?" selected":"",l.a.createElement("div",{className:r,onClick:this.props.onClick?function(){return e.props.onClick(e.props.userId)}:null},this.props.rank?l.a.createElement("div",{className:"sidebar-label rank"},this.props.rank,"."):null,l.a.createElement("div",{onClick:this.onContentClick},l.a.createElement(u.a,{className:i,size:"30",name:t.get("displayName"),src:t.get("avatarUrl")})),l.a.createElement("div",{className:this.props.shouldLinkToUser?"shifted-right clickable":"shifted-right"},this.props.hideName?null:l.a.createElement("span",{className:"name",onClick:this.onContentClick},t.get("displayName")),this.props.timeAgoByline?l.a.createElement("span",{className:"byline",onClick:this.onContentClick},l.a.createElement(p.a,{date:this.props.timeAgoByline})):null,!o&&!this.props.isBioEditable||this.props.hideByline||this.props.timeAgoByline?null:this.state.isEditingBio?l.a.createElement("div",{style:{lineHeight:0}},l.a.createElement("input",{type:"text",maxLength:"60",className:"bio-input",autoFocus:"autofocus",placeholder:"Help others understand your experience with this topic",value:this.state.byline,onChange:this.handleBioChange,onKeyPress:this.onKeyPressForBio}),l.a.createElement("span",{className:"thin-button",onClick:this.onDoneEditingBio},"Done")):l.a.createElement("span",{className:"byline",onClick:this.onContentClick},o,this.props.isBioEditable?this.props.communityId?this.state.hasCommunityBio?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," (Edit) "):l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," Set Community Bio "):this.state.hasBio?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," (Edit) "):l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," Set Bio "):null),this.props.acceptIgnoreButtons?l.a.createElement("div",{className:"accept-ignore-buttons"},l.a.createElement("button",{className:"action-button accept",onClick:function(){return e.props.acceptUser(e.props.userId)}},"Accept"),l.a.createElement("button",{className:"action-button ignore",onClick:function(){return e.props.ignoreUser(e.props.userId)}},"Ignore")):null,this.props.undoAcceptButton?l.a.createElement("div",{className:"accept-ignore-buttons"},l.a.createElement("button",{className:"action-button accept",onClick:function(){return e.props.undoAcceptUser(e.props.userId)}},"Accepted")):null,this.props.undoIgnoreButton?l.a.createElement("div",{className:"accept-ignore-buttons"},l.a.createElement("button",{className:"action-button ignore",onClick:function(){return e.props.undoIgnoreUser(e.props.userId)}},"Ignored")):null),void 0!=this.props.score?l.a.createElement("div",{className:"label score"},this.props.score):null,void 0!=this.props.timestamp?l.a.createElement("div",{className:"label timestamp"},n.i(g.c)(this.props.timestamp)):null,this.props.isUnread?l.a.createElement("div",{className:"unread-dot"}):l.a.createElement("div",{className:"unread-dot read"}),this.props.addButton?l.a.createElement("div",{className:"action-container"},l.a.createElement("button",{className:"action-button add",onClick:function(){return e.props.addUser(e.props.userId)}},"Add")):this.props.removeButton&&this.props.userId!=this.props.currentLoggedInUser?l.a.createElement("div",{className:"action-container"},l.a.createElement("button",{className:"action-button remove",onClick:function(){return e.props.removeUser(e.props.userId)}},"Remove")):this.props.userId==this.props.currentLoggedInUser||this.props.hideFollowButton?null:l.a.createElement(w,{onClick:this.toggleUserFollow,allowLurker:!0,displayName:t.get("displayName"),isFollowing:t.get("isFollowing")}))}}]),t}(l.a.PureComponent),k=n.i(c.connect)(a,{toggleUserFollow:f.m,editCommunityBio:f.y,editProfile:f.h})(n.i(d.withRouter)(E))},890:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(891),c=n.n(l),u=n(888),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),p(t,[{key:"render",value:function(){var e=this.props.date,t=n.i(u.d)(e);return Date.now()-new Date(e)<6048e5?s.a.createElement(c.a,{date:e}):s.a.createElement("span",null,t)}}]),t}(s.a.PureComponent);t.a=f},891:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.YEAR=t.MONTH=t.WEEK=t.DAY=t.HOUR=t.MINUTE=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=function(){function e(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=n(1),f=o(p),d=n(903),m=o(d),h=n(902),b=o(h),g=t.MINUTE=60,y=t.HOUR=60*g,v=t.DAY=24*y,w=t.WEEK=7*v,E=t.MONTH=30*v,k=t.YEAR=365*v,C=function(e){function t(){var e,n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.isStillMounted=!1,o.tick=function(e){if(o.isStillMounted&&o.props.live){var t=(0,b.default)(o.props.date).valueOf();if(!t)return void console.warn("[react-timeago] Invalid Date provided");var n=o.props.now(),i=Math.round(Math.abs(n-t)/1e3),r=i<g?1e3:i<y?1e3*g:i<v?1e3*y:0,a=Math.min(Math.max(r,1e3*o.props.minPeriod),1e3*o.props.maxPeriod);a&&(o.timeoutId=setTimeout(o.tick,a)),e||o.forceUpdate()}},i=n,a(o,i)}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.isStillMounted=!0,this.props.live&&this.tick(!0)}},{key:"componentDidUpdate",value:function(e){this.props.live===e.live&&this.props.date===e.date||(!this.props.live&&this.timeoutId&&clearTimeout(this.timeoutId),this.tick())}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}},{key:"render",value:function(){var e=this.props,t=e.date,n=(e.formatter,e.component),o=(e.live,e.minPeriod,e.maxPeriod,e.title),r=e.now,a=i(e,["date","formatter","component","live","minPeriod","maxPeriod","title","now"]),s=(0,b.default)(t).valueOf();if(!s)return null;var u=r(),p=Math.round(Math.abs(u-s)/1e3),d=s<u?"ago":"from now",h=p<g?[Math.round(p),"second"]:p<y?[Math.round(p/g),"minute"]:p<v?[Math.round(p/y),"hour"]:p<w?[Math.round(p/v),"day"]:p<E?[Math.round(p/w),"week"]:p<k?[Math.round(p/E),"month"]:[Math.round(p/k),"year"],C=c(h,2),O=C[0],_=C[1],P=void 0===o?"string"==typeof t?t:(0,b.default)(t).toISOString().substr(0,16).replace("T"," "):o;"time"===n&&(a.dateTime=(0,b.default)(t).toISOString());var N=m.default.bind(null,O,_,d);return f.default.createElement(n,l({},a,{title:P}),this.props.formatter(O,_,d,s,N))}}]),t}(p.Component);C.displayName="TimeAgo",C.defaultProps={live:!0,component:"time",minPeriod:0,maxPeriod:1/0,formatter:m.default,now:function(){return Date.now()}},t.default=C},894:function(e,t,n){e.exports=n.p+"b38594fdb244e14f9de09f673844f2f7.png"},896:function(e,t,n){"use strict";function o(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?a(new e.constructor,e):e}function i(e,t,n){s(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var o=t[n];s(Array.isArray(o),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,o)}function r(e,t){if(s("object"==typeof t,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",h.join(", "),f),l.call(t,f))return s(1===Object.keys(t).length,"Cannot have more than one key in an object with %s",f),t[f];var n=o(e);if(l.call(t,d)){var g=t[d];s(g&&"object"==typeof g,"update(): %s expects a spec of type 'object'; got %s",d,g),s(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",d,n),a(n,t[d])}l.call(t,c)&&(i(e,t,c),t[c].forEach(function(e){n.push(e)})),l.call(t,u)&&(i(e,t,u),t[u].forEach(function(e){n.unshift(e)})),l.call(t,p)&&(s(Array.isArray(e),"Expected %s target to be an array; got %s",p,e),s(Array.isArray(t[p]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,t[p]),t[p].forEach(function(e){s(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,t[p]),n.splice.apply(n,e)})),l.call(t,m)&&(s("function"==typeof t[m],"update(): expected spec of %s to be a function; got %s.",m,t[m]),n=t[m](n));for(var y in t)b.hasOwnProperty(y)&&b[y]||(n[y]=r(e[y],t[y]));return n}var a=n(9),s=n(2),l={}.hasOwnProperty,c="$push",u="$unshift",p="$splice",f="$set",d="$merge",m="$apply",h=[c,u,p,f,d,m],b={};h.forEach(function(e){b[e]=!0}),e.exports=r},897:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(59),c=n.n(l),u=n(136),p=n(17),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),f(t,[{key:"componentWillReceiveProps",value:function(e){void 0!=e.isModalOpen&&p.a&&(e.isModalOpen?document.getElementById("app").style.display="none":document.getElementById("app").style.display="")}},{key:"componentWillUnmount",value:function(){p.a&&(document.getElementById("app").style.display="")}},{key:"render",value:function(){return s.a.createElement(c.a,{isOpen:this.props.isModalOpen,onRequestClose:this.props.onRequestClose,className:"modal-content signup-modal-hack",overlayClassName:"modal-overlay"},s.a.createElement("div",{className:"close-button",onClick:this.props.onRequestClose}),this.props.actionBlockedMessage?s.a.createElement("div",{className:"sign-in-message"},"You need to be signed in to complete this action"):null,s.a.createElement(u.a,{to:this.props.postSignInSignUpTo,onComplete:this.props.onRequestClose,isModal:!0}))}}]),t}(s.a.PureComponent);t.a=d},899:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(944),c=n(31),u=o(c),p=n(1),f=o(p),d=n(948),m=o(d),h=n(904),b=o(h),g=n(949),y=(o(g),n(950)),v=o(y),w=n(951),E=o(w),k=n(953),C=o(k),O=n(956),_=o(O),P={topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},N=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refElement=function(e){return n._ref=e},n}return a(t,e),s(t,[{key:"componentWillMount",value:function(){if((0,v.default)(this.props.children),this.props.scrollableParent)throw new Error("The `scrollableParent` prop has changed name to `scrollableAncestor`.")}},{key:"componentDidMount",value:function(){var e=this;t.getWindow()&&(this.cancelInitialTimeout=(0,C.default)(function(){e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=(0,l.addEventListener)(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=(0,l.addEventListener)(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)}))}},{key:"componentWillReceiveProps",value:function(e){(0,v.default)(e.children)}},{key:"componentDidUpdate",value:function(){t.getWindow()&&this.scrollableAncestor&&this._handleScroll(null)}},{key:"componentWillUnmount",value:function(){t.getWindow()&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelInitialTimeout&&this.cancelInitialTimeout())}},{key:"_findScrollableAncestor",value:function(){var e=this.props,t=e.horizontal,n=e.scrollableAncestor;if(n)return(0,_.default)(n);for(var o=this._ref;o.parentNode;){if((o=o.parentNode)===document.body)return window;var i=window.getComputedStyle(o),r=t?i.getPropertyValue("overflow-x"):i.getPropertyValue("overflow-y"),a=r||i.getPropertyValue("overflow");if("auto"===a||"scroll"===a)return o}return window}},{key:"_handleScroll",value:function(e){if(this._ref){var t=this._getBounds(),n=(0,E.default)(t),o=this._previousPosition;if(this._previousPosition=n,o!==n){var i={currentPosition:n,previousPosition:o,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};this.props.onPositionChange.call(this,i),n===b.default.inside?this.props.onEnter.call(this,i):o===b.default.inside&&this.props.onLeave.call(this,i);var r=o===b.default.below&&n===b.default.above,a=o===b.default.above&&n===b.default.below;this.props.fireOnRapidScroll&&(r||a)&&(this.props.onEnter.call(this,{currentPosition:b.default.inside,previousPosition:o,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),this.props.onLeave.call(this,{currentPosition:n,previousPosition:b.default.inside,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}}},{key:"_getBounds",value:function(){var e=this.props.horizontal,t=this._ref.getBoundingClientRect(),n=t.left,o=t.top,i=t.right,r=t.bottom,a=e?n:o,s=e?i:r,l=void 0,c=void 0;this.scrollableAncestor===window?(l=e?window.innerWidth:window.innerHeight,c=0):(l=e?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,c=e?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var u=this.props,p=u.bottomOffset,f=u.topOffset;return{waypointTop:a,waypointBottom:s,viewportTop:c+(0,m.default)(f,l),viewportBottom:c+l-(0,m.default)(p,l)}}},{key:"render",value:function(){var e=this,t=this.props.children;if(!t)return f.default.createElement("span",{ref:this.refElement,style:{fontSize:0}});var n=function(n){e.refElement(n),t.ref&&t.ref(n)};return f.default.cloneElement(t,{ref:n})}}]),t}(f.default.Component);t.default=N,N.propTypes={children:u.default.element,debug:u.default.bool,onEnter:u.default.func,onLeave:u.default.func,onPositionChange:u.default.func,fireOnRapidScroll:u.default.bool,scrollableAncestor:u.default.any,horizontal:u.default.bool,topOffset:u.default.oneOfType([u.default.string,u.default.number]),bottomOffset:u.default.oneOfType([u.default.string,u.default.number])},N.above=b.default.above,N.below=b.default.below,N.inside=b.default.inside,N.invisible=b.default.invisible,N.getWindow=function(){if("undefined"!=typeof window)return window},N.defaultProps=P,N.displayName="Waypoint",e.exports=t.default},901:function(e,t,n){e.exports=n.p+"d106b1f59ca10ab9ae13c149249d2e6d.png"},902:function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return Array.isArray(e)?e:Array.from(e)}function r(e){var t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;var n=String(e).match(/\d+/g);if(null==n||n.length<=2)return t;var r=n.map(function(e){return parseInt(e)}),a=i(r),s=a[0],l=a[1],c=a.slice(2),u=[s,l-1].concat(o(c));return new Date(Date.UTC.apply(Date,o(u)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},903:function(e,t,n){"use strict";function o(e,t,n){return 1!==e&&(t+="s"),e+" "+t+" "+n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={above:"above",inside:"inside",below:"below",invisible:"invisible"},e.exports=t.default},927:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),l=n.n(s),c=n(896),u=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.state={highlightedOptions:[]},n.onOptionClick=n.onOptionClick.bind(n),n.isOptionHighlighted=n.isOptionHighlighted.bind(n),n.resetHighlights=n.resetHighlights.bind(n),n.onFocus=n.onFocus.bind(n),n.props.onChange(n.props.initialSearchTerm||"",n.props.type),n}return a(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e){this.props.selectedOptions!=e.selectedOptions&&this.resetHighlights()}},{key:"isOptionHighlighted",value:function(e){return-1!=this.state.highlightedOptions.indexOf(e.get("name"))}},{key:"onOptionClick",value:function(e){e.get("disabled")||(this.isOptionHighlighted(e)?this.props.onToggle(e.toJS()):this.setState(u()(this.state,o({},"highlightedOptions",{$push:[e.get("name")]}))))}},{key:"componentDidMount",value:function(){var e=this.refs["search-box"];this.props.autofocus&&e&&e.focus()}},{key:"resetHighlights",value:function(){this.setState({highlightedOptions:[]})}},{key:"onChange",value:function(e){var t=e.target.value;this.props.maxLength&&(t=t.substring(0,this.props.maxLength)),this.resetHighlights(),this.props.onChange(t,this.props.type)}},{key:"onFocus",value:function(e){this.resetHighlights(),this.props.onFocus&&this.props.onFocus()}},{key:"render",value:function(){var e=this,t=this.props.selectedOptions||[],n=0!=this.props.isPage,o=t.map(function(t){return l.a.createElement("div",{className:t.get("type")+" selected-option"+(e.isOptionHighlighted(t)?" highlighted":"")+(t.get("disabled")?"":" editable"),onClick:function(){return e.onOptionClick(t)}},t.get("name"))});return l.a.createElement("div",{className:this.props.hasBorder?"search-box has-border":"search-box"},l.a.createElement("div",{className:"selected-options"},o,l.a.createElement("div",{className:"search-term"},l.a.createElement("input",{type:"text",ref:"search-box",value:this.props.query,placeholder:this.props.placeholder?this.props.placeholder:this.props.type?this.props.showAddLanguage?"Search or add a new "+this.props.type:"Search for a "+this.props.type:"Search",onChange:this.onChange,onFocus:this.onFocus,autoFocus:!!this.props.autoFocus}),this.props.clearQuery&&this.props.query.length>0?l.a.createElement("span",{className:"label clickable uppercase blue",onClick:this.props.clearQuery},n?"Clear":"Close"):null)))}}]),t}(l.a.PureComponent);t.a=f},940:function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(943),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(t){o(this,e),this.target=t,this.events={}}return i(e,[{key:"getEventHandlers",value:function(){function e(e,t){var n=String(e)+" "+String((0,a.default)(t));return this.events[n]||(this.events[n]={handlers:[],handleEvent:void 0}),this.events[n]}return e}()},{key:"handleEvent",value:function(){function e(e,t,n){this.getEventHandlers(e,t).handlers.forEach(function(e){e&&e(n)})}return e}()},{key:"add",value:function(){function e(e,t,n){var o=this,i=this.getEventHandlers(e,n);0===i.handlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.handlers.push(t);var r=!0;return function(){function a(){if(r){r=!1;var a=i.handlers.indexOf(t);i.handlers.splice(a,1),0===i.handlers.length&&(o.target&&o.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}return a}()}return e}()}]),e}();t.default=s},941:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n},942:function(e,t,n){function o(){if(!a.default)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){function t(){e=!0}return t}()});window.addEventListener("test",null,t)}catch(e){}return e}function i(){return void 0===s&&(s=o()),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(941),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=void 0},943:function(e,t){function n(e){return e?!0===e?100:(e.capture<<0)+(e.passive<<1)+(e.once<<2):0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},944:function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o){e[u]||(e[u]=new c.default(e));var i=(0,s.default)(o);return e[u].add(t,n,i)}function r(e){e()}Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_HANDLERS_KEY=void 0,t.addEventListener=i,t.removeEventListener=r;var a=n(945),s=o(a),l=n(940),c=o(l),u=t.EVENT_HANDLERS_KEY="__consolidated_events_handlers__"},945:function(e,t,n){function o(e){if(e)return(0,r.default)()?e:!!e.capture}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(942),r=function(e){return e&&e.__esModule?e:{default:e}}(i)},948:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=(0,l.default)(e);if("number"==typeof n)return n;var o=(0,a.default)(e);return"number"==typeof o?o*t:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(954),a=o(r),s=n(955),l=o(s);e.exports=t.default},949:function(e,t,n){"use strict";function o(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},950:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&(a.default.Children.only(e),!(0,l.default)(e)))throw new Error("You must wrap any Component Elements passed to Waypoint in a DOM Element (eg; a <div>).")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(1),a=o(r),s=n(952),l=o(s);e.exports=t.default},951:function(e,t,n){"use strict";function o(e){return e.viewportBottom-e.viewportTop==0?r.default.invisible:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom?r.default.inside:e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom?r.default.inside:e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?r.default.inside:e.viewportBottom<e.waypointTop?r.default.below:e.waypointTop<e.viewportTop?r.default.above:r.default.invisible}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(904),r=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},952:function(e,t,n){"use strict";function o(e){return"string"==typeof e.type}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},953:function(e,t,n){"use strict";function o(e){r.push(e),i||(i=setTimeout(function(){i=null;for(var e=void 0;e=r.shift();)e()},0));var t=!0;return function(){if(t){t=!1;var n=r.indexOf(e);-1!==n&&(r.splice(n,1),!r.length&&i&&(clearTimeout(i),i=null))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=void 0,r=[];e.exports=t.default},954:function(e,t,n){"use strict";function o(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},955:function(e,t,n){"use strict";function o(e){return!isNaN(parseFloat(e))&&isFinite(e)?parseFloat(e):"px"===e.slice(-2)?parseFloat(e.slice(0,-2)):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},956:function(e,t,n){"use strict";(function(n){function o(e){return"window"===e?n.window:e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default}).call(t,n(27))},972:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{communities:e.get("communities"),users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return C});var s=n(1),l=n.n(s),c=n(37),u=(n.n(c),n(132)),p=n.n(u),f=n(323),d=n(901),m=n.n(d),h=n(38),b=n(325),g=n(15),y=(n.n(g),n(32)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return r(t,e),v(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:this.props.isFollowing?"action-button following":"action-button",onClick:this.onClick},this.props.isFollowing?"":"Follow")}}]),t}(l.a.PureComponent),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return r(t,e),v(t,[{key:"onClick",value:function(){this.props.isMember?window.confirm("Are you sure you want to leave this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:this.props.isMember?"action-button following":"action-button",onClick:this.onClick},this.props.isMember?"":"Join")}}]),t}(l.a.PureComponent),k=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentClick=n.onContentClick.bind(n),n.onToggle=n.onToggle.bind(n),n.handleBioChange=n.handleBioChange.bind(n),n.onKeyPressForBio=n.onKeyPressForBio.bind(n),n.onDoneEditingBio=n.onDoneEditingBio.bind(n),n.state={byline:e.byline?e.byline:e.showCommunityBio?e.users.getIn([e.currentLoggedInUser,"communitiesBio",e.communityId],""):null,isEditingBio:!1},n}return r(t,e),v(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({byline:e.byline?e.byline:e.showCommunityBio?e.users.getIn([e.currentLoggedInUser,"communitiesBio",e.communityId],""):null})}},{key:"onContentClick",value:function(e){if(e.stopPropagation(),this.props.shouldLinkToCommunity&&!e.target.classList.contains("thin-button")&&!e.target.classList.contains("bio-input")&&!e.target.classList.contains("action-button")){var t="/community/"+this.props.communityId;e.metaKey?n.i(y.a)(t):g.browserHistory.push(t)}}},{key:"onToggle",value:function(e){e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.communityId)}},{key:"handleBioChange",value:function(e){this.setState({byline:e.target.value})}},{key:"onKeyPressForBio",value:function(e){13==(e.code||e.which)&&this.onDoneEditingBio()}},{key:"onDoneEditingBio",value:function(){this.props.editCommunityBio(this.props.communityId,this.state.byline),this.setState({isEditingBio:!1})}},{key:"render",value:function(){var e=this,t=this.props.communityId,o=this.props.communities.get(t);if(!o)return l.a.createElement("div",{className:"community-box box"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+m.a+")"}}),l.a.createElement("div",{className:"shifted-right",onClick:this.onContentClick},l.a.createElement("div",{className:"title dummy"}),l.a.createElement("div",{className:"byline dummy"})));var i="closed_contribution"==o.get("accessLevel"),r=n.i(f.a)(w),a=n.i(f.a)(E),s=this.props.to||"/community/"+t,c="";return c=i?o.get("followersCount")+" "+p()("follower",o.get("followersCount")):o.get("membersCount")+" "+p()("member",o.get("membersCount")),l.a.createElement("div",{className:this.props.shouldLinkToCommunity||this.props.onClick?"clickable community-box box":"community-box box",onClick:this.onContentClick},l.a.createElement("div",{className:"avatar-image",onClick:this.onContentClick,style:{backgroundImage:"url("+(n.i(b.c)(o.get("coverImg"),60)||m.a)+")"}}),l.a.createElement("div",{className:"shifted-right",onClick:this.onContentClick},l.a.createElement("div",{className:"title"},o.get("name")),i?l.a.createElement("div",{className:"label closed-contribution-label"},"Invite Only"):null,this.state.byline||this.props.isBioEditable?this.state.isEditingBio?l.a.createElement("div",{style:{lineHeight:0}},l.a.createElement("input",{type:"text",maxLength:"60",className:"bio-input",autoFocus:"autofocus",placeholder:"Help others understand your experience with this topic",value:this.state.byline,onChange:this.handleBioChange,onKeyPress:this.onKeyPressForBio}),l.a.createElement("span",{className:"thin-button",onClick:this.onDoneEditingBio},"Done")):l.a.createElement("div",{className:"byline"},this.state.byline," ",this.props.isBioEditable?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}},this.state.byline?" (Edit) ":"Set Community Bio"):null):l.a.createElement("span",{className:"byline"},c)),this.props.hasFollow?i?l.a.createElement(r,{isFollowing:o.get("isFollowing")&&o.get("isFollowing").get(this.props.currentLoggedInUser),allowLurker:!0,onClick:function(){return e.props.toggleCommunityFollow(t)},to:s,entityId:this.props.entityId,action:this.props.action}):l.a.createElement(a,{isMember:o.get("isMember")&&o.get("isMember").get(this.props.currentLoggedInUser),allowLurker:!0,onClick:function(){return e.props.toggleCommunityJoin(t)},to:s,entityId:this.props.entityId,action:this.props.action}):null,this.props.hasToggle?l.a.createElement("button",{className:this.props.isSelected?"danger toggle-button":"normal toggle-button",onClick:this.onToggle},this.props.isSelected?"Clear":"Filter"):null)}}]),t}(l.a.PureComponent),C=n.i(c.connect)(a,{toggleCommunityFollow:h._4,toggleCommunityJoin:h._5,editCommunityBio:h.y})(k)}});