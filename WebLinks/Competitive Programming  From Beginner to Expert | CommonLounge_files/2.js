webpackJsonp([2,13,19],Array(826).concat([function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.get("currentLoggedInUser"),n=t?e.getIn(["users",t]):null;return{customIdInfo:e.get("customIdInfo"),loadedImages:e.get("loadedImages"),currentUser:n,currentLoggedInUser:t}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CLVideoPlayerContainer",function(){return x});var l=n(1),c=n.n(l),u=n(53),p=(n.n(u),n(37)),d=(n.n(p),n(910)),h=n(59),f=(n.n(h),n(39)),m=(n.n(f),n(1036)),g=n(981),v=n(1086),y=n(1085),b=n(97),k=n(17),E=n(331),C=n(131),w=n(32),I=n(58),S=n(1007),O=n(38),N=n(905),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTimeUpdate=n.onTimeUpdate.bind(n),n.getCurrentBlock=n.getCurrentBlock.bind(n),n.onOverlayClose=n.onOverlayClose.bind(n),n.handleHighlights=n.handleHighlights.bind(n),n.handleRemove=n.handleRemove.bind(n),n.handleReplace=n.handleReplace.bind(n),n.codeBlockRef=n.codeBlockRef.bind(n),n.pause=n.pause.bind(n),n.play=n.play.bind(n),n.onPlay=n.onPlay.bind(n),n.onPause=n.onPause.bind(n),n.onEnd=n.onEnd.bind(n),n.onSeekStart=n.onSeekStart.bind(n),n.onSeekStop=n.onSeekStop.bind(n),n.renderBlocks=n.renderBlocks.bind(n),n.modifyNode=n.modifyNode.bind(n),n.handleInitialState=n.handleInitialState.bind(n),n.handleAutoplay=n.handleAutoplay.bind(n),n.handleScroll=n.handleScroll.bind(n),n.handleHighlights=n.handleHighlights.bind(n),n.onContentClick=n.onContentClick.bind(n),n.onToggleEditCodeMode=n.onToggleEditCodeMode.bind(n),n.togglePlayPauseAnimation=n.togglePlayPauseAnimation.bind(n),n.resetPlayPauseAnimation=n.resetPlayPauseAnimation.bind(n),n.handleKey=n.handleKey.bind(n),n.loadImages=n.loadImages.bind(n),n.toggleSubtitles=n.toggleSubtitles.bind(n),n.logEvent=n.logEvent.bind(n),n.state=n.handleInitialState({returnState:!0}),n.clearIgnoreInterrupt=n.clearIgnoreInterrupt.bind(n),n.toggleFullScreen=n.toggleFullScreen.bind(n),n.editProfile=n.editProfile.bind(n),n.getUserVideoSettings=n.getUserVideoSettings.bind(n),n.setPlayer=n.setPlayer.bind(n),n.contentRefs={},n}return r(t,e),_(t,[{key:"handleInitialState",value:function(e){var t=e.props,n=void 0===t?this.props:t,i=e.returnState,o=void 0!==i&&i,s=e.cb,r=void 0===s?null:s,a=null;if(n.getBlockData){var l=n.getBlockData();if(!l)return{};a=l.toJS()}else{if(!n.blocks)return{};a=n.blocks.toJS()}a=new m.a(a);var c={blocks:a,currSlideIndex:n.startIndex||0,currBlockIndex:n.staticDisplay?n.endIndex||0:a.findFirstSlideEnd(),currTime:null,showSubtitles:this.getUserVideoSettings().showSubtitles,isEnded:!1,isPlaying:!1,autoPlayHandled:!1,currImageIndex:0,currImages:a.findImages(),duration:a.findVideoDuration()};if(this.loadImages(n,c.currImageIndex,c.currImages),c.blocks.handleCodeBlockScriptLoading(n.customIdInfo),o)return c;this.setState(c,r)}},{key:"getUserVideoSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.currentUser;return{showSubtitles:!!t&&t.get("subtitlesEnabledSetting"),speed:t&&t.get("videoPlaybackSpeedSetting")&&parseFloat(t.get("videoPlaybackSpeedSetting"))||1}}},{key:"handleAutoplay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!this.isMounted||this.state.autoPlayHandled||"1"!=n.i(I.c)("autoplay")&&!e.autoplay||!this.player||!this.state.blocks||!e.forceAutoplay&&k.h||(this.setState({autoPlayHandled:!0}),this.play())}},{key:"componentDidUpdate",value:function(e,t){this.props.onUpdate&&this.props.onUpdate(),this.handleAutoplay()}},{key:"componentDidMount",value:function(){var e=this;this.isMounted=!0,this.props.onUpdate&&this.props.onUpdate(),k.i&&screenfull&&screenfull.on("change",function(){e.setState({isFullscreen:screenfull.isFullscreen})}),this.handleAutoplay()}},{key:"componentWillUnmount",value:function(){n.i(C.a)(document.body,"distraction-free")}},{key:"editProfile",value:function(e){this.props.currentLoggedInUser&&this.props.editProfile(this.props.currentLoggedInUser,e,!1)}},{key:"handleKey",value:function(e){if(!(k.a||n.i(C.b)(e.target,{className:"in-place-overlay-wrapper",includeSelf:!0})||n.i(C.b)(e.target,{className:"has-active-code-block",includeSelf:!0})||n.i(C.b)(e.target,{className:"has-overlay",includeSelf:!0}))){var t=[32,37,39,67,70,75],i=e.keyCode?e.keyCode:e.which;switch(t.includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 32:case 75:this.player.togglePlayViaPlayer();break;case 39:this.player.forward();break;case 37:this.player.rewind();break;case 67:this.toggleSubtitles();break;case 70:this.toggleFullScreen()}}}},{key:"loadImages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.currImageIndex,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.currImages;if(!e.staticDisplay){var o=n>=0&&i[n];if(o){N.a.loadImage(o)&&this.setState({currImageIndex:n+1},function(){t.loadImages()})}}}},{key:"setPlayer",value:function(e){this.player=e,this.handleAutoplay()}},{key:"componentWillReceiveProps",value:function(e){var t=this;n.i(f.is)(this.props.blocks,e.blocks)||this.handleInitialState({props:e}),this.props.customIdInfo!=e.customIdInfo&&this.state.blocks&&this.state.blocks.handleCodeBlockScriptLoading(e.customIdInfo);var i=this.state.currImageIndex>=0&&this.state.currImages[this.state.currImageIndex];i&&e.loadedImages&&-1!=["finished","error"].indexOf(e.loadedImages.getIn([i,"status"]))&&this.setState({currImageIndex:this.state.currImageIndex+1},function(){t.loadImages(e,t.state.currImageIndex,t.state.currImages)}),this.getUserVideoSettings(this.props).showSubtitles!=this.getUserVideoSettings(e).showSubtitles&&this.setState({showSubtitles:this.getUserVideoSettings(e).showSubtitles})}},{key:"getCurrentBlock",value:function(){return this.state.blocks.getAtIndex(this.state.currBlockIndex)}},{key:"onOverlayClose",value:function(){var e=this.state.blocks.getAtIndex(this.state.currBlockIndex),t=this.state.blocks.getAtIndex(this.state.currBlockIndex+1);n.i(w.g)()||this.player&&this.player.setExternalCurrentTime(t.getTimeStamp()),this.play(),this.ignoreInterruptBounds={start:e.getTimeStamp(),end:t.getTimeStamp()}}},{key:"logEvent",value:function(e){this.props.videoId&&!this.props.staticDisplay&&("play"!=e&&"pause"!=e||this.props.logEvent({type:"video_generic_event",payload:{obj:this.props.videoId,obj_type:"Video",sub_type:e,info:{video_timestamp:this.state.currTime}}}))}},{key:"resetPlayPauseAnimation",value:function(){var e=this.refs.content;e&&(clearTimeout(this.playPauseTimeout),this.playPauseTimeout=null,n.i(C.a)(e,"animate"),n.i(C.a)(e,"play"),n.i(C.a)(e,"pause"))}},{key:"togglePlayPauseAnimation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"play",i=this.refs.content;i&&(this.playPauseTimeout&&this.resetPlayPauseAnimation(),setTimeout(function(){n.i(C.c)(i,t),n.i(C.c)(i,"animate"),e.playPauseTimeout=setTimeout(e.resetPlayPauseAnimation,400)},0))}},{key:"onPlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.triggerAnimation,i=void 0!==t&&t;e.isSeeking;this.setState({isPlaying:!0}),k.a&&(n.i(C.c)(document.body,"distraction-free"),this.toggleFullScreen(null,!0)),this.logEvent("play"),i&&this.togglePlayPauseAnimation("play")}},{key:"onPause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.triggerAnimation,i=void 0!==t&&t,o=e.isSeeking,s=void 0!==o&&o;this.setState({isPlaying:!1}),k.a&&!s&&n.i(C.a)(document.body,"distraction-free"),this.logEvent("pause"),i&&this.togglePlayPauseAnimation("pause")}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.triggerAnimation,n=void 0!==t&&t;!this.state.isPlaying&&this.player&&this.player.play({triggerAnimation:n})}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.triggerAnimation,n=void 0!==t&&t;this.state.isPlaying&&this.player&&this.player.pause({triggerAnimation:n})}},{key:"onSeekStart",value:function(e){this.setState({isSeeking:!0})}},{key:"onSeekStop",value:function(e){this.setState({isSeeking:!1})}},{key:"onEnd",value:function(){this.setState({isEnded:!0}),this.props.onStatusUpdate&&this.props.onStatusUpdate(!0)}},{key:"restartVideo",value:function(e){this.player.play()}},{key:"onContentClick",value:function(e){var t=this.state.blocks.getAtIndex(this.state.currBlockIndex);this.state.isEditingCodeBlock||t.isOverlay()||(k.a&&this.state.currTime&&this.state.isFullscreen?this.player.toggleMobileAudioControls():e&&"A"==e.target.nodeName?(n.i(I.d)(e)||n.i(w.a)(e.target.href),this.pause({triggerAnimation:!0})):this.state.isPlaying?this.pause({triggerAnimation:!0}):this.play({triggerAnimation:!0}),"IMG"==e.target.nodeName&&(e.preventDefault(),e.stopPropagation()))}},{key:"handleHighlights",value:function(e,t){var i=e.getProperty("name");if(!i)return null;var o=e.getContent().elementName,s=e.getContent().range;return this.modifyNode({nodeMap:t,dataList:[{type:"highlight",isList:!0,elementName:o,data:n.i(f.fromJS)({range:s,name:i})}]})}},{key:"handleScroll",value:function(e,t){if(!e.getProperty("name"))return null;var i=e.getContent().elementName,o=e.getContent(),s=o.targetLine,r=e.getAnimatedProperties();return this.modifyNode({nodeMap:t,dataList:[{type:"scrollData",elementName:i,data:n.i(f.fromJS)({targetLine:s,animate:r})}]})}},{key:"handleRemove",value:function(e,t,i){var o=e.getContent().elementName,s=this.state.blocks.findBlockWithName(o);if(!s)return i;if(s.isHighlight())this.modifyNode({nodeMap:t,dataList:[{type:"highlight",isList:!0,elementName:s.getContent().elementName,data:n.i(f.fromJS)({name:o})}],isRemove:!0});else{var r=t[o];i=i.filter(function(e){return e!=r})}return i}},{key:"handleReplace",value:function(e,t){var n=e.getContent().elementName,i=this.state.blocks.findBlockWithName(n);if(!i)return null;if(i.isCodeBlock()){var o=this.props.staticDisplay,s=t[n];if(!s)return;return this.modifyNode({nodeMap:t,dataList:[{type:"initialContent",elementName:n,data:s.props.content},{type:"content",elementName:n,data:e.getContent().content},{type:"animateOperations",elementName:n,data:e.getAnimatedOperations()},{type:"preventAnimation",elementName:n,data:o},{type:"animate",elementName:n,data:e.getAnimatedProperties()},{type:"isExecutable",elementName:n,data:e.isExecutable()},{type:"isNumbered",elementName:n,data:e.isNumbered()},{type:"maxLines",elementName:n,data:e.getMaxLineProperty()}]})}return this.modifyNode({nodeMap:t,dataList:[{type:"html",elementName:n,data:e.getContent().content}]})}},{key:"modifyNode",value:function(e){var t=e.nodeMap,i=e.dataList,o=e.isRemove,s=void 0!==o&&o;if(i&&0!=i.length){var r=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){(function(){var e=c.value;if(!e.elementName||!t[e.elementName])return"continue";var i=t[e.elementName],o=i.props[e.type]||(e.isList?n.i(f.List)():null);if(s)if(e.isList){var r=o.findIndex(function(t){return t.get("name")==e.data.get("name")});o=o.delete(r)}else o=void 0;else o=e.isList?o.push(e.data):e.data;i.props[e.type]=o})()}}catch(e){a=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw l}}}}},{key:"codeBlockRef",value:function(e,t){this.contentRefs[g.a.getRefName(t)]=e}},{key:"clearIgnoreInterrupt",value:function(){this.ignoreInterruptBounds&&(this.state.currTime<this.ignoreInterruptBounds.start||this.state.currTime>=this.ignoreInterruptBounds.end)&&(this.ignoreInterruptBounds=null)}},{key:"renderBlocks",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currSlideIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.currBlockIndex,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],[]),i={},o=null,s=e;s<=t;s++){var r=this.state.blocks.getAtIndex(s),a=r.getOperationType(),l=r.getContentType();if(this.clearIgnoreInterrupt(),"add-element"==a){var u=r.getName(),p=r.getContent().content,h=r.getProperties(),f=r.isInterrupt(),m=r.isOverlay(),g=s==t,y=null;g&&f&&!this.props.staticDisplay&&!this.ignoreInterruptBounds&&this.pause(),"editor"==l?y=c.a.createElement(d.a,{className:"cl-video-node",allowSectionCards:!1,returnRawNodes:!0,html:p,key:s,blockName:u,blockProperties:h,loggedOutModalInPlace:!0,preventFullScreenCodeBlock:!0,discussionId:this.props.discussionId,isInVideo:!0,skipProgressiveLoading:!0}):"code"==l?y=c.a.createElement(v.a,{setRef:this.codeBlockRef,blockName:u,className:"cl-video-node",content:p,isPlaying:this.state.isPlaying,isStaticDisplay:this.props.staticDisplay,animate:g&&r.isAnimated()&&!this.props.staticDisplay?r.getAnimatedProperties():null,isAnimated:r.isAnimated(),animateOperations:g&&r.isAnimated()&&!this.props.staticDisplay?r.getAnimatedOperations():null,time:this.state.currTime,preventAnimation:this.props.staticDisplay,pause:this.pause,play:this.play,onToggleEditCodeMode:this.onToggleEditCodeMode,staticDisplay:this.props.staticDisplay,maxLines:r.getMaxLineProperty(),isExecutable:r.isExecutable(),isNumbered:r.isNumbered(),key:s}):"shape"==l?(p='<div class="shape '+r.getContent().shape.name+'" style="color: '+r.getContent().shape.color+';"/>',y=c.a.createElement(d.a,{className:"cl-video-node",allowSectionCards:!1,returnRawNodes:!0,html:p,key:s,blockName:u,blockProperties:h,loggedOutModalInPlace:!0,preventFullScreenCodeBlock:!0,discussionId:this.props.discussionId,isInVideo:!0,skipProgressiveLoading:!0})):"prompt"==l?y=c.a.createElement(S.a,{isCreationMode:!1,isStaticDisplay:this.props.staticDisplay,html:p}):"highlight"==l?this.handleHighlights(r,i):"scroll"==l&&this.handleScroll(r,i),m&&!this.props.staticDisplay&&(y=g&&!this.ignoreInterruptBounds?c.a.createElement(E.a,{key:s,contentClass:"overlay-active-node force-fixed"+(p&&-1!=p.indexOf("output_only=1")?" output-only-code":""),onClick:this.onOverlayClose,bottomCloseClass:"label blue centered-text large with-top-padding dnr-video-overlay-continue-button",bottomCloseText:"Continue",bodyClass:k.a&&"distraction-free-2"},y):null),y&&(n.push(y),i[u]=y)}else"remove-element"==a?n=this.handleRemove(r,i,n):"replace-element"==a?this.handleReplace(r,i):"clear-slide"==a&&(n=[],o=r.getSlideStyles())}return{blocks:n,slideStyles:o}}},{key:"onTimeUpdate",value:function(e){var t=this.state.blocks.findBlockIndex(e),n=this.state.blocks.findSlideIndex(e),i={currTime:e,isEnded:!1};if(this.props.onStatusUpdate&&this.props.onStatusUpdate(!1),e>=this.state.duration)return void this.onEnd();0==e?this.setState(P({currBlockIndex:0,currSlideIndex:0},i)):this.state.currBlockIndex!=t?this.setState(P({currBlockIndex:t,currSlideIndex:n},i)):this.setState(i)}},{key:"onToggleEditCodeMode",value:function(e){this.setState({isEditingCodeBlock:e})}},{key:"toggleFullScreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;k.i&&(null!=t&&this.state.isFullscreen===t||screenfull.toggle(this.refs.video))}},{key:"toggleSubtitles",value:function(){var e=!this.state.showSubtitles;this.setState({showSubtitles:e,showAudioMenu:!1}),this.editProfile({subtitlesEnabled:e})}},{key:"render",value:function(){if(!this.state.blocks)return c.a.createElement("div",{className:"cl-video "+(this.props.isEmbedded?"embedded":"")+" "+(this.props.videoClass||"")},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"loader-div"},c.a.createElement(b.a,null),c.a.createElement("div",{className:"loading-text"},"Loading…"))));var e=this.renderBlocks(),t=e.blocks,n=e.slideStyles,o=this.state.blocks.getAtIndex(this.state.currBlockIndex),s=P({},this.props.customCSS||{},n||{}),r=o&&o.getVoice()&&o.getVoice().replace(/(<([^>]+)>)/gi,"");return c.a.createElement("div",{className:"cl-video "+(this.state.isEditingCodeBlock?"has-active-code-block":"")+" "+(this.state.isFullscreen?"fullscreen":"")+" "+(o.isOverlay()?"has-overlay":"")+" "+(this.props.isEmbedded?"embedded":"")+" "+(this.props.videoClass||""),ref:"video",onKeyDown:this.handleKey,tabIndex:"0",style:s},c.a.createElement("div",{className:"content "+(null==this.state.currTime?"beginning":"")+" "+(!this.state.currTime&&!this.state.isPlaying&&!this.props.staticDisplay||this.state.isEnded?"play":""),onClick:this.onContentClick,ref:"content"},t),!this.props.staticDisplay&&c.a.createElement("div",{className:"subtitle-section"},c.a.createElement("div",{className:"subtitle-wrapper"},this.state.showSubtitles&&r&&c.a.createElement("span",{className:"subtitle-content label"},r))),!this.props.staticDisplay&&c.a.createElement("div",{className:"audio-player-wrapper "+(this.state.isEditingCodeBlock||o.isOverlay()?"hidden":"")},c.a.createElement(y.a,i({audio:this.props.audio,onTimeUpdate:this.onTimeUpdate,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.onEnd,onSeekStart:this.onSeekStart,onSeekStop:this.onSeekStop,ref:this.setPlayer,additionalClassName:"",speed:this.state.speed,showSubtitles:this.state.showSubtitles,toggleSubtitles:this.toggleSubtitles,isFullScreenEnabled:k.i&&(!k.a||k.a&&this.state.isFullscreen),isFullScreenActive:this.state.isFullscreen,toggleFullScreen:this.toggleFullScreen,toc:this.props.toc,duration:this.state.duration,editProfile:this.editProfile},"speed",this.getUserVideoSettings().speed))))}}]),t}(c.a.PureComponent),x=n.i(p.connect)(a,{logEvent:O.c,editProfile:O.h})(T)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentUser:e.get("currentLoggedInUser"),users:e.get("users"),notifications:e.get("notifications"),notificationsFeed:e.get("notificationsFeed"),isFetchingNotifications:e.getIn(["pagination","notifications","isFetching"],!1),currentOffsetBeingFetched:e.getIn(["pagination","notifications","currentOffsetBeingFetched"],0)}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Notifications",function(){return N}),n.d(t,"NotificationsContainer",function(){return P});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(891)),d=n.n(p),h=n(39),f=(n.n(h),n(132)),m=(n.n(f),n(899)),g=n.n(m),v=n(133),y=n(887),b=(n(134),n(97)),k=n(323),E=n(38),C=n(894),w=n.n(C),I=(n(324),n(131)),S=n(32),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.fetchNotifications(0),n.isDataAvailable=n.isDataAvailable.bind(n),n.onNotificationClick=n.onNotificationClick.bind(n),n.loadMore=n.loadMore.bind(n),n}return s(t,e),O(t,[{key:"loadMore",value:function(){this.props.fetchNotifications()}},{key:"onNotificationClick",value:function(e){this.props.toggleNotificationRead([e])}},{key:"componentWillUnmount",value:function(){}},{key:"isDataAvailable",value:function(){return this.props.notificationsFeed.size}},{key:"render",value:function(){var e=this,t=n.i(k.a)(null),i=null;this.props.currentUser&&(i=this.props.notificationsFeed.map(function(t,i){var o=e.props.notifications.get(t);return l.a.createElement(u.Link,{to:o.get("mainObjectPath"),className:"no-decoration",key:i,onClick:function(){return e.onNotificationClick(o.get("eid"))}},l.a.createElement("div",{className:o.get("isRead")?"notification read":"notification unread"},l.a.createElement(v.a,{preserveOriginal:!0,size:50,className:"avatar-image",src:o.get("avatar")?o.get("avatar"):o.get("avatarName")?null:w.a,name:o.get("avatarName")}),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"text"},n.i(I.k)(o.get("genericTemplate").toJS())),l.a.createElement("div",{className:"timeago label"},l.a.createElement("span",{className:"emoji"},o.get("emoji")),l.a.createElement(d.a,{date:o.get("dt")})))))}));var o=this.props.isFetchingNotifications?l.a.createElement("div",{className:"loader-div"},l.a.createElement(b.a,null),0==this.props.currentOffsetBeingFetched?l.a.createElement("div",{className:"loading-text no-uppercase"},"Checking for new notifications…"):l.a.createElement("div",{className:"loading-text"},"Loading…")):null,s=0!=this.props.isPage;return l.a.createElement("div",{className:s?"page notifications-page":"notifications-container"},s?l.a.createElement(t,{checkAuthOn:"load",allowLurker:!0,to:"/notifications"}):null,s?l.a.createElement(y.a,{noBack:!0,isNav:!0}):null,this.props.currentUser&&this.props.users.get(this.props.currentUser).get("unreadNotificationsCount")>0&&(0!=this.props.currentOffsetBeingFetched||!this.props.isFetchingNotifications)?l.a.createElement("div",{className:s?"mark-all-as-read-button with-margin-top":"mark-all-as-read-button",onClick:this.props.markAllNotificationsAsRead},"Mark all as read"):null,0===this.props.currentOffsetBeingFetched?o:null,this.props.notifications.size?i:this.props.isFetchingNotifications?null:l.a.createElement("div",{className:"onboarding-text-label"},"You have no notifications (yet)."),s?l.a.createElement(g.a,{onEnter:this.loadMore,scrollableAncestor:n.i(S.f)()?window:null,bottomOffset:"-200px"}):l.a.createElement("div",{className:"show-older-notifications-button"},l.a.createElement(u.Link,{to:"/notifications"},"Show older notifications")),0!=this.props.currentOffsetBeingFetched?o:null)}}]),t}(l.a.PureComponent),P=n.i(c.connect)(r,{fetchNotifications:E.z,toggleNotificationRead:E.A,markAllNotificationsAsRead:E.B,resetPagination:E.C})(N)},,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return U.localeString[e]?U.localeString[e]:(setTimeout(function(){var n=(new Date).toDateString()===new Date(e).toDateString()?{hour:"2-digit",minute:"2-digit"}:{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},i=new Date(e).toLocaleString([],n);U.localeString[e]=i,t(i)},10),"")}function l(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),communities:e.get("communities"),groupThreads:e.get("groupThreads"),groupThreadRecommendation:e.get("groupThreadRecommendation")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"GroupThread",function(){return q}),n.d(t,"GroupThreadContainer",function(){return W});var c=n(1),u=n.n(c),p=n(59),d=(n.n(p),n(15)),h=(n.n(d),n(887),n(37)),f=(n.n(h),n(896)),m=(n.n(f),n(133)),g=n(99),v=(n.n(g),n(39)),y=(n.n(v),n(213)),b=(n.n(y),n(214)),k=(n.n(b),n(97)),E=(n(932),n(38)),C=n(323),w=n(203),I=n.n(w),S=n(58),O=(n(32),n(17)),N=(n(131),n(205)),P=n(899),_=n.n(P),T=n(1424),x=(n.n(T),n(326)),L=(n.n(x),n(330)),M=n(897),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),D=n.i(C.a)("button"),A=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),j(t,[{key:"render",value:function(){return u.a.createElement(T.MentionsInput,{value:this.props.value,onChange:this.props.onChange,className:this.props.className,onKeyDown:this.props.onKeyDown,displayTransform:this.props.displayTransform,placeholder:"Type your message here"},u.a.createElement(T.Mention,{trigger:"@",data:this.props.data,className:"mentions",appendSpaceOnAdd:!0,renderSuggestion:this.props.renderSuggestion}))}}]),t}(u.a.PureComponent),R=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return r(t,e),j(t,[{key:"onClick",value:function(e){this.props.currentLoggedInUser?window.confirm("Are you sure you want to flag this message?")&&this.props.onClick(e,this.props.messageId):this.props.onClick(e)}},{key:"render",value:function(){return u.a.createElement("div",{className:"flag-button",onClick:this.onClick})}}]),t}(u.a.PureComponent),F=n.i(C.a)(R),U={localeString:{}},B=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dt:a(n.props.dt,function(e){return n.setState({dt:e})})},n}return r(t,e),j(t,[{key:"render",value:function(){return u.a.createElement("span",{className:"date"},this.state.dt)}}]),t}(u.a.PureComponent),H=function(e){function t(e){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={message:n.i(N.f)(i.props.data.message,!1,!1,i.props.inSidebar?{mention:{offsetLeft:200,offsetTop:-30}}:null)},i.onClick=i.onClick.bind(i),i}return r(t,e),j(t,[{key:"onClick",value:function(e){n.i(S.d)(e)}},{key:"render",value:function(){var e=this.props.author,t=this.props.data;return t.hidden?null:u.a.createElement(I.a,{transitionName:"post",transitionAppear:!0,transitionAppearTimeout:1e3,transitionEnter:!1,transitionLeave:!1},u.a.createElement("div",{className:"message"},u.a.createElement("div",{className:"avatar-column"},e?u.a.createElement(L.b,{userId:e.get("eid"),offsetLeft:this.props.inSidebar?120:25,offsetTop:-45,className:"avatar-image",size:"30",name:e.get("displayName"),src:e.get("avatarUrl")}):null),u.a.createElement("div",{className:"message-column"},u.a.createElement("div",{className:"message-header"},e?u.a.createElement(L.c,{className:"author-name",userId:e.get("eid"),offsetLeft:this.props.inSidebar?160:15,offsetTop:-25},e.get("displayName")):null,u.a.createElement(B,{dt:t.dtCreated})),u.a.createElement("div",{className:"message-text",onClick:this.onClick},t.isLoaded?t.flagged?u.a.createElement("span",{className:"flagged"},"This message has been flagged"):this.state.message:null)),u.a.createElement("div",{className:"message-options-column"},e&&e.get("eid")!=this.props.currentLoggedInUser&&!t.flagged?u.a.createElement(F,{onClick:this.props.onFlagClick,messageId:t.messageId,currentLoggedInUser:this.props.currentLoggedInUser}):null)))}}]),t}(u.a.PureComponent),q=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.database=g.database(),n.messagesRef=n.database.ref("messages/"+n.props.groupThreadId),n.auth=g.auth(),n.FAKE_ID="FAKE_ID",n.state=n.getInitialState(),n.onMessageInputChange=n.onMessageInputChange.bind(n),n.loadMessages=n.loadMessages.bind(n),n.loadData=n.loadData.bind(n),n.saveMessage=n.saveMessage.bind(n),n.setMessage=n.setMessage.bind(n),n.changeMessage=n.changeMessage.bind(n),n.isDataAvailable=n.isDataAvailable.bind(n),n.onFlagClick=n.onFlagClick.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleMessagesList=n.handleMessagesList.bind(n),n.onLoadMore=n.onLoadMore.bind(n),n.turnOffListeners=n.turnOffListeners.bind(n),n.fetchUser=n.fetchUser.bind(n),n.search=n.search.bind(n),n.onSearch=n.onSearch.bind(n),n.displayTransform=n.displayTransform.bind(n),n.logView=n.logView.bind(n),n.closeSignUpModal=n.closeSignUpModal.bind(n),n.getMentionsData=n.getMentionsData.bind(n),n.renderMentionsSuggestions=n.renderMentionsSuggestions.bind(n),n.loadMessages(),n}return r(t,e),j(t,[{key:"getInitialState",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{message:"",plainTextMessage:"",mentions:[],messagesList:n.i(v.OrderedMap)(),showLoader:!0,noMoreData:!1,emptyThread:!1,deferredSearchQuery:null,isFetchingSearch:!1,isSignUpModalOpen:!1}}},{key:"handleMessagesList",value:function(e,t){!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2])?this.setState({messagesList:n.i(v.OrderedMap)(i({},e,t)).concat(this.state.messagesList)}):this.setState({messagesList:this.state.messagesList.set(e,t)})}},{key:"fetchUser",value:function(e){var t=this;this.props.users.get(e)||this.database.ref("users").child(e).once("value",function(n){var i=n.val();i.eid=e,t.props.setUsers([i])})}},{key:"setMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.val(),o=i.authorId;i.messageId=e.key,this.setState({emptyThread:!1}),this.state.messagesList.get(e.key)||(this.fetchUser(o),i.flagged||!this.props.currentLoggedInUser?this.handleMessagesList(e.key,Object.assign({isLoaded:!0},i),n):(this.handleMessagesList(e.key,Object.assign({isLoaded:!1},i),n),this.database.ref("messageFlags/messages/"+e.key+"/"+this.props.currentLoggedInUser).once("value",function(n){n.val()&&(i.flagged=!0),t.handleMessagesList(e.key,Object.assign({isLoaded:!0},i),!1)})))}},{key:"changeMessage",value:function(e){e.val()&&this.state.messagesList.get(e.key)&&this.setState({messagesList:this.state.messagesList.updateIn([e.key],function(e){return Object.assign({flagged:!0},e)})})}},{key:"isDataAvailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.groupThreadId,n=e.groupThreads.get(t);return n&&n.has("canMessage")&&n.get("name")&&n.has("participants")}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.isDataAvailable(e)||this.props.fetchGroupThreadMetadata(e.groupThreadId,"community",e.communityId,["name","description","canMessage","participants"])}},{key:"turnOffListeners",value:function(){this.messagesRef.off(),this.database.ref("messageFlags/users/"+this.props.currentLoggedInUser).off(),this.database.ref("participants/"+this.props.groupThreadId).off()}},{key:"loadMessages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.loadData(t),this.turnOffListeners(),t.currentLoggedInUser&&this.database.ref("messageFlags/users/"+t.currentLoggedInUser).on("child_added",this.changeMessage),this.database.ref("participants/"+t.groupThreadId).limitToLast(15).on("value",function(i){var o=[];i.forEach(function(t){var n=t.key;o.push(n),e.fetchUser(n)}),t.setStateAtPath(["groupThreads",t.groupThreadId,"participants"],n.i(v.List)(o))}),this.logView(t)}},{key:"logView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.currentLoggedInUser&&this.database.ref("groupThreadUserViews/"+e.groupThreadId).update(i({},e.currentLoggedInUser,g.database.ServerValue.TIMESTAMP))}},{key:"onLoadMore",value:function(){var e=this;if(0==this.state.messagesList.size)this.messagesRef.limitToLast(25).on("child_added",this.setMessage),this.messagesRef.limitToLast(1).once("value",function(t){t.val()?e.setState({showLoader:!1}):e.setState({emptyThread:!0,showLoader:!1})});else{var t=this.state.messagesList.keySeq().first();if(this.state.noMoreData)return;this.setState({showLoader:!0}),this.messagesRef.orderByKey().endAt(t).limitToLast(10).once("value",function(t){if(1==t.numChildren())return void e.setState({noMoreData:!0,showLoader:!1});var n=[];t.forEach(function(e){n.unshift(e)}),e.setState({showLoader:!1}),n.forEach(function(t){e.setMessage(t,!0)})})}}},{key:"getMentionsFromText",value:function(){var e=0,t=[],i=this.state.message,o=!0,s=!1,r=void 0;try{for(var a,l=this.state.mentions[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value,u=i.substring(e,c.index);u&&t.push({type:"string",val:u}),t.push({type:"mention",val:c.display,id:c.id,mentionType:"user"}),e=c.index+c.display.length+c.id.length+5}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}var p=i.substring(e);return p&&t.push({type:"string",val:p}),t[0].val="string"==t[0].type?n.i(N.g)(t[0].val):t[0].val,t[t.length-1].val="string"==t[t.length-1].type?n.i(N.h)(t[t.length-1].val):t[t.length-1].val,t}},{key:"getMessageEntities",value:function(){var e=this.getMentionsFromText(),t=[],i=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var l=r.value;switch(l.type){case"string":t=t.concat(n.i(S.m)(l.val));break;case"mention":t.push(l)}}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return t}},{key:"onFlagClick",value:function(e,t){var n={};n["messageFlags/messages/"+t+"/"+this.props.currentLoggedInUser]=!0,n["messageFlags/users/"+this.props.currentLoggedInUser+"/"+t]=!0,n["messageFlags/logs/"+this.database.ref("messageFlags/logs").push().key]={messageId:t,userId:this.props.currentLoggedInUser,dtCreated:g.database.ServerValue.TIMESTAMP},this.database.ref().update(n,function(e){e&&console.log("Error updating data:",e)}.bind(this))}},{key:"saveMessage",value:function(e){if(e&&e.preventDefault(),!this.props.currentLoggedInUser)return void this.setState({isSignUpModalOpen:!0});if(this.state.message&&this.props.currentLoggedInUser){var t=this.messagesRef.push(),n=t.key,i={};i["messages/"+this.props.groupThreadId+"/"+n]={authorId:this.props.currentLoggedInUser,message:JSON.stringify(this.getMessageEntities()),dtCreated:g.database.ServerValue.TIMESTAMP},i["groupThreads/"+this.props.groupThreadId]={lastActivity:g.database.ServerValue.TIMESTAMP,lastMessage:this.state.message,lastMessageAuthor:this.props.currentLoggedInUser},i["participants/"+this.props.groupThreadId+"/"+this.props.currentLoggedInUser]=!0,this.justCreatedMessageKey=n,this.database.ref().update(i,function(e){e?console.log("Error updating data:",e):this.setState({message:""})}.bind(this))}}},{key:"componentWillUpdate",value:function(){var e=this.refs.messages;e&&(this.shouldScrollBottom=e.scrollTop+e.offsetHeight===e.scrollHeight,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop)}},{key:"componentDidUpdate",value:function(e,t){var n=this.refs.messages,i=this.shouldScrollBottom;this.justCreatedMessageKey==this.state.messagesList.keySeq().last()&&(i=!0,this.justCreatedMessageKey=!1),t.messagesList!=this.state.messagesList&&(i?(n.scrollTop=n.scrollHeight,"in-page"==this.props.location&&x.animateScroll.scrollToBottom({duration:500,smooth:!0,delay:500})):t.message==this.state.message&&(n.scrollTop=this.scrollTop+(n.scrollHeight-this.scrollHeight)-20))}},{key:"componentWillUnmount",value:function(){this.logView(),this.turnOffListeners()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=[this.props.groupThreadId,"users"];if(e.groupThreadId!=this.props.groupThreadId)this.setState(this.getInitialState(),function(){t.onLoadMore()}),this.messagesRef=this.database.ref("messages/"+e.groupThreadId),this.loadMessages(e);else if(e.groupThreadRecommendation.getIn(n)!=this.props.groupThreadRecommendation.getIn(n)){var i=[];i=e.groupThreadRecommendation.getIn([].concat(n,[this.state.query]),[]).map(function(t){return{id:t,display:e.users.get(t).get("displayName")}}),O.a&&(i=i.slice(0,5)),i?this.state.callback(i):this.state.callback([{id:"FAKE_ID",display:"No results..."}])}}},{key:"displayTransform",value:function(e,t,i){return n.i(N.i)(t)}},{key:"onMessageInputChange",value:function(e,t,n,i){var o=t.replace("@[Loading...](FAKE_ID)","").replace("@[No results...](FAKE_ID)","");this.setState({message:o,plainTextMessage:n,mentions:i})}},{key:"handleKeyDown",value:function(e){13!=(e.keyCode||e.which)||e.shiftKey||this.saveMessage(e)}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments[1];void 0!=e&&(this.props.fetchGroupThreadRecommendation(this.props.groupThreadId,e,this.props.communityId),this.setState({query:e,callback:t}))}},{key:"onSearch",value:function(e,t){var n=this;this.state.isFetchingSearch?this.setState({deferredSearchQuery:e,callback:t}):(this.setState({isFetchingSearch:!0}),this.search(e,t),window.setTimeout(function(){if(n.state.deferredSearchQuery){var e=n.state.deferredSearchQuery;n.setState({deferredSearchQuery:null,isFetchingSearch:!1}),n.search(e,n.state.callback)}else n.setState({isFetchingSearch:!1})},500))}},{key:"closeSignUpModal",value:function(){this.setState({isSignUpModalOpen:!1})}},{key:"getMentionsData",value:function(e,t){t([{id:"FAKE_ID",display:"Loading..."}]),this.onSearch(e,t)}},{key:"renderMentionsSuggestions",value:function(e,t,n,i){if(e.id===this.FAKE_ID)return u.a.createElement("div",null,e.display);var o=this.props.users.get(e.id);return u.a.createElement("div",{className:"suggestion"},u.a.createElement(m.a,{className:"avatar-image",size:"20",name:o.get("displayName"),src:o.get("avatarUrl")}),u.a.createElement("div",{className:"display-name"},o.get("displayName")))}},{key:"render",value:function(){var e=this,t=this.props.users.get(this.props.currentLoggedInUser),n=this.props.groupThreads.get(this.props.groupThreadId);if(!n)return null;var i=this.state.messagesList.map(function(t,n){var i=e.props.users.get(t.authorId);return u.a.createElement(H,{author:i,data:t,onFlagClick:e.onFlagClick,currentLoggedInUser:e.props.currentLoggedInUser,inSidebar:"in-page"!=e.props.location})}),o=n.get("participants")?n.get("participants").map(function(t){var n=e.props.users.get(t);return n?u.a.createElement(L.b,{userId:t,offsetLeft:26,className:"avatar-image",size:"30",name:n.get("displayName"),src:n.get("avatarUrl")}):null}):null,s=this.props.communities.getIn([this.props.communityId,"liveUsersCount"],0),r=u.a.createElement(A,{value:this.state.message,onChange:this.onMessageInputChange,className:"mentions-input"+("sidebar"==this.props.location?" mentions-input-sidebar":""),onKeyDown:this.handleKeyDown,displayTransform:this.displayTransform,data:this.getMentionsData,renderSuggestion:this.renderMentionsSuggestions}),a=u.a.createElement("div",{className:"input-row"},r,u.a.createElement("button",{className:"send-button",onClick:this.saveMessage},"Send")),l=null;return l=n&&t?n.has("canMessage")?n.get("canMessage")&&t.get("canMessage",!0)?a:u.a.createElement("div",{className:"onboarding-text-label"}," You don't have permissions to message to this group."):a:u.a.createElement("div",{className:"input-row"},r,u.a.createElement(D,{className:"send-button",ref:"send-button",onClick:this.saveMessage},"Send")),u.a.createElement("div",{className:"group-thread","data-location":this.props.location},"sidebar"!=this.props.location?u.a.createElement("div",{className:"participants"},u.a.createElement("div",{className:"participants-label"},"Participants:",s>0?u.a.createElement("div",null,u.a.createElement("span",{className:"label bold online-now"},s," online")):null),u.a.createElement("div",{className:"community-members"},o)):null,u.a.createElement("div",{className:"messages",ref:"messages"},u.a.createElement(_.a,{onEnter:this.onLoadMore,topOffset:O.a?"-80px":"-20px"}),this.state.showLoader?u.a.createElement("div",{className:"loader-div"},u.a.createElement(k.a,null),u.a.createElement("div",{className:"loading-text"},"Loading…")):null,this.state.noMoreData?u.a.createElement("div",{className:"loader-div"},u.a.createElement("div",{className:"loading-text"},"No more messages")):null,this.state.emptyThread?u.a.createElement("div",{className:"loader-div"},u.a.createElement("div",{className:"loading-text"},"Be the first one to say hi 👋")):null,i),u.a.createElement("div",{className:"in-page"==this.props.location?"bottom-section fixed":"bottom-section",ref:"bottom-section"},u.a.createElement(x.Element,{name:"bottom-section"},l)),u.a.createElement(M.a,{onRequestClose:this.closeSignUpModal,isModalOpen:this.state.isSignUpModalOpen,postSignInSignUpTo:"/community/"+this.props.communityId+"/group-thread/"+this.props.groupThreadId,actionBlockedMessage:!0}))}}]),t}(u.a.PureComponent),W=n.i(h.connect)(l,{setUsers:E.O,fetchGroupThreadMetadata:E.P,setStateAtPath:E.p,fetchGroupThreadRecommendation:E.Q})(n.i(d.withRouter)(q))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DiscussionMetadataComposerContainer",function(){return l});var i=n(1),o=(n.n(i),n(53)),s=(n.n(o),n(333)),r=n.n(s),a=n(332),l=r()({loader:function(){return new Promise(function(e){return n.e(24).then(function(t){return e(n(1435).DiscussionMetadataComposerContainer)}.bind(null,n)).catch(n.oe)})},loading:a.a})},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=e.get("pathfinder");return{currentLoggedInUser:e.get("currentLoggedInUser"),discussions:e.get("discussions"),pathfinder:t?t instanceof p.Map?t.toJS():t:null,promoPromptHidden:e.get("promoPromptHidden")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Pathfinder",function(){return C}),n.d(t,"PathfinderContainer",function(){return w});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(97)),p=n(39),d=(n.n(p),n(132)),h=(n.n(d),n(887)),f=n(914),m=n(17),g=n(32),v=(n(907),n(973)),y=n(38),b=n(326),k=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChoiceClick=n.onChoiceClick.bind(n),n}return s(t,e),k(t,[{key:"onChoiceClick",value:function(e,t,n){this.props.onChoiceClick(t,n)}},{key:"render",value:function(){var e=this;if(!this.props.data)return null;var t=this.props.data.id,n=this.props.data.question;if(!n)return null;var i=m.a?"options compact compact-main":"options",o=m.a?"option category compact compact-main zoom-on-hover":"option category zoom-on-hover",s=m.a?"option compact compact-main zoom-on-hover":"option zoom-on-hover",r=n.choices.map(function(t,n){var i="category"==t.type?o+" "+(t.categoryClass||""):""+s;return l.a.createElement("div",{className:""+i,id:t.id,onClick:function(i){return e.onChoiceClick(i,n,t.id)}},l.a.createElement("div",{className:t.class}),l.a.createElement("div",{className:"option-title"},t.choice))});return l.a.createElement("div",{id:t},l.a.createElement("div",{className:"question"},n.question),n.description&&l.a.createElement("div",{className:"question-description"},n.description),l.a.createElement("div",{className:i},r,this.props.showBackButton&&l.a.createElement("div",{className:s+" go-back",onClick:this.props.onGoBack},l.a.createElement("div",{className:"option-title"},"Go back"),l.a.createElement("div",{className:"option-description"},"Go back to last step"))))}}]),t}(l.a.PureComponent),C=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.fetchPathfinder(),n.state=n.initializeState({returnObj:!0}),n.onChoiceClick=n.onChoiceClick.bind(n),n.onGoBack=n.onGoBack.bind(n),n.scrollToTop=n.scrollToTop.bind(n),n}return s(t,e),k(t,[{key:"isLoaded",value:function(){return null!=this.props.pathfinder}},{key:"componentWillReceiveProps",value:function(e){!this.props.pathfinder&&e.pathfinder&&this.initializeState({props:e})}},{key:"initializeState",value:function(e){var t=e.returnObj,n=void 0!==t&&t,i=e.props,o=void 0===i?this.props:i,s={completedCourses:[],path:[],questions:[]};if(o.pathfinder&&(s.questions=[{question:"q:top-level",choice:null}]),n)return s;this.setState(s)}},{key:"getCurrentPathfinderPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.questions;return e[e.length-1]}},{key:"getCurrentQuestion",value:function(){var e=this.getCurrentPathfinderPosition();return e?{question:this.props.pathfinder.questions[e.question],id:e.question}:null}},{key:"isQuestion",value:function(e){return 1==Object.keys(e).length&&-1!=Object.keys(e)[0].indexOf("q:")}},{key:"getNextQuestion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.questions,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.pathfinder.pathfinder[0],n=this.index<this.state.questions.length?this.state.questions[this.index]:null;if(this.isQuestion(t))return n?(t=t[n.question][n.choice],this.index+=1,this.getNextQuestion(e,t)):{nextQuestion:Object.keys(t)[0]};if(t.path){var i=[],o=!0,s=!1,r=void 0;try{for(var a,l=t.path[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value;if("string"!=typeof c){var u=this.getNextQuestion(e,c);if(null!=u){if(null!=u.nextQuestion)return u;u.path&&(i=i.concat(u.path))}}else i.push(c)}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}return{path:i,nextQuestion:null}}return t.pathsnippet?this.getNextQuestion(e,this.props.pathfinder.pathsnippets[t.pathsnippet]):void 0}},{key:"onChoiceClick",value:function(e,t){var n=this.state.questions.slice();this.getCurrentPathfinderPosition(n).choice=e,this.index=0;var i=this.getNextQuestion(n);i.nextQuestion?n.push({question:i.nextQuestion}):(this.props.findPath(i.path),this.setState({loadingPath:!0})),this.setState({questions:n}),this.scrollToTop()}},{key:"scrollToTop",value:function(){this.proPromoPromptHeight=m.c?0:this.props.promoPromptHidden?0:this.proPromoPromptHeight||document.getElementsByClassName("banner promo-prompt-container")&&document.getElementsByClassName("promo-prompt-container")[0]?document.getElementsByClassName("promo-prompt-container")[0].clientHeight:0;var e=50+this.proPromoPromptHeight;this.refs.pathfinderContainer&&n.i(g.k)(this.refs.pathfinderContainer,e,!0)||b.scroller.scrollTo("pathfinder",{duration:100,smooth:!0,offset:-e,containerId:null})}},{key:"onGoBack",value:function(){if(1!=this.state.questions.length){var e=this.state.questions.slice();e.pop(),this.setState({questions:e}),this.scrollToTop()}}},{key:"render",value:function(){var e=0!=this.props.isPage,t=this.state.questions.length>1;return l.a.createElement("div",{className:e?"page pathfinder-page":"pathfinder-container"},e?l.a.createElement(h.a,{noBack:!0,isNav:!0},l.a.createElement(v.a,{activeCommunityId:null})):null,l.a.createElement("div",{ref:"pathfinderContainer"},l.a.createElement(b.Element,{name:"pathfinder"},l.a.createElement("div",{className:"pathfinder"},l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"page-heading"},"What do you want to learn?"),this.state.loadingPath?l.a.createElement("div",{className:"loader-div"},l.a.createElement(u.a,null),l.a.createElement("div",{className:"loading-text"},"Personalizing your learning path…")):this.isLoaded()?[l.a.createElement("div",{className:"navigation-row"},t&&l.a.createElement("div",{className:"back-arrow zoom-on-hover zoom-to-normal",onClick:this.onGoBack},"Back")),l.a.createElement(E,{data:this.getCurrentQuestion(),onChoiceClick:this.onChoiceClick,onGoBack:this.onGoBack,showBackButton:t})]:l.a.createElement("div",{className:"loader-div"},l.a.createElement(u.a,null),l.a.createElement("div",{className:"loading-text"},"Loading Pathfinder…")))))),e?l.a.createElement(f.a,{currentLoggedInUser:this.props.currentLoggedInUser,to:"/privacy",hideSignupForm:!0}):null)}}]),t}(l.a.PureComponent),w=n.i(c.connect)(r,{fetchPathfinder:y.J,findPath:y.K})(C)},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{discussions:e.get("discussions"),discussionPosts:e.get("discussionPosts"),tags:e.get("tags"),currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),visitedPaths:e.get("visitedPaths")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ReplyInput",function(){return x}),n.d(t,"ReplyInputContainer",function(){return L});var l=n(1),c=n.n(l),u=n(37),p=(n.n(u),n(15)),d=(n.n(p),n(933)),h=n(203),f=n.n(h),m=n(896),g=n.n(m),v=n(1059),y=n(1058),b=n(38),k=n(323),E=n(889),C=n(134),w=n(97),I=n(1272),S=n(324),O=n(1082),N=n(131),P=n(39),_=(n.n(P),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function(e){function t(e){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.onEditorChange=i.onEditorChange.bind(i),i.onClose=i.onClose.bind(i),i.onAddOrEditPost=i.onAddOrEditPost.bind(i),i.onTagsClick=i.onTagsClick.bind(i),i.getSelectedTagNamesAsSpan=i.getSelectedTagNamesAsSpan.bind(i),i.onRequestCloseTagsModal=i.onRequestCloseTagsModal.bind(i),i.routerWillLeave=i.routerWillLeave.bind(i),i.updateSelectedTags=i.updateSelectedTags.bind(i),i.isDataAvailable=i.isDataAvailable.bind(i),i.onDiscard=i.onDiscard.bind(i),i.updateSchedulingInfo=i.updateSchedulingInfo.bind(i),i.getSchedulingInfo=i.getSchedulingInfo.bind(i),i.getDiscussionId=i.getDiscussionId.bind(i),i.getPostId=i.getPostId.bind(i),i.getSchedulingOptions=i.getSchedulingOptions.bind(i);var r=i.getDiscussionId(),a=i.getPostId(),l=i.props.route&&i.props.route.isEditing||i.props.isEditing||!1,c=0!=i.props.isPage;return i.state=_({post:{html:"",editorState:null},isTagsModalOpen:!1,selectedTags:l&&i.props.discussionPosts.get(a)?i.props.discussionPosts.get(a).get("tags").toJS().map(function(e){return n.i(P.Map)({type:"local",eid:e})}):[],tagsModalOpenCount:0,isEditing:l,isPostButtonDisabled:!1},i.getSchedulingInfo()),i.POSTING_STATUS={SUCCESS:0,NEEDS_MORE_TEXT:1,NEEDS_MORE_TAGS:2,NEEDS_SCHEDULING:3},c&&i.props.router.setRouteLeaveHook(i.props.route,i.routerWillLeave),i.shouldDisplayWarning=!0,i.isPostButtonDisabled=!1,i.props.fetchDiscussion(i.getDiscussionId()),i.state.isEditing?i.props.fetchDiscussionPost(a):i.props.fetchDiscussionMetadata(r,null,["postSchedulingOptions"]),i}return r(t,e),T(t,[{key:"getDiscussionId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.params&&e.params.discussionId||e.discussionId}},{key:"getPostId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.params&&e.params.postId||e.postId}},{key:"areTagsRequired",value:function(){return!this.props.areTagsOptional&&n.i(N.o)(this.state.post.html)>30}},{key:"getSchedulingOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getPostId(e),i=t&&e.discussionPosts&&e.discussionPosts.get(t),o=e.route&&e.route.isEditing||e.isEditing||!1,s=this.getDiscussionId(e);return o?{isEditable:i.getIn(["schedulingOptions","isEditable"],null),options:i.getIn(["schedulingOptions","options"],n.i(P.List)()).toJS()}:{isEditable:!o,options:e.discussions.getIn([s,"postSchedulingOptions"],n.i(P.List)()).toJS()}}},{key:"getSchedulingInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getPostId(e),i=e.discussionPosts.get(t),o=this.getDiscussionId(e);if(!(e.route&&e.route.isEditing||e.isEditing)&&1)return{schedulingInfo:{type:0==e.discussions.getIn([o,"postSchedulingOptions"],n.i(P.List)()).toJS().filter(function(e){return"PUBLISHED"==e.name}).length?null:"PUBLISHED",dtPublish:null,originalType:null}};return i?{schedulingInfo:{type:i.getIn(["schedulingInfo","type"],null),dtPublish:i.getIn(["schedulingInfo","dtPublish"],null),originalType:i.getIn(["schedulingInfo","type"],null)}}:{schedulingInfo:{type:null,dtPublish:null,originalType:null}}}},{key:"isDataAvailable",value:function(){var e=this.props.params&&this.props.params.discussionId||this.props.discussionId,t=this.props.params&&this.props.params.postId||this.props.postId;return this.props.discussions.get(e)&&(this.state.isEditing&&this.props.discussionPosts.get(t)&&this.props.discussionPosts.hasIn([t,"latestVersion"])||!this.state.isEditing)}},{key:"componentWillReceiveProps",value:function(e){e.params&&e.params.discussionId&&!1===e.discussions.getIn([e.params.discussionId,"canContribute"],null)&&p.browserHistory.push("/discussion/"+e.params.discussionId+"/main");var t=this.getPostId(e),i=e.discussionPosts.get(t);this.state.isEditing&&(this.props.discussionPosts.getIn([t,"tags"])!=e.discussionPosts.getIn([t,"tags"])&&this.setState({selectedTags:i.get("tags").toJS().map(function(e){return n.i(P.Map)({type:"local",eid:e})})}),this.props.discussionPosts.getIn([t,"schedulingInfo"])!=e.discussionPosts.getIn([t,"schedulingInfo"])&&this.setState(this.getSchedulingInfo(e)))}},{key:"routerWillLeave",value:function(){if(this.shouldDisplayWarning&&n.i(N.l)(this.state.post.html))return"You haven't finished your post yet. Do you want to leave without finishing?"}},{key:"componentDidMount",value:function(){var e=this;window.onbeforeunload=function(t){if(e.shouldDisplayWarning&&n.i(N.l)(e.state.post.html))return t=t||window.event,t&&(t.returnValue="You haven't finished your post yet. Do you want to leave without finishing?"),"You haven't finished your post yet. Do you want to leave without finishing?"}}},{key:"componentWillUnmount",value:function(){window.onbeforeunload=null}},{key:"onClose",value:function(e){this.props.visitedPaths.size>1?this.props.router.goBack():p.browserHistory.push("/home")}},{key:"onAddOrEditPost",value:function(e,t){if(!this.isPostButtonDisabled){var i=this.getDiscussionId(),o=this.getPostId(),s=this.props.params&&this.props.params.replyId||this.props.replyId,r=this.props.discussions.get(i),a=this.props.discussionPosts.get(o),l=_({},this.state.schedulingInfo);if(t&&(l.type=t),0==n.i(N.l)(this.state.post.html))return alert("You need to enter some text for the post."),this.POSTING_STATUS.NEEDS_MORE_TEXT;if(0==this.state.selectedTags.length&&this.areTagsRequired())return alert("You need to select some tags."),this.POSTING_STATUS.NEEDS_MORE_TAGS;if(!this.getSchedulingOptions().isEditable||l.type&&0!=this.getSchedulingOptions().options.filter(function(e){return e.name==l.type}).length){var c=this.state.selectedTags.filter(function(e){return"local"==e.get("type")}).map(function(e){return e.get("eid")}),u=this.state.selectedTags.filter(function(e){return"local"!=e.get("type")}).map(function(e){return e.toJS()});if(this.state.isEditing){var p=n.i(P.Set)(a.get("tags")),d=n.i(P.Set)(c),h=d.subtract(p).toJS(),f=p.subtract(d).toJS();this.props.editPost(this.state.post.html,i,o,u,h,f,l,r.get("community"),a.getIn(["latestVersion","eid"]))}else{var m=s||o;this.props.addPost(this.state.post.html,i,c,u,m,l,r.get("community"))}return this.isPostButtonDisabled=!0,this.shouldDisplayWarning=!1,this.props.clearDisplayWarning&&this.props.clearDisplayWarning(),this.props.onSubmit&&this.props.onSubmit(),this.setState({isPostButtonDisabled:!0}),this.POSTING_STATUS.SUCCESS}return alert("You need to choose a publishing option (such as Publish Now or Draft)!"),this.POSTING_STATUS.NEEDS_SCHEDULING}}},{key:"updateSelectedTags",value:function(e){this.setState({selectedTags:e})}},{key:"onEditorChange",value:function(e,t){this.setState({post:{html:e,editorState:t}})}},{key:"onDiscard",value:function(){confirm("Are you sure you want to discard this reply?")&&this.props.onDiscard()}},{key:"onTagsClick",value:function(){this.isPostButtonDisabled||this.setState({isTagsModalOpen:!0,tagsModalOpenCount:this.state.tagsModalOpenCount+1})}},{key:"onRequestCloseTagsModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];if(t){if(this.onAddOrEditPost(null,n)==this.POSTING_STATUS.NEEDS_MORE_TAGS)return}this.setState({isTagsModalOpen:!1})}},{key:"getSelectedTagNamesAsSpan",value:function(){var e=this;return this.state.selectedTags.map(function(t){var n="";return n="local"==t.get("type")?e.props.tags.get(t.get("eid")).get("name"):t.get("name"),c.a.createElement("span",{className:"tag",onClick:e.onTagsClick},n)})}},{key:"updateSchedulingInfo",value:function(e,t){this.setState(function(n,o){return g()(n,{schedulingInfo:i({},e,{$set:t})})})}},{key:"render",value:function(){var e=this.props.params&&this.props.params.discussionId||this.props.discussionId,t=this.props.params&&this.props.params.postId||this.props.postId,i=this.props.params&&this.props.params.replyId||this.props.replyId,o=0!=this.props.isPage;if(!this.isDataAvailable()||o&&this.state.isPostButtonDisabled||this.props.discussionPosts.getIn([t,"isFetching"],!1))return c.a.createElement(C.a,null);var s=this.props.discussions.get(e),r=n.i(k.a)(null),a=this.state.isEditing?this.props.discussionPosts.get(t):null,l=this.state.isEditing?a.get("parent"):i||t,u=this.areTagsRequired();return void 0!==s&&void 0!==s.get("name")?c.a.createElement("div",{className:o?"page":""},o?c.a.createElement(r,{checkAuthOn:"load",to:"/discussion/"+e}):null,c.a.createElement(f.a,{transitionName:"reply-container",transitionAppear:!0,transitionAppearTimeout:200},c.a.createElement("div",{className:o?"reply-page":"reply-container"},o?c.a.createElement("div",{className:"topbar"},c.a.createElement("div",{className:"topbar-content"},c.a.createElement("div",{className:"left"},c.a.createElement("button",{className:"close-button",onClick:this.onClose},"Close")),c.a.createElement("div",{className:"shifted-right"},this.isPostButtonDisabled?c.a.createElement("div",{className:"loader-div"},c.a.createElement(w.a,null)):this.state.isEditing?c.a.createElement(O.a,{schedulingOptions:this.getSchedulingOptions(),onClick:this.onAddOrEditPost}):this.state.selectedTags.length>0||!u?c.a.createElement(O.a,{schedulingOptions:this.getSchedulingOptions(),onClick:this.onAddOrEditPost}):c.a.createElement("button",{className:"post-button",onClick:this.onTagsClick},"Next")))):null,c.a.createElement("div",{className:"reply"},c.a.createElement("div",{className:"context"},c.a.createElement("div",{className:"label"},l?"Replying to:":S.f+" on discussion:"),l?c.a.createElement(v.a,{post:this.props.discussionPosts.get(l),isTextExpandable:!0}):c.a.createElement(y.a,{discussion:this.props.discussions.get(e),isTextExpandable:!0})),c.a.createElement(E.a,{hideFollowButton:!0,userId:this.props.currentLoggedInUser,communityId:s.get("community"),isBioEditable:!0,shouldLinkToUser:!1}),c.a.createElement("div",{className:"editor"},c.a.createElement(d.a,{editorState:this.state.post.editorState,onEditorChange:this.onEditorChange,autofocus:!0,initialHTML:this.state.isEditing?a.getIn(["latestVersion","content","text"]):"",toolbarConfig:{spoiler:!0}}))),c.a.createElement("div",{className:"section"},c.a.createElement("div",{className:"add-topics section-button"},c.a.createElement("span",{onClick:this.onTagsClick}," ",this.state.selectedTags.length>=1?"Edit Tags":"Add Tags")),this.state.selectedTags.length>=1&&!this.state.isTagsModalOpen?c.a.createElement("div",{className:"tags"},this.getSelectedTagNamesAsSpan()):u?c.a.createElement("span",{className:"label tags"},"Atleast 1 required"):null),c.a.createElement("div",{className:"section post-section"},o?null:this.isPostButtonDisabled?c.a.createElement("div",{className:"loader-div"},c.a.createElement(w.a,null)):this.state.isEditing?c.a.createElement(O.a,{schedulingOptions:this.getSchedulingOptions(),onClick:this.onAddOrEditPost}):this.state.selectedTags.length>0||!u?c.a.createElement(O.a,{schedulingOptions:this.getSchedulingOptions(),onClick:this.onAddOrEditPost}):c.a.createElement("button",{className:"post-button",onClick:this.onTagsClick},"Next"),o||this.isPostButtonDisabled?null:c.a.createElement("div",{className:"delete",onClick:this.onDiscard})),c.a.createElement(I.a,{isOpen:this.state.isTagsModalOpen,onRequestClose:this.onRequestCloseTagsModal,html:this.state.post.html,discussionId:e,parent:t,selectedTags:this.state.selectedTags,updateSelectedTags:this.updateSelectedTags,clearState:this.props.clearState,useBackendIsSelected:1==this.state.tagsModalOpenCount,shouldAllowDirectPosting:!0,schedulingOptions:this.getSchedulingOptions()})))):c.a.createElement(C.a,null)}}]),t}(c.a.PureComponent),L=n.i(u.connect)(a,{addPost:b._41,editPost:b._42,fetchDiscussion:b.D,fetchDiscussionMetadata:b.e,fetchDiscussionPost:b._43,clearState:b._15})(n.i(p.withRouter)(x))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{searchResults:e.get("search"),discussions:e.get("discussions"),discussionPosts:e.get("discussionPosts"),isFetchingGlobalSearch:e.get("isFetchingGlobalSearch")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Search",function(){return N}),n.d(t,"SearchContainer",function(){return P});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(887)),p=n(15),d=(n.n(p),n(17)),h=n(58),f=n(38),m=n(972),g=n(889),v=(n(1135),n(1306)),y=n(1307),b=n(1059),k=n(1058),E=n(932),C=n(927),w=n(39),I=(n.n(w),n(97)),S=(n(134),n(324)),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(e){function t(e){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.search=s.search.bind(s),s.onChange=s.onChange.bind(s),s.isFetchingSearch=!1,s.clearQuery=s.clearQuery.bind(s),s.shouldShowType=s.shouldShowType.bind(s);var r=n.i(h.c)("q")||"";return s.state={query:r,deferredSearchQuery:null},s}return s(t,e),O(t,[{key:"componentWillReceiveProps",value:function(e){this.props.params.filter!=e.params.filter&&this.search(this.state.query,e.params.filter)}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.filter,n=0!=this.props.isPage;void 0!=e&&(t="top"==t?"all":t,this.props.search(e,t),this.setState({query:e}),n&&history.replaceState("",document.title,location.pathname+"?q="+e))}},{key:"onChange",value:function(e){var t=this;this.isFetchingSearch||d.c?this.setState({deferredSearchQuery:e}):(this.isFetchingSearch=!0,this.search(e),window.setTimeout(function(){if(t.state.deferredSearchQuery){var e=t.state.deferredSearchQuery;t.isFetchingSearch=!1,t.setState({deferredSearchQuery:null}),t.onChange(e)}else t.isFetchingSearch=!1},500))}},{key:"shouldShowType",value:function(e){var t=this.props.params.filter||"top";return 0!=this.props.isPage?"top"==t||t==e:"paths"==e||"courses"==e||"tutorials"==e}},{key:"clearQuery",value:function(){this.setState({query:""})}},{key:"isFilterTop",value:function(){return"top"==(this.props.params.filter||"top")}},{key:"render",value:function(){var e=this,t=this.props.searchResults.get(this.state.query),n=this.props.params.filter||"top",i=0!=this.props.isPage;if(t){if(t=t.toJS(),this.shouldShowType("paths"))var o=t.paths?t.paths.map(function(t,n){return l.a.createElement(v.a,{discussion:e.props.discussions.get(t)})}):[];if(this.shouldShowType("courses"))var s=t.courses?t.courses.map(function(t,n){return l.a.createElement(v.a,{discussion:e.props.discussions.get(t)})}):[];if(this.shouldShowType("tutorials"))var r=t.tutorials?t.tutorials.map(function(t,n){return l.a.createElement(y.a,{discussion:e.props.discussions.get(t)})}):[];if(this.shouldShowType("communities"))var a=t.communities?t.communities.map(function(e,t){return l.a.createElement(m.a,{communityId:e,shouldLinkToCommunity:!0,hasFollow:!0})}):[];if(this.shouldShowType("users"))var c=t.users?t.users.map(function(e,t){return l.a.createElement(g.a,{key:t,userId:e,shouldLinkToUser:!0})}):[];if(this.shouldShowType("discussions"))var h=t.discussions?t.discussions.map(function(t,n){return l.a.createElement(p.Link,{className:"no-decoration",to:"/discussion/"+t},l.a.createElement(k.a,{discussion:e.props.discussions.get(t),ignorePostsCount:!0}))}):[];if(this.shouldShowType("posts"))var f=t.posts?t.posts.map(function(t,n){var i=e.props.discussionPosts.get(t);return l.a.createElement(p.Link,{className:"no-decoration",to:"/discussion/"+e.props.discussions.get(i.get("discussion")).get("eid")+"/all/"+t},l.a.createElement(b.a,{post:i}))}):[]}var w=[{name:"top",linkTo:"/search/top",isActive:"top"==n,displayName:"Top"},{name:"paths",linkTo:"/search/paths",isActive:"paths"==n,displayName:"Paths"},{name:"courses",linkTo:"/search/courses",isActive:"courses"==n,displayName:"Courses"},{name:"tutorials",linkTo:"/search/tutorials",isActive:"tutorials"==n,displayName:"Tutorials"},{name:"communities",linkTo:"/search/communities",isActive:"communities"==n,displayName:"Communities"},{name:"users",linkTo:"/search/users",isActive:"users"==n,displayName:"People"},{name:"discussions",linkTo:"/search/discussions",isActive:"discussions"==n,displayName:"Discussions"},{name:"posts",linkTo:"/search/posts",isActive:"posts"==n,displayName:S.b}],O=w.map(function(t){return l.a.createElement(p.Link,{to:t.linkTo+(e.state.query?"?q="+e.state.query:"")},l.a.createElement("div",{className:t.isActive?"active tab-link":"tab-link"},t.displayName,l.a.createElement("div",{className:"line"})))}),N=l.a.createElement("div",{className:"search-results"},this.props.isFetchingGlobalSearch&&(!this.props.isPage&&this.state.query||this.props.isPage)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(I.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null,t&&!this.props.isFetchingGlobalSearch?l.a.createElement("div",null,this.shouldShowType("paths")&&o.length>0?l.a.createElement("div",{className:"list paths-list"},l.a.createElement("div",{className:"section-heading"},"Paths"),l.a.createElement("div",{className:"section-items"},i?o:o.slice(0,3))):"paths"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},"Paths"):null,l.a.createElement("div",{className:"onboarding-text-label"},l.a.createElement("br",null),""!=this.state.query?"Sorry, your search did not match any paths.":"Search for a path above to see results.")):null,this.shouldShowType("courses")&&s.length>0?l.a.createElement("div",{className:"list courses-list"},l.a.createElement("div",{className:"section-heading"},"Courses"),l.a.createElement("div",{className:"section-items"},i?s:s.slice(0,3))):"courses"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},"Courses"):null,l.a.createElement("div",{className:"onboarding-text-label"},l.a.createElement("br",null),""!=this.state.query?"Sorry, your search did not match any courses.":"Search for a course above to see results.")):null,this.shouldShowType("tutorials")&&r.length>0?l.a.createElement("div",{className:"list tutorials-list"},l.a.createElement("div",{className:"section-heading"},"Tutorials"),l.a.createElement("div",{className:"section-items"},i?r:r.slice(0,3))):"tutorials"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},"Tutorials"):null,l.a.createElement("div",{className:"onboarding-text-label"},l.a.createElement("br",null),""!=this.state.query?"Sorry, your search did not match any tutorials.":"Search for a tutorial above to see results.")):null,this.shouldShowType("communities")&&a.length>0?l.a.createElement("div",{className:"list communities-list"},l.a.createElement("div",{className:"section-heading"},"Communities"),l.a.createElement("div",{className:"section-items"},a)):"communities"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},"Communities"):null,l.a.createElement("div",{className:"onboarding-text-label"},l.a.createElement("br",null),"Sorry, your search did not match any communities",this.state.query.length<4?l.a.createElement("span",null,".",l.a.createElement("br",null),"Try typing in a few more characters!"):"!",l.a.createElement("br",null),l.a.createElement("br",null),"Didn't find a community you were looking for?",l.a.createElement("br",null),"You should request one ",l.a.createElement(p.Link,{to:"/discussion/a422f5395ba742aba1802bcd62bcf8e0/main"},"here."))):null,this.shouldShowType("discussions")&&h.length>0?l.a.createElement("div",{className:"list discussions-list"},l.a.createElement("div",{className:"section-heading"},"Discussions"),l.a.createElement("div",{className:"section-items"},h)):"discussions"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},"Discussions"):null,l.a.createElement("div",{className:"onboarding-text-label"},l.a.createElement("br",null),""!=this.state.query?"Sorry, your search did not match any discussions.":"Search for a discussion above to see results.")):null,this.shouldShowType("posts")&&f.length>0?l.a.createElement("div",{className:"list posts-list"},l.a.createElement("div",{className:"section-heading"},S.b),l.a.createElement("div",{className:"section-items"},f)):"posts"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},S.b):null,l.a.createElement("div",{className:"onboarding-text-label"},l.a.createElement("br",null),""!=this.state.query?"Sorry, your search did not match any "+S.e+".":"Search for "+S.e+" above to see results.")):null,this.shouldShowType("users")&&c.length>0?l.a.createElement("div",{className:"list user-list"},l.a.createElement("div",{className:"section-heading"},"People"),l.a.createElement("div",{className:"section-items"},c)):"users"==this.props.params.filter?l.a.createElement("div",{className:"list"},this.isFilterTop()?l.a.createElement("div",{className:"section-heading"},"People"):null,l.a.createElement("div",{className:"onboarding-text-label"},""!=this.state.query?l.a.createElement("span",null,l.a.createElement("br",null),"Sorry, your search did not match any users!",l.a.createElement("br",null),"Are you sure you spelled it right? "):l.a.createElement("span",null,l.a.createElement("br",null),"Search for a user above to see results."))):null,i||""==this.state.query?null:l.a.createElement(p.Link,{to:"/search?q="+this.state.query,className:"label block centered-text bold large uppercase with-margin"},"See all results")):null);return l.a.createElement("div",{className:i?"page search-page":""==this.state.query?"search-container":"search-container with-results"},i?l.a.createElement(u.a,{routerGoBack:!0}):null,l.a.createElement(C.a,{initialSearchTerm:this.state.query,query:this.state.deferredSearchQuery||this.state.query,placeholder:this.props.placeholder,onChange:this.onChange,isPage:this.props.isPage,hasBorder:!0,clearQuery:this.clearQuery,autoFocus:i}),i?l.a.createElement("div",{className:"tabs-bar"},O):null,i||""!=this.state.query?N:null,!d.a&&i?l.a.createElement(E.a,{filters:w,showFilters:!0}):null)}}]),t}(l.a.PureComponent),P=n.i(c.connect)(r,{search:f.G,clearState:f._15},null,{withRef:!0})(N)},,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{communities:e.get("communities"),users:e.get("users"),currentUser:e.get("currentLoggedInUser")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Community",function(){return S}),n.d(t,"CommunityContainer",function(){return O});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(339)),d=n.n(p),h=(n(133),n(901)),f=(n.n(h),n(325),n(134)),m=n(1433),g=n(1557),v=n(38),y=n(323),b=(n(932),n(131)),k=n(887),E=n(330),C=(n(17),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),I=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),w(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"button main",onClick:this.onClick},this.props.isFollowing?"Following":"Follow")}}]),t}(l.a.PureComponent),S=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDataAvailable=n.isDataAvailable.bind(n),n.fetchCommunity=n.fetchCommunity.bind(n),n.fetchFeed=n.fetchFeed.bind(n),n.fetchCommunityMetadata=n.fetchCommunityMetadata.bind(n),n.createMarkup=n.createMarkup.bind(n),n.toggleCommunityFollow=n.toggleCommunityFollow.bind(n),n.toggleCommunityJoin=n.toggleCommunityJoin.bind(n),n.loadMore=n.loadMore.bind(n),n.logEvent=n.logEvent.bind(n),n.fetchCommunity(),n.fetchCommunityMetadata(),n.logEvent(),n}return s(t,e),w(t,[{key:"logEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.communityId,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.filter;"main"==t||null==t?this.props.logEvent({type:"view",payload:{obj:e,obj_type:"Community",related_info:"main"}}):this.props.logEvent({type:"view",payload:{events:[{obj:e,obj_type:"Community",related_info:"channel"},{obj:t,obj_type:"CommunityChannel",related_info:"feed"}]}})}},{key:"fetchCommunity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.filter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.communityId,n="main"!=e&&null!=e?e:null;this.props.fetchCommunity(t,n)}},{key:"fetchCommunityMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.filter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.communityId,n="main"!=e&&null!=e?e:null;this.fetchFeed(e,t),this.props.fetchCommunityMetadata(t,n,["members","moderators","invite","topics","accessLevel","pendingJoinRequestsCount","leaderboard","relatedCommunities","isStub","patreon","groupThreads","canContribute"],{membersLimit:7})}},{key:"fetchFeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.filter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.communityId,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e||"main";if(!n||!this.props.communities.getIn([t,"feed",i],null)){var o="main"!=e&&null!=e?e:null;this.props.fetchCommunityMetadata(t,o,["feed"])}}},{key:"loadMore",value:function(){var e=this.props.params.filter,t=this.props.params.communityId;this.fetchFeed(e,t,!1)}},{key:"componentWillReceiveProps",value:function(e){if(e.params.communityId!=this.props.params.communityId){var t="main"!=e.params.filter&&null!=e.params.filter?e.params.filter:null;this.fetchCommunity(t,e.params.communityId),this.fetchCommunityMetadata(t,e.params.communityId),this.logEvent(e.params.communityId,t)}else if(e.params.filter!=this.props.params.filter){var n="main"!=e.params.filter&&null!=e.params.filter?e.params.filter:null;this.fetchFeed(e.params.filter,this.props.params.communityId),this.logEvent(this.props.params.communityId,n)}}},{key:"isDataAvailable",value:function(){var e=this.props.params.communityId,t=this.props.communities.get(e);return void 0!=t&&void 0!=t.get("name")&&void 0!=t.getIn(["isMember",this.props.currentUser],void 0)&&void 0!=t.getIn(["isModerator",this.props.currentUser],void 0)}},{key:"createMarkup",value:function(e){return n.i(b.i)(e)}},{key:"toggleCommunityFollow",value:function(){var e=this.props.params.communityId;this.props.toggleCommunityFollow(e)}},{key:"toggleCommunityJoin",value:function(){var e=this.props.params.communityId;this.props.toggleCommunityJoin(e)}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement(d.a,{title:"Community on CommonLounge"},l.a.createElement("div",{className:"page community-page"},l.a.createElement(k.a,{noBack:!0}),l.a.createElement(f.a,null)));var t=(n.i(y.a)(I),this.props.params.filter||"main"),i=this.props.params.communityId,o=this.props.communities.get(i),s=o.get("isMember").get(this.props.currentUser),r=o.get("canContribute"),a=(o.get("isFollowing").get(this.props.currentUser),o.get("members")?o.get("members").map(function(t,n){return n>6?null:l.a.createElement(u.Link,{to:"/community/"+i+"/members"},l.a.createElement(E.b,{offsetLeft:21,offsetTop:-43,userId:t,className:"avatar-image",size:"30",name:e.props.users.get(t).get("displayName"),src:e.props.users.get(t).get("avatarUrl"),key:n}))}):null),c=l.a.createElement(g.a,C({},this.props,{fetchCommunity:this.fetchCommunity,isDataAvailable:this.isDataAvailable,memberImageNodes:a,activeFilter:this.props.params.filter?this.props.params.filter:"main",groupThreadId:this.props.params.groupThreadId,toggleCommunityFollow:this.toggleCommunityFollow,toggleCommunityJoin:this.toggleCommunityJoin,community:o,createMarkup:this.createMarkup,loadMore:this.loadMore,parentRouter:this.props.router,parentRoute:this.props.route})),p=("main"==t?this.props.params.communityId:this.props.params.communityId,null);return this.props.params.groupThreadId?p=null:r&&!s&&(p=l.a.createElement(m.a,{community:o,isVisible:!0})),l.a.createElement(d.a,{title:o.get("name")+" Community | CommonLounge"},l.a.createElement("div",null,c,p))}}]),t}(l.a.PureComponent),O=n.i(c.connect)(r,{logEvent:v.c,fetchCommunity:v._38,fetchCommunityMetadata:v.X,fetchUserMetadata:v.l,toggleCommunityFollow:v._4,toggleCommunityJoin:v._5})(n.i(u.withRouter)(S))},,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions"),communities:e.get("communities"),myCommunities:e.get("myCommunities"),tagsMap:e.get("tags"),newDiscussionRecommendation:e.get("newDiscussionRecommendation"),pendingDiscussionMetadataRequestsCount:e.get("pendingDiscussionMetadataRequestsCount"),users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser"),visitedPaths:e.get("visitedPaths"),hasFetchedMyCommunities:e.get("hasFetchedMyCommunities"),promoPromptHidden:e.get("promoPromptHidden")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Discussion",function(){return ie}),n.d(t,"DiscussionContainer",function(){return oe});var a=n(1),l=n.n(a),c=n(53),u=n.n(c),p=n(37),d=(n.n(p),n(15)),h=(n.n(d),n(339)),f=n.n(h),m=n(39),g=(n.n(m),n(59)),v=n.n(g),y=n(132),b=n.n(y),k=n(887),E=n(914),C=n(989),w=(n.n(C),n(1044)),I=n(1572),S=n(973),O=n(1003),N=n(972),P=n(932),_=n(1270),T=(n(1433),n(1305)),x=(n(1580),n(1579),n(1436)),L=n(1446),M=n(1562),j=(n(1089),n(140),n(324),n(134)),D=n(1273),A=(n.n(D),n(325),n(323)),R=n(833),F=n(203),U=(n.n(F),n(32)),B=n(205),H=n(17),q=n(889),W=n(58),z=n(991),V=n(907),Q=n(38),Y=n(1004),G=n(1061),J=n(1296),K=n(1573),$=n(1613),X=(n.n($),n(208)),Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ee=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),Z(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"mark-as-completed",onClick:this.props.onClick})}}]),t}(l.a.PureComponent),te=n.i(A.a)(Y.a,A.i),ne=n.i(A.a)(ee),ie=function(e){function t(e){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.getInitialState=s.getInitialState.bind(s),s.updatePage=s.updatePage.bind(s),s.state=s.getInitialState(),s.isDataAvailable=s.isDataAvailable.bind(s),s.onRequestCloseInviteParticipantsModal=s.onRequestCloseInviteParticipantsModal.bind(s),s.fetchData=s.fetchData.bind(s),s.openInviteModal=s.openInviteModal.bind(s),s.openCrossPostModal=s.openCrossPostModal.bind(s),s.onRequestCloseCrossPostModal=s.onRequestCloseCrossPostModal.bind(s),s.routerWillLeave=s.routerWillLeave.bind(s),s.clearDisplayWarning=s.clearDisplayWarning.bind(s),s.onReplyDiscard=s.onReplyDiscard.bind(s),s.getFilterFromProps=s.getFilterFromProps.bind(s),s.hideReplyButton=s.hideReplyButton.bind(s),s.shouldShowAllTag=s.shouldShowAllTag.bind(s),s.getDiscussion=s.getDiscussion.bind(s),s.onPotentialMetadataHeightChange=s.onPotentialMetadataHeightChange.bind(s),s.onToggleSidebar=s.onToggleSidebar.bind(s),s.onCloseSidebar=s.onCloseSidebar.bind(s),s.handleQueryParametersForReview=s.handleQueryParametersForReview.bind(s),s.handleQueryParametersForSuggestedEdit=s.handleQueryParametersForSuggestedEdit.bind(s),s.handleQueryParametersForDiscussionCreation=s.handleQueryParametersForDiscussionCreation.bind(s),s.onClickTOC=s.onClickTOC.bind(s),s.scrollToHash=s.scrollToHash.bind(s),s.handleHashChange=s.handleHashChange.bind(s),s.onSubscribeClick=s.onSubscribeClick.bind(s),s.onUnSubscribeClick=s.onUnSubscribeClick.bind(s),s.onFeedbackFormModalClose=s.onFeedbackFormModalClose.bind(s),s.getHashEl=s.getHashEl.bind(s),s.onScroll=s.onScroll.bind(s),s.checkIfValidDiscussion=s.checkIfValidDiscussion.bind(s),s.getDisplayedPlaylist=s.getDisplayedPlaylist.bind(s),s.toggleDiscussionCompleted=s.toggleDiscussionCompleted.bind(s),s.showHashSection=s.showHashSection.bind(s),s.areSectionsActive=s.areSectionsActive.bind(s),s.setMode=s.setMode.bind(s),s.onSectionsComplete=s.onSectionsComplete.bind(s),s.doesVideoExist=s.doesVideoExist.bind(s),s.isScrollMode=s.isScrollMode.bind(s),s.hideSuggestedEditMessage=s.hideSuggestedEditMessage.bind(s),s.getAdditionalHeight=s.getAdditionalHeight.bind(s),s.fetchData(),s.shouldDisplayWarning=!0,s.props.router.setRouteLeaveHook(s.props.route,s.routerWillLeave),s.handleQueryParametersForReview(s.props,s.state),s.handleQueryParametersForSuggestedEdit(s.props,s.state),s.handleQueryParametersForDiscussionCreation(),s.checkIfValidDiscussion(),n.i(U.f)()&&window.addEventListener("scroll",s.onScroll),n.i(U.f)()&&"onhashchange"in window&&window.addEventListener("hashchange",s.handleHashChange),s}return s(t,e),Z(t,[{key:"checkIfValidDiscussion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.params.discussionId,n=e.discussions.get(t);n&&n.getIn(["typeInfo","isPath"],!1)&&d.browserHistory.replace("/path/"+t)}},{key:"getInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.scrolledToHash=null,this.animationFrameId=n.i(U.h)(this.updatePage);e.discussions.getIn([e.params.discussionId,"typeInfo","type"],null);return{isInviteParticipantsModalOpen:!1,isFeedbackFormDisplayed:!1,prompt:null,onlyShowExternalShares:!1,isCrossPostModalOpen:!1,replyingToDiscussionId:null,replyingToPostId:null,replyingToReplyId:null,lastWindowPageYOffset:null,intervalID:null,isDiscussionCollapsed:"main"==this.getFilterFromProps(),isDiscussionSidebarOpen:!1,isContributorsListCollapsed:!0,isFAQShown:!0,isPartOfCoursesShown:!1,pageOffsets:{discussionMetadataOffsets:{start:null,end:null},headingOffsets:{}},updatePageOffsets:!0,readingProgress:0,currentActiveSection:null,hasScrolledPastDiscussionMetadata:!1,mode:"scroll",currentSectionIndex:null,numSections:null,adminHeaderSectionVisible:!1}}},{key:"doesVideoExist",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.discussions.getIn([e.params.discussionId,"videoInfo","video","outputConfig"],null)}},{key:"setMode",value:function(e,t,n){var i={mode:e,currentSectionIndex:t,numSections:n};this.state.mode!=e&&"scroll"==e&&(this.scheduledAnimationFrame=!1,i.updatePageOffsets=!0),this.setState(i)}},{key:"handleQueryParametersForReview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"true"===n.i(W.c)("review")&&(n.i(U.f)()&&!H.b&&e.router.replace(window.location.pathname),t?t.isFeedbackFormDisplayed=!0:this.setState({isFeedbackFormDisplayed:!0}))}},{key:"handleQueryParametersForSuggestedEdit",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null);"true"===n.i(W.c)("ssm")&&(e?e.isSuggestedEditMessageDisplayed=!0:this.setState({isSuggestedEditMessageDisplayed:!0}),setTimeout(this.hideSuggestedEditMessage,8e3))}},{key:"hideSuggestedEditMessage",value:function(){this.setState({isSuggestedEditMessageDisplayed:!1})}},{key:"handleQueryParametersForDiscussionCreation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.discussions&&e.params.discussionId&&"true"===n.i(W.c)("dc")&&(n.i(U.f)()&&e.router.replace(window.location.pathname),e.discussions.hasIn([e.params.discussionId,"schedulingInfo","type"]))){if("PUBLISHED"!=e.discussions.getIn([e.params.discussionId,"schedulingInfo","type"]))return;this.setState({isInviteParticipantsModalOpen:!0,onlyShowExternalShares:!0,prompt:!0})}}},{key:"onPotentialMetadataHeightChange",value:function(){this.isScrollMode()&&this.setState({updatePageOffsets:!0})}},{key:"getFilterFromProps",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).params.filter||"main"}},{key:"clearDisplayWarning",value:function(){this.shouldDisplayWarning=!1}},{key:"onReplyDiscard",value:function(){this.setState({replyingToDiscussionId:null,replyingToPostId:null,replyingToReplyId:null})}},{key:"onSubscribeClick",value:function(){this.props.updateDiscussionSubscription(this.props.params.discussionId,!0,[])}},{key:"onUnSubscribeClick",value:function(){this.props.updateDiscussionSubscription(this.props.params.discussionId,!1,[])}},{key:"getAdditionalHeight",value:function(){return this.proPromoPromptHeight=H.c?0:this.props.promoPromptHidden?0:this.proPromoPromptHeight||document.getElementsByClassName("banner promo-prompt-container")&&document.getElementsByClassName("promo-prompt-container")[0]?document.getElementsByClassName("promo-prompt-container")[0].clientHeight:0,this.proPromoPromptHeight}},{key:"updatePage",value:function(){if(this.isScrollMode()){if(!this.state.updatePageOffsets){var e=100*(this.lastScrollY-this.state.pageOffsets.discussionMetadataOffsets.start)/(this.state.pageOffsets.discussionMetadataOffsets.end-500-this.state.pageOffsets.discussionMetadataOffsets.start);e<0&&(e=0),e>100&&(e=100);var t=null,i=!1;if(!H.a){var o=this.getDiscussion(),s=o.getIn(["toc"])||n.i(m.List)();for(var r in s.toJS())if(o.getIn(["toc",r,"href"],null)&&this.state.pageOffsets.headingOffsets[o.getIn(["toc",r,"href"],null)]&&this.lastScrollY<this.state.pageOffsets.headingOffsets[o.getIn(["toc",r,"href"],null)].start){r>0&&(t=o.getIn(["toc",r-1,"href"],null));break}!t&&s.size>0&&this.lastScrollY<this.state.pageOffsets.discussionMetadataOffsets.end&&this.lastScrollY>this.state.pageOffsets.headingOffsets[o.getIn(["toc",s.size-1,"href"],null)].start&&(t=o.getIn(["toc",s.size-1,"href"],null)),this.lastScrollY>this.state.pageOffsets.discussionMetadataOffsets.end&&(i=!0)}this.setState({readingProgress:e,currentActiveSection:t,hasScrolledPastDiscussionMetadata:i})}this.scheduledAnimationFrame=!1}}},{key:"handleHashChange",value:function(){this.scrollToHash(window.location.hash,!1)}},{key:"onScroll",value:function(e){this.lastScrollY=window.scrollY,this.scheduledAnimationFrame||(this.scheduledAnimationFrame=!0,n.i(U.h)(this.updatePage))}},{key:"areSectionsActive",value:function(){return"section"==this.state.mode}},{key:"isScrollMode",value:function(){return"scroll"==this.state.mode}},{key:"showHashSection",value:function(e){var t=n.i(z.b)(this,["refs","dmc","refs","wrappedInstance","refs","content","refs","content","refs","wrappedInstance","refs","component","refs","wrappedInstance","showHash"]);return!!t&&t(e)}},{key:"getHashEl",value:function(e){var t=document.getElementsByClassName("user-content-"+e)[0];if(!t&&this.props.discussions){var i=this.props.discussions.getIn([this.props.params.discussionId,"toc"],n.i(m.List)()).map(function(e){return e.get("href")}).toJS(),o=n.i(B.j)(e,i),s=o.minItem;if(!(o.minDistance<.3*e.length))return-1;t=document.getElementsByClassName("user-content-"+s)[0]}return t}},{key:"scrollToHash",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(""==e){var i=window.location;return this.showHashSection(0)||n.i(V.b)(0,600),this.scrolledToHash="",void(""!=i.hash&&history.pushState("",document.title,i.pathname+i.search))}if("#"==e.substr(0,1)&&(e=e.substr(1)),"faqs"==e&&this.setState({isFAQShown:!0}),this.scrolledToHash!=e||this.scrolledToHash==e&&t){var o=this.showHashSection(e),s=this.getHashEl(e);if(s){this.scrolledToHash=e,location.hash=e;var r=this.refs["tabs-bar"]&&H.a?45:0;o||n.i(V.b)(s.offsetTop-r-50-this.getAdditionalHeight(),600)}}}},{key:"onClickTOC",value:function(e,t){var n=this;-1==this.scrollToHash(t,!0)&&(this.refs&&this.refs.dmc&&this.refs.dmc.getWrappedInstance()&&this.refs.dmc.getWrappedInstance().refs&&this.refs.dmc.getWrappedInstance().refs.playlistSectionContainer&&this.refs.dmc.getWrappedInstance().refs.playlistSectionContainer.getWrappedInstance()&&this.refs.dmc.getWrappedInstance().refs.playlistSectionContainer.getWrappedInstance().unCollapseList(),setTimeout(function(){return n.scrollToHash(t,!0)},5))}},{key:"routerWillLeave",value:function(e){if(H.h)return!0;var t=e.pathname;"/"==t[0]&&(t=t.slice(1,t.length)),"/"==t[t.length-1]&&(t=t.slice(0,t.length-1));var n=t.split("/");if("post"!=n[n.length-1])return null==this.state.replyingToDiscussionId||(this.shouldDisplayWarning?!!window.confirm("You haven't finished your post yet. Do you want to leave without finishing?")&&(this.setState({replyingToDiscussionId:null,replyingToPostId:null,replyingToReplyId:null}),!0):(this.setState({replyingToDiscussionId:null,replyingToPostId:null,replyingToReplyId:null}),!0));var i=n[1],o=n.length>3?n[3]:null,s=n.length>5?n[5]:null;return this.setState({replyingToDiscussionId:i,replyingToPostId:o,replyingToReplyId:s}),this.shouldDisplayWarning=!0,!1}},{key:"fetchData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.fetchDiscussion(e.params.discussionId),e.fetchDiscussionMetadata(e.params.discussionId,null,["typeInfo","playlists","schedulingInfo","contributionInfo","rating"]),e.fetchDiscussionMetadata(e.params.discussionId,null,["community","channel","originalCommunity","xPoster","isCommunityModerator","userMessage","tags","editableInfo","hasBookmarked","ah","licensing_info","videoInfo"])}},{key:"isDataAvailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.params.discussionId,n=e.discussions.get(t);return void 0!=n&&void 0!=n.get("name")&&void 0!=n.get("creator")&&n.get("dtCreated")}},{key:"openInviteModal",value:function(){this.setState({isInviteParticipantsModalOpen:!0})}},{key:"onToggleSidebar",value:function(){this.setState({isDiscussionSidebarOpen:!this.state.isDiscussionSidebarOpen})}},{key:"onCloseSidebar",value:function(){this.setState({isDiscussionSidebarOpen:!1})}},{key:"onRequestCloseInviteParticipantsModal",value:function(){this.setState({isInviteParticipantsModalOpen:!1,prompt:null,onlyShowExternalShares:!1})}},{key:"openCrossPostModal",value:function(){this.setState({isCrossPostModalOpen:!0})}},{key:"onRequestCloseCrossPostModal",value:function(){this.setState({isCrossPostModalOpen:!1})}},{key:"hideReplyButton",value:function(){return!this.props.discussions.get(this.props.params.discussionId).get("canContribute")&&this.props.currentLoggedInUser&&!this.props.users.get(this.props.currentLoggedInUser).get("isLurker")}},{key:"shouldShowAllTag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.params.discussionId;return!1===e.discussions.get(t).get("isClusterHidden")}},{key:"componentDidUpdate",value:function(){if(this.isDataAvailable()&&(location.hash&&this.scrollToHash(location.hash,!1),this.state.updatePageOffsets&&this.isScrollMode()&&u.a.findDOMNode(this.refs.dmc))){var e=this.getDiscussion(),t=this.state.pageOffsets;t.discussionMetadataOffsets={start:u.a.findDOMNode(this.refs.dmc).getBoundingClientRect().top+window.scrollY,end:u.a.findDOMNode(this.refs.dmc).getBoundingClientRect().bottom+window.scrollY};var i=e.getIn(["toc"])||n.i(m.List)();for(var o in i.toJS())if(e.getIn(["toc",o,"href"],null)){var s=e.getIn(["toc",o,"href"],null),r=this.getHashEl(s);r&&(t.headingOffsets[s]={start:r.offsetTop-200})}this.setState({updatePageOffsets:!1,pageOffsets:t})}}},{key:"getDiscussion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.params.discussionId;return e.discussions.get(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.getDiscussion(e);this.checkIfValidDiscussion(e),this.isDataAvailable(e)&&this.props.params.discussionId==e.params.discussionId||((!t||t&&!t.get("isFetching"))&&(this.setState(this.getInitialState(e)),this.fetchData(e)),this.scrolledToHash=null),this.props.discussions&&e.discussions&&this.props.params.discussionId==e.params.discussionId&&(e.discussions.getIn([e.params.discussionId,"schedulingInfo","type"])!=this.props.discussions.getIn([this.props.params.discussionId,"schedulingInfo","type"])&&this.handleQueryParametersForDiscussionCreation(e),this.handleQueryParametersForReview(e),this.setState({updatePageOffsets:!0})),this.props.router.setRouteLeaveHook(e.route,this.routerWillLeave)}},{key:"onFeedbackFormModalClose",value:function(){this.setState({isFeedbackFormDisplayed:!1}),H.b&&this.props.router.replace(window.location.pathname)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleEscKey,!1)}},{key:"componentWillUnmount",value:function(){n.i(U.f)()&&window.removeEventListener("scroll",this.onScroll),document.removeEventListener("keydown",this._handleEscKey,!1),"onhashchange"in window&&window.removeEventListener("hashchange",this.handleHashChange)}},{key:"getDisplayedPlaylist",value:function(){var e=this.getDiscussion(),t="PLAYLIST"==e.getIn(["typeInfo","type"]),n=!t&&e.get("playlists")&&e.get("playlists").get(0);if(H.m&&n){var i=e.get("playlists").find(function(e){return e.get("eid")==H.m});i&&(n=i)}return n}},{key:"toggleDiscussionCompleted",value:function(){if(!this.getDiscussion().get("canView"))return void alert("You can't mark this article as completed without being a Pro member.");this.props.toggleDiscussionCompleted(this.props.params.discussionId,this.getDisplayedPlaylist().get("discussion"))}},{key:"onSectionsComplete",value:function(e,t){this.refs.playlistItemSection.getWrappedInstance().handleToggleCompleted(null,e,t)}},{key:"render",value:function(){var e=this,t=this.props.params.discussionId;if(!this.isDataAvailable())return l.a.createElement(f.a,{title:"CommonLounge"},l.a.createElement("div",null,l.a.createElement(k.a,{routerGoBack:!0,showSignUpInfoIfLoggedOut:!0,postSignInSignUpTo:"/discussion/"+t,onToggleSidebar:this.onToggleSidebar,isRightSidebarOpen:this.state.isDiscussionSidebarOpen,contributeURL:null},l.a.createElement(S.a,{activeCommunityId:null})),l.a.createElement(j.a,null)));var i=this.getFilterFromProps(),o=this.props.discussions.get(t),s=!o.get("canContribute"),r=o.get("isModerator"),a=o.get("community"),c=(this.props.myCommunities.get("following").size,o.get("isWiki"),a!=o.get("originalCommunity")),u=o.get("xPoster")&&this.props.users.get(o.get("xPoster"))?this.props.users.get(o.get("xPoster")):null,p=u?l.a.createElement("span",null,"by ",l.a.createElement(d.Link,{className:"no-decoration",to:"/profile/"+u.get("eid")},u.get("displayName")," ")):null,h=this.props.users.getIn([this.props.currentLoggedInUser,"isSuperModerator"],!1),g=("active"==this.props.users.getIn([this.props.currentLoggedInUser,"plan","status"])&&this.props.users.getIn([this.props.currentLoggedInUser,"plan","type"]),o.get("invite")),y=o.get("typeInfo"),D=y&&"AMA"==y.get("type"),A="PLAYLIST"==o.getIn(["typeInfo","type"]),F=(o.getIn(["typeInfo","type"]),o.getIn(["typeInfo","type"]),o.getIn(["typeInfo","type"]),!0);D&&(this.props.users.getIn([y.get("host"),"firstName"],""),F=this.props.currentLoggedInUser!=y.get("host")),A&&n.i(H.o)(o.getIn(["typeInfo","eid"]));var U=c?this.props.communities.get(o.get("originalCommunity")):null,B=(o.get("tags")&&o.get("tags").map(function(n,o){return l.a.createElement(d.Link,{to:"/discussion/"+t+"/"+n,key:n},l.a.createElement("div",{className:i==n?"active tab-link":"tab-link","data-filter":n,ref:"tab-"+n},e.props.tagsMap.get(n).get("name"),l.a.createElement("div",{className:"line"})))}),l.a.createElement(I.a,{activeFilter:i,discussionId:t,displayedPostId:this.props.params.displayedPostId,replyingToDiscussionId:this.state.replyingToDiscussionId,isContributionBlocked:s,refetch:!0,canViewDiscussion:o.get("canView"),showPostReplySharingPrompt:F})),z=(o.get("tags")&&o.get("tags").size,a?this.props.communities.get(a):null),V=this.state.prompt?"Thanks for contributing to "+(z?"<strong>"+z.get("name")+"</strong>":"CommonLounge")+". "+(z?"This community is still in its early stages and growing thanks to contributions like yours! <br /><br />Would you like to share your discussion and spread the word to help the community grow faster?":"We are still in our early stages and growing thanks to contributions like yours! <br /><br />Would you like to share your discussion and spread the word so that we can bring CommonLounge to more people?"):null,Q=null,Y=null,$=null,Z=!1,ee=o.hasIn(["typeInfo","subscription"])?o.getIn(["typeInfo","subscription","hasSubscribed"]):null,ie=o.getIn(["typeInfo","subscribersCount"],0),oe=o.get("hasCompleted")||!1,se=this.getDisplayedPlaylist();se&&(Q=se?se.getIn(["items","prevDiscussionIds"],n.i(m.List)()).get(-1):null,Y=se?se.getIn(["items","nextDiscussionIds"],n.i(m.List)()).get(0):null);var re=(!A&&o.get("playlists")&&o.get("playlists").map(function(t){return l.a.createElement(O.a,{discussion:e.props.discussions.get(t.get("discussion")),forceShowRightImage:!0})}),null);if(A){var ae=o.getIn(["typeInfo","items","ordering"],n.i(m.List)()).filter(function(e){return"discussion"==e.get("type")}).map(function(e){return e.get("eid")}).toJS();re=ae&&ae[0],$=this.props.currentLoggedInUser?o.getIn(["typeInfo","nextUncompletedDiscussion"]):re,Z=re==$}var le=(o.getIn(["contributionInfo","contributionInfo"])||n.i(m.List)()).map(function(e){return l.a.createElement(q.a,{hideFollowButton:!0,userId:e.get("author"),shouldLinkToUser:!0,key:"contributor-"+e.get("author"),communityId:a})}),ce=l.a.createElement(q.a,{hideFollowButton:!0,userId:o.get("creator"),shouldLinkToUser:!0,communityId:a}),ue=o.get("editableInfo"),pe=ue&&"denied"!=ue,de=ue&&"allowed"==ue,he=o.getIn(["licensingInfo","canonicalUrl"],null),fe=o.getIn(["licensingInfo","licenseTitle"],null),me=o.getIn(["licensingInfo","licenseUrl"],null),ge=o.getIn(["typeInfo","prerequisites"],null),ve=o.getIn(["typeInfo","timeToComplete"],null),ye=null;if(!H.a||A)ye=null;else if(!A&&o.has("playlists"))if(se){var be=se.get("discussion");ye=[l.a.createElement("div",{className:"label justification-label"},"Part of Course:"),l.a.createElement("div",{className:"featured-cards"},l.a.createElement(O.a,{discussion:this.props.discussions.get(be)}))]}else a&&(ye=c&&U?[l.a.createElement("div",{className:"label justification-label"},"Cross posted from ",l.a.createElement(d.Link,{className:"no-decoration",to:"/community/"+o.get("originalCommunity")},U.get("name"))," ",p)]:[l.a.createElement("div",{className:"label justification-label"},"Posted in community:")],ye=ye.concat([l.a.createElement("div",{className:"community-info"},l.a.createElement(N.a,{communityId:a,shouldLinkToCommunity:!0,hasFollow:!0,to:"/community/"+a+"?action=community-follow"}))]));else ye=[l.a.createElement("div",{className:"label justification-label"}),l.a.createElement("div",{className:"community-info"},l.a.createElement(N.a,{communityId:null,shouldLinkToCommunity:!1,hasFollow:!1}))];var ke="video"==this.state.mode,Ee=this.getAdditionalHeight(),Ce=A&&!H.c?l.a.createElement(C.Sticky,{stickyStyle:{transform:"translateY("+(43+Ee)+"px)",webkitTransform:"translateY("+(43+Ee)+"px)",zIndex:4},topOffset:-(Ee+43)},l.a.createElement("div",{className:"tabs-bar course-tabs-bar",ref:"tabs-bar"},l.a.createElement("a",{href:"#overview"},l.a.createElement("div",{className:"tab-link"},"Overview",l.a.createElement("div",{className:"line"}))),l.a.createElement("a",{href:"#syllabus"},l.a.createElement("div",{className:"tab-link"},"Syllabus",l.a.createElement("div",{className:"line"}))),l.a.createElement("a",{href:"#faqs"},l.a.createElement("div",{className:"tab-link"},"FAQs",l.a.createElement("div",{className:"line"}))))):null;return l.a.createElement(f.a,{title:o.get("name")+" | CommonLounge"},l.a.createElement("div",null,l.a.createElement(C.StickyContainer,{className:"discussion-page page discussion-timeline-page"},l.a.createElement(k.a,{routerGoBack:!0,showSignUpInfoIfLoggedOut:!0,postSignInSignUpTo:"/discussion/"+t,onToggleSidebar:this.onToggleSidebar,isRightSidebarOpen:this.state.isDiscussionSidebarOpen,contributeURL:a?"/discussion/new/community/"+a:null},l.a.createElement(S.a,{activeCommunityId:a})),l.a.createElement(x.a,{isOpen:this.state.isInviteParticipantsModalOpen,onRequestClose:this.onRequestCloseInviteParticipantsModal,fetchDiscussionRecommendations:this.props.fetchDiscussionRecommendations,users:this.props.users,isModerator:r,newDiscussionRecommendation:this.props.newDiscussionRecommendation,discussionId:t,inviteToDiscussion:this.props.inviteToDiscussion,clearState:this.props.clearState,url:"/discussion/"+t+"/main",title:o.get("name"),onlyShowExternalShares:this.state.onlyShowExternalShares,prompt:V}),l.a.createElement(M.a,{isOpen:this.state.isCrossPostModalOpen,onRequestClose:this.onRequestCloseCrossPostModal,discussionId:t}),this.state.isSuggestedEditMessageDisplayed&&l.a.createElement(X.a,{type:"update",dismissable:!0,onClose:this.hideSuggestedEditMessage},"Thank you for your edit! ",de?"Your edit has been saved as a draft. You can go to the edit history to publish any of your drafts.":"It has been noted and will be reviewed as soon as possible. You might not see your changes just yet."),H.a&&"main"!=i&&"all"!=i?null:l.a.createElement("div",null,o.getIn(["videoInfo","canEdit"],!1)||o.getIn(["videoInfo","canCreate"],!1)?this.state.adminHeaderSectionVisible?l.a.createElement("div",{className:"admin-header-section"},o.getIn(["videoInfo","video","eid"],null)&&o.getIn(["videoInfo","canEdit"],!1)?l.a.createElement("div",{className:"bold-button-row no-margins"},l.a.createElement(d.Link,{className:"bold-button secondary",to:"/discussion/"+t+"/video/"+o.getIn(["videoInfo","video","eid"])+"/edit"},"Edit Video"),l.a.createElement(d.Link,{className:"bold-button secondary",to:"/discussion/"+t+"/video/"+o.getIn(["videoInfo","video","eid"])+"/history"},"Video Change History")):o.getIn(["videoInfo","canCreate"],!1)?l.a.createElement(d.Link,{className:"bold-button secondary",to:"/discussion/"+t+"/video/new"},"Add Video"):null,l.a.createElement("div",{className:"label with-info-icon with-top-padding-10 with-bottom-padding"},"Only visible to you since you're an admin.")):l.a.createElement("div",{className:"admin-header-section mini"},l.a.createElement("div",{className:"label blue large",onClick:function(){return e.setState({adminHeaderSectionVisible:!0})}},"Manage Video")):null,o.get("hasCompleted")&&l.a.createElement(K.a,{discussion:o,displayedPlaylist:se}),l.a.createElement(L.a,{invite:g,users:this.props.users,onAccept:function(){return e.props.manageDiscussionInvite(t,!0)},onIgnore:function(){return e.props.manageDiscussionInvite(t,!1)},isDiscussion:!0}),$&&!Z&&re?l.a.createElement(J.a,{upNextDiscussionId:$,name:this.props.discussions.getIn([$,"name"])}):null,this.state.isFeedbackFormDisplayed?l.a.createElement(v.a,{isOpen:this.state.isFeedbackFormDisplayed,overlayClassName:"modal-overlay",onRequestClose:this.onFeedbackFormModalClose,className:"modal-content"},l.a.createElement("div",{className:"close-button",onClick:this.onFeedbackFormModalClose}),l.a.createElement(te,{triggerModal:!0,discussionId:t,displayedPlaylistId:o.getIn(["typeInfo","eid"],!1),onSubmit:this.onFeedbackFormModalClose,checkAuthOn:"load",to:"/discussion/"+this.props.params.discussionId+"/?review=true"})):null,l.a.createElement("div",{className:"side-buttons-group"},oe&&!A?l.a.createElement("div",{className:"progress-section discussion-progress-section marked-as-completed",onClick:this.toggleDiscussionCompleted}):!A&&l.a.createElement("div",{className:"progress-section discussion-progress-section","data-size":"30"},se?l.a.createElement(ne,{onClick:this.toggleDiscussionCompleted}):null,l.a.createElement("div",{className:"progress-ring",style:n.i(G.a)(Math.round(this.state.readingProgress))},l.a.createElement("div",{className:"before",style:n.i(G.b)(Math.round(this.state.readingProgress),"30px")}),l.a.createElement("span",{className:"progress-clip"}),l.a.createElement("div",{className:"after",style:n.i(G.c)(Math.round(this.state.readingProgress),"30px")}))),Y?l.a.createElement(d.Link,{to:"/discussion/"+Y,title:"Next: "+this.props.discussions.getIn([Y,"name"],"")},l.a.createElement("span",{className:"next-button "+("section"==this.state.mode&&this.state.currentSectionIndex<this.state.numSections-1?"gray":"")})):null,Q?l.a.createElement(d.Link,{to:"/discussion/"+Q,title:"Previous: "+this.props.discussions.getIn([Q,"name"],"")},l.a.createElement("span",{className:"previous-button "+("section"==this.state.mode&&this.state.currentSectionIndex<this.state.numSections-1?"gray":"")})):null),this.isScrollMode()&&l.a.createElement("div",{className:"mobile-reading-progress-bar",style:{background:"linear-gradient(to right, #4a90e2 "+this.state.readingProgress+"%, transparent "+this.state.readingProgress+"%)"}}),Ce,l.a.createElement(w.a,{ref:"dmc",discussion:o,displayedPlaylist:se,hasAddPost:!this.hideReplyButton(),onShareFn:this.openInviteModal,onCrossPostFn:this.openCrossPostModal,isCollapsed:"main"!=i,isTextCollapsed:A,hideActionsBar:A,hideTopics:A,readMoreShowInPlace:!0,scrollToHash:this.scrollToHash,showCourseInfo:A&&H.l,showCourseEnrollmentInfo:H.a&&A,onSubscribeClick:A&&!1===ee?this.onSubscribeClick:null,onUnSubscribeClick:A&&!0===ee?this.onUnSubscribeClick:null,allowSectionCards:!A,allowVideo:!A,allowEmbeddedVideo:A,additionalHeight:Ee,onSectionsComplete:this.onSectionsComplete,onPotentialHeightChange:this.onPotentialMetadataHeightChange,setMode:this.setMode}),l.a.createElement(K.a,{ref:"playlistItemSection",discussion:o,stickyStyle:ke?null:{transform:"translateY("+(43+Ee)+"px)",webkitTransform:"translateY("+(43+Ee)+"px)",zIndex:5,borderColor:"#E1E1E1"},topOffset:-(Ee+43),displayedPlaylist:se}),he||fe?l.a.createElement("div",{className:"licensing-info"},l.a.createElement("div",{className:"label"},he?l.a.createElement("span",null,"Based on content from ",l.a.createElement("a",{href:he,target:"_blank"},he)," ",fe?l.a.createElement("span",null," licensed under ",me?l.a.createElement("a",{href:me,target:"_blank"},fe):l.a.createElement("span",null,fe),"."):null):fe?l.a.createElement("span",null,"This content is licensed under ",me?l.a.createElement("a",{href:me,target:"_blank"},fe):l.a.createElement("span",null,fe),"."):null)):null,A?this.state.isFAQShown?l.a.createElement("div",{className:"faqs course-faqs user-content-faqs "},l.a.createElement("div",{className:"separator"},"Frequently Asked Questions"),ge&&l.a.createElement("div",{className:"faq"},l.a.createElement("div",{className:"question"},"What prerequisites are required for this course?"),l.a.createElement("div",{className:"answer"},ge)),ve&&l.a.createElement("div",{className:"faq"},l.a.createElement("div",{className:"question"},"How long would this course take to complete?"),l.a.createElement("div",{className:"answer"},ve)),l.a.createElement("div",{className:"faq"},l.a.createElement("div",{className:"question"},"When can I start?"),l.a.createElement("div",{className:"answer"},l.a.createElement("strong",null,"Right now.")," Enroll in this course and follow it at your own pace. You'll get helpful email reminders to complete your next item in the course automatically.")),l.a.createElement("div",{className:"faq"},l.a.createElement("div",{className:"question"},"More Questions?"),l.a.createElement("div",{className:"answer"},"Check out our complete FAQs ",l.a.createElement(d.Link,{to:"/upgrade#faqs"},"here.")))):l.a.createElement("div",{className:"faq-pin user-content-faqs",onClick:function(){return e.setState({isFAQShown:!0})}},l.a.createElement("div",{className:"faq-label label"},"Show Frequently Asked Questions")):null,le.size>0?l.a.createElement("div",{className:"authors-section"},l.a.createElement("div",{className:"separator"},"About the ",b()("contributor",le.size)),this.state.isContributorsListCollapsed?le.slice(0,3):le,this.state.isContributorsListCollapsed&&le.size>3?l.a.createElement("div",{className:"show-all-button",onClick:function(){return e.setState({isContributorsListCollapsed:!1})}},"Show all contributors"):null):l.a.createElement("div",{className:"authors-section"},l.a.createElement("div",{className:"separator"},"About the author"),ce)),this.state.isDiscussionCollapsed?o.get("postsCount")>0?o.get("canView")?l.a.createElement("div",{className:"show-discussion-button-wrapper"},l.a.createElement("div",{className:"show-discussion-button",onClick:function(){return e.setState({isDiscussionCollapsed:!1})}},"View Discussion (",o.get("postsCount"),")")):l.a.createElement("div",{className:"show-discussion-button-wrapper"},l.a.createElement(d.Link,{to:"/upgrade",className:"show-discussion-button"},l.a.createElement("span",{className:"lock"}),"View Discussion (",o.get("postsCount"),")")):l.a.createElement("div",{className:"show-discussion-button-wrapper"},l.a.createElement(d.Link,{to:"/discussion/"+t+"/post",className:"show-discussion-button",onClick:function(){return e.setState({isDiscussionCollapsed:!1})}},"Add a comment")):B,this.state.replyingToDiscussionId?l.a.createElement(R.ReplyInputContainer,{discussionId:this.state.replyingToDiscussionId,postId:this.state.replyingToPostId,replyId:this.state.replyingToReplyId,clearDisplayWarning:this.clearDisplayWarning,onDiscard:this.onReplyDiscard,areTagsOptional:D,onSubmit:function(){return e.props.clearState(["discussions",t,"posts","all","posts"],n.i(m.List)())},isPage:!1}):null,H.a?null:l.a.createElement(P.a,{showTags:!0,tags:o.get("tags")||n.i(m.List)(),shouldShowAllTag:this.shouldShowAllTag(),activeTagId:i,activeCommunityId:z?z.get("eid"):null,discussionId:this.props.params.discussionId,onSubscribeClick:A&&!1===ee?this.onSubscribeClick:null,onUnSubscribeClick:A&&!0===ee?this.onUnSubscribeClick:null,subscribersCount:A?ie:null,onClickTOC:this.onClickTOC,onInviteClick:this.props.currentLoggedInUser&&!this.props.users.get(this.props.currentLoggedInUser).get("isLurker")?this.openInviteModal:null,previousDiscussionId:Q,nextDiscussionId:Y,upNextDiscussionId:$,isUpNextFirstItem:Z,playlistId:se&&se.get("eid"),editUrl:pe?"/discussion/"+o.get("eid")+"/edit":null,acButtons:n.i(W.a)({type:"discussion",eid:t}),autolinkURL:h&&"/discussion/"+t+"/autolink?min_score=300",onTwoColumnLayoutPage:!0,currentActiveSection:this.state.currentActiveSection,hasScrolledPastDiscussionMetadata:this.state.hasScrolledPastDiscussionMetadata,isDiscussionCollapsed:this.state.isDiscussionCollapsed,playlistDiscussionId:se&&se.get("discussion")}),l.a.createElement(v.a,{isOpen:this.state.isDiscussionSidebarOpen,onRequestClose:this.onCloseSidebar,overlayClassName:"modal-overlay sidebar-modal-overlay",className:"modal-content sidebar-modal-content"},l.a.createElement(_.a,{tags:o.get("tags")||n.i(m.List)(),activeTagId:i,discussionId:this.props.params.discussionId,shouldShowAllTag:this.shouldShowAllTag(),onClose:this.onCloseSidebar,inModal:!0,onClickTOC:this.onClickTOC,isDiscussionCollapsed:this.state.isDiscussionCollapsed,autolinkURL:h&&"/discussion/"+t+"/autolink?min_score=300",acButtons:n.i(W.a)({type:"discussion",eid:t})})),A?l.a.createElement(E.a,{currentLoggedInUser:this.props.currentLoggedInUser,to:"/discussion/"+t+"?action=playlist-subscribe",entityId:t,action:"playlist-subscribe"}):l.a.createElement(E.a,{currentLoggedInUser:this.props.currentLoggedInUser,to:"/discussion/"+t})),!this.state.replyingToDiscussionId&&H.a&&!ke&&A&&l.a.createElement(T.a,{onSubscribeClick:this.onSubscribeClick,discussionId:t,upNextDiscussionId:$,isUpNextFirstItem:Z})))}}]),t}(l.a.PureComponent),oe=n.i(p.connect)(r,{fetchDiscussion:Q.D,fetchDiscussionMetadata:Q.e,fetchDiscussionRecommendations:Q._19,inviteToDiscussion:Q._46,clearState:Q._15,logEvent:Q.c,manageDiscussionInvite:Q._47,updateDiscussionSubscription:Q.M,setOnboardingStatus:Q.S,toggleDiscussionCompleted:Q.t})(n.i(d.withRouter)(ie))},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions"),users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser"),pagination:e.get("pagination")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DiscussionMetadataHistory",function(){return P}),n.d(t,"DiscussionMetadataHistoryContainer",function(){return _});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(339)),h=n.n(d),f=n(899),m=n.n(f),g=n(890),v=n(932),y=(n(1270),n(997)),b=n(134),k=n(17),E=n(58),C=n(887),w=n(97),I=n(38),S=n(907),O=n(910),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),P=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDataAvailable=n.isDataAvailable.bind(n),n.loadMore=n.loadMore.bind(n),n.onClickTOC=n.onClickTOC.bind(n),n.scrollToHash=n.scrollToHash.bind(n),n.scrolledToHash=null,e.fetchDiscussion(e.params.discussionId),e.fetchDiscussionMetadata(e.params.discussionId,null,["community","relatedDiscussions","editHistory","contributionInfo","canRevert"],null,!1,void 0,{refreshHistoryFetch:!0}),n}return s(t,e),N(t,[{key:"isDataAvailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.params.discussionId,n=e.discussions.get(t);return void 0!=n&&void 0!=n.get("name")&&void 0!=n.get("editHistory")}},{key:"loadMore",value:function(){this.props.fetchDiscussionMetadata(this.props.params.discussionId,null,["editHistory"])}},{key:"componentDidUpdate",value:function(){this.isDataAvailable()&&location.hash&&this.scrollToHash(location.hash,!1)}},{key:"componentWillReceiveProps",value:function(e){this.isDataAvailable(e)&&this.props.params.discussionId==e.params.discussionId||(this.scrolledToHash=null)}},{key:"revertToVersion",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];confirm("Are you sure you want to "+(n?"publish":"revert to")+" this version?")&&this.props.revertDiscussionToVersion(e,t)}},{key:"onClickTOC",value:function(e,t){this.scrollToHash(t)}},{key:"scrollToHash",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(""==e){n.i(S.b)(0,600);var i=window.location;return this.scrolledToHash="",void(""!=i.hash&&history.pushState("",document.title,i.pathname+i.search))}"#"==e.substr(0,1)&&(e=e.substr(1));var o=document.getElementsByClassName("user-content-"+e)[0];o&&(this.scrolledToHash!=e||this.scrolledToHash==e&&t)&&(this.scrolledToHash=e,location.hash=e,n.i(S.b)(o.offsetTop-40,600))}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement(b.a,null);var t=this.props.params.discussionId,i=this.props.discussions.get(t),o=i.get("isWiki"),s="DEFAULT"==i.getIn(["typeInfo","type"],null),r=i.get("canView"),a=this.props.currentLoggedInUser&&this.props.users.get(this.props.currentLoggedInUser).get("isSuperModerator"),c=i.getIn(["editHistory","history"],n.i(p.List)()).map(function(n,o){var s=n.get("author"),r="suggested"==n.get("status"),a="current"==n.get("status");return l.a.createElement("div",{className:"edit-history-node user-content-"+n.get("dtEdited")},l.a.createElement("div",{className:"label large with-top-padding edited-by-label"},(r?"Suggested Edit":"Edited")+" by"," ",l.a.createElement(u.Link,{to:"/profile/"+s},e.props.users.getIn([s,"displayName"],"")," "),l.a.createElement(g.a,{date:n.get("dtEdited")}),".",l.a.createElement("span",{className:"additions"}," ",n.get("numAdditions")," additions. "),l.a.createElement("span",{className:"deletions"},n.get("numDeletions")," deletions.")," ",a&&l.a.createElement("span",{className:"label large"}," • Currently Published."),i.get("canRevert")&&!a?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.revertToVersion(t,n.get("contentVersionId"),r)}}," (",r?"Publish":"Revert",")"):null),l.a.createElement("div",{className:"post discussion-metadata revision"},l.a.createElement("div",{className:"text-container"},l.a.createElement(O.a,{className:"text",html:n.get("diff"),hideCustomElements:!0}))))});return l.a.createElement(h.a,{title:"Edit History — "+i.get("name")+" | CommonLounge"},l.a.createElement("div",{className:"page discussion-page edit-history-page"},l.a.createElement(C.a,{routerGoBack:!0,showSignUpInfoIfLoggedOut:!0,postSignInSignUpTo:"/discussion/"+t}),l.a.createElement("h1",{className:"heading"},"Edit History for ",l.a.createElement(u.Link,{to:"/discussion/"+t},i.get("name"))),r?null:l.a.createElement(y.a,null),!r||o||s?null:l.a.createElement("div",{className:"info-box"},l.a.createElement("strong",null,"Note:")," Edit History is currently supported only for the description section."),0===this.props.pagination.getIn(["discussion",t,"editHistory","currentOffsetBeingFetched"],null)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(w.a,null),l.a.createElement("div",{className:"loading-text no-uppercase"},"Checking for new edits…")):null,c,l.a.createElement(m.a,{onEnter:this.loadMore,scrollableAncestor:window,bottomOffset:"-200px"}),this.props.pagination.getIn(["discussion",t,"editHistory","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(w.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null,k.a?null:l.a.createElement(v.a,{showTags:!0,onClickTOC:this.onClickTOC,showEditHistory:!0,onTwoColumnLayoutPage:!0,activeCommunityId:i.get("community"),autolinkURL:a&&"/discussion/"+t+"/autolink?min_score=300",acButtons:n.i(E.a)({type:"discussion",eid:t}),discussionId:this.props.params.discussionId})))}}]),t}(l.a.PureComponent),_=n.i(c.connect)(r,{fetchDiscussion:I.D,fetchDiscussionMetadata:I.e,revertDiscussionToVersion:I._45})(P)},,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{path:e.get("path"),homeVideo:e.get("homeVideo"),catalog:e.get("catalog"),subscriptions:e.get("subscriptions"),pagination:e.get("pagination"),discussions:e.get("discussions"),users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser"),myCommunities:e.get("myCommunities"),communities:e.get("communities")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Home",function(){return T}),n.d(t,"HomeContainer",function(){return x});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(39)),p=(n.n(u),n(323),n(887)),d=n(97),h=n(15),f=(n.n(h),n(914)),m=n(38),g=n(1581),v=n(973),y=(n(1301),n(140),n(32)),b=n(17),k=n(325),E=n(991),C=n(131),w=n(901),I=n.n(w),S=(n(58),n(1003)),O=n(1554),N=n(1582),P=n(832),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDataAvailable=n.isDataAvailable.bind(n),n.loadMore=n.loadMore.bind(n),n.logEvent=n.logEvent.bind(n),n.onRequestCloseOnboardingModal=n.onRequestCloseOnboardingModal.bind(n),n.fetchFeed=n.fetchFeed.bind(n),n.hasOnboarded=n.hasOnboarded.bind(n),n.onSelectCategory=n.onSelectCategory.bind(n),n.onClick=n.onClick.bind(n),n.hasOnboarded(),n.state={isOnboardingModalOpen:!1,intervalID:null,selectedCategories:[],lastSelectedCategory:null},e.currentLoggedInUser&&n.props.fetchUserCommunities(),n.fetchFeed(),n.fetchCatalog(),n.logEvent(),n}return s(t,e),_(t,[{key:"logEvent",value:function(){this.hasOnboarded()&&this.props.logEvent({type:"view",payload:{obj:null,related_info:"home_feed"}})}},{key:"hasOnboarded",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return!0}},{key:"onClick",value:function(e){if(!(e.target.classList&&e.target.classList.contains("search-container")||n.i(C.b)(e.target,{className:"search-container"}))){var t=n.i(E.b)(this,["refs","homeContainer","refs","wrappedInstance","refs","searchContainer","refs","wrappedInstance","clearQuery"]);t&&t()}}},{key:"fetchFeed",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.hasOnboarded())return!1;this.props.fetchHome()}},{key:"fetchCatalog",value:function(){this.props.catalog&&this.props.catalog.get("items")&&this.props.catalog.get("items").size>0||this.props.fetchHome(!0)}},{key:"isDataAvailable",value:function(){return this.props.catalog&&this.props.catalog.get("popular")&&this.props.catalog.get("popular").size>0}},{key:"loadMore",value:function(){this.fetchFeed(!1)}},{key:"onRequestCloseOnboardingModal",value:function(){this.setState({isOnboardingModalOpen:!1})}},{key:"onSelectCategory",value:function(e){var t=this.state.selectedCategories.indexOf(e),n=this.state.selectedCategories.slice(0);-1==t?n.push(e):n.splice(t,1),this.state.lastSelectedCategory!=e?this.setState({lastSelectedCategory:e,selectedCategories:n}):this.setState({lastSelectedCategory:null,selectedCategories:n})}},{key:"componentWillUnmount",value:function(){this.animationFrameId&&n.i(y.i)(this.animationFrameId)}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement("div",null,l.a.createElement(g.a,null),l.a.createElement("div",{className:"page home-page with-prompt"},l.a.createElement(p.a,{noBack:!0,isNav:!0}),!b.c&&l.a.createElement("div",{className:"loader-div raised"},l.a.createElement(d.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")),l.a.createElement(f.a,{currentLoggedInUser:this.props.currentLoggedInUser,to:"/home",isVeryWide:!0})));var t=this.props.pagination.getIn(["homefeed","isFetching","default"],!1),i=this.props.myCommunities.get("shortcuts").slice(0,10)||n.i(u.List)(),o=(i.map(function(t,i){return l.a.createElement(h.Link,{className:"no-decoration",to:"/community/"+t,title:e.props.communities.get(t).get("name")},l.a.createElement("div",{className:"community-icon"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+(n.i(k.c)(e.props.communities.get(t).get("coverImg"),60)||I.a)+")"}}),l.a.createElement("div",{className:"label"},e.props.communities.get(t).get("name"))))}),this.props.currentLoggedInUser&&this.props.subscriptions&&this.props.subscriptions.map(function(t,n){var i=e.props.discussions.getIn([t,"typeInfo","nextUncompletedDiscussion"],null);if(!i)return null;var o=e.props.discussions.get(i);if(!o)return null;var s=e.props.discussions.get(t,null);return l.a.createElement(S.a,{discussion:o,isPlaylistItem:!0,playlist:s})}));return l.a.createElement("div",{onClick:this.onClick},l.a.createElement(g.a,{ref:"homeContainer",video:this.props.homeVideo}),l.a.createElement("div",{className:"page home-page with-prompt"},l.a.createElement(p.a,{noBack:!0,isNav:!0},l.a.createElement(v.a,{activeCommunityId:null,location:"home"})),!t||this.isDataAvailable()||this.refs.feed&&this.refs.feed.getWrappedInstance().isFeedCollapsed()||b.c?null:l.a.createElement("div",{className:"loader-div"},l.a.createElement(d.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")),this.props.currentLoggedInUser&&this.props.path&&l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading next-up-on-your-path"},l.a.createElement("span",null,"You're enrolled in ",l.a.createElement(h.Link,{to:"/path/"+this.props.path},this.props.discussions.getIn([this.props.path,"name"],"")),":")),l.a.createElement(N.a,null)),o&&o.size>0&&l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading your-other-course-enrollments"},"Your ",this.props.currentLoggedInUser&&this.props.path?"other":""," course enrollments:"),l.a.createElement("div",{className:"feed-item featured-cards"},o)),l.a.createElement("div",{className:"section-heading popular-courses"},"Popular Paths"),l.a.createElement("div",{className:"feed-item featured-cards"},this.props.catalog&&this.props.catalog.get("popular",n.i(u.List)()).filter(function(t){return e.props.discussions.getIn([t,"typeInfo","isPath"])}).map(function(t,n){return l.a.createElement(S.a,{discussion:e.props.discussions.get(t,null)})})),o&&o.size>0?null:l.a.createElement(P.PathfinderContainer,{isPage:!1}),l.a.createElement("div",{className:"section-heading popular-courses"},"Popular Courses"),l.a.createElement("div",{className:"feed-item featured-cards"},this.props.catalog&&this.props.catalog.get("popular",n.i(u.List)()).filter(function(t){return!e.props.discussions.getIn([t,"typeInfo","isPath"])}).map(function(t,n){return l.a.createElement(S.a,{discussion:e.props.discussions.get(t,null)})})),l.a.createElement("div",{className:"section-heading explore-the-catalog"},"Explore The Catalog"),l.a.createElement(O.a,{onClick:this.onSelectCategory,selectedCategories:this.state.selectedCategories,lastSelectedCategory:this.state.lastSelectedCategory}),l.a.createElement(f.a,{currentLoggedInUser:this.props.currentLoggedInUser,to:"/home",isVeryWide:!0})))}}]),t}(l.a.PureComponent),x=n.i(c.connect)(r,{fetchHome:m._53,logEvent:m.c,fetchUserCommunities:m.F})(n.i(h.withRouter)(T))},,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),posts:e.get("discussionPosts"),discussions:e.get("discussions"),pagination:e.get("pagination"),communities:e.get("communities")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Profile",function(){return Q}),n.d(t,"ProfileContainer",function(){return Y});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(339)),h=n.n(d),f=n(899),m=(n.n(f),n(326)),g=(n.n(m),n(133)),v=n(932),y=n(973),b=n(17),k=n(58),E=n(887),C=n(59),w=n.n(C),I=n(362),S=n(1594),O=n(1597),N=n(1596),P=n(1598),_=n(1599),T=n(1600),x=n(1592),L=n(1593),M=n(1595),j=n(972),D=n(1134),A=n(38),R=n(32),F=n(134),U=n(97),B=n(323),H=n(132),q=n.n(H),W=n(324),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),V=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),z(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow "+this.props.displayName+"?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"action-button follow",onClick:this.onClick},this.props.isFollowing?"Following":"Follow")}}]),t}(l.a.PureComponent),Q=function(e){function t(e){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.toggleUserFollow=s.toggleUserFollow.bind(s),s.fetchUser=s.fetchUser.bind(s),s.fetchData=s.fetchData.bind(s),s.fetchContributions=s.fetchContributions.bind(s),s.toggleCommunity=s.toggleCommunity.bind(s),s.loadMore=s.loadMore.bind(s),s.updatePage=s.updatePage.bind(s),s.state={scrolledPastHeroUnit:!1,tabsBarOffsetTop:null,selectedCommunity:"none"},s.animationFrameId=n.i(R.h)(s.updatePage),s.fetchData(),s}return s(t,e),z(t,[{key:"componentDidUpdate",value:function(){this.state.tabsBarOffsetTop||this.refs.herounit&&this.setState({tabsBarOffsetTop:this.refs.herounit.clientHeight})}},{key:"updatePage",value:function(){window.pageYOffset>this.state.tabsBarOffsetTop?this.setState({scrolledPastHeroUnit:!0}):this.setState({scrolledPastHeroUnit:!1}),this.animationFrameId=n.i(R.h)(this.updatePage)}},{key:"isDataAvailable",value:function(){var e=this.props.params.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&void 0!=t.get("activeCommunities")}},{key:"fetchData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.userId;this.fetchUser(e),this.fetchContributions(e,null,!1)}},{key:"fetchUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.userId,t=e||this.props.currentLoggedInUser;this.props.fetchUser(t),this.props.logEvent({type:"view",payload:{obj:t,obj_type:"User"}})}},{key:"fetchContributions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.userId,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none"==this.state.selectedCommunity?null:this.state.selectedCommunity,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e||this.props.currentLoggedInUser;!i&&this.props.users.getIn([o,"contributions"],n.i(p.List)()).size>0||this.props.fetchUserMetadata(o,["contributions"],t)}},{key:"loadMore",value:function(){this.fetchContributions()}},{key:"componentWillReceiveProps",value:function(e){e.params.userId!=this.props.params.userId&&this.fetchData(e.params.userId||e.currentLoggedInUser)}},{key:"componentWillUnmount",value:function(){this.animationFrameId&&n.i(R.i)(this.animationFrameId)}},{key:"toggleUserFollow",value:function(){var e=this.props.params.userId;this.props.toggleUserFollow(e)}},{key:"toggleCommunity",value:function(e){this.state.selectedCommunity==e?this.setState({selectedCommunity:"none"}):this.setState({selectedCommunity:e}),this.fetchContributions(this.props.params.userId,e),m.scroller.scrollTo("featured-contributions",{duration:500,smooth:!0,offset:-500})}},{key:"render",value:function(){var e=this,t=n.i(B.a)(null),i=n.i(B.a)(V);if(!this.isDataAvailable())return l.a.createElement("div",{className:"page profile-page"},l.a.createElement(E.a,{noBack:!0,isNav:!0},l.a.createElement(y.a,{activeCommunityId:null})),l.a.createElement(F.a,null));var o=this.props.params.userId||this.props.currentLoggedInUser,s=this.props.users.get(o),r=s.get("displayName"),a=this.props.currentLoggedInUser==s.get("eid"),c=s.get("isFollowing"),p="active"==s.getIn(["plan","status"])?s.getIn(["plan","type"]):null,d=s.getIn(["plan","type"]),f=this.props.route&&this.props.route.activeFilter||this.props.params.activeFilter||"main",C=s.get("activeCommunities").map(function(t,n){var i=e.props.communities.get(t),s=i.get("contributionsCount"),r=s.get("postsCount")+s.get("discussionsCount"),a=s.get("postsCount")>0?s.get("postsCount")+" "+q()("reply",s.get("postsCount"))+". ":"",c=s.get("discussionsCount")>0?s.get("discussionsCount")+" "+q()("discussion",s.get("discussionsCount"))+". ":"",u=i.get("isModerator").get(o)?"Moderator":i.get("isMember").get(o)?"Member":i.get("isFollowing").get(o)?"Follower":"Shown Interest",p=""+a+c+u;return l.a.createElement(j.a,{communityId:t,onClick:r>0?e.toggleCommunity:null,byline:p,hasToggle:r>0,shouldLinkToCommunity:!0,isSelected:t==e.state.selectedCommunity})}),A=this.props.pagination.getIn(["user",s.get("eid"),this.state.selectedCommunity,"isFetching"],!1),R=this.props.pagination.getIn(["user",s.get("eid"),this.state.selectedCommunity,"noMoreItems"],!1),H=null,z=s.has("contributions");if(s.get("contributions")&&s.get("contributions").get(this.state.selectedCommunity)&&s.get("contributions").get(this.state.selectedCommunity).size>0){var Q="User."+s.get("eid");H=l.a.createElement(D.a,{feed:s.get("contributions").get(this.state.selectedCommunity),isYTranslated:this.state.scrolledPastHeroUnit,onLoadMore:this.loadMore,location:this.props.location,feedType:Q,isFetching:A,noMoreItems:R})}var Y=n.i(k.a)({type:"user",eid:o}).map(function(e){return l.a.createElement("a",{href:e.url,target:"_blank"}," ",l.a.createElement("div",{className:"label with-top-padding with-left-padding with-right-padding"},e.display))}),G=[{name:"main",linkTo:"/profile/"+s.get("eid")+"/main",isActive:"main"==f,displayName:"Profile"},{name:"subscriptions",linkTo:"/profile/subscriptions",isActive:"subscriptions"==f,displayName:"Enrollments"},{name:"certificates",linkTo:"/profile/certificates",isActive:"certificates"==f,displayName:"Certificates"},{name:"course-completions",linkTo:"/profile/course-completions",isActive:"course-completions"==f,displayName:"Course Completions"},{name:"bookmarks",linkTo:"/profile/bookmarks",isActive:"bookmarks"==f,displayName:"Bookmarks"},{name:"unpublished",linkTo:"/profile/"+s.get("eid")+"/unpublished",isActive:"unpublished"==f,displayName:"Drafts"},{name:"communities",linkTo:"/profile/"+s.get("eid")+"/communities",isActive:"communities"==f,displayName:"Communities"},{name:"tutorials",linkTo:"/profile/"+s.get("eid")+"/wikis",isActive:"wikis"==f,displayName:"Tutorials"},{name:"discussions",linkTo:"/profile/"+s.get("eid")+"/discussions",isActive:"discussions"==f,displayName:"Discussions"},{name:"posts",linkTo:"/profile/"+s.get("eid")+"/posts",isActive:"posts"==f,displayName:W.b}].filter(function(e){return!!(a||"subscriptions"!=e.name&&"bookmarks"!=e.name&&"unpublished"!=e.name)}),J=G.map(function(e){return l.a.createElement(u.Link,{to:e.linkTo},l.a.createElement("div",{className:e.isActive?"active tab-link":"tab-link",ref:"tab-"+e.name,"data-filter":e.name},e.displayName,l.a.createElement("div",{className:"line"})))});return l.a.createElement(h.a,{title:s.get("displayName")+" | CommonLounge"},l.a.createElement("div",null,l.a.createElement("div",{className:"page profile-page"},this.props.params.userId?null:l.a.createElement(t,{checkAuthOn:"load",allowLurker:!0,to:"/profile/"}),l.a.createElement(E.a,{title:a?"You":null,noBack:!0,isNav:!0},l.a.createElement(y.a,{activeCommunityId:null})),"main"==f?l.a.createElement("div",{className:"hero-unit",ref:"herounit"},a?l.a.createElement("div",{className:"profile-buttons-row"},Y,l.a.createElement(u.Link,{to:"/profile/edit",className:"no-decoration"},l.a.createElement("div",{className:"action-button edit-profile"},"Edit Profile")),d?l.a.createElement(u.Link,{to:"/profile/settings",className:"no-decoration"},l.a.createElement("div",{className:"action-button manage-membership"},"Manage membership")):null):l.a.createElement("div",{className:"profile-buttons-row"},Y,l.a.createElement(u.Link,{to:"/inbox/new/"+this.props.params.userId,className:"no-decoration"},l.a.createElement("div",{className:"action-button message"},"Message")),l.a.createElement(i,{onClick:this.toggleUserFollow,isFollowing:c,displayName:s.get("displayName")})),l.a.createElement("div",{className:"user-info-row"},l.a.createElement("div",{className:"left"},l.a.createElement(g.a,{className:"profile-picture",size:"98",name:s.get("displayName"),src:s.get("avatarUrl"),displaySize:"original"})),l.a.createElement("div",{className:"shifted-right"},l.a.createElement("div",{className:"name"},s.get("displayName")),p?l.a.createElement("div",{className:"membership"},p," member"):null,l.a.createElement("div",{className:"bio"},s.get("bio")))),l.a.createElement(I.a,{user:s})):null,l.a.createElement("div",{className:this.state.scrolledPastHeroUnit?"sticky tabs-bar":"tabs-bar",ref:"tabs-bar"},J),"main"==f?l.a.createElement("div",{className:this.state.scrolledPastHeroUnit?"profile-section translated":"profile-section"},C.size>0?l.a.createElement("div",{className:"communities-list list no-padding-bottom"},l.a.createElement("div",{className:"section-heading"},"Active In"),l.a.createElement("div",{className:"section-items"},C)):null,l.a.createElement(m.Element,{name:"featured-contributions",className:"section-heading"},"Featured Contributions","none"==this.state.selectedCommunity?"":" in "+this.props.communities.getIn([this.state.selectedCommunity,"name"])),z?H||l.a.createElement("div",{className:"onboarding-text-label with-margin-bottom"},"No contributions yet."):null,A?l.a.createElement("div",{className:"loader-div"},l.a.createElement(U.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null):null,"subscriptions"==f&&a?l.a.createElement("div",{className:"section-heading"},"Your Course Enrollments"):null,"subscriptions"==f&&a?l.a.createElement(P.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null,"certificates"==f&&a?l.a.createElement("div",{className:"section-heading"},"Your Certificates"):null,"certificates"==f&&a?l.a.createElement(L.a,null):null,"course-completions"==f&&a?l.a.createElement("div",{className:"section-heading"},"Your Course Completions"):null,"course-completions"==f&&a?l.a.createElement(M.a,null):null,"bookmarks"==f&&a?l.a.createElement("div",{className:"section-heading"},"Your Bookmarks"):null,"bookmarks"==f&&a?l.a.createElement(x.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null,"unpublished"==f&&a?l.a.createElement("div",{className:"section-heading"},"Your Drafts"):null,"unpublished"==f&&a?l.a.createElement(_.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null,"communities"==f?l.a.createElement("div",{className:"section-heading"},a?"Your":r+"'s"," Communities"):null,"communities"==f?l.a.createElement(S.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null,"wikis"==f?l.a.createElement("div",{className:"section-heading"},a?"Your":r+"'s"," Tutorials"):null,"wikis"==f?l.a.createElement(T.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null,"posts"==f?l.a.createElement("div",{className:"section-heading"},a?"Your":r+"'s"," ",W.b):null,"posts"==f?l.a.createElement(O.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null,"discussions"==f?l.a.createElement("div",{className:"section-heading"},a?"Your":r+"'s"," Discussions"):null,"discussions"==f?l.a.createElement(N.a,{userId:s.get("eid"),isYTranslated:this.state.scrolledPastHeroUnit}):null),b.a?null:l.a.createElement(v.a,{filters:G,showFilters:!0,onTwoColumnLayoutPage:!0}),l.a.createElement(w.a,{isOpen:this.state.loggingOut,overlayClassName:"modal-overlay",className:"modal-content"},l.a.createElement(F.a,{customText:"Logging you out…"}))))}}]),t}(l.a.PureComponent),Y=n.i(c.connect)(r,{fetchUser:A._3,fetchUserMetadata:A.l,toggleUserFollow:A.m,logEvent:A.c})(n.i(u.withRouter)(Q))},,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{topics:e.get("topics"),discussions:e.get("discussions"),pagination:e.get("pagination")}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Topic",function(){return I}),n.d(t,"TopicContainer",function(){return S});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(339)),d=n.n(p),h=n(134),f=n(887),m=(n(1044),n(1135)),g=(n(972),n(889),n(38)),v=n(1134),y=n(323),b=n(97),k=n(932),E=n(1590),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),C(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow this topic?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:this.props.isFollowing?"action-button large following":"action-button large blue",onClick:this.onClick},this.props.isFollowing?"Following":"Follow")}}]),t}(l.a.PureComponent),I=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDataAvailable=n.isDataAvailable.bind(n),n.fetchTopic=n.fetchTopic.bind(n),n.fetchTopicMetadata=n.fetchTopicMetadata.bind(n),n.fetchInfo=n.fetchInfo.bind(n),n.toggleTopicFollow=n.toggleTopicFollow.bind(n),n.loadMore=n.loadMore.bind(n),n.logEvent=n.logEvent.bind(n),n.fetchInfo(),n.logEvent(),n.state={intervalID:window.setInterval(n.updatePage.bind(n),10),tabsBarOffsetTop:null,scrolledPastHeroUnit:!1},n}return s(t,e),C(t,[{key:"logEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.topicId;this.props.logEvent({type:"view",payload:{obj:e,obj_type:"Topic",related_info:"feed"}})}},{key:"updatePage",value:function(){window.pageYOffset>this.state.tabsBarOffsetTop?this.setState({scrolledPastHeroUnit:!0}):this.setState({scrolledPastHeroUnit:!1})}},{key:"componentDidUpdate",value:function(){this.state.tabsBarOffsetTop||this.refs.herounit&&this.setState({tabsBarOffsetTop:this.refs.herounit.clientHeight-24})}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.state.intervalID)}},{key:"fetchInfo",value:function(e){this.fetchTopic(void 0,e),this.fetchTopicMetadata(void 0,e)}},{key:"componentWillReceiveProps",value:function(e){e.params.filter!=this.props.params.filter?this.fetchTopicMetadata(e.params.filter):e.params.topicId!=this.props.params.topicId&&(this.logEvent(e.params.topicId),this.fetchInfo(e.params.topicId))}},{key:"isDataAvailable",value:function(){var e=this.props.params.topicId,t=this.props.topics.get(e);return void 0!=t&&void 0!=t.get("name")&&void 0!=t.get("followersCount")}},{key:"fetchTopic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.filter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.topicId;e="main"!=e&&e?e:null,this.props.fetchTopic(t,e)}},{key:"fetchTopicMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.filter,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.params.topicId;e="main"!=e&&e?e:null,this.props.fetchTopicMetadata(t,e,["feed"]),this.props.fetchTopicMetadata(t,e,["wikipediaUrl","relatedTopics"])}},{key:"loadMore",value:function(){var e=this.props.params.filter,t=this.props.params.topicId;this.props.fetchTopicMetadata(t,e,["feed"])}},{key:"toggleTopicFollow",value:function(){this.props.toggleTopicFollow(this.props.params.topicId)}},{key:"render",value:function(){if(!this.isDataAvailable())return l.a.createElement(h.a,null);var e=n.i(y.a)(w),t=this.props.params.topicId,i=this.props.topics.get(t),o=this.props.params.filter||"main",s=i.get("feed")&&i.get("feed").get(o),r=s?l.a.createElement(v.a,{feed:i.get("feed").get(o),feedType:"Topic."+t,isYTranslated:this.state.scrolledPastHeroUnit,onLoadMore:this.loadMore,location:this.props.location}):null;return l.a.createElement(d.a,{title:i.get("name")+" | Topic on CommonLounge"},l.a.createElement("div",null,l.a.createElement("div",{className:"page topic-page"},l.a.createElement(f.a,{routerGoBack:!0,title:i.get("name").length>30?i.get("name").substr(0,30)+"…":i.get("name")}),l.a.createElement("div",{className:"topic-hero-unit",ref:"herounit"},l.a.createElement(m.a,{topicId:t}),l.a.createElement("div",{className:"description"},l.a.createElement("span",{className:"text"},i.get("description")," "),l.a.createElement("a",{className:"source no-decoration",target:"_blank",href:i.get("wikipediaUrl")},"(source: Wikipedia)")),l.a.createElement("div",{className:"action-button-group"},l.a.createElement(e,{isFollowing:i.get("isFollowing"),allowLurker:!0,onClick:this.toggleTopicFollow}))),r,this.props.pagination.getIn(["topic",t,o,"isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(b.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null),l.a.createElement(k.a,{activeTopicId:this.props.params.topicId}),l.a.createElement(E.a,{topicId:this.props.params.topicId})))}}]),t}(l.a.PureComponent),S=n.i(c.connect)(r,{fetchTopic:g._32,toggleTopicFollow:g._23,fetchTopicMetadata:g._33,logEvent:g.c})(I)},,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentUser:e.get("currentLoggedInUser"),users:e.get("users"),visitedPaths:e.get("visitedPaths")}}n.d(t,"a",function(){return C});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(59)),d=n.n(p),h=n(134),f=n(133),m=(n(323),n(897)),g=n(889),v=n(827),y=n(17),b=n(38),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSignInSignUpModalOpen:!1,isProfileOptionsModalOpen:!1,isNotificationsModalOpen:!1,isMobile:y.h},n.onProfileIconClick=n.onProfileIconClick.bind(n),n.routerGoBack=n.routerGoBack.bind(n),n.onLogout=n.onLogout.bind(n),n.onGoProClick=n.onGoProClick.bind(n),n}return s(t,e),k(t,[{key:"onGoProClick",value:function(){this.props.fetchPixelInformation("click.top_nav_bar_go_pro")}},{key:"routerGoBack",value:function(){this.props.visitedPaths.size>1?this.props.router.goBack():u.browserHistory.push("/")}},{key:"onProfileIconClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({isProfileOptionsModalOpen:!this.state.isProfileOptionsModalOpen})}},{key:"onLogout",value:function(e){this.setState({loggingOut:!0})}},{key:"render",value:function(){var e=this,t=this.props.isNav?"":" desktop-only",n=this.props.classModifier||"",i=this.props.users.getIn([this.props.currentUser]),o=i&&"active"==i.getIn(["plan","status"])?i.getIn(["plan","type"]):null,s=this.props.users.getIn([this.props.currentUser,"unreadNotificationsCount"],0),r=this.props.users.getIn([this.props.currentUser,"unreadThreadCount"],0),a=this.state.isMobile?"":o?l.a.createElement("span",null,"CommonLounge",l.a.createElement("span",{className:"pro-label"},o)):"CommonLounge",c="avatar-image";return this.state.isMobile?r>0?c+=" flair medium message-icon":s>0&&(c+=" flair medium notification-icon"):r>0&&(c+=" flair medium message-icon"),l.a.createElement("div",{className:"topbar"+n},l.a.createElement("div",{className:"topbar-content"},l.a.createElement(d.a,{isOpen:this.state.isProfileOptionsModalOpen,onRequestClose:function(){return e.setState({isProfileOptionsModalOpen:!1})},overlayClassName:"modal-overlay profile-options-modal-overlay",className:"modal-content profile-options-modal-content"},l.a.createElement(g.a,{hideFollowButton:!0,userId:this.props.currentUser,shouldLinkToUser:!0,byline:o?"Pro Member":"View Profile"}),l.a.createElement(u.Link,{to:"/profile/subscriptions"},l.a.createElement("button",{className:"button profile-option-button"},"Enrollments")),l.a.createElement(u.Link,{to:"/profile/bookmarks"},l.a.createElement("button",{className:"button profile-option-button with-border-bottom"},"Bookmarks")),this.state.isMobile?l.a.createElement(u.Link,{to:"/notifications"},l.a.createElement("button",{className:"button profile-option-button"},"Notifications",s>0?l.a.createElement("span",{className:"red"}," (",s,")"):null)):null,l.a.createElement(u.Link,{to:"/inbox"},l.a.createElement("button",{className:"button profile-option-button with-border-bottom"},"Inbox",r>0?l.a.createElement("span",{className:"red"}," (",r,")"):null)),l.a.createElement(u.Link,{to:"/contribute"},l.a.createElement("button",{className:"button profile-option-button"},"How to contribute")),l.a.createElement(u.Link,{to:"/discussion/new?type=playlist"},l.a.createElement("button",{className:"button profile-option-button"},"Create a course")),l.a.createElement(u.Link,{to:"/discussion/new?type=wiki"},l.a.createElement("button",{className:"button profile-option-button with-border-bottom"},"Write a tutorial")),l.a.createElement(u.Link,{to:"/profile"},l.a.createElement("button",{className:"button profile-option-button"},"Profile")),l.a.createElement(u.Link,{to:"/profile/settings"},l.a.createElement("button",{className:"button profile-option-button"},"Settings")),l.a.createElement(u.Link,{to:"/referral"},l.a.createElement("button",{className:"button profile-option-button"},"Get a free month 🎁")),l.a.createElement("a",{href:"/logout/",onClick:this.onLogout},l.a.createElement("button",{className:"button profile-option-button"},"Logout"))),l.a.createElement(d.a,{isOpen:this.state.isNotificationsModalOpen,onRequestClose:function(){return e.setState({isNotificationsModalOpen:!1})},overlayClassName:"modal-overlay notifications-modal-overlay",className:"modal-content notifications-modal-content"},l.a.createElement(v.NotificationsContainer,{isPage:!1})),l.a.createElement(d.a,{isOpen:this.state.loggingOut,overlayClassName:"modal-overlay",className:"modal-content"},l.a.createElement(h.a,{customText:"Logging you out…"})),this.props.shomHome?l.a.createElement("div",{className:"left"},l.a.createElement(u.Link,{to:"/",className:"home no-decoration",activeClassName:"active",title:"Home"},a),this.props.children):null,this.props.noBack?null:l.a.createElement("div",{className:"left"},l.a.createElement("span",{className:"back-icon",onClick:this.props.routerGoBack?this.routerGoBack:this.props.goBack,title:"Back"}),l.a.createElement(u.Link,{to:"/",className:"home desktop-only no-decoration",activeClassName:"active",title:"Home"},a),this.props.children),this.props.isNav?l.a.createElement("div",{className:"left"},l.a.createElement(u.Link,{to:"/",className:"home no-decoration",activeClassName:"active",title:"Home"},a),this.props.children):null,this.props.currentUser?l.a.createElement("div",{className:"shifted-right"},l.a.createElement(u.Link,{to:"/search",className:"search",activeClassName:"active",title:"Search for people, communities, topics, discussions or replies"}),l.a.createElement(u.Link,{to:"/about",className:"thin-button no-decoration"},"About"),l.a.createElement(u.Link,{to:"/upgrade",className:o?"thin-button no-decoration":"thin-button no-decoration never-hide",onClick:this.onGoProClick},"Pricing"),this.props.infoUrl?l.a.createElement(u.Link,{to:this.props.infoUrl,className:"info",title:"Community Info"}):null,this.props.addUrl?l.a.createElement(u.Link,{to:this.props.addUrl,className:"add",title:"Start a new community"}):null,l.a.createElement("a",{className:this.props.currentUser&&s>0?"notifications unread"+t:"notifications"+t,activeClassName:"active",onClick:function(){e.setState({isNotificationsModalOpen:!0})}}),l.a.createElement("a",{className:this.props.currentUser?"avatar profile":"profile",onClick:this.onProfileIconClick},this.props.currentUser?l.a.createElement(f.a,{className:c,size:"25",name:this.props.users.get(this.props.currentUser).get("displayName"),src:this.props.users.get(this.props.currentUser).get("avatarUrl")}):null),this.props.onToggleSidebar?this.props.isRightSidebarOpen?l.a.createElement("div",{className:"close"}):l.a.createElement("div",{className:"hamburger",onClick:this.props.onToggleSidebar}):null):this.props.isNav||this.props.showSignUpInfoIfLoggedOut?l.a.createElement("div",{className:"shifted-right"},l.a.createElement(u.Link,{to:"/search",className:"search",activeClassName:"active",title:"Search for people, communities, topics, discussions or replies"}),l.a.createElement(u.Link,{to:"/about",className:"thin-button no-decoration"},"About"),l.a.createElement(u.Link,{to:"/upgrade",className:o?"thin-button no-decoration":"thin-button no-decoration never-hide",onClick:this.onGoProClick},"Pricing"),l.a.createElement("button",{className:"sign-up zoom-on-hover zoom-to-normal",onClick:function(){return e.setState({isSignInSignUpModalOpen:!0})}},"Get Started"),l.a.createElement(m.a,{postSignInSignUpTo:this.props.postSignInSignUpTo,isModalOpen:this.state.isSignInSignUpModalOpen,onRequestClose:function(){return e.setState({isSignInSignUpModalOpen:!1})}}),l.a.createElement(u.Link,{to:"/search/communities",className:this.props.forceShowCommunities?"explore":"explore{modifierString}",activeClassName:"active",checkAuthOn:"click",title:"Explore"}),this.props.onToggleSidebar?this.props.isRightSidebarOpen?l.a.createElement("div",{className:"close"}):l.a.createElement("div",{className:"hamburger",onClick:this.props.onToggleSidebar}):null):null))}}]),t}(l.a.PureComponent),C=n.i(c.connect)(r,{fetchPixelInformation:b.a})(n.i(u.withRouter)(E))},function(e,t,n){"use strict";function i(e){var t=new Date(e),n=(t.getDate(),t.getMonth(),t.getFullYear(),Math.round((Date.now()-t)/6048e5));return n>51?Math.round(n/52)+"y":n+"w"}function o(e){var t=Math.floor(e/3600),n=Math.floor(e/60%60),i=e%60,o="";return t>0&&(o+=t+" "+l()("hour",t)+" "),n>0&&(o+=n+" "+l()("minute",n)+" "),i>0&&(o+=i+" "+l()("second",i)),o}function s(e){var t=new Date,n=new Date(e),i=null;if(i=t-n>6048e5?{type:"full",format:{day:"2-digit",month:"2-digit",year:"2-digit"}}:t-n>864e5?{type:"mid",format:{weekday:"short"}}:{type:"short",format:{hour:"2-digit",minute:"2-digit"}},c[i.type][e])return c[i.type][e];var o=n.toLocaleString([],i.format);return c[i.type][e]=o,o}function r(e){return e?(e instanceof Date||(e=new Date(e)),e.toLocaleString([],{day:"2-digit",month:"short",year:"numeric"})):null}t.d=i,t.a=o,t.c=s,t.b=r;var a=n(132),l=n.n(a),c={full:{},mid:{},short:{}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return C});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(133)),p=n(890),d=n(38),h=n(15),f=(n.n(h),n(323)),m=n(894),g=n.n(m),v=n(888),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),y(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow "+this.props.displayName+"?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"action-container",onClick:this.onClick},this.props.isFollowing?l.a.createElement("button",{className:"action-button following"},"Following"):l.a.createElement("button",{className:"action-button follow"},"Follow"))}}]),t}(l.a.PureComponent),k=n.i(f.a)(b),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleUserFollow=n.toggleUserFollow.bind(n),n.onContentClick=n.onContentClick.bind(n),n.handleBioChange=n.handleBioChange.bind(n),n.onKeyPressForBio=n.onKeyPressForBio.bind(n),n.onDoneEditingBio=n.onDoneEditingBio.bind(n),n.state={hasCommunityBio:!(!e.communityId||!e.users.getIn([e.userId,"communitiesBio",e.communityId],!1)),hasBio:!!e.users.getIn([e.userId,"bio"],!1),byline:e.byline?e.byline:e.communityId?e.users.getIn([e.userId,"communitiesBio",e.communityId],e.users.getIn([e.userId,"bio"],"")):e.users.getIn([e.userId,"bio"],""),isEditingBio:!1},n}return s(t,e),y(t,[{key:"toggleUserFollow",value:function(){var e=this.props.userId;this.props.toggleUserFollow(e)}},{key:"onContentClick",value:function(e){this.props.shouldLinkToUser?h.browserHistory.push("/profile/"+this.props.userId):e.target.classList.contains("byline")&&this.props.isBioEditable&&this.setState({isEditingBio:!0})}},{key:"handleBioChange",value:function(e){this.setState({byline:e.target.value})}},{key:"onKeyPressForBio",value:function(e){13==(e.code||e.which)&&this.onDoneEditingBio()}},{key:"onDoneEditingBio",value:function(){this.props.communityId?this.props.editCommunityBio(this.props.communityId,this.state.byline):this.props.editProfile(this.props.currentLoggedInUser,{bio:this.state.byline},!1),this.setState({isEditingBio:!1,hasCommunityBio:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({hasCommunityBio:!(!e.communityId||!e.users.getIn([e.userId,"communitiesBio",e.communityId],!1)),hasBio:!!e.users.getIn([e.userId,"bio"],!1),byline:e.byline?e.byline:e.communityId?e.users.getIn([e.userId,"communitiesBio",e.communityId],e.users.getIn([e.userId,"bio"],"")):e.users.getIn([e.userId,"bio"],"")})}},{key:"render",value:function(){var e=this,t=this.props.users.get(this.props.userId);if(!t)return l.a.createElement("div",{className:"user-box"},l.a.createElement("div",{onClick:this.onContentClick},l.a.createElement(u.a,{className:"avatar-image",size:"30",src:g.a,name:"C L"})),l.a.createElement("div",{className:"shifted-right"},l.a.createElement("div",{className:"byline"},"Ask a question or start a poll…")));var i=this.state.byline,o="avatar-image";o+=this.props.flair?" flair "+this.props.flair:"",o+=this.props.shouldLinkToUser?" clickable":"";var s="user-box box";return s+=this.props.isCompact?" compact":"",s+=this.props.isSelected?" selected":"",l.a.createElement("div",{className:s,onClick:this.props.onClick?function(){return e.props.onClick(e.props.userId)}:null},this.props.rank?l.a.createElement("div",{className:"sidebar-label rank"},this.props.rank,"."):null,l.a.createElement("div",{onClick:this.onContentClick},l.a.createElement(u.a,{className:o,size:"30",name:t.get("displayName"),src:t.get("avatarUrl")})),l.a.createElement("div",{className:this.props.shouldLinkToUser?"shifted-right clickable":"shifted-right"},this.props.hideName?null:l.a.createElement("span",{className:"name",onClick:this.onContentClick},t.get("displayName")),this.props.timeAgoByline?l.a.createElement("span",{className:"byline",onClick:this.onContentClick},l.a.createElement(p.a,{date:this.props.timeAgoByline})):null,!i&&!this.props.isBioEditable||this.props.hideByline||this.props.timeAgoByline?null:this.state.isEditingBio?l.a.createElement("div",{style:{lineHeight:0}},l.a.createElement("input",{type:"text",maxLength:"60",className:"bio-input",autoFocus:"autofocus",placeholder:"Help others understand your experience with this topic",value:this.state.byline,onChange:this.handleBioChange,onKeyPress:this.onKeyPressForBio}),l.a.createElement("span",{className:"thin-button",onClick:this.onDoneEditingBio},"Done")):l.a.createElement("span",{className:"byline",onClick:this.onContentClick},i,this.props.isBioEditable?this.props.communityId?this.state.hasCommunityBio?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," (Edit) "):l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," Set Community Bio "):this.state.hasBio?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," (Edit) "):l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}}," Set Bio "):null),this.props.acceptIgnoreButtons?l.a.createElement("div",{className:"accept-ignore-buttons"},l.a.createElement("button",{className:"action-button accept",onClick:function(){return e.props.acceptUser(e.props.userId)}},"Accept"),l.a.createElement("button",{className:"action-button ignore",onClick:function(){return e.props.ignoreUser(e.props.userId)}},"Ignore")):null,this.props.undoAcceptButton?l.a.createElement("div",{className:"accept-ignore-buttons"},l.a.createElement("button",{className:"action-button accept",onClick:function(){return e.props.undoAcceptUser(e.props.userId)}},"Accepted")):null,this.props.undoIgnoreButton?l.a.createElement("div",{className:"accept-ignore-buttons"},l.a.createElement("button",{className:"action-button ignore",onClick:function(){return e.props.undoIgnoreUser(e.props.userId)}},"Ignored")):null),void 0!=this.props.score?l.a.createElement("div",{className:"label score"},this.props.score):null,void 0!=this.props.timestamp?l.a.createElement("div",{className:"label timestamp"},n.i(v.c)(this.props.timestamp)):null,this.props.isUnread?l.a.createElement("div",{className:"unread-dot"}):l.a.createElement("div",{className:"unread-dot read"}),this.props.addButton?l.a.createElement("div",{className:"action-container"},l.a.createElement("button",{className:"action-button add",onClick:function(){return e.props.addUser(e.props.userId)}},"Add")):this.props.removeButton&&this.props.userId!=this.props.currentLoggedInUser?l.a.createElement("div",{className:"action-container"},l.a.createElement("button",{className:"action-button remove",onClick:function(){return e.props.removeUser(e.props.userId)}},"Remove")):this.props.userId==this.props.currentLoggedInUser||this.props.hideFollowButton?null:l.a.createElement(k,{onClick:this.toggleUserFollow,allowLurker:!0,displayName:t.get("displayName"),isFollowing:t.get("isFollowing")}))}}]),t}(l.a.PureComponent),C=n.i(c.connect)(r,{toggleUserFollow:d.m,editCommunityBio:d.y,editProfile:d.h})(n.i(h.withRouter)(E))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(891),c=n.n(l),u=n(888),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),p(t,[{key:"render",value:function(){var e=this.props.date,t=n.i(u.d)(e);return Date.now()-new Date(e)<6048e5?a.a.createElement(c.a,{date:e}):a.a.createElement("span",null,t)}}]),t}(a.a.PureComponent);t.a=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.YEAR=t.MONTH=t.WEEK=t.DAY=t.HOUR=t.MINUTE=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){var n=[],i=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=n(1),d=i(p),h=n(903),f=i(h),m=n(902),g=i(m),v=t.MINUTE=60,y=t.HOUR=60*v,b=t.DAY=24*y,k=t.WEEK=7*b,E=t.MONTH=30*b,C=t.YEAR=365*b,w=function(e){function t(){var e,n,i,o;s(this,t);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return n=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.isStillMounted=!1,i.tick=function(e){if(i.isStillMounted&&i.props.live){var t=(0,g.default)(i.props.date).valueOf();if(!t)return void console.warn("[react-timeago] Invalid Date provided");var n=i.props.now(),o=Math.round(Math.abs(n-t)/1e3),s=o<v?1e3:o<y?1e3*v:o<b?1e3*y:0,r=Math.min(Math.max(s,1e3*i.props.minPeriod),1e3*i.props.maxPeriod);r&&(i.timeoutId=setTimeout(i.tick,r)),e||i.forceUpdate()}},o=n,r(i,o)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.isStillMounted=!0,this.props.live&&this.tick(!0)}},{key:"componentDidUpdate",value:function(e){this.props.live===e.live&&this.props.date===e.date||(!this.props.live&&this.timeoutId&&clearTimeout(this.timeoutId),this.tick())}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}},{key:"render",value:function(){var e=this.props,t=e.date,n=(e.formatter,e.component),i=(e.live,e.minPeriod,e.maxPeriod,e.title),s=e.now,r=o(e,["date","formatter","component","live","minPeriod","maxPeriod","title","now"]),a=(0,g.default)(t).valueOf();if(!a)return null;var u=s(),p=Math.round(Math.abs(u-a)/1e3),h=a<u?"ago":"from now",m=p<v?[Math.round(p),"second"]:p<y?[Math.round(p/v),"minute"]:p<b?[Math.round(p/y),"hour"]:p<k?[Math.round(p/b),"day"]:p<E?[Math.round(p/k),"week"]:p<C?[Math.round(p/E),"month"]:[Math.round(p/C),"year"],w=c(m,2),I=w[0],S=w[1],O=void 0===i?"string"==typeof t?t:(0,g.default)(t).toISOString().substr(0,16).replace("T"," "):i;"time"===n&&(r.dateTime=(0,g.default)(t).toISOString());var N=f.default.bind(null,I,S,h);return d.default.createElement(n,l({},r,{title:O}),this.props.formatter(I,S,h,a,N))}}]),t}(p.Component);w.displayName="TimeAgo",w.defaultProps={live:!0,component:"time",minPeriod:0,maxPeriod:1/0,formatter:f.default,now:function(){return Date.now()}},t.default=w},,,function(e,t,n){e.exports=n.p+"b38594fdb244e14f9de09f673844f2f7.png"},function(e,t){var n=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function i(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?r(new e.constructor,e):e}function o(e,t,n){a(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var i=t[n];a(Array.isArray(i),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,i)}function s(e,t){if(a("object"==typeof t,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",m.join(", "),d),l.call(t,d))return a(1===Object.keys(t).length,"Cannot have more than one key in an object with %s",d),t[d];var n=i(e);if(l.call(t,h)){var v=t[h];a(v&&"object"==typeof v,"update(): %s expects a spec of type 'object'; got %s",h,v),a(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",h,n),r(n,t[h])}l.call(t,c)&&(o(e,t,c),t[c].forEach(function(e){n.push(e)})),l.call(t,u)&&(o(e,t,u),t[u].forEach(function(e){n.unshift(e)})),l.call(t,p)&&(a(Array.isArray(e),"Expected %s target to be an array; got %s",p,e),a(Array.isArray(t[p]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,t[p]),t[p].forEach(function(e){a(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,t[p]),n.splice.apply(n,e)})),l.call(t,f)&&(a("function"==typeof t[f],"update(): expected spec of %s to be a function; got %s.",f,t[f]),n=t[f](n));for(var y in t)g.hasOwnProperty(y)&&g[y]||(n[y]=s(e[y],t[y]));return n}var r=n(9),a=n(2),l={}.hasOwnProperty,c="$push",u="$unshift",p="$splice",d="$set",h="$merge",f="$apply",m=[c,u,p,d,h,f],g={};m.forEach(function(e){g[e]=!0}),e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(59),c=n.n(l),u=n(136),p=n(17),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){void 0!=e.isModalOpen&&p.a&&(e.isModalOpen?document.getElementById("app").style.display="none":document.getElementById("app").style.display="")}},{key:"componentWillUnmount",value:function(){p.a&&(document.getElementById("app").style.display="")}},{key:"render",value:function(){return a.a.createElement(c.a,{isOpen:this.props.isModalOpen,onRequestClose:this.props.onRequestClose,className:"modal-content signup-modal-hack",overlayClassName:"modal-overlay"},a.a.createElement("div",{className:"close-button",onClick:this.props.onRequestClose}),this.props.actionBlockedMessage?a.a.createElement("div",{className:"sign-in-message"},"You need to be signed in to complete this action"):null,a.a.createElement(u.a,{to:this.props.postSignInSignUpTo,onComplete:this.props.onRequestClose,isModal:!0}))}}]),t}(a.a.PureComponent);t.a=h},function(e,t,n){var i=n(1018)("wks"),o=n(984),s=n(912).Symbol,r="function"==typeof s;(e.exports=function(e){return i[e]||(i[e]=r&&s[e]||(r?s:o)("Symbol."+e))}).store=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(944),c=n(31),u=i(c),p=n(1),d=i(p),h=n(948),f=i(h),m=n(904),g=i(m),v=n(949),y=(i(v),n(950)),b=i(y),k=n(951),E=i(k),C=n(953),w=i(C),I=n(956),S=i(I),O={topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},N=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refElement=function(e){return n._ref=e},n}return r(t,e),a(t,[{key:"componentWillMount",value:function(){if((0,b.default)(this.props.children),this.props.scrollableParent)throw new Error("The `scrollableParent` prop has changed name to `scrollableAncestor`.")}},{key:"componentDidMount",value:function(){var e=this;t.getWindow()&&(this.cancelInitialTimeout=(0,w.default)(function(){e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=(0,l.addEventListener)(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=(0,l.addEventListener)(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)}))}},{key:"componentWillReceiveProps",value:function(e){(0,b.default)(e.children)}},{key:"componentDidUpdate",value:function(){t.getWindow()&&this.scrollableAncestor&&this._handleScroll(null)}},{key:"componentWillUnmount",value:function(){t.getWindow()&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelInitialTimeout&&this.cancelInitialTimeout())}},{key:"_findScrollableAncestor",value:function(){var e=this.props,t=e.horizontal,n=e.scrollableAncestor;if(n)return(0,S.default)(n);for(var i=this._ref;i.parentNode;){if((i=i.parentNode)===document.body)return window;var o=window.getComputedStyle(i),s=t?o.getPropertyValue("overflow-x"):o.getPropertyValue("overflow-y"),r=s||o.getPropertyValue("overflow");if("auto"===r||"scroll"===r)return i}return window}},{key:"_handleScroll",value:function(e){if(this._ref){var t=this._getBounds(),n=(0,E.default)(t),i=this._previousPosition;if(this._previousPosition=n,i!==n){var o={currentPosition:n,previousPosition:i,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};this.props.onPositionChange.call(this,o),n===g.default.inside?this.props.onEnter.call(this,o):i===g.default.inside&&this.props.onLeave.call(this,o);var s=i===g.default.below&&n===g.default.above,r=i===g.default.above&&n===g.default.below;this.props.fireOnRapidScroll&&(s||r)&&(this.props.onEnter.call(this,{currentPosition:g.default.inside,previousPosition:i,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),this.props.onLeave.call(this,{currentPosition:n,previousPosition:g.default.inside,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}}},{key:"_getBounds",value:function(){var e=this.props.horizontal,t=this._ref.getBoundingClientRect(),n=t.left,i=t.top,o=t.right,s=t.bottom,r=e?n:i,a=e?o:s,l=void 0,c=void 0;this.scrollableAncestor===window?(l=e?window.innerWidth:window.innerHeight,c=0):(l=e?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,c=e?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var u=this.props,p=u.bottomOffset,d=u.topOffset;return{waypointTop:r,waypointBottom:a,viewportTop:c+(0,f.default)(d,l),viewportBottom:c+l-(0,f.default)(p,l)}}},{key:"render",value:function(){var e=this,t=this.props.children;if(!t)return d.default.createElement("span",{ref:this.refElement,style:{fontSize:0}});var n=function(n){e.refElement(n),t.ref&&t.ref(n)};return d.default.cloneElement(t,{ref:n})}}]),t}(d.default.Component);t.default=N,N.propTypes={children:u.default.element,debug:u.default.bool,onEnter:u.default.func,onLeave:u.default.func,onPositionChange:u.default.func,fireOnRapidScroll:u.default.bool,scrollableAncestor:u.default.any,horizontal:u.default.bool,topOffset:u.default.oneOfType([u.default.string,u.default.number]),bottomOffset:u.default.oneOfType([u.default.string,u.default.number])},N.above=g.default.above,N.below=g.default.below,N.inside=g.default.inside,N.invisible=g.default.invisible,N.getWindow=function(){if("undefined"!=typeof window)return window},N.defaultProps=O,N.displayName="Waypoint",e.exports=t.default},,function(e,t,n){e.exports=n.p+"d106b1f59ca10ab9ae13c149249d2e6d.png"},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return Array.isArray(e)?e:Array.from(e)}function s(e){var t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;var n=String(e).match(/\d+/g);if(null==n||n.length<=2)return t;var s=n.map(function(e){return parseInt(e)}),r=o(s),a=r[0],l=r[1],c=r.slice(2),u=[a,l-1].concat(i(c));return new Date(Date.UTC.apply(Date,i(u)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s},function(e,t,n){"use strict";function i(e,t,n){return 1!==e&&(t+="s"),e+" "+t+" "+n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={above:"above",inside:"inside",below:"below",invisible:"invisible"},e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return b});var r=n(137),a=n(38),l=n(17),c=n(32),u=n(37),p=(n.n(u),n(1)),d=n.n(p),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(){var t=this;if(s(this,e),this.images={},this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loadImage=this.loadImage.bind(this),this.isImageLoaded=this.isImageLoaded.bind(this),n.i(c.f)()){document.addEventListener("lazybeforeunveil",function(e){var n=e.target,i=n.getAttribute("data-bg"),o=n.getAttribute("data-bg-comp");i&&(o&&t.loadImage(o),t.loadImage(i),e.preventDefault())});var i=window.loadedImages||[],o=!0,l=!1,u=void 0;try{for(var p,d=i[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var h=p.value;this.images[h]={status:"finished"},r.a.dispatch(n.i(a.p)(["loadedImages",h,"status"],"finished"))}}catch(e){l=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw u}}}}return f(e,[{key:"onLoad",value:function(e){this.images[e].status="finished",r.a.dispatch(n.i(a.p)(["loadedImages",e,"status"],"finished"))}},{key:"onError",value:function(e){this.images[e].status="error",r.a.dispatch(n.i(a.p)(["loadedImages",e,"status"],"error"))}},{key:"isImageLoaded",value:function(e){if(!e||l.c)return!1;var t=this.images[e];return!(!t||"finished"!=t.status)}},{key:"loadImage",value:function(e){var t=this;if(!e||l.c)return null;var i=this.isImageLoaded(e);if(i)return i;if(this.images[e]&&"loading"==this.images[e].status)return!1;var o=new Image;return o.src=e,o.complete||o.width+o.height>0?(this.images[e]={status:"finished"},r.a.dispatch(n.i(a.p)(["loadedImages",e,"status"],"finished")),!0):(o.onload=function(){return t.onLoad(e)},o.onerror=function(){return t.onError(e)},this.images[e]={status:"loading"},r.a.dispatch(n.i(a.p)(["loadedImages",e,"status"],"loading")),!1)}}]),e}(),g=new m,v="https://img.imageboss.me/width/20/blur:2,webp:auto/",y=function(e){function t(e){return{loadedImages:e.get("loadedImages")}}var r=function(t){function n(e){s(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.isImageLoaded=t.isImageLoaded.bind(t),t.filterImgURL=v,t.getOriginalImage=t.getOriginalImage.bind(t),t.getCompressedImage=t.getCompressedImage.bind(t),t.loadImage=t.loadImage.bind(t),t.getLargestAvailableWithSmallestFallback=t.getLargestAvailableWithSmallestFallback.bind(t),t}return o(n,t),f(n,[{key:"getOriginalImage",value:function(e){return e?e.replace(this.filterImgURL,""):null}},{key:"getCompressedImage",value:function(e){return e?-1==e.indexOf(this.filterImgURL)?this.filterImgURL+e:e:null}},{key:"isImageLoaded",value:function(e){return g.isImageLoaded(e)||this.props.loadedImages&&"finished"==this.props.loadedImages.getIn([e,"status"])}},{key:"loadImage",value:function(e){return g.loadImage(e)}},{key:"getLargestAvailableWithSmallestFallback",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(l.c||!l.j)return e;var n=this.getOriginalImage(e),i=this.getCompressedImage(e);return this.isImageLoaded(n)?n:this.isImageLoaded(i)?i:t?i:null}},{key:"render",value:function(){return!!e&&d.a.createElement(e,h({},this.props,{isImageLoaded:this.isImageLoaded,getOriginalImage:this.getOriginalImage,getCompressedImage:this.getCompressedImage,loadImage:this.loadImage,getLargestAvailableWithSmallestFallback:this.getLargestAvailableWithSmallestFallback,ref:"component"}))}}]),n}(d.a.Component);return n.i(u.connect)(t,{},null,{withRef:!0})(r)},b=y(function(e){return function(t){function n(e){return s(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return o(n,t),f(n,[{key:"componentWillReceiveProps",value:function(e){this.props.image!=e.image&&this.refs.img&&this.refs.img.classList.contains("lazyloaded")&&(this.refs.img.className=this.refs.img.className.replace("lazyloaded","lazyload"))}},{key:"render",value:function(){if(!e)return!1;var t=this.props.image,n=this.props.className?this.props.className+" lazyload":"lazyload";if(l.c)return d.a.createElement(e,h({},this.props,{"data-bg":t,className:n}));var i=this.props.getLargestAvailableWithSmallestFallback(t,!1);return d.a.createElement(e,h({},this.props,{"data-bg":this.props.getOriginalImage(t),"data-bg-comp":this.props.getCompressedImage(t),className:n,ref:"img",style:i?{backgroundImage:"url("+i+")"}:{}}))}}]),n}(d.a.Component)}("div"))},function(e,t,n){"use strict";function i(e,t){var n=document.createElement("script");if(n.type="text/javascript",n.src=e.url,e.defer?(n.defer=1,n.async=0):n.async=1,t&&(n.onreadystatechange=t,n.onload=t),e.attrs){var i=!0,o=!1,s=void 0;try{for(var r,a=e.attrs[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var l=r.value;n.setAttribute(l.name,l.value||"")}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}}document.body.appendChild(n)}function o(e,t){var n=0,o=function(){++n>=e.length&&a(t)()},s=!0,r=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){i(c.value,o)}}catch(e){r=!0,l=e}finally{try{!s&&u.return&&u.return()}finally{if(r)throw l}}}function s(){return window.paypal&&window.braintree&&window.braintree.paypalCheckout}function r(e,t){if(t){var n=!1,i=!0,o=!1,s=void 0;try{for(var r,a=y[e].cbs[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){if(r.value==t){n=!0;break}}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}n||y[e].cbs.push(t)}}function a(e){return function(){!y[e].firstLoadSetupCompleted&&y[e].firstLoadSetup&&(y[e].firstLoadSetup(),y[e].firstLoadSetupCompleted=!0);var t=!0,i=!1,o=void 0;try{for(var s,r=y[e].cbs[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){(0,s.value)()}}catch(e){i=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw o}}y[e].cbs=[],y[e].isLoading=!1,y[e].hasLoaded=!0,m.a.dispatch(n.i(g.p)(["loadedScripts"],n.i(v.fromJS)(y)))}}function l(e){if(s())e&&e();else{var t=[{url:"https://www.paypalobjects.com/api/checkout.min.js",attrs:[{name:"data-version-4"}]},{url:"https://js.braintreegateway.com/web/3.32.0/js/client.min.js"},{url:"https://js.braintreegateway.com/web/3.32.0/js/paypal-checkout.min.js"}];if(e&&r("paypal",e),y.paypal.isLoading)return;y.paypal.isLoading=!0,o(t,"paypal")}}function c(e,t){if(t&&(y.stripe.tokenHandler=t),window.StripeCheckout)e&&e();else{if(e&&r("stripe",e),y.stripe.isLoading)return;y.stripe.isLoading=!0,y.stripe.firstLoadSetup=function(){window.stripeHandler=window.StripeCheckout.configure({key:f.d?"pk_live_HsiK0UoGAZj5FH3KYfE9X6cI":"pk_test_NQo2ZlWpgINif2edJlIZlmvG",image:"https://static.commonlounge.com/icon_small.png",name:"Compose Labs, Inc.",locale:"auto",zipCode:!0,token:function(e){y.stripe.tokenHandler&&y.stripe.tokenHandler(e)}})},i({url:"https://checkout.stripe.com/checkout.js"},a("stripe"))}}function u(e,t){p(e,{namespace:"ace",urls:[{url:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js",defer:!0}]})}function p(e,t){var n=t.namespace;if(y[n]&&y[n].hasLoaded)e&&e();else{if(y[n]||(y[n]={isLoading:!1,cbs:[]}),e&&r(n,e),y[n]&&y[n].isLoading)return;y[n].isLoading=!0,o(t.urls,n)}}function d(){c(),l()}function h(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.insertBefore(t,document.head.childNodes[document.head.childNodes.length-1].nextSibling)}t.e=s,t.f=l,t.g=c,t.b=u,t.a=p,t.d=d,t.c=h;var f=n(17),m=n(137),g=n(38),v=n(39),y=(n.n(v),{stripe:{isLoading:!1,cbs:[],firstLoadSetup:null,firstLoadSetupCompleted:!1,tokenHandler:null},paypal:{isLoading:!1,cbs:[]},sphereEngine:{isLoading:!1,cbs:[]}})},function(e,t,n){"use strict";function i(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)}function o(){document.body.scrollTop=document.documentElement.scrollTop=0}n.d(t,"b",function(){return a}),t.a=o;var s=n(32),r=function(e,t,n){var o=e.scrollTop,s=t-o;!function t(r){r+=20;var a=i(r,o,s,n);e.scrollTop=a,r<n&&setTimeout(function(){t(r)},20)}(0)},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;"scrollBehavior"in document.documentElement.style&&!n.i(s.g)()?window.scroll({top:e,left:0,behavior:"smooth"}):r(document.scrollingElement,e,t)}},,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){return{codeHighlightedText:e.get("codeHighlightedText"),customIdInfo:e.get("customIdInfo"),discussion:e.getIn(["discussions",t.discussionId]),currentUser:e.get("currentLoggedInUser")?e.getIn(["users",e.get("currentLoggedInUser")]):null,loadedImages:e.get("loadedImages")}}n.d(t,"a",function(){return x});var a=n(1),l=n.n(a),c=n(15),u=(n.n(c),n(37)),p=(n.n(u),n(39)),d=(n.n(p),n(1033),n(344)),h=n(17),f=n(32),m=n(131),g=n(997),v=n(996),y=n(1088),b=n(905),k=n(38),E=n(58),C=n(989),w=(n.n(C),n(326)),I=(n.n(w),n(323),n(1004)),S=n(136),O=n(980),N=n(826),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.getHTML=n.getHTML.bind(n),n.onClick=n.onClick.bind(n),n.renderLatex=n.renderLatex.bind(n),n.handleSizeInfo=n.handleSizeInfo.bind(n),n.handleImage=n.handleImage.bind(n),n.handleLatex=n.handleLatex.bind(n),n.handeInitialSetupAndState=n.handeInitialSetupAndState.bind(n),n.goToPreviousSection=n.goToPreviousSection.bind(n),n.goToNextSection=n.goToNextSection.bind(n),n.logSectionEvent=n.logSectionEvent.bind(n),n.findUnreadSectionIndex=n.findUnreadSectionIndex.bind(n),n.hasCompletedSection=n.hasCompletedSection.bind(n),n.finishLastSection=n.finishLastSection.bind(n),n.showHash=n.showHash.bind(n),n.scrollToTop=n.scrollToTop.bind(n),n.areSectionsActive=n.areSectionsActive.bind(n),n.notifyExternal=n.notifyExternal.bind(n),n.setMode=n.setMode.bind(n),n.isVisible=n.isVisible.bind(n),n.setSectionIndex=n.setSectionIndex.bind(n),n.onFeedbackFormSubmitted=n.onFeedbackFormSubmitted.bind(n),n.markAsComplete=n.markAsComplete.bind(n),n.refreshContentcomponents=n.refreshContentcomponents.bind(n),n.getCodeHighlightedText=n.getCodeHighlightedText.bind(n),n.hasVideo=n.hasVideo.bind(n),n.onStatusUpdate=n.onStatusUpdate.bind(n),n.getVideoPlayer=n.getVideoPlayer.bind(n),n.getStyleFromProperties=n.getStyleFromProperties.bind(n),n.clientWidth=null,n.state=n.handeInitialSetupAndState(),n}return s(t,e),_(t,[{key:"getStyleFromProperties",value:function(){var e=this.props.blockProperties;if(e){if(e.overlay)return{};var t=e.positionX||"auto",n=e.positionY||"auto",i=e.scale||"1.0",o=e.rotate||"0",s=e.maxWidth||"none";return{position:"auto"!=t||"auto"!=n?"absolute":"relative",left:"auto"!=t?t+"%":"auto",top:"auto"!=n?n+"%":"auto",transform:"scale("+i+") rotate("+o+"deg)",maxWidth:"none"!=s?s+"px":"none"}}}},{key:"handleSizeInfo",value:function(e,t){if(this.node){this.clientWidth||(this.clientWidth=this.node.clientWidth);var n=parseInt(e.getAttribute("data-scale")),i=parseInt(e.getAttribute("data-width")),o=parseInt(e.getAttribute("data-height"));i&&o?(i>this.clientWidth&&(o=Math.round(this.clientWidth/i*o)),t.style.width=n?n+"%":i+"px",t.style.height=(n?o*n/100:o)+"px"):n&&(t.style.width=n+"%")}}},{key:"handleImage",value:function(e,t,n){if(-1==t.indexOf("<img"))return t;var i=Array.from(e.getElementsByTagName("img")),o=!0,s=!1,r=void 0;try{for(var a,l=i[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value;if(h.j){var u=c.src||c.getAttribute("data-bg");if(u)if(-1==u.indexOf("static.commonlounge.com")||n.skipProgressiveLoading)c.getAttribute("data-scale")&&(c.style.width=c.getAttribute("data-scale")+"%");else{var p=this.props.getOriginalImage(u),d=this.props.getCompressedImage(u);if(this.props.isImageLoaded(p))u=p,c.style.width=c.getAttribute("data-scale")?c.getAttribute("data-scale")+"%":"",c.style.height="",c.className=c.className.replace("full-width-img",""),u!=c.src&&(c.src=u);else if(this.props.isImageLoaded(d))u=d,-1==c.className.indexOf("full-width-img lazyload")&&(c.className+=" full-width-img lazyload"),c.style.display="block",c.setAttribute("data-bg",p),this.handleSizeInfo(c,c),c.previousSibling&&c.previousSibling.classList.contains("full-width-img-placeholder-div")&&c.previousSibling.parentNode.removeChild(c.previousSibling),u!=c.src&&(c.src=u);else{u=d,c.style.display="none";var f=document.createElement("div");f.className="full-width-img-placeholder-div lazyload",f.setAttribute("data-bg",u),this.handleSizeInfo(c,f),c.parentNode.insertBefore(f,c)}}}}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}}},{key:"handleLatex",value:function(e,t){if(-1==t.indexOf('class="latex"'))return t;var n=Array.from(e.getElementsByClassName("latex")),i=!0,o=!1,s=void 0;try{for(var r,a=n[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var l=r.value,c=document.createElement("script");c.type="math/tex; "+("SPAN"==l.nodeName?"":"mode=display"),"text"in c?c.text=l.textContent:c.textContent=l.textContent;document.createElement("SPAN"==l.nodeName?"span":"div").appendChild(c),l.parentNode.replaceChild(c,l)}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}}},{key:"getCodeHighlightedText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;return n.i(y.a)(e),t.codeHighlightedText&&t.codeHighlightedText.get(e)||e}},{key:"getHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.html;if(!t||h.c)return t;if(-1==t.indexOf('class="latex"')&&-1==t.indexOf("<img"))return t;var n=document.createElement("div");return n.innerHTML=t,this.handleImage(n,t,e),this.handleLatex(n,t),n.innerHTML}},{key:"renderLatex",value:function(){var e=this;this.node&&!h.c&&n.i(d.a)({},function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.node],function(){})})}},{key:"findUnreadSectionIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.contentComponents.sectionNodes;if(!e.discussion||!e.discussion.get("sections"))return 0;for(var n=t.length-1;n>0;n--)if(!this.hasCompletedSection(n,t,e)&&(0==n||n>0&&this.hasCompletedSection(n-1,t,e)))return n;return 0}},{key:"notifyExternal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.mode,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.currentSectionIndex,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.contentComponents.sectionNodes;this.props.setMode&&this.props.setMode(e,t,n?n.length:null)}},{key:"hasVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.discussion&&e.discussion.getIn(["hasVideo"])}},{key:"hasLoadedVideoData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.discussion&&e.discussion.getIn(["videoInfo","video","outputConfig"],null)}},{key:"handeInitialSetupAndState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.refreshContentcomponents(e);if(!t)return{};var i=t.sectionNodes,o=this.hasVideo(e)&&e.allowVideo?"video":i&&e.allowSectionCards?"section":"scroll";e.currentUser&&("scroll"==e.currentUser.get("articleViewSetting")?o="scroll":i&&e.allowSectionCards&&"section"==e.currentUser.get("articleViewSetting")?o="section":this.hasVideo(e)&&e.allowVideo&&"video"==e.currentUser.get("articleViewSetting")&&(o="video"));var s=0,r=!1,a=!1;return"true"==n.i(E.c)("video")&&this.hasVideo(e)&&(o="video","true"==n.i(E.c)("completed")&&e.currentUser&&!1!==e.canView&&(r=!0,this.markAsComplete(e),this.needToScrollToReviews=!0,a=!0)),"section"==o&&!1!==e.canView&&("true"==n.i(E.c)("completed")&&e.currentUser?(s=i.length-1,r=!0,this.markAsComplete(e),this.needToScrollToReviews=!0):(s=this.findUnreadSectionIndex(e,i),this.logSectionEvent("start",s,i,e))),this.notifyExternal(o,s,i),{contentComponents:t,mode:o,currentSectionIndex:s,showFeedbackForm:!1,showFinalScreen:r,isVideoFeedbackFormShown:a}}},{key:"refreshContentcomponents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(""!=e.html&&!e.html)return null;var n=this.breakHtmlIntoComponents(e);if(!t)return n;this.setState({contentComponents:n})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.html!=e.html)this.setState(this.handeInitialSetupAndState(e));else{if(this.props.loadedImages!=e.loadedImages&&this.refreshContentcomponents(e,!0),this.props.customIdInfo!=e.customIdInfo){var t=this.breakHtmlIntoComponents(e);this.setState({contentComponents:t})}if(this.props.codeHighlightedText!=e.codeHighlightedText){var n=this.breakHtmlIntoComponents(e);this.setState({contentComponents:n})}if(e.currentUser&&!this.props.currentUser&&this.state.showFinalScreen&&this.markAsComplete(e),!this.hasVideo(this.props)&&this.hasVideo(e)&&e.allowVideo&&e.currentUser&&"video"==e.currentUser.get("articleViewSetting")&&this.setState({mode:"video"}),!this.hasLoadedVideoData(this.props)&&this.hasLoadedVideoData(e)&&e.allowEmbeddedVideo){var i=this.breakHtmlIntoComponents(e);this.setState({contentComponents:i})}}}},{key:"componentDidMount",value:function(){this.renderLatex()}},{key:"componentDidUpdate",value:function(){this.renderLatex(),this.needToScrollToReviews&&this.refs.feedbackSection&&(this.scrollToTop(!0),this.needToScrollToReviews=!1)}},{key:"setRef",value:function(e){this.node=e,this.props.setRef&&this.props.setRef(e)}},{key:"breakHtmlIntoComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getHTML(e),i=l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(t)}),o={nodes:i,sectionNodes:null};if(!t)return o;if(h.c){if(-1==t.indexOf('class="cl-section-separator"'))return o;try{var s=t.split(new RegExp('<div class="cl-section-separator" data-id="([0-9a-f]+)"></div>')),r=[],a="",c=!0,u=!1,p=void 0;try{for(var d,f=s[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var g=d.value;""!=g&&(g.match(/^[0-9a-f]{8}$/)?(r.push({nodes:[l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(a)})],id:g}),a=""):a+=g)}}catch(e){u=!0,p=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw p}}return{nodes:i,sectionNodes:r}}catch(e){return console.log(e),o}}if(-1==t.indexOf('class="custom-code-ref"')&&-1==t.indexOf("class='custom-code-ref'")&&-1==t.indexOf('class="cl-custom-element"')&&-1==t.indexOf("class='cl-custom-element'")&&-1==t.indexOf('class="cl-section-separator"')&&-1==t.indexOf("class='cl-section-separator'"))return t=this.getCodeHighlightedText(t,e),{nodes:l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(t)}),sectionNodes:null};var y=document.createElement("div");y.innerHTML=t;var b="",k=[],E=[],C=0,w=[],I=!1,S=!0,N=!1,P=void 0;try{for(var _,T=Array.from(y.children)[Symbol.iterator]();!(S=(_=T.next()).done);S=!0){var x=_.value,L=x.nodeName.toLowerCase();if("p"!=L||"&nbsp;"!=x.innerHTML||!(x.previousSibling&&"cl-section-separator"==x.previousSibling.className||x.nextSibling&&"cl-section-separator"==x.nextSibling.className))if("pre"!=L)if(b+=x.outerHTML,"div"==L&&"cl-custom-element"==x.className){if("mc-question"==x.getAttribute("data-type")){if(k.push(l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(b)})),I=!0,e.hideCustomElements)k.push(l.a.createElement("div",{className:"spoiler"},"Question blocks are not supported in edit history."));else{var M=x.getAttribute("data-id");k.push(l.a.createElement(v.a,{questionId:M,loggedOutModalInPlace:this.props.loggedOutModalInPlace,preventFullScreenCodeBlock:this.props.preventFullScreenCodeBlock,to:this.props.isInVideo&&this.props.discussionId&&encodeURIComponent("/discussion/"+this.props.discussionId+"/?video=true")}))}b=""}}else"div"==L&&"cl-section-separator"==x.className?(k.push(l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(b)})),E.push({nodes:k.slice(C),id:x.getAttribute("data-id"),headingHashes:w,hasQuestions:I}),C=k.length,b="",w=[],I=!1):("h1"==L||"h2"==L)&&x.children&&x.children[0]&&-1!=x.children[0].className.indexOf("user-content-")&&w.push(x.children[0].getAttribute("href").replace("#",""));else if(x.children&&x.children[0]&&"custom-code-ref"==x.children[0].className){var j=x.children[0],D=n.i(m.f)({node:j});if(D){var A=e.customIdInfo&&e.customIdInfo.getIn(["codeblock",D]);if("1"==n.i(m.f)({node:j,attr:"hide"}))continue;var R="1"==n.i(m.f)({node:j,attr:"output_only"});R||(A&&x.setAttribute("data-language",A.getIn(["init_values",A.get("default_language").toString(),"highlightjs"])),b+=this.getCodeHighlightedText(x.outerHTML,e)),b&&k.push(l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(b)})),k.push(l.a.createElement(O.a,{codeBlockId:D,additionalHeight:this.props.additionalHeight,preventFullScreen:this.props.preventFullScreenCodeBlock,showDefaultOutput:"1"==n.i(m.f)({node:j,attr:"show_output"}),showOutputOnly:R})),b=""}else"0"==n.i(m.f)({node:j,attr:"number"})&&n.i(m.c)(x,"skip-numbering"),"0"==n.i(m.f)({node:j,attr:"highlight"})?b+=x.outerHTML:b+=this.getCodeHighlightedText(x.outerHTML,e)}else b+=this.getCodeHighlightedText(x.outerHTML,e)}}catch(e){N=!0,P=e}finally{try{!S&&T.return&&T.return()}finally{if(N)throw P}}return b&&k.push(l.a.createElement("div",{dangerouslySetInnerHTML:n.i(m.i)(b)})),{nodes:k,sectionNodes:E.length>0?E:null}}},{key:"isVisible",value:function(){return this.refs.toggle&&n.i(f.k)(this.refs.toggle,this.props.additionalHeight||0)}},{key:"scrollToTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isVisible()||e&&h.a){var t=this.props.additionalHeight||0;w.animateScroll.scrollTo(this.refs.toggle.offsetTop-t+10,{duration:500})}}},{key:"setSectionIndex",value:function(e){var t={currentSectionIndex:e};this.state.showFinalScreen&&(t.showFinalScreen=!1),this.setState(t),this.scrollToTop(),this.notifyExternal(this.state.mode,e)}},{key:"goToPreviousSection",value:function(){this.state.showFinalScreen?this.setSectionIndex(this.state.contentComponents.sectionNodes.length-1):this.setSectionIndex(this.state.currentSectionIndex-1)}},{key:"goToNextSection",value:function(){var e=this.state.currentSectionIndex;this.logSectionEvent("complete",e),this.logSectionEvent("start",e+1),this.setSectionIndex(e+1)}},{key:"logSectionEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"complete",t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.contentComponents.sectionNodes,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props;if(!(t<0||t>=n.length)){("complete"==e?i.completeDiscussionSection:i.startDiscussionSection)(i.discussionId,n[t].id)}}},{key:"onClick",value:function(e){this.props.onClick&&this.props.onClick(e)}},{key:"hasCompletedSection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.contentComponents.sectionNodes,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;if(!n.discussion||!this.props.discussion.get("sections"))return 0;var i=n.discussion.get("sections"),o=t[e];return!0===i.getIn([o.id,"hasCompleted"])}},{key:"showHash",value:function(e){if(!this.areSectionsActive())return!1;if(!this.state.contentComponents)return!1;if(0==e)return this.setSectionIndex(0),!0;for(var t=this.state.contentComponents.sectionNodes,n=0;n<t.length;n++)if(-1!=(t[n].headingHashes||[]).indexOf(e)){this.setSectionIndex(n);break}return!0}},{key:"areSectionsActive",value:function(){return"section"==this.state.mode}},{key:"setMode",value:function(e){this.setState({mode:e}),this.props.currentUser&&this.props.editProfile(this.props.currentUser.get("eid"),{articleView:e},!1),this.notifyExternal(e)}},{key:"markAsComplete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.discussion;!t.get("hasCompleted")&&e.currentUser&&e.toggleDiscussionCompleted(t.get("eid"),e.displayedPlaylist.get("discussion"))}},{key:"finishLastSection",value:function(){var e=this.state.currentSectionIndex;this.logSectionEvent("complete",e),this.markAsComplete(),this.setState({showFinalScreen:!0}),this.scrollToTop()}},{key:"onFeedbackFormSubmitted",value:function(){this.scrollToTop();var e=(this.props.discussion,this.props.displayedPlaylist),t=e&&e.getIn(["items","nextDiscussionIds"],n.i(p.List)()).get(0);t&&c.browserHistory.push("/discussion/"+t+("video"==this.state.mode?"?autoplay=1":""))}},{key:"onStatusUpdate",value:function(e){e&&this.markAsComplete(),this.setState({showFinalScreen:e,isVideoFeedbackFormShown:e})}},{key:"getVideoPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.discussion;if(t)return l.a.createElement(N.CLVideoPlayerContainer,{onStatusUpdate:this.onStatusUpdate,audio:t.getIn(["videoInfo","video","audioUrl"],null),blocks:t.getIn(["videoInfo","video","outputConfig"],null),toc:t.getIn(["videoInfo","video","additionalOutputData","tableOfContents"],null),videoId:t.getIn(["videoInfo","video","eid"],null),discussionId:t.get("eid")})}},{key:"render",value:function(){var e=this;if(!this.state.contentComponents)return null;var t=this.state.contentComponents.sectionNodes,i=this.state.currentSectionIndex,o=[];if(t)for(var s=0;s<t.length;s++)!function(n){o.push(l.a.createElement("div",{className:(n==i?"active dnr-section-active":"")+" "+(e.hasCompletedSection(n)?"completed":"")+" section-"+t[n].id+" "+(t[n].hasQuestions?"question":"")+" discussion-section-heading","data-section-id":t[n].id,onClick:function(){return e.setSectionIndex(n)}}))}(s);var r=null,a=this.props.discussion,u=a&&a.get("hasCompleted"),d=null,h=null;if(a){var f=a.get("canView"),m=this.props.displayedPlaylist,v=a.getIn(["rating","isRateable"],!1)&&f&&m,y=a.getIn(["feedbackPrompts"],[]).filter(function(e){return"default_rating"==e.type&&null!=e.response&&parseFloat(e.response)>=0}).length>0||a.getIn(["rating","myRating"],!1);r=v?l.a.createElement("div",{className:"feedback-section-wrapper",ref:"feedbackSection"},l.a.createElement(I.a,{discussionId:a.get("eid"),showFeedbackForm:!y,displayedPlaylistId:m.get("eid"),displayedPlaylistDiscussionId:m.get("discussion"),onSaveNotify:this.onFeedbackFormSubmitted,videoHack:this.state.isVideoFeedbackFormShown&&"video"==this.state.mode})):null;var b=m&&m.getIn(["items","nextDiscussionIds"],n.i(p.List)()).get(0);h=m&&l.a.createElement(c.Link,{to:"/discussion/"+b+("video"==this.state.mode?"?autoplay=1":"")},l.a.createElement("div",{className:"bold-button"},"Next Tutorial →")),this.state.showFinalScreen&&(d=this.props.currentUser?l.a.createElement("div",{className:"final-screen"},l.a.createElement("div",{className:"screen-heading"},"Congrats!"),l.a.createElement("div",{className:"screen-copy"},"You've completed ",l.a.createElement("strong",null,a.get("name"))),l.a.createElement("div",{className:"feedback-prompt"},r)):l.a.createElement("div",{className:"final-screen"},l.a.createElement("div",{className:"screen-heading"},"Congrats!"),l.a.createElement("div",{className:"screen-copy"},"You've completed ",l.a.createElement("strong",null,a.get("name"))),l.a.createElement("div",{className:"screen-copy"},"Log in to make sure you don't lose your progress."),l.a.createElement(S.a,{isSignUp:!0,to:encodeURIComponent("/discussion/"+a.get("eid")+"/?completed=true"+("video"==this.state.mode?"&video=true":"")),preventAutoFocus:!0})))}if(this.props.returnRawNodes)return l.a.createElement("div",P({className:this.props.className,style:this.props.style||this.getStyleFromProperties()||{},ref:this.setRef,onClick:this.onClick,key:this.props.key},this.props.additionalProps),this.state.contentComponents.nodes);var k=[l.a.createElement("div",{className:"select-type-button select-scroll-button "+("scroll"==this.state.mode?"active dnr-viewmode-active":""),onClick:function(){return e.setMode("scroll")},"data-viewmode":"scroll"},"Article")];return t&&this.props.allowSectionCards&&k.push(l.a.createElement("div",{className:"select-type-button select-cards-button "+(this.areSectionsActive()?"active dnr-viewmode-active":""),onClick:function(){return e.setMode("section")},"data-viewmode":"section"},"Cards")),a&&this.hasVideo()&&this.props.allowVideo&&k.push(l.a.createElement("div",{className:"select-type-button select-video-button "+("video"==this.state.mode?"active dnr-viewmode-active":""),onClick:function(){return e.setMode("video")},"data-viewmode":"video"},"Video 🎁")),l.a.createElement("div",{className:"content-card-wrapper"},k.length>1&&l.a.createElement("div",{className:"cards-scroll-toggle",ref:"toggle"},l.a.createElement("span",{className:"label dark-gray with-bottom-padding large block"},"Choose your learning format:"),k),"video"==this.state.mode?this.state.showFinalScreen?[l.a.createElement("div",{className:"content-card video-review"},d),l.a.createElement("div",{className:"bold-button-row is-flex right-aligned"},h,l.a.createElement("div",{className:"bold-button secondary",onClick:function(){return e.onStatusUpdate(!1)}},"Back to Video"))]:!1===this.props.canView?l.a.createElement(g.a,null):this.getVideoPlayer():l.a.createElement("div",{className:this.areSectionsActive()?"content-card":"content-card scroll"},this.areSectionsActive()&&l.a.createElement(C.Sticky,{className:"discussion-section-headings",stickyStyle:{transform:"translateY("+(43+this.props.additionalHeight)+"px)",webkitTransform:"translateY("+(43+this.props.additionalHeight)+"px)",zIndex:4,borderColor:"#2F629E",paddingBottom:"10px",paddingTop:"10px"},topOffset:-(this.props.additionalHeight+43)},o),l.a.createElement("div",P({className:this.props.className,style:this.props.style||this.getStyleFromProperties()||{},ref:this.setRef,onClick:this.onClick,key:this.props.key},this.props.additionalProps),this.areSectionsActive()?this.state.showFinalScreen?d:t[i].nodes:this.state.contentComponents.nodes),this.areSectionsActive()?l.a.createElement("div",{className:"bold-button-row is-flex right-aligned"},i<t.length-1?l.a.createElement("div",{className:"bold-button",onClick:this.goToNextSection},"Next →"):this.state.showFinalScreen?h:l.a.createElement("div",{className:"bold-button",onClick:this.finishLastSection},u?"Finish":"Mark Completed"),i>0&&!this.state.showFinalScreen&&l.a.createElement("span",{className:"label dark-blue"},i+1," / ",t.length),i>0?l.a.createElement("div",{className:"bold-button secondary",onClick:this.goToPreviousSection},"Previous"):null):null,!1===this.props.canView?l.a.createElement("div",{className:"fadeout large-fadeout"}):null,!1===this.props.canView?l.a.createElement(g.a,null):null))}}]),t}(l.a.PureComponent),x=n.i(b.b)(n.i(u.connect)(r,{storeCode:k.q,logEvent:k.c,startDiscussionSection:k.r,completeDiscussionSection:k.s,toggleDiscussionCompleted:k.t,editProfile:k.h},null,{withRef:!0})(T))},function(e,t,n){var i=n(912),o=n(895),s=n(1010),r=n(936),a=function(e,t,n){var l,c,u,p=e&a.F,d=e&a.G,h=e&a.S,f=e&a.P,m=e&a.B,g=e&a.W,v=d?o:o[t]||(o[t]={}),y=v.prototype,b=d?i:h?i[t]:(i[t]||{}).prototype;d&&(n=t);for(l in n)(c=!p&&b&&void 0!==b[l])&&l in v||(u=c?b[l]:n[l],v[l]=d&&"function"!=typeof b[l]?n[l]:m&&c?s(u,i):g&&b[l]==u?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):f&&"function"==typeof u?s(Function.call,u):u,f&&((v.virtual||(v.virtual={}))[l]=u,e&a.R&&y&&!y[l]&&r(y,l,u)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(934),o=n(1065),s=n(1020),r=Object.defineProperty;t.f=n(923)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),o)try{return r(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users")}}n.d(t,"a",function(){return y});var a=n(1),l=n.n(a),c=n(15),u=(n.n(c),n(37)),p=(n.n(u),n(39)),d=(n.n(p),n(136)),h=n(133),f=n(907),m=n(32),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),g(t,[{key:"componentDidMount",value:function(){this.documentHasVerticalScrollBar=n.i(m.l)()}},{key:"render",value:function(){var e=this;n.i(p.fromJS)(this.props.users.keySeq().toArray()).filter(function(t){return e.props.users.getIn([t,"avatarUrl"])}).slice(0,6).map(function(t,n){return l.a.createElement(h.a,{className:"avatar-image",size:"30",name:e.props.users.get(t).get("displayName"),src:e.props.users.get(t).get("avatarUrl"),key:n})});return l.a.createElement("div",{className:this.props.isVeryWide?"footer-wrapper very-wide":this.props.isWide?"footer-wrapper wide":"footer-wrapper",style:{backgroundColor:this.props.whiteBg?"white":"transparent"}},this.props.currentLoggedInUser||this.props.hideSignupForm?null:l.a.createElement("div",{className:"footer-sign-up-form"},l.a.createElement(d.a,{isSignUp:!0,to:this.props.to,entityId:this.props.entityId,action:this.props.action,preventAutoFocus:!0})),this.documentHasVerticalScrollBar?l.a.createElement("div",{className:"scroll-to-top-wrapper"},l.a.createElement("div",{className:"scroll-to-top zoom-on-hover zoom-to-normal",onClick:function(){return n.i(f.b)(0,200)}},l.a.createElement("span",{className:"back-text"},"Back to top"))):null,l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:"sections"},l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"title"},"Popular Paths & Courses"),l.a.createElement("div",{className:"column"},l.a.createElement(c.Link,{to:"/discussion/35ccdb70826e434a876d612504297232"},"Machine Learning"),l.a.createElement(c.Link,{to:"/path/518e031b16c2483c995bb66587298dd4"},"Deep Learning"),l.a.createElement(c.Link,{to:"/path/8b524fb782f741a3a1c1a8493b873791"},"Natural Language Processing"),l.a.createElement(c.Link,{to:"/discussion/262fae2394504efa88215ca7c388eb4e"},"Big Data"),l.a.createElement(c.Link,{to:"/path/be59f08e4adc4640aa1a84b08cc7e8a1"},"Data Science"),l.a.createElement(c.Link,{to:"/discussion/8ecde661012f477dbbaf74084d959974"},"Bioinformatics"),l.a.createElement(c.Link,{to:"/discussion/d4a14f601eb44281b6c579e73d126cca"},"Algorithms"),l.a.createElement(c.Link,{to:"/discussion/4d18c0617215411d85db0cba0b96dc09"},"Cryptography"))),l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"title blank"},"New Paths & Courses"),l.a.createElement("div",{className:"column"},l.a.createElement(c.Link,{to:"/path/1f88878c337a43d799322d0cc1444bda"},"Web Development"),l.a.createElement(c.Link,{to:"/path/bdc9fa8ceb064c89b1914c98ac81250f"},"UX & UI Design"),l.a.createElement(c.Link,{to:"/discussion/88c4daa8d7174371b1745a4e55382d61"},"Startups"),l.a.createElement(c.Link,{to:"/discussion/1013c511951f4c47a803c32c4e1ae0f2"},"Product Management"),l.a.createElement(c.Link,{to:"/path/be6e1e2809524098aaf4dc639b1b8bd9"},"Cryptocurrencies"),l.a.createElement(c.Link,{to:"/discussion/56e4a1dca24a4d459856ea9739cbd48a"},"Finance"),l.a.createElement(c.Link,{to:"/discussion/ef5b74cab54a4247a9b56d92438d8cc9"},"College Admissions"))),l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"title"},"About Us"),l.a.createElement("div",{className:"column"},l.a.createElement(c.Link,{to:"/about"},"Our Mission"),l.a.createElement(c.Link,{to:"/contribute"},"How to Contribute"),l.a.createElement(c.Link,{to:"/upgrade"},"Upgrade to Pro"),l.a.createElement(c.Link,{to:"/referral"},"Get a Free Month"),l.a.createElement(c.Link,{to:"/community/ab1745cabb1440b79d1cc710a33a3bda/8a977abe99e84cd59e68f80f477a811e"},"Help and FAQ"),l.a.createElement(c.Link,{to:"/community/ab1745cabb1440b79d1cc710a33a3bda"},"CommonLounge Meta"),l.a.createElement("a",{target:"_blank",href:"http://composelabs.com/"},"Team"),l.a.createElement(c.Link,{to:"/privacy"},"Privacy, Terms & Refunds"))),l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"title"},"Get in touch"),l.a.createElement("div",{className:"column"},l.a.createElement("a",{href:"mailto:hello@commonlounge.com"},"hello@commonlounge.com"),l.a.createElement("a",{target:"_blank",href:"https://www.facebook.com/commonlounge"},"Facebook"),l.a.createElement("a",{target:"_blank",href:"https://twitter.com/commonlounge"},"Twitter"),l.a.createElement("span",{className:"contact-info"},"San Francisco, CA, USA"),l.a.createElement("span",{className:"contact-info"},"+1 844 318 7406")))),l.a.createElement("div",{className:"copyright label"},"Copyright 2016-",(new Date).getFullYear(),", Compose Labs Inc. All rights reserved.")))}}]),t}(l.a.PureComponent),y=n.i(u.connect)(r)(v)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1151),s=i(o),r=n(1150),a=i(r),l=n(1048),c=i(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1048),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},,,function(e,t,n){var i=n(1066),o=n(1011);e.exports=function(e){return i(o(e))}},,function(e,t,n){"use strict";t.__esModule=!0;var i=n(1149),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t,n){e.exports=!n(935)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},,,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),l=n.n(a),c=n(896),u=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.state={highlightedOptions:[]},n.onOptionClick=n.onOptionClick.bind(n),n.isOptionHighlighted=n.isOptionHighlighted.bind(n),n.resetHighlights=n.resetHighlights.bind(n),n.onFocus=n.onFocus.bind(n),n.props.onChange(n.props.initialSearchTerm||"",n.props.type),n}return r(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e){this.props.selectedOptions!=e.selectedOptions&&this.resetHighlights()}},{key:"isOptionHighlighted",value:function(e){return-1!=this.state.highlightedOptions.indexOf(e.get("name"))}},{key:"onOptionClick",value:function(e){e.get("disabled")||(this.isOptionHighlighted(e)?this.props.onToggle(e.toJS()):this.setState(u()(this.state,i({},"highlightedOptions",{$push:[e.get("name")]}))))}},{key:"componentDidMount",value:function(){var e=this.refs["search-box"];this.props.autofocus&&e&&e.focus()}},{key:"resetHighlights",value:function(){this.setState({highlightedOptions:[]})}},{key:"onChange",value:function(e){var t=e.target.value;this.props.maxLength&&(t=t.substring(0,this.props.maxLength)),this.resetHighlights(),this.props.onChange(t,this.props.type)}},{key:"onFocus",value:function(e){this.resetHighlights(),this.props.onFocus&&this.props.onFocus()}},{key:"render",value:function(){var e=this,t=this.props.selectedOptions||[],n=0!=this.props.isPage,i=t.map(function(t){return l.a.createElement("div",{className:t.get("type")+" selected-option"+(e.isOptionHighlighted(t)?" highlighted":"")+(t.get("disabled")?"":" editable"),onClick:function(){return e.onOptionClick(t)}},t.get("name"))});return l.a.createElement("div",{className:this.props.hasBorder?"search-box has-border":"search-box"},l.a.createElement("div",{className:"selected-options"},i,l.a.createElement("div",{className:"search-term"},l.a.createElement("input",{type:"text",ref:"search-box",value:this.props.query,placeholder:this.props.placeholder?this.props.placeholder:this.props.type?this.props.showAddLanguage?"Search or add a new "+this.props.type:"Search for a "+this.props.type:"Search",onChange:this.onChange,onFocus:this.onFocus,autoFocus:!!this.props.autoFocus}),this.props.clearQuery&&this.props.query.length>0?l.a.createElement("span",{className:"label clickable uppercase blue",onClick:this.props.clearQuery},n?"Clear":"Close"):null)))}}]),t}(l.a.PureComponent);t.a=d},,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{myCommunities:e.get("myCommunities"),communities:e.get("communities"),currentLoggedInUser:e.get("currentLoggedInUser"),searchResults:e.get("search"),sidebarScrollOffset:e.get("sidebarScrollOffset"),tagsMap:e.get("tags"),discussions:e.get("discussions"),users:e.get("users"),visitedPaths:e.get("visitedPaths")}}n.d(t,"a",function(){return C});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(1045)),h=n(1057),f=n(1056),m=n(990),g=n(38),v=n(901),y=(n.n(v),n(325),n(324)),b=(n(131),n(889),n(1035)),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.currentLoggedInUser&&n.props.fetchUserCommunities(),n.props.search("","popularCommunities"),n.updatePage=n.updatePage.bind(n),n.onClick=n.onClick.bind(n),n.state={adminOptionsShown:!1},n}return s(t,e),k(t,[{key:"onClick",value:function(e){this.updatePage()}},{key:"componentDidMount",value:function(){var e=this;if(void 0!=this.props.sidebarScrollOffset){var t=this.props.sidebarScrollOffset;setTimeout(function(){var n=e.refs.community_list;n&&(n.scrollTop=t)},1e3)}}},{key:"componentWillReceiveProps",value:function(e){e.currentActiveSection&&e.currentActiveSection!=this.props.currentActiveSection&&document.getElementById(e.currentActiveSection)&&document.getElementById(e.currentActiveSection).scrollIntoView(),(1==e.hasScrolledPastDiscussionMetadata&&0==this.props.hasScrolledPastDiscussionMetadata||0==e.isDiscussionCollapsed&&1==this.props.isDiscussionCollapsed)&&setTimeout(function(){return document.getElementById("discussion-filters")&&document.getElementById("discussion-filters").scrollIntoView()},100)}},{key:"updatePage",value:function(){var e=this.refs.community_list;if(e){var t=e.scrollTop;this.props.setStateAtPath(["sidebarScrollOffset"],t)}}},{key:"render",value:function(){var e=this,t=null,i=this.props.discussions.getIn([this.props.discussionId]),o=i&&"PLAYLIST"==i.getIn(["typeInfo","type"]),s=(this.props.pricingInfo||n.i(p.fromJS)({}),this.props.currentLoggedInUser),r=this.props.users.getIn([this.props.currentLoggedInUser,"plan","isPromo"],!1),a=(this.props.users.getIn([s,"plan","status"]),i&&(i.getIn(["typeInfo","stats","projectCount"],0),i.getIn(["typeInfo","stats","quizCount"],0)),null);this.props.acButtons&&(a=this.props.acButtons.map(function(e){return l.a.createElement("a",{href:e.url,target:"_blank"},l.a.createElement("button",{className:"label with-right-padding"},e.display))}));var c=i&&i.get("ah")?{__html:i.get("ah")}:null;this.props.tags&&(t=this.props.tags.map(function(t,n){return e.props.tagsMap.get(t)?l.a.createElement(u.Link,{className:"no-decoration",to:"/discussion/"+e.props.discussionId+"/"+t,onClick:e.onTagClick},l.a.createElement("div",{className:"sidebar-row thin zoom-on-hover"},l.a.createElement("div",{className:e.props.activeTagId==t?"sidebar-label tag-label active":"sidebar-label tag-label"},e.props.tagsMap.get(t).get("name")," ",l.a.createElement("span",{className:"posts-count"},e.props.tagsMap.get(t).get("postsCount"))))):null}));var g=null;this.props.filters&&(g=this.props.filters.map(function(e,t){return l.a.createElement(u.Link,{className:"no-decoration",to:e.linkTo},l.a.createElement("div",{className:"sidebar-row thin zoom-on-hover"},l.a.createElement("div",{className:e.isActive?"sidebar-label active":"sidebar-label"},e.displayName)))}));var v="sidebar";return this.props.noRightSidebar&&(v+=" no-right-sidebar"),this.props.miniLeftSidebar&&(v+=" mini-left-sidebar"),this.props.isFaded&&(v+=" faded"),this.props.onTwoColumnLayoutPage&&(v+=" on-two-column-layout-page"),l.a.createElement("div",{className:v,id:"sidebar"},l.a.createElement("div",{className:"content"},this.props.showTags||this.props.showFilters?null:l.a.createElement(m.a,null),this.props.showEditHistory?l.a.createElement("div",null,l.a.createElement(d.a,{onClick:this.props.onClickTOC,showEditHistory:!0,users:this.props.users,discussion:this.props.discussions.getIn([this.props.discussionId])})):o?l.a.createElement("div",null,l.a.createElement(h.a,{discussionId:this.props.discussionId,location:"sidebar"}),l.a.createElement(f.a,{onSubscribeClick:this.props.onSubscribeClick,onUnSubscribeClick:this.props.onUnSubscribeClick,discussionId:this.props.discussionId,location:"sidebar"}),l.a.createElement("div",{className:"course-share-section"},l.a.createElement(b.a,{url:"/discussion/"+this.props.discussionId+"/main",title:this.props.discussions.getIn([this.props.discussionId,"name"],""),objId:this.props.discussionId,objType:"discussion",location:"sidebar"}))):l.a.createElement("div",null,this.props.playlistDiscussionId?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Part of course:"),l.a.createElement("div",{className:"sidebar-row playlist-row"},l.a.createElement("div",{className:"left-sidebar-discussion"},l.a.createElement(u.Link,{to:"/discussion/"+this.props.playlistDiscussionId},l.a.createElement("div",{className:"sidebar-label multi discussion-title playlist-discussion-title"},this.props.discussions.getIn([this.props.playlistDiscussionId,"name"],"")))))):null,this.props.previousDiscussionId?l.a.createElement("div",null,l.a.createElement("div",{className:"sidebar-row previous-discussion-row"},l.a.createElement("div",{className:"left-sidebar-discussion zoom-on-hover zoom-to-normal"},l.a.createElement(u.Link,{to:"/discussion/"+this.props.previousDiscussionId},l.a.createElement("div",{className:"sidebar-label multi discussion-title"},this.props.discussions.getIn([this.props.previousDiscussionId,"name"],"")),l.a.createElement("div",{className:"sidebar-label description-label"},"Previous item"))))):null,l.a.createElement(d.a,{onClick:this.props.onClickTOC,playlistDiscussionId:this.props.playlistDiscussionId,discussion:this.props.discussions.getIn([this.props.discussionId]),currentActiveSection:this.props.currentActiveSection}),this.props.nextDiscussionId?l.a.createElement("div",null,l.a.createElement("div",{className:"sidebar-row next-discussion-row"},l.a.createElement("div",{className:"left-sidebar-discussion zoom-on-hover zoom-to-normal"},l.a.createElement(u.Link,{to:"/discussion/"+this.props.nextDiscussionId},l.a.createElement("div",{className:"sidebar-label multi discussion-title"},this.props.discussions.getIn([this.props.nextDiscussionId,"name"],"")),l.a.createElement("div",{className:"sidebar-label description-label"},"Next item"))))):null),this.props.showFilters?l.a.createElement("div",{className:"filters-section"},l.a.createElement("div",{className:"section-heading"},"Filters"),g,l.a.createElement("div",{className:"sidebar-buttons no-border-top"})):null,0==this.props.isDiscussionCollapsed&&this.props.hasScrolledPastDiscussionMetadata&&this.props.showTags&&t?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading",id:"discussion-filters"},"Discussion Filters"),l.a.createElement(u.Link,{className:"no-decoration",to:"/discussion/"+this.props.discussionId+"/main",onClick:this.onTagClick},l.a.createElement("div",{className:"sidebar-row thin zoom-on-hover"},l.a.createElement("div",{className:"main"==this.props.activeTagId?"sidebar-label active":"sidebar-label"},this.props.shouldShowAllTag?"Summary":l.a.createElement("span",null,"All ",y.b," ",l.a.createElement("span",{className:"posts-count"},this.props.discussions.getIn([this.props.discussionId,"postsCount"],0)))))),this.props.shouldShowAllTag?l.a.createElement(u.Link,{className:"no-decoration",to:"/discussion/"+this.props.discussionId+"/all",onClick:this.onTagClick},l.a.createElement("div",{className:"sidebar-row thin zoom-on-hover"},l.a.createElement("div",{className:"all"==this.props.activeTagId?"sidebar-label active has-extra-margin":"sidebar-label has-extra-margin"},"All ",y.b," ",l.a.createElement("span",{className:"posts-count"},this.props.discussions.getIn([this.props.discussionId,"postsCount"],0))))):null,t):null,this.state.adminOptionsShown?l.a.createElement("div",null,a&&a.length>0?a:null,c?l.a.createElement("div",{dangerouslySetInnerHTML:c}):null,this.props.autolinkURL?l.a.createElement(u.Link,{to:this.props.autolinkURL},l.a.createElement("button",{className:"label"},"Autolink")):null):l.a.createElement("div",{className:"label with-margin pointer",onClick:function(){return e.setState({adminOptionsShown:!0})}},"Show admin stats")))}}]),t}(l.a.PureComponent),C=n.i(c.connect)(r,{fetchUserCommunities:g.F,search:g.G,setStateAtPath:g.p})(n.i(u.withRouter)(E))},function(e,t,n){"use strict";var i=n(1),o=n.n(i),s=n(53),r=(n.n(s),n(332)),a=n(333),l=n.n(a),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.a=l()({loader:function(){return new Promise(function(e){return n.e(23).then(function(t){return e(n(1084))}.bind(null,n)).catch(n.oe)})},loading:r.a,render:function(e,t){var n=e.default;return o.a.createElement(n,c({ref:"asyncEditor"},t))}})},function(e,t,n){var i=n(960);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(913),o=n(963);e.exports=n(923)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){function i(e,t,n,i){var r=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var c=t[a],u=i?i(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),r?s(n,c,u):o(n,c,u)}return n}var o=n(1039),s=n(1040);e.exports=i},function(e,t,n){!function(t,i){e.exports=i(n(1),n(965))}(0,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1).default,o=n(17).default,s=n(26).default,r=n(29).default,a=n(30).default,l=n(36).default,c=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(40),p=c(u),d=function(e){function t(){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),s(t,[{key:"propsWith",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n={};return l(this.props).forEach(function(i){if(-1!==i.search(e)){var o=t?i.replace(e,""):i;n[o]=this.props[i]}},this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var e=this.props.options||this.propsWith(/^option-/,!0),t=p.default.version.match(/0\.13(.*)/)?this.refs.element.getDOMNode():this.refs.element,i=n(41);this.clipboard=new i(t,e);var o=this.propsWith(/^on/,!0);l(o).forEach(function(e){this.clipboard.on(e.toLowerCase(),this.props["on"+e])},this)}},{key:"render",value:function(){var e=a({type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:"element"},this.propsWith(/^data-/),this.propsWith(/^button-/,!0));return p.default.createElement(this.getComponent(),e,this.props.children)}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}]),t}(p.default.Component);t.default=d,e.exports=t.default},function(e,t,n){"use strict";var i=n(2).default;t.default=function(e,t,n){for(var o=!0;o;){var s=e,r=t,a=n;o=!1,null===s&&(s=Function.prototype);var l=i(s,r);if(void 0!==l){if("value"in l)return l.value;var c=l.get;if(void 0===c)return;return c.call(a)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=r,n=a,o=!0,l=u=void 0}},t.__esModule=!0},function(e,t,n){e.exports={default:n(3),__esModule:!0}},function(e,t,n){var i=n(4);n(5),e.exports=function(e,t){return i.getDesc(e,t)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){var i=n(6);n(10)("getOwnPropertyDescriptor",function(e){return function(t,n){return e(i(t),n)}})},function(e,t,n){var i=n(7),o=n(9);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(8);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(11),o=n(13),s=n(16);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*s(function(){n(1)}),"Object",r)}},function(e,t,n){var i=n(12),o=n(13),s=n(14),r=function(e,t,n){var a,l,c,u=e&r.F,p=e&r.G,d=e&r.S,h=e&r.P,f=e&r.B,m=e&r.W,g=p?o:o[t]||(o[t]={}),v=p?i:d?i[t]:(i[t]||{}).prototype;p&&(n=t);for(a in n)(l=!u&&v&&a in v)&&a in g||(c=l?v[a]:n[a],g[a]=p&&"function"!=typeof v[a]?n[a]:f&&l?s(c,i):m&&v[a]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(c):h&&"function"==typeof c?s(Function.call,c):c,h&&((g.prototype||(g.prototype={}))[a]=c))};r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,e.exports=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(15);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var i=n(18).default,o=n(20).default;t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=i(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o?o(e,t):e.__proto__=t)},t.__esModule=!0},function(e,t,n){e.exports={default:n(19),__esModule:!0}},function(e,t,n){var i=n(4);e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){e.exports={default:n(21),__esModule:!0}},function(e,t,n){n(22),e.exports=n(13).Object.setPrototypeOf},function(e,t,n){var i=n(11);i(i.S,"Object",{setPrototypeOf:n(23).set})},function(e,t,n){var i=n(4).getDesc,o=n(24),s=n(25),r=function(e,t){if(s(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{o=n(14)(Function.call,i(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:r}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(24);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var i=n(27).default;t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),i(e,o.key,o)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t.__esModule=!0},function(e,t,n){e.exports={default:n(28),__esModule:!0}},function(e,t,n){var i=n(4);e.exports=function(e,t,n){return i.setDesc(e,t,n)}},function(e,t){"use strict";t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){"use strict";var i=n(31).default;t.default=i||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.__esModule=!0},function(e,t,n){e.exports={default:n(32),__esModule:!0}},function(e,t,n){n(33),e.exports=n(13).Object.assign},function(e,t,n){var i=n(11);i(i.S+i.F,"Object",{assign:n(34)})},function(e,t,n){var i=n(4),o=n(35),s=n(7);e.exports=n(16)(function(){var e=Object.assign,t={},n={},i=Symbol(),o="abcdefghijklmnopqrst";return t[i]=7,o.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=o})?function(e,t){for(var n=o(e),r=arguments,a=r.length,l=1,c=i.getKeys,u=i.getSymbols,p=i.isEnum;a>l;)for(var d,h=s(r[l++]),f=u?c(h).concat(u(h)):c(h),m=f.length,g=0;m>g;)p.call(h,d=f[g++])&&(n[d]=h[d]);return n}:Object.assign},function(e,t,n){var i=n(9);e.exports=function(e){return Object(i(e))}},function(e,t,n){e.exports={default:n(37),__esModule:!0}},function(e,t,n){n(38),e.exports=n(13).Object.keys},function(e,t,n){var i=n(35);n(10)("keys",function(e){return function(t){return e(i(t))}})},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(t,n){t.exports=e},function(e,n){e.exports=t}])})},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1136),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(943),r=function(e){return e&&e.__esModule?e:{default:e}}(s),a=function(){function e(t){i(this,e),this.target=t,this.events={}}return o(e,[{key:"getEventHandlers",value:function(){function e(e,t){var n=String(e)+" "+String((0,r.default)(t));return this.events[n]||(this.events[n]={handlers:[],handleEvent:void 0}),this.events[n]}return e}()},{key:"handleEvent",value:function(){function e(e,t,n){this.getEventHandlers(e,t).handlers.forEach(function(e){e&&e(n)})}return e}()},{key:"add",value:function(){function e(e,t,n){var i=this,o=this.getEventHandlers(e,n);0===o.handlers.length&&(o.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,o.handleEvent,n)),o.handlers.push(t);var s=!0;return function(){function r(){if(s){s=!1;var r=o.handlers.indexOf(t);o.handlers.splice(r,1),0===o.handlers.length&&(i.target&&i.target.removeEventListener(e,o.handleEvent,n),o.handleEvent=void 0)}}return r}()}return e}()}]),e}();t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n},function(e,t,n){function i(){if(!r.default)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){function t(){e=!0}return t}()});window.addEventListener("test",null,t)}catch(e){}return e}function o(){return void 0===a&&(a=i()),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(941),r=function(e){return e&&e.__esModule?e:{default:e}}(s),a=void 0},function(e,t){function n(e){return e?!0===e?100:(e.capture<<0)+(e.passive<<1)+(e.once<<2):0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){e[u]||(e[u]=new c.default(e));var o=(0,a.default)(i);return e[u].add(t,n,o)}function s(e){e()}Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_HANDLERS_KEY=void 0,t.addEventListener=o,t.removeEventListener=s;var r=n(945),a=i(r),l=n(940),c=i(l),u=t.EVENT_HANDLERS_KEY="__consolidated_events_handlers__"},function(e,t,n){function i(e){if(e)return(0,s.default)()?e:!!e.capture}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(942),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function i(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}t.__esModule=!0,t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),p=n(31),d=i(p),h={overflow:"hidden",position:"relative"},f={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"},m=function(e,t){return"\n    .react-stars-"+t+":before {\n      position: absolute;\n      overflow: hidden;\n      display: block;\n      z-index: 1;\n      top: 0; left: 0;\n      width: 50%;\n      content: attr(data-forhalf);\n      color: "+e+";\n  }"},g=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e=a({},e),n.state={uniqueness:(Math.random()+"").replace(".",""),value:e.value||0,stars:[],halfStar:{at:Math.floor(e.value),hidden:e.half&&e.value%1<.5}},n.state.config={count:e.count,size:e.size,char:e.char,color1:e.color1,color2:e.color2,half:e.half,edit:e.edit},n}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.setState({stars:this.getStars(this.state.value)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({stars:this.getStars(e.value),value:e.value,halfStar:{at:Math.floor(e.value),hidden:this.state.config.half&&e.value%1<.5}})}},{key:"isDecimal",value:function(e){return e%1!=0}},{key:"getRate",value:function(){return this.state.config.half?Math.floor(this.state.value):Math.round(this.state.value)}},{key:"getStars",value:function(e){void 0===e&&(e=this.getRate());for(var t=[],n=0;n<this.state.config.count;n++)t.push({active:n<=e-1});return t}},{key:"mouseOver",value:function(e){var t=this.state,n=t.config,i=t.halfStar;if(n.edit){var o=Number(e.target.getAttribute("data-index"));if(n.half){var s=this.moreThanHalf(e,n.size);i.hidden=s,s&&(o+=1),i.at=o}else o+=1;this.setState({stars:this.getStars(o)})}}},{key:"moreThanHalf",value:function(e,t){var n=e.target,i=e.clientX-n.getBoundingClientRect().left;return(i=Math.round(Math.abs(i)))>t/2}},{key:"mouseLeave",value:function(){var e=this.state,t=e.value,n=e.halfStar,i=e.config;i.edit&&(i.half&&(n.hidden=!this.isDecimal(t),n.at=Math.floor(this.state.value)),this.setState({stars:this.getStars()}))}},{key:"clicked",value:function(e){var t=this.state,n=t.config,i=t.halfStar;if(n.edit){var o=Number(e.target.getAttribute("data-index")),s=void 0;if(n.half){var r=this.moreThanHalf(e,n.size);i.hidden=r,r&&(o+=1),s=r?o:o+.5,i.at=o}else s=o+=1;this.setState({value:s,stars:this.getStars(o)}),this.props.onChange(s)}}},{key:"renderHalfStarStyleElement",value:function(){var e=this.state,t=e.config,n=e.uniqueness;return u.default.createElement("style",{dangerouslySetInnerHTML:{__html:m(t.color2,n)}})}},{key:"renderStars",value:function(){var e=this,t=this.state,n=t.halfStar,i=t.stars,o=t.uniqueness,s=t.config,r=s.color1,l=s.color2,c=s.size,p=s.char,d=s.half,h=s.edit;return i.map(function(t,i){var s="";d&&!n.hidden&&n.at===i&&(s="react-stars-"+o);var m=a({},f,{color:t.active?l:r,cursor:h?"pointer":"default",fontSize:c+"px"});return u.default.createElement("span",{className:s,style:m,key:i,"data-index":i,"data-forhalf":p,onMouseOver:e.mouseOver.bind(e),onMouseMove:e.mouseOver.bind(e),onMouseLeave:e.mouseLeave.bind(e),onClick:e.clicked.bind(e)},p)})}},{key:"render",value:function(){var e=this.props.className;return u.default.createElement("div",{className:e,style:h},this.state.config.half?this.renderHalfStarStyleElement():"",this.renderStars())}}]),t}(c.Component);g.propTypes={className:d.default.string,edit:d.default.bool,half:d.default.bool,value:d.default.number,count:d.default.number,char:d.default.string,size:d.default.number,color1:d.default.string,color2:d.default.string},g.defaultProps={edit:!0,half:!0,value:0,count:5,char:"★",size:15,color1:"gray",color2:"#ffd700",onChange:function(){}},t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,l.default)(e);if("number"==typeof n)return n;var i=(0,r.default)(e);return"number"==typeof i?i*t:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(954),r=i(s),a=n(955),l=i(a);e.exports=t.default},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&(r.default.Children.only(e),!(0,l.default)(e)))throw new Error("You must wrap any Component Elements passed to Waypoint in a DOM Element (eg; a <div>).")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(1),r=i(s),a=n(952),l=i(a);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e.viewportBottom-e.viewportTop==0?s.default.invisible:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom?s.default.inside:e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom?s.default.inside:e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?s.default.inside:e.viewportBottom<e.waypointTop?s.default.below:e.waypointTop<e.viewportTop?s.default.above:s.default.invisible}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(904),s=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function i(e){return"string"==typeof e.type}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){s.push(e),o||(o=setTimeout(function(){o=null;for(var e=void 0;e=s.shift();)e()},0));var t=!0;return function(){if(t){t=!1;var n=s.indexOf(e);-1!==n&&(s.splice(n,1),!s.length&&o&&(clearTimeout(o),o=null))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=void 0,s=[];e.exports=t.default},function(e,t,n){"use strict";function i(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return!isNaN(parseFloat(e))&&isFinite(e)?parseFloat(e):"px"===e.slice(-2)?parseFloat(e.slice(0,-2)):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";(function(n){function i(e){return"window"===e?n.window:e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default}).call(t,n(27))},,function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(974),s=1/0;e.exports=i},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.setTimeout(e,1)}function l(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.clearTimeout(e)}var c=n(1),u=n.n(c),p=n(31),d=n.n(p),h=n(994),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(){},y=function(e){function t(i){o(this,t);var r=s(this,e.call(this,i));return r._onRootDOMNode=function(e){r._rootDOMNode=e,r.props.inputRef&&r.props.inputRef(e)},r._onChange=function(e){r._controlled||r._resizeComponent();var t=r.props,n=t.valueLink,i=t.onChange;n?n.requestChange(e.target.value):i(e)},r._resizeComponent=function(){if(r._rootDOMNode){var e=n.i(h.a)(r._rootDOMNode,r.props.useCacheForDOMMeasurements,r.props.rows||r.props.minRows,r.props.maxRows),t=e.height,i=e.minHeight,o=e.maxHeight;r.state.height===t&&r.state.minHeight===i&&r.state.maxHeight===o||r.setState({height:t,minHeight:i,maxHeight:o})}},r.state={height:i.style&&i.style.height||0,minHeight:-1/0,maxHeight:1/0},r._controlled="string"==typeof i.value,r}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.valueLink,n=(e.minRows,e.maxRows,e.onHeightChange,e.useCacheForDOMMeasurements,e.inputRef,i(e,["valueLink","minRows","maxRows","onHeightChange","useCacheForDOMMeasurements","inputRef"]));return"object"===(void 0===t?"undefined":m(t))&&(n.value=t.value),n.style=f({},n.style,{height:this.state.height}),Math.max(n.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(n.style.overflow="hidden"),u.a.createElement("textarea",f({},n,{onChange:this._onChange,ref:this._onRootDOMNode}))},t.prototype.componentDidMount=function(){this._resizeComponent(),window.addEventListener("resize",this._resizeComponent)},t.prototype.componentWillReceiveProps=function(){this._clearNextFrame(),this._onNextFrameActionId=a(this._resizeComponent)},t.prototype.componentDidUpdate=function(e,t){this.state.height!==t.height&&this.props.onHeightChange(this.state.height)},t.prototype.componentWillUnmount=function(){this._clearNextFrame(),window.removeEventListener("resize",this._resizeComponent)},t.prototype._clearNextFrame=function(){this._onNextFrameActionId&&l(this._onNextFrameActionId)},t.prototype.focus=function(){this._rootDOMNode.focus()},t.prototype.blur=function(){this._rootDOMNode.blur()},g(t,[{key:"value",get:function(){return this._rootDOMNode.value},set:function(e){this._rootDOMNode.value=e}},{key:"selectionStart",get:function(){return this._rootDOMNode.selectionStart},set:function(e){this._rootDOMNode.selectionStart=e}},{key:"selectionEnd",get:function(){return this._rootDOMNode.selectionEnd},set:function(e){this._rootDOMNode.selectionEnd=e}}]),t}(u.a.Component);y.propTypes={value:d.a.string,onChange:d.a.func,onHeightChange:d.a.func,useCacheForDOMMeasurements:d.a.bool,rows:d.a.number,minRows:d.a.number,maxRows:d.a.number,inputRef:d.a.func},y.defaultProps={onChange:v,onHeightChange:v,useCacheForDOMMeasurements:!1},t.a=y},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t,n){var i=n(1070),o=n(1012);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i,o,s;!function(r,a){o=[e,n(970)],i=a,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(e){return e&&e.__esModule?e:{default:e}}(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return s(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=r})},function(e,t,n){var i,o,s;!function(r,a){o=[e,n(964),n(971),n(969)],i=a,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var c=o(t),u=o(n),p=o(i),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return a(t,e),h(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,p.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(u.default);e.exports=f})},function(e,t){function n(e,t){for(;e&&e.nodeType!==i;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=n},function(e,t,n){function i(e,t,n,i,s){var r=o.apply(this,arguments);return e.addEventListener(n,r,s),{destroy:function(){e.removeEventListener(n,r,s)}}}function o(e,t,n,i){return function(n){n.delegateTarget=s(n.target,t),n.delegateTarget&&i.call(e,n)}}var s=n(966);e.exports=i},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(e))return o(e,t,n);if(a.nodeList(e))return s(e,t,n);if(a.string(e))return r(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function s(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function r(e,t,n){return l(document.body,e,t,n)}var a=n(968),l=n(967);e.exports=i},function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(e),i.removeAllRanges(),i.addRange(o),t=i.toString()}return t}e.exports=n},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){o.off(e,i),t.apply(n,arguments)}var o=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;for(i;i<o;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var s=0,r=i.length;s<r;s++)i[s].fn!==t&&i[s].fn._!==t&&o.push(i[s]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{communities:e.get("communities"),users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return w});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(132)),p=n.n(u),d=n(323),h=n(901),f=n.n(h),m=n(38),g=n(325),v=n(15),y=(n.n(v),n(32)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),b(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:this.props.isFollowing?"action-button following":"action-button",onClick:this.onClick},this.props.isFollowing?"":"Follow")}}]),t}(l.a.PureComponent),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),b(t,[{key:"onClick",value:function(){this.props.isMember?window.confirm("Are you sure you want to leave this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:this.props.isMember?"action-button following":"action-button",onClick:this.onClick},this.props.isMember?"":"Join")}}]),t}(l.a.PureComponent),C=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentClick=n.onContentClick.bind(n),n.onToggle=n.onToggle.bind(n),n.handleBioChange=n.handleBioChange.bind(n),n.onKeyPressForBio=n.onKeyPressForBio.bind(n),n.onDoneEditingBio=n.onDoneEditingBio.bind(n),n.state={byline:e.byline?e.byline:e.showCommunityBio?e.users.getIn([e.currentLoggedInUser,"communitiesBio",e.communityId],""):null,isEditingBio:!1},n}return s(t,e),b(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({byline:e.byline?e.byline:e.showCommunityBio?e.users.getIn([e.currentLoggedInUser,"communitiesBio",e.communityId],""):null})}},{key:"onContentClick",value:function(e){if(e.stopPropagation(),this.props.shouldLinkToCommunity&&!e.target.classList.contains("thin-button")&&!e.target.classList.contains("bio-input")&&!e.target.classList.contains("action-button")){var t="/community/"+this.props.communityId;e.metaKey?n.i(y.a)(t):v.browserHistory.push(t)}}},{key:"onToggle",value:function(e){e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.communityId)}},{key:"handleBioChange",value:function(e){this.setState({byline:e.target.value})}},{key:"onKeyPressForBio",value:function(e){13==(e.code||e.which)&&this.onDoneEditingBio()}},{key:"onDoneEditingBio",value:function(){this.props.editCommunityBio(this.props.communityId,this.state.byline),this.setState({isEditingBio:!1})}},{key:"render",value:function(){var e=this,t=this.props.communityId,i=this.props.communities.get(t);if(!i)return l.a.createElement("div",{className:"community-box box"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+f.a+")"}}),l.a.createElement("div",{className:"shifted-right",onClick:this.onContentClick},l.a.createElement("div",{className:"title dummy"}),l.a.createElement("div",{className:"byline dummy"})));var o="closed_contribution"==i.get("accessLevel"),s=n.i(d.a)(k),r=n.i(d.a)(E),a=this.props.to||"/community/"+t,c="";return c=o?i.get("followersCount")+" "+p()("follower",i.get("followersCount")):i.get("membersCount")+" "+p()("member",i.get("membersCount")),l.a.createElement("div",{className:this.props.shouldLinkToCommunity||this.props.onClick?"clickable community-box box":"community-box box",onClick:this.onContentClick},l.a.createElement("div",{className:"avatar-image",onClick:this.onContentClick,style:{backgroundImage:"url("+(n.i(g.c)(i.get("coverImg"),60)||f.a)+")"}}),l.a.createElement("div",{className:"shifted-right",onClick:this.onContentClick},l.a.createElement("div",{className:"title"},i.get("name")),o?l.a.createElement("div",{className:"label closed-contribution-label"},"Invite Only"):null,this.state.byline||this.props.isBioEditable?this.state.isEditingBio?l.a.createElement("div",{style:{lineHeight:0}},l.a.createElement("input",{type:"text",maxLength:"60",className:"bio-input",autoFocus:"autofocus",placeholder:"Help others understand your experience with this topic",value:this.state.byline,onChange:this.handleBioChange,onKeyPress:this.onKeyPressForBio}),l.a.createElement("span",{className:"thin-button",onClick:this.onDoneEditingBio},"Done")):l.a.createElement("div",{className:"byline"},this.state.byline," ",this.props.isBioEditable?l.a.createElement("span",{className:"thin-button",onClick:function(){return e.setState({isEditingBio:!0})}},this.state.byline?" (Edit) ":"Set Community Bio"):null):l.a.createElement("span",{className:"byline"},c)),this.props.hasFollow?o?l.a.createElement(s,{isFollowing:i.get("isFollowing")&&i.get("isFollowing").get(this.props.currentLoggedInUser),allowLurker:!0,onClick:function(){return e.props.toggleCommunityFollow(t)},to:a,entityId:this.props.entityId,action:this.props.action}):l.a.createElement(r,{isMember:i.get("isMember")&&i.get("isMember").get(this.props.currentLoggedInUser),allowLurker:!0,onClick:function(){return e.props.toggleCommunityJoin(t)},to:a,entityId:this.props.entityId,action:this.props.action}):null,this.props.hasToggle?l.a.createElement("button",{className:this.props.isSelected?"danger toggle-button":"normal toggle-button",onClick:this.onToggle},this.props.isSelected?"Clear":"Filter"):null)}}]),t}(l.a.PureComponent),w=n.i(c.connect)(r,{toggleCommunityFollow:m._4,toggleCommunityJoin:m._5,editCommunityBio:m.y})(C)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{communities:e.get("communities"),currentLoggedInUser:e.get("currentLoggedInUser"),visitedPaths:e.get("visitedPaths")}}n.d(t,"a",function(){return k});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(59)),h=n.n(d),f=n(901),m=(n.n(f),n(990)),g=(n(325),n(58)),v=n(17),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isCommunityDropdownPickerModalOpen:!1},n.toggleDropdownState=n.toggleDropdownState.bind(n),n.onActiveCommunityClick=n.onActiveCommunityClick.bind(n),n}return s(t,e),y(t,[{key:"toggleDropdownState",value:function(){this.setState({isCommunityDropdownPickerModalOpen:!this.state.isCommunityDropdownPickerModalOpen})}},{key:"onActiveCommunityClick",value:function(e){var t=this.props.visitedPaths&&this.props.visitedPaths.get(-2)&&this.props.visitedPaths.get(-2).get("path"),i=this.props.visitedPaths&&this.props.visitedPaths.get(-1)&&this.props.visitedPaths.get(-1).get("path");t&&i&&n.i(g.l)(t)==this.props.activeCommunityId&&n.i(g.l)(i)!=this.props.activeCommunityId&&(e.preventDefault(),e.stopPropagation(),this.props.router.goBack())}},{key:"render",value:function(){var e=l.a.createElement("div",{className:"thin-button never-hide categories-button",onClick:this.toggleDropdownState},"Categories");return l.a.createElement("div",{className:"community-dropdown-picker"},e,l.a.createElement(h.a,{isOpen:this.state.isCommunityDropdownPickerModalOpen,onRequestClose:this.toggleDropdownState,overlayClassName:"modal-overlay community-dropdown-picker-modal-overlay",className:"modal-content community-dropdown-picker-modal-content"},v.a&&l.a.createElement("div",{className:"section-heading"},"Categories"),l.a.createElement(m.a,{location:this.props.location,onClick:this.toggleDropdownState})))}}]),t}(l.a.PureComponent),k=n.i(c.connect)(r)(n.i(u.withRouter)(b))},function(e,t,n){function i(e){return"symbol"==typeof e||s(e)&&o(e)==r}var o=n(87),s=n(86),r="[object Symbol]";e.exports=i},function(e,t,n){(function(t){(function(){var n,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n(139))},function(e,t,n){(function(t){for(var i=n(1119),o="undefined"==typeof window?t:window,s=["moz","webkit"],r="AnimationFrame",a=o["request"+r],l=o["cancel"+r]||o["cancelRequest"+r],c=0;!a&&c<s.length;c++)a=o[s[c]+"Request"+r],l=o[s[c]+"Cancel"+r]||o[s[c]+"CancelRequest"+r];if(!a||!l){var u=0,p=0,d=[];a=function(e){if(0===d.length){var t=i(),n=Math.max(0,1e3/60-(t-u));u=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++p,callback:e,cancelled:!1}),p},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return a.call(o,e)},e.exports.cancel=function(){l.apply(o,arguments)},e.exports.polyfill=function(){o.requestAnimationFrame=a,o.cancelAnimationFrame=l}}).call(t,n(27))},function(e,t,n){"use strict";function i(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t}t.__esModule=!0,t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(0!==n[i])return!1;var o="number"==typeof t[i]?t[i]:t[i].val;if(e[i]!==o)return!1}return!0}t.__esModule=!0,t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n,i,s,r,a){var l=-s*(t-i),c=-r*n,u=l+c,p=n+u*e,d=t+p*e;return Math.abs(p)<a&&Math.abs(d-i)<a?(o[0]=i,o[1]=0,o):(o[0]=d,o[1]=p,o)}t.__esModule=!0,t.default=i;var o=[0,0];e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{customIdInfo:e.get("customIdInfo")}}n.d(t,"a",function(){return C});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(906)),p=n(17),d=n(1002),h=n(959),f=n(97),m=n(142),g=(n.n(m),n(131)),v=n(32),y=n(326),b=(n.n(y),n(38)),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function(e){function t(e){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.state=s.handleInitialState(),n.i(u.b)(),s.toggleInteractiveCode=s.toggleInteractiveCode.bind(s),s.onSubmit=s.onSubmit.bind(s),s.getSourceInfo=s.getSourceInfo.bind(s),s.revertButtonClick=s.revertButtonClick.bind(s),s.updateCode=s.updateCode.bind(s),s.isVisible=s.isVisible.bind(s),s.scrollToTop=s.scrollToTop.bind(s),s.setActiveTab=s.setActiveTab.bind(s),s.toggleFullScreen=s.toggleFullScreen.bind(s),s.getOrCreateOverlay=s.getOrCreateOverlay.bind(s),s.onKeyDown=s.onKeyDown.bind(s),s.onHover=s.onHover.bind(s),s.offHover=s.offHover.bind(s),s.getOutput=s.getOutput.bind(s),s.handleOutputOnlyIframe=s.handleOutputOnlyIframe.bind(s),s}return s(t,e),k(t,[{key:"handleInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getSourceInfo(e),o={rendered:e.rendered||e.showOutputOnly||!1,displayed:!1,code:e.initialCode?e.initialCode:i?n.i(g.g)(i.originalSource):null,input:i?i.input:null,activeTab:"code"};if(this.isInFullScreenMode=!1,this.hasHandledOutput=!1,this.hasHandledDefaultOutput=!1,this.hasHandledShowOnlyOutput=!1,!t)return o;this.setState(o)}},{key:"revertButtonClick",value:function(e){var t=(this.props.customIdInfo,this.getSourceInfo()),n=(t.mySource,t.originalSource);t.isSourceDifferent;this.setState({code:n})}},{key:"getSourceInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.customIdInfo&&e.customIdInfo.getIn(["codeblock",e.codeBlockId]);if(!t)return null;var i=t.getIn(["init_values",t.get("default_language").toString()]);return{mySource:i.get("user_code"),originalSource:i.get("original_code"),isSourceDifferent:i.get("user_code")!=i.get("original_code"),input:i.get("input"),modeConfig:i.get("mode_config"),language:i.get("language"),output:i.get("output"),isLoading:t.get("isLoading"),displayConfig:n.i(m.camelizeKeys)(i.get("display_config").toJS()),defaultOutput:i.get("default_output")}}},{key:"componentWillReceiveProps",value:function(e){(!this.props.customIdInfo&&e.customIdInfo||this.props.codeBlockId!=e.codeBlockId)&&this.handleInitialState(e,!0)}},{key:"toggleInteractiveCode",value:function(){this.setState({rendered:!this.state.rendered,activeTab:"code"})}},{key:"onSubmit",value:function(){var e=this.getSourceInfo();if(e){this.setActiveTab("output");var t=(e.mySource,e.originalSource,e.isSourceDifferent,e.input,e.modeConfig,e.language);return this.props.logEvent({type:"code_execution",payload:{info:{input:this.state.input,language:t,source:this.state.code,code_block_id:this.props.codeBlockId},sub_type:"ace_widget"}}),this.props.storeCode(this.props.codeBlockId,this.state.input,t,this.state.code),this.hasHandledOutput=!1,!0}}},{key:"updateCode",value:function(e){this.setState(e)}},{key:"isVisible",value:function(){return this.refs.codeBlock&&n.i(v.k)(this.refs.codeBlock,this.props.additionalHeight+55||55,!0)}},{key:"scrollToTop",value:function(){if(!this.isVisible()&&!this.isInFullScreenMode){var e=this.props.additionalHeight||0;y.animateScroll.scrollTo(this.refs.codeBlock.offsetTop-e-55,{duration:300})}}},{key:"setActiveTab",value:function(e){this.setState({activeTab:e}),this.scrollToTop(),this.refs.output&&("output"!=e?n.i(g.c)(this.refs.output,"hide"):n.i(g.a)(this.refs.output,"hide"))}},{key:"componentDidUpdate",value:function(e,t){if(!p.c){if(!this.hasHandledOutput&&this.refs.htmlOutput){var n=this.getSourceInfo(),i=n.output;if(i){var o=document.createElement("script");o.type="text/javascript",o.innerHTML=i.getIn(["output","js"]),document.body.appendChild(o),this.hasHandledOutput=!0}}if((!this.hasHandledDefaultOutput||t.rendered&&!this.state.rendered)&&this.refs.htmlOutput&&this.props.showDefaultOutput&&!this.props.showOutputOnly){var s=this.getSourceInfo(),r=s.defaultOutput;if(!r)return;var a=r.getIn(["output","js"]);if(!a)return;var l=document.createElement("script");l.type="text/javascript",l.innerHTML=a,document.body.appendChild(l),this.hasHandledDefaultOutput=!0}this.handleOutputOnlyIframe()}}},{key:"componentDidMount",value:function(){this.handleOutputOnlyIframe()}},{key:"handleOutputOnlyIframe",value:function(){if(!this.hasHandledShowOnlyOutput&&this.props.showOutputOnly&&this.refs.htmlOutput){var e=this.getSourceInfo(),t=e.defaultOutput;if(!t)return;var n=t.getIn(["output","js"]);if(!n)return;var i=document.createElement("script");i.type="text/javascript",i.innerHTML=n,document.body.appendChild(i),this.hasHandledShowOnlyOutput=!0}}},{key:"getOrCreateOverlay",value:function(){var e=document.getElementById("code-modal-overlay");return e||(e=document.createElement("div"),n.i(g.c)(e,"modal-overlay"),e.setAttribute("id","code-modal-overlay"),e.setAttribute("tabindex","0"),e.style.backgroundColor="#fcfcff",document.body.appendChild(e)),e}},{key:"toggleFullScreen",value:function(){var e=e=this.refs.codeBlock;if(e){var t=this.getOrCreateOverlay();n.i(g.h)(e,"full")?(n.i(g.a)(e,"full"),t.style.display="none",document.body.style.overflow="auto",this.isInFullScreenMode=!1):(n.i(g.c)(e,"full"),t.style.display="block",document.body.style.overflow="hidden",this.isInFullScreenMode=!0)}}},{key:"onKeyDown",value:function(e){var t=e.keyCode||e.which;this.isInFullScreenMode&&27==t&&e.target==this.refs.codeBlock&&this.toggleFullScreen()}},{key:"onHover",value:function(){this.refs.tooltiptext&&this.state.isEditorFocused&&!p.a&&(this.refs.tooltiptext.style.visibility="visible")}},{key:"offHover",value:function(){this.refs.tooltiptext&&(this.refs.tooltiptext.style.visibility="hidden")}},{key:"getOutput",value:function(e){return"text"==e.get("type")?l.a.createElement("pre",null,e.get("output")||l.a.createElement("span",{className:"onboarding-text-label"},"No output!")):l.a.createElement("div",{ref:"htmlOutput",dangerouslySetInnerHTML:n.i(g.i)(e.getIn(["output","html"]))})}},{key:"render",value:function(){var e=this,t=this.getSourceInfo();if(t)var n=(t.mySource,t.originalSource,t.isSourceDifferent,t.input,t.modeConfig),i=t.output,o=t.isLoading,s=t.displayConfig,r=t.defaultOutput;return this.props.showOutputOnly?r?l.a.createElement("div",{className:"output-only"},this.getOutput(r)):null:l.a.createElement("div",{className:"code-execution-block-wrapper",ref:"codeBlock",tabIndex:"0",onKeyDown:this.onKeyDown},this.state.rendered&&l.a.createElement("div",{className:"code-execution-block"},l.a.createElement("div",{className:"tabs-bar"},l.a.createElement("div",{className:"code"==this.state.activeTab?"tab-link active":"tab-link",onClick:function(){return e.setActiveTab("code")}},"Code",l.a.createElement("div",{className:"line"})),s&&s.map(function(t){return l.a.createElement("div",{className:e.state.activeTab==t.id?"tab-link active":"tab-link",onClick:function(){return e.setActiveTab(t.id)}},t.displayName,l.a.createElement("div",{className:"line"}))}),!this.props.preventFullScreen&&[l.a.createElement("div",{className:"fullscreen-button-wrapper"}),l.a.createElement("div",{className:"fullscreen-button",onClick:this.toggleFullScreen})]),l.a.createElement("div",{className:"tab"},"code"==this.state.activeTab&&l.a.createElement("div",{className:"code-container"},l.a.createElement(d.a,{code:this.state.code,onChange:this.updateCode,aceConfig:n,options:{highlightActiveLine:!0,showPrintMargin:!1,highlightSelectedWord:!0,minLines:1,maxLines:250},onEnter:this.onSubmit,initialCursorPosition:this.props.initialCursorPosition,preventAutoFocus:this.props.preventAutoFocus})),"input"==this.state.activeTab&&l.a.createElement(h.a,{className:"input",placeholder:"Enter input here...",value:this.state.input,onChange:function(t){return e.setState({input:t.target.value})}}),l.a.createElement("div",{className:"output hide",ref:"output"},o?l.a.createElement("div",{className:"loader-div"},l.a.createElement(f.a,null),l.a.createElement("div",{className:"loading-text"},"Executing code…")):i?this.getOutput(i):l.a.createElement("pre",null,l.a.createElement("span",{className:"onboarding-text-label"},"Hit Run button below to see output"))))),l.a.createElement("div",{className:"button-row"},this.props.customIdInfo&&!this.props.hideTryItNow&&l.a.createElement("div",{className:"code-toggle-area "+(this.state.rendered?"collapsed":"active")},l.a.createElement("span",{className:"code-toggle-button "+(this.state.rendered?"collapsed":"active"),onClick:this.toggleInteractiveCode},this.state.rendered?"Collapse":"Try it now")),this.state.rendered&&l.a.createElement("span",{className:"tooltiptext",ref:"tooltiptext"},"Protip: Use Ctrl / Cmd + Shift + Enter to run your code."),this.state.rendered&&l.a.createElement("div",{className:"button run",onClick:this.onSubmit,onMouseEnter:this.onHover,onMouseLeave:this.offHover},"Run")),r&&this.props.showDefaultOutput&&!this.state.rendered&&l.a.createElement("div",{className:"default-output-wrapper"},l.a.createElement("span",{className:"output-label"},"Output"),l.a.createElement("div",{className:"default-output"},l.a.createElement("div",{className:"output"},this.getOutput(r)))))}}]),t}(l.a.PureComponent),C=n.i(c.connect)(r,{storeCode:b.q,logEvent:b.c})(E)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.block=t,this.getProperties=this.getProperties.bind(this),this.getProperty=this.getProperty.bind(this),this.getName=this.getName.bind(this),this.isInterrupt=this.isInterrupt.bind(this),this.isOverlay=this.isOverlay.bind(this),this.getAnimatedProperties=this.getAnimatedProperties.bind(this),this.getAnimatedOperations=this.getAnimatedOperations.bind(this),this.isAnimated=this.isAnimated.bind(this),this.getRefName=this.getRefName.bind(this),this.getRef=this.getRef.bind(this),this.getOperation=this.getOperation.bind(this),this.getOperationType=this.getOperationType.bind(this),this.getContent=this.getContent.bind(this),this.getContentType=this.getContentType.bind(this),this.getTimeStamp=this.getTimeStamp.bind(this),this.getDuration=this.getDuration.bind(this),this.isCodeBlock=this.isCodeBlock.bind(this),this.isHighlight=this.isHighlight.bind(this)}return o(e,[{key:"getProperties",value:function(){return this.getOperation().properties}},{key:"getProperty",value:function(e){var t=this.getProperties();if(t)return t[e]}},{key:"getName",value:function(){return this.getProperty("name")}},{key:"isInterrupt",value:function(){return this.getProperty("interrupt")}},{key:"isOverlay",value:function(){return this.getProperty("overlay")}},{key:"getSlideStyles",value:function(){var e=this.getProperty("backgroundImage");return e?{background:"linear-gradient(rgba(255,255,255,.75), rgba(255,255,255,.75)), url("+e+") center / cover no-repeat"}:null}},{key:"getAnimatedProperties",value:function(){var e=this.getProperty("animate");return e&&"none"!=e.type?e:null}},{key:"getMaxLineProperty",value:function(){return this.getProperty("maxLines")||null}},{key:"isExecutable",value:function(){return!1!==this.getProperty("executable")}},{key:"isNumbered",value:function(){return!1!==this.getProperty("numbered")}},{key:"getAnimatedOperations",value:function(){var e=this.getContent();return e&&e.animationOperations}},{key:"isAnimated",value:function(){return!(!this.getAnimatedOperations()||"code"!=this.getContentType())}},{key:"getRefName",value:function(){return e.getRefName(this.getName())}},{key:"getRef",value:function(t){return e.getRef(this.getName(),t)}},{key:"getVoice",value:function(){return this.block.voice}},{key:"getOperation",value:function(){return this.block.operation}},{key:"getOperationType",value:function(){var e=this.getOperation();return e&&e.type}},{key:"getContent",value:function(){var e=this.getOperation();return e&&e.display}},{key:"getContentType",value:function(){var e=this.getContent();return e&&e.type}},{key:"isCodeBlock",value:function(){return"code"==this.getContentType()}},{key:"isHighlight",value:function(){return"highlight"==this.getContentType()}},{key:"getTimeStamp",value:function(){return this.block.timestamp}},{key:"getDuration",value:function(){return parseInt(this.block.duration)||parseInt(this.getProperty("duration"))||0}}],[{key:"getRefName",value:function(e){return"blockRef-"+e}},{key:"getRef",value:function(t,n){return n&&n[e.getRefName(t)]}}]),e}();t.a=s},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(1011);e.exports=function(e){return Object(i(e))}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},,function(e,t){function n(e){return e}e.exports=n},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){i(this,e);var n=[];t=t||{},this.subscribe=function(e){n.push(e)},this.unsubscribe=function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)},this.update=function(e){e&&e(t),n.forEach(function(e){return e(t)})}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=t.StickyContainer=t.Sticky=void 0;var o=n(1055),s=i(o),r=n(1054),a=i(r),l=n(988),c=i(l);t.Sticky=s.default,t.StickyContainer=a.default,t.Channel=c.default,t.default=s.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{myCommunities:e.get("myCommunities"),communities:e.get("communities"),currentLoggedInUser:e.get("currentLoggedInUser"),searchResults:e.get("search"),isFetchingGlobalSearch:e.get("isFetchingGlobalSearch")}}n.d(t,"a",function(){return b});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(38)),h=n(901),f=n.n(h),m=n(325),g=(n(324),n(58),n(131),n(97)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.search("","popularCommunities"),n.onClick=n.onClick.bind(n),n}return s(t,e),v(t,[{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){var e=this,t=this.props.searchResults.getIn(["","popularCommunities"])||n.i(p.List)(),i=t,o=i.map(function(t,i){return l.a.createElement(u.Link,{className:"no-decoration",to:"/community/"+t,title:e.props.communities.get(t).get("name"),onClick:e.onClick},l.a.createElement("div",{className:"sidebar-row sidebar-community-row"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+(n.i(m.c)(e.props.communities.get(t).get("coverImg"),60)||f.a)+")"}}),l.a.createElement("div",{className:e.props.activeCommunityId==t?"sidebar-label active":"sidebar-label"},e.props.communities.get(t).get("name"))))});return l.a.createElement("div",{className:"communities-section"},l.a.createElement("div",null,o.size>0?[l.a.createElement("div",{className:"spacer"}),o,l.a.createElement("div",{className:"spacer"})]:this.props.isFetchingGlobalSearch?l.a.createElement("div",{className:"loader-div"},l.a.createElement(g.a,null),l.a.createElement("div",{className:"loading-text"},"Loading...")):null))}}]),t}(l.a.PureComponent),b=n.i(c.connect)(r,{fetchUserCommunities:d.F,search:d.G})(n.i(u.withRouter)(y))},function(e,t,n){"use strict";function i(e,t){var n=e,i=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var l=r.value,c=n[l];if(!c)return null;n=c}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return n}function o(e,t){if(e===t)return!0;if(e&&t&&"object"==(void 0===e?"undefined":r(e))&&"object"==(void 0===t?"undefined":r(t))){var n,i,s,p=a(e),d=a(t);if(p&&d){if((i=e.length)!=t.length)return!1;for(n=i;0!=n--;)if(!o(e[n],t[n]))return!1;return!0}if(p!=d)return!1;var h=e instanceof Date,f=t instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==t.getTime();var m=e instanceof RegExp,g=t instanceof RegExp;if(m!=g)return!1;if(m&&g)return e.toString()==t.toString();var v=l(e);if((i=v.length)!==l(t).length)return!1;for(n=i;0!=n--;)if(!c.call(t,v[n]))return!1;if(u&&e instanceof Element)return!1;for(n=i;0!=n--;)if(!("_owner"===(s=v[n])&&e.$$typeof||o(e[s],t[s])))return!1;return!0}return e!==e&&t!==t}function s(e,t){try{return o(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}t.b=i,t.a=s;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Array.isArray,l=Object.keys,c=Object.prototype.hasOwnProperty,u="undefined"!=typeof Element},function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}e.exports=n},,function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p?null===p.parentNode&&document.body.appendChild(p):(p=document.createElement("textarea"),document.body.appendChild(p));var s=o(e,t),r=s.paddingSize,a=s.borderSize,c=s.boxSizing,u=s.sizingStyle;Object.keys(u).map(function(e){p.style[e]=u[e]}),Object.keys(l).map(function(e){p.style.setProperty(e,l[e],"important")}),p.value=e.value||e.placeholder||"x";var d=-1/0,h=1/0,f=p.scrollHeight;if("border-box"===c?f+=a:"content-box"===c&&(f-=r),null!==n||null!==i){p.value="x";var m=p.scrollHeight-r;null!==n&&(d=m*n,"border-box"===c&&(d=d+r+a),f=Math.max(d,f)),null!==i&&(h=m*i,"border-box"===c&&(h=h+r+a),f=Math.min(h,f))}return{height:f,minHeight:d,maxHeight:h}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&u[n])return u[n];var i=window.getComputedStyle(e),o=c.reduce(function(e,t){return e[t]=i.getPropertyValue(t),e},{}),s=o[a];r&&"border-box"===s&&(o.width=parseFloat(o.width)+parseFloat(i["border-right-width"])+parseFloat(i["border-left-width"])+parseFloat(i["padding-right"])+parseFloat(i["padding-left"])+"px");var l=parseFloat(o["padding-bottom"])+parseFloat(o["padding-top"]),p=parseFloat(o["border-bottom-width"])+parseFloat(o["border-top-width"]),d={sizingStyle:o,paddingSize:l,borderSize:p,boxSizing:s};return t&&n&&(u[n]=d),d}t.a=i;var s="undefined"!=typeof window&&"undefined"!=typeof document,r=!!s&&!!document.documentElement.currentStyle,a=function(){if(!s)return"box-sizing";var e=window.getComputedStyle(document.documentElement);return e.getPropertyValue("box-sizing")?"box-sizing":e.getPropertyValue("-moz-box-sizing")?"-moz-box-sizing":e.getPropertyValue("-webkit-box-sizing")?"-webkit-box-sizing":"box-sizing"}(),l={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},c=["letter-spacing","line-height","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width",a],u={},p=void 0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultStyle=t.EnhancerProvider=t.createSubstyle=void 0;var o=n(1263),s=i(o),r=n(1428),a=i(r),l=n(1426),c=i(l);t.createSubstyle=s.default,t.EnhancerProvider=c.default,t.defaultStyle=a.default,t.default=(0,a.default)()},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentLoggedInUser:e.get("currentLoggedInUser")}}function l(e){return{questions:e.get("questions")}}function c(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return q}),n.d(t,"b",function(){return z});var u=n(1),p=n.n(u),d=n(37),h=(n.n(d),n(39)),f=(n.n(h),n(132)),m=n.n(f),g=n(1042),v=(n.n(g),n(15)),y=(n.n(v),n(326)),b=(n.n(y),n(325)),k=n(205),E=n(58),C=n(888),w=(n(890),n(889)),I=n(323),S=n(38),O=n(1061),N=n(1032),P=n(97),_=n(203),T=n.n(_),x=n(910),L=n(997),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),j=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={secondsRemaining:Math.round(e.secondsRemaining)},n.interval=setInterval(n.tick.bind(n),1e3),n}return r(t,e),M(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"tick",value:function(){this.setState({secondsRemaining:this.state.secondsRemaining-1}),this.state.secondsRemaining<=0&&(this.props.onTimeout(),clearInterval(this.interval))}},{key:"calculateTimerBarStyle",value:function(e){return e<21?{background:"linear-gradient(to right, #cc5454 "+e+"%, transparent "+e+"%)"}:e<51?{background:"linear-gradient(to right, #dfa941 "+e+"%, transparent "+e+"%)"}:{background:"linear-gradient(to right, #00ab6b "+e+"%, transparent "+e+"%)"}}},{key:"render",value:function(){return p.a.createElement("div",null,this.props.isCountDown?p.a.createElement("div",{className:"count-down-digit","data-time":this.state.secondsRemaining},0==this.state.secondsRemaining?"":this.state.secondsRemaining):p.a.createElement("div",null,p.a.createElement("div",{className:"timer-bar",style:this.calculateTimerBarStyle(Math.round(100*this.state.secondsRemaining/this.props.timePerQuestion))}),p.a.createElement("div",{className:"timer-text"},this.state.secondsRemaining>0?this.state.secondsRemaining:null)))}}]),t}(p.a.PureComponent),D=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),M(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"start-button action-button large centered",onClick:this.props.onClick},"Start")}}]),t}(p.a.PureComponent),A=n.i(I.a)(D),R=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return r(t,e),M(t,[{key:"onClick",value:function(e){this.props.onClick&&this.props.onClick(e,this.props.choice)}},{key:"render",value:function(){var e=this.props.chosenAnswer==this.props.choice.get("eid")?this.props.isCorrect?"correct":"incorrect":"";return p.a.createElement("div",{className:"quiz-choice-row"},p.a.createElement("div",{className:this.props.isResult?"result quiz-choice "+e:"quiz-choice",onClick:this.onClick},p.a.createElement("span",{className:"choice-text"},this.props.choice.get("choice")),this.props.isCorrect?p.a.createElement("span",{className:"correct-checkmark"}):null))}}]),t}(p.a.PureComponent),F=n.i(I.a)(R),U=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.completeQuizQuestion=n.completeQuizQuestion.bind(n),n.startQuizQuestion=n.startQuizQuestion.bind(n),n.onContentClick=n.onContentClick.bind(n),n.imageModalOnRequestClose=n.imageModalOnRequestClose.bind(n),n.getInitialState=n.getInitialState.bind(n),n.state=n.getInitialState(),n.wasStartClicked=!1,n.wasCompletedClicked=!1,n}return r(t,e),M(t,[{key:"completeQuizQuestion",value:function(e,t){if(!this.wasCompletedClicked){if(this.wasCompletedClicked=!0,this.props.isResult)return;var n=t?t.get("eid"):null;this.props.completeQuizQuestion({discussionId:this.props.discussionId,quizId:this.props.quizId,questionId:this.props.question.get("eid"),choiceId:n})}}},{key:"startQuizQuestion",value:function(e){this.wasStartClicked||(this.wasStartClicked=!0,this.props.startQuizQuestion({discussionId:this.props.discussionId,quizId:this.props.quizId,questionId:this.props.nextQuestionId}))}},{key:"imageModalOnRequestClose",value:function(){this.setState({isImageModalOpen:!1})}},{key:"getInitialState",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.wasStartClicked=!1,this.wasCompletedClicked=!1,{isImageModalOpen:!1,modalImageUrlLarge:null,modalImageUrlSmall:null}}},{key:"componentWillReceiveProps",value:function(e){e.question.get("eid")!=this.props.question.get("eid")&&this.setState(this.getInitialState(e))}},{key:"onContentClick",value:function(e){if(e.target.classList.contains("spoiler")){e.target;"spoiler-content"==e.target.firstChild.className&&e.target.classList.toggle("hidden")}else"IMG"==e.target.nodeName&&this.setState({isImageModalOpen:!0,modalImageUrlLarge:n.i(b.a)(e.target.src),modalImageUrlSmall:e.target.src})}},{key:"render",value:function(){var e=this,t=this.props.question.get("chosenAnswer"),i=this.props.question.getIn(["choices"],n.i(h.List)()).map(function(i){return p.a.createElement(F,{isCorrect:n.i(k.c)(i.get("eid"))==e.props.question.getIn(["correctChoice","eidHash"],null),chosenAnswer:t,isResult:e.props.isResult,to:e.props.to?e.props.to:e.props.discussionId?"/discussion/"+e.props.discussionId+"/":location.pathname,onClick:e.completeQuizQuestion,choice:i,loggedOutModalInPlace:e.props.loggedOutModalInPlace})}),o=this.props.timePerQuestion||this.props.question.get("timeAllowed",null),s=this.props.question.get("explanation"),r=this.props.question.get("question"),a=this.props.nextQuestionDateStarted||this.props.question.get("dtStarted",null),l=a?((new Date).getTime()-new Date(a).getTime())/1e3:0,c=o-l;c=Math.max(c,0);var u=this.props.isResult||!o;return p.a.createElement("div",{className:"quiz-question",onClick:this.onContentClick,key:this.props.question.get("eid")},p.a.createElement(T.a,{transitionName:"post",transitionAppear:!0,transitionAppearTimeout:1e3,transitionEnter:!1,transitionLeave:!1},u?null:p.a.createElement(j,{secondsRemaining:c,onTimeout:this.completeQuizQuestion,timePerQuestion:o}),p.a.createElement("div",{className:u?"quiz-question-text":"quiz-question-text no-margin-top"},p.a.createElement("div",{className:"quiz-question-index"},this.props.questionIndex?"Question "+(this.props.questionIndex+1)+".":"Question"),p.a.createElement(x.a,{html:r,preventFullScreenCodeBlock:this.props.preventFullScreenCodeBlock})),!t&&this.props.isResult?p.a.createElement("div",{className:"label out-of-time-label"},"You ran out of time on this question 😞"):null,p.a.createElement("div",{className:"quiz-choices"},i),this.props.isResult&&s&&s.length>0?p.a.createElement("div",null,p.a.createElement("div",{className:"label explanation-label"},"Explanation:"),p.a.createElement(x.a,{className:"explanation",html:s,preventFullScreenCodeBlock:this.props.preventFullScreenCodeBlock})):null,this.props.isResult&&!this.props.isStandAlone?this.props.nextQuestionId?p.a.createElement("div",{className:"action-button next-button centered",onClick:this.startQuizQuestion},"Next"):p.a.createElement("div",{className:"action-button show-results-button large blue centered",onClick:this.props.showResultsPage},"Show Results"):null),p.a.createElement(N.a,{isModalOpen:this.state.isImageModalOpen,onRequestClose:this.imageModalOnRequestClose,src:this.state.modalImageUrlLarge,placeHolder:this.state.modalImageUrlSmall}))}}]),t}(p.a.PureComponent),B=n.i(d.connect)(a,{startQuizQuestion:S.w,completeQuizQuestion:S.x})(U),H=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getQuestionStatus=n.getQuestionStatus.bind(n),n.onStartClick=n.onStartClick.bind(n),n}return r(t,e),M(t,[{key:"getQuestionStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t="not-started",n=e.questions&&e.questionId&&e.questions.getIn([e.questionId,"userProperties"],null);return n&&(t=n.get("dtCompletedFrontend")?"completed":n.get("dtStartedFrontend")?"ongoing":"not-started"),t}},{key:"onStartClick",value:function(){this.props.startQuizQuestion({questionId:this.props.questionId})}},{key:"render",value:function(){var e=this.props.questions&&this.props.questions.get(this.props.questionId);if(!e)return null;var t=this.getQuestionStatus(),i=e.get("timeAllowed",null),o=p.a.createElement("div",{className:"not-centered"},p.a.createElement(L.a,{entityType:"question"})),s=null;return s="not-started"==t&&i||!1===e.getIn(["userProperties","canParticipate"])?p.a.createElement("div",{className:"screen start-screen"},p.a.createElement("div",null,p.a.createElement("h1",{className:"check-understanding"},"Check your understanding"),[i?p.a.createElement("div",{className:"quiz-detail small top-margin-10"},"You will get ",n.i(C.a)(i)," to answer"):null,!0===e.getIn(["userProperties","canParticipate"])?p.a.createElement(A,{onClick:this.onStartClick,to:this.props.path||location.pathname}):o])):[p.a.createElement("h1",{className:"check-understanding"},"Check your understanding"),p.a.createElement(B,{ref:"question",question:e,nextQuestionDateStarted:e.getIn(["userProperties","dtStartedFrontend"]),isResult:"completed"==t,isStandAlone:!0,canContribute:!0,loggedOutModalInPlace:this.props.loggedOutModalInPlace,to:this.props.to,preventFullScreenCodeBlock:this.props.preventFullScreenCodeBlock})],p.a.createElement("div",{className:"stand-alone-question"},s)}}]),t}(p.a.PureComponent),q=n.i(d.connect)(l,{startQuizQuestion:S.w})(H),W=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.startQuiz=n.startQuiz.bind(n),n.showResultsPage=n.showResultsPage.bind(n),n.getInitialState=n.getInitialState.bind(n),n.onContentClick=n.onContentClick.bind(n),n.scrollToResult=n.scrollToResult.bind(n),n.toggleQuestionsList=n.toggleQuestionsList.bind(n),n.toggleLeaderboard=n.toggleLeaderboard.bind(n),n.state=n.getInitialState(),n}return r(t,e),M(t,[{key:"getInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=!0;return e.discussion&&null!=e.discussion.getIn(["typeInfo","nextQuestion","question"],null)&&(t=!1),{resultsPageVisible:t,countingDown:!1,hasScrolledToResult:!1,isQuestionsListCollapsed:!0,isLeaderboardCollapsed:"true"!=n.i(E.c)("leaderboard")}}},{key:"scrollToResult",value:function(){this.props.turnScrollingOff||!this.state.hasScrolledToResult&&this.refs.results&&("completed"!=this.props.discussion.getIn(["typeInfo","status"],null)||this.props.isCollapsed||setTimeout(function(){y.scroller.scrollTo("results",{duration:1e3,smooth:!0,offset:-50,containerId:null})},500),this.setState({hasScrolledToResult:!0}))}},{key:"componentWillReceiveProps",value:function(e){if(e.discussion&&null!=e.discussion.getIn(["typeInfo","nextQuestion","question"],null)&&this.setState({resultsPageVisible:!1}),e.discussion&&e.discussion.getIn(["typeInfo","nextQuestion","dtStarted"],null)!=this.props.discussion.getIn(["typeInfo","nextQuestion","dtStarted"],null))try{this.props.turnScrollingOff||y.scroller.scrollTo("quiz-section",{duration:500,smooth:!0,offset:-50,containerId:null})}catch(e){}e.discussion.get("eid")!=this.props.discussion.get("eid")&&this.setState(this.getInitialState(e))}},{key:"componentDidMount",value:function(){this.scrollToResult()}},{key:"componentDidUpdate",value:function(){this.scrollToResult()}},{key:"showResultsPage",value:function(){this.props.fetchDiscussionMetadata(this.props.discussion.get("eid"),null,["typeInfo"]),this.setState({resultsPageVisible:!0}),this.props.turnScrollingOff||y.scroller.scrollTo("quiz-section",{duration:500,smooth:!0,offset:-50,containerId:null})}},{key:"startQuiz",value:function(){this.props.startQuizQuestion({discussionId:this.props.discussion.get("eid"),quizId:this.props.discussion.getIn(["typeInfo","eid"],null),questionId:this.props.discussion.getIn(["typeInfo","nextQuestion","question"],null)})}},{key:"toggleQuestionsList",value:function(){this.setState({isQuestionsListCollapsed:!this.state.isQuestionsListCollapsed})}},{key:"toggleLeaderboard",value:function(){this.setState({isLeaderboardCollapsed:!this.state.isLeaderboardCollapsed})}},{key:"onContentClick",value:function(e){if(this.props.shouldLinkToDiscussion){e.preventDefault(),e.stopPropagation();var t="/discussion/"+this.props.discussion.get("eid")+"/main";e.metaKey?openNewTab(t):v.browserHistory.push(t)}}},{key:"render",value:function(){var e=this,t=this.props.discussion.get("typeInfo");if(this.props.isCollapsed&&!this.props.discussion.hasIn(["typeInfo","userInfo"])||(!this.props.isCollapsed||!this.props.shouldLinkToDiscussion)&&!this.props.discussion.hasIn(["typeInfo","questions"])||""!=this.props.currentLoggedInUser&&this.state.resultsPageVisible&&null==this.props.discussion.getIn(["typeInfo","userInfo"],null))return p.a.createElement("div",{className:"quiz-section"},p.a.createElement("div",{className:"loader-div"},p.a.createElement(P.a,null),p.a.createElement("div",{className:"loading-text"},"Loading…")));var o=t.getIn(["userInfo","ncorrect"],0),s=t.getIn(["userInfo","rank"],1),r=Math.round(t.getIn(["userInfo","percentile"],100)),a=Math.round(t.getIn(["userInfo","score"],100)),l=t.get("timePerQuestion"),c=this.props.discussion.getIn(["textStats","quizquestionCount"],0),u=t.getIn(["nextQuestion","question"]),d=t.getIn(["nextQuestion","questionIndex"]),f=t.getIn(["nextQuestion","dtStarted"]),b=t.getIn(["quizInfo","participantsCount"]),k=!!f,E=this.props.discussion.get("isPremium"),I=t.getIn(["questions"],h.List.of()).map(function(n,i){return p.a.createElement(B,{question:n,questionIndex:i,discussionId:e.props.discussion.get("eid"),quizId:t.get("eid"),timePerQuestion:l,nextQuestionDateStarted:f,canContribute:e.props.discussion.get("canContribute"),key:"question-"+i})}),S=t.getIn(["questions"],h.List.of()).map(function(n,i){return p.a.createElement(B,{question:n,questionIndex:i,nextQuestionId:u,isResult:!0,discussionId:e.props.discussion.get("eid"),quizId:t.get("eid"),canContribute:e.props.discussion.get("canContribute"),showResultsPage:e.showResultsPage,key:"results-"+i})}),N=p.a.createElement("div",{className:"screen start-screen"},p.a.createElement("div",{className:"quiz-details"},p.a.createElement("div",{className:"quiz-detail"},c," ",m()("question",c)),l?p.a.createElement("div",{className:l>59?"quiz-detail small":"quiz-detail"},n.i(C.a)(l)," per question"):null),this.state.countingDown?p.a.createElement("div",{className:"count-down"},p.a.createElement(j,{secondsRemaining:3,onTimeout:this.startQuiz,isCountDown:!0})):p.a.createElement("div",null,"Ready?"),this.state.countingDown?null:p.a.createElement(A,{onClick:function(){return e.setState({countingDown:!0})},to:"/discussion/"+this.props.discussion.get("eid")}),b&&(E&&b>100||!E&&b>4)?p.a.createElement("div",{className:"label participants-label",style:{marginBottom:20}},b+" "+m()("participant",b)," so far"):null),_=t.getIn(["leaderboard","topGlobal"],n.i(h.List)()).map(function(e,t){return p.a.createElement(w.a,{rank:t+1,isCompact:!0,hideByline:!0,hideFollowButton:!0,score:Math.round(e.get("score")),userId:e.get("user"),shouldLinkToUser:!0,offsetTop:-40,offsetLeft:120,key:"leaderboard-"+t})}),T=t.getIn(["leaderboard","topLocal"],n.i(h.List)()).map(function(e,t){return p.a.createElement(w.a,{isCompact:!0,hideByline:!0,hideFollowButton:!0,score:Math.round(e.get("score")),userId:e.get("user"),shouldLinkToUser:!0,offsetTop:-40,offsetLeft:120,key:"upandcoming-"+t})}),x=p.a.createElement("div",{className:"user-box box compact"},p.a.createElement("div",{className:"avatar-image dummy"}),p.a.createElement("div",{className:"shifted-right dummy"},p.a.createElement("div",{className:"name dummy"}),p.a.createElement("div",{className:"score dummy"}))),L=p.a.createElement("div",{className:"dummy-leaderboard"},[].concat(i(Array(3))).map(function(){return x}),p.a.createElement("div",{className:"label bold"},"Your Facebook friends will show up here once they take the quiz. Challenge them by sharing it:")),M=E?null:p.a.createElement("div",{className:"action-button-group"},p.a.createElement("button",{className:"action-button large share-quiz-button",onClick:this.props.onShareFn},"Share this Quiz"),p.a.createElement("button",{className:"action-button large quiz-to-community-button",onClick:function(){return v.browserHistory.push("/community/"+e.props.communityId)}},"See more →")),D=p.a.createElement(y.Element,{name:"results"},p.a.createElement("div",{className:"screen results-screen",ref:"results"},p.a.createElement("div",{className:"separator"},"Results"),r>49?p.a.createElement("div",{className:"summary heading"},"Congrats! You are in the top ",Math.max(100-r,1),"% 🎉"):null,1==s?p.a.createElement("div",{className:"summary"},"You’re on top of the leaderboard! 💯"):null,p.a.createElement("div",{className:"summary"},"Your score: "+a+" out of 100."),p.a.createElement("div",{className:"label participants-label"},"(Based on accuracy and speed)"),p.a.createElement("div",{className:"progress-sections"},p.a.createElement("div",{className:"progress-section","data-size":"100"},p.a.createElement(g.Motion,{defaultStyle:{x:0},style:{x:n.i(g.spring)(Math.round(100*o/c))}},function(e){return p.a.createElement("div",{className:"progress-ring",style:n.i(O.a)(Math.round(e.x))},p.a.createElement("div",{className:"before",style:n.i(O.b)(Math.round(e.x))}),p.a.createElement("span",{className:"progress-clip"},o," of ",c),p.a.createElement("div",{className:"after",style:n.i(O.c)(Math.round(e.x))}))}),p.a.createElement("div",{className:"label percentile-label"},"Accuracy")),p.a.createElement("div",{className:"progress-section","data-size":"100"},p.a.createElement(g.Motion,{defaultStyle:{x:0},style:{x:n.i(g.spring)(Math.round(r))}},function(e){return p.a.createElement("div",{className:"progress-ring",style:n.i(O.a)(Math.round(e.x))},p.a.createElement("div",{className:"before",style:n.i(O.b)(Math.round(e.x))}),p.a.createElement("span",{className:"progress-clip"},r),p.a.createElement("div",{className:"after",style:n.i(O.c)(Math.round(e.x))}))}),p.a.createElement("div",{className:"label percentile-label"},"Percentile"))),this.props.isCollapsed?p.a.createElement(v.Link,{className:"thin-button",to:"/discussion/"+this.props.discussion.get("eid")},"See full results"):p.a.createElement("div",null,M,E?null:this.state.isLeaderboardCollapsed?p.a.createElement("div",{className:"section"},p.a.createElement("button",{className:"section-heading review-section-heading",onClick:this.toggleLeaderboard},"See Leaderboard")):[p.a.createElement("div",{className:"section"},p.a.createElement("button",{className:"section-heading review-section-heading close-button",onClick:this.toggleLeaderboard},"Collapse")),p.a.createElement("div",{className:"leaderboard-section"},p.a.createElement("div",{className:"section-heading leaderboard-section-heading"},"Leaderboard"),p.a.createElement("div",{className:"label participants-label"},"Your rank: ",t.getIn(["userInfo","rank"],1)," out of ",b+" "+m()("participant",b)),_,p.a.createElement("div",{className:"section-heading leaderboard-section-heading"},"Friend Leaderboard"),T.size>0?T:L),M],this.state.isQuestionsListCollapsed?p.a.createElement("div",{className:"section"},p.a.createElement("button",{className:"section-heading review-section-heading",onClick:this.toggleQuestionsList},"Review Your Answers")):p.a.createElement("div",{className:"questions-section"},p.a.createElement("div",{className:"section"},p.a.createElement("button",{className:"section-heading review-section-heading close-button",onClick:this.toggleQuestionsList},"Collapse")),p.a.createElement("div",{className:"section-heading"},"Questions"),S,M))));return p.a.createElement(y.Element,{className:this.state.resultsPageVisible&&""==!this.props.currentLoggedInUser?"quiz-section results-quiz-section":"quiz-section",name:"quiz-section",onClickCapture:this.onContentClick},""==this.props.currentLoggedInUser?N:k?this.props.shouldLinkToDiscussion?N:I.get(d):0==d?N:this.state.resultsPageVisible?D:this.props.shouldLinkToDiscussion?N:S.get(d-1))}}]),t}(p.a.PureComponent),z=n.i(d.connect)(c,{startQuizQuestion:S.w,fetchDiscussionMetadata:S.e})(W)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),pricingInfo:e.get("pricingInfo")}}n.d(t,"a",function(){return g});var a=n(1),l=n.n(a),c=n(15),u=(n.n(c),n(37)),p=(n.n(u),n(204)),d=n(38),h=n(1006),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onUpgradeClick=n.onUpgradeClick.bind(n),n}return s(t,e),f(t,[{key:"onUpgradeClick",value:function(){this.props.users.getIn([this.props.currentLoggedInUser,"plan","isPromo"],!1)||this.props.fetchPixelInformation("click.pro_content_start_pro")}},{key:"render",value:function(){var e=p.a.get("defaultFrequency"),t=this.props.users.getIn([this.props.currentLoggedInUser,"plan","isPromo"],!1),n=p.a.get("monthlyPrice",{frequency:e}),i=p.a.get("discount",{frequency:e});return l.a.createElement("div",{className:"upgrade-box"},l.a.createElement("div",{className:"left-section"},l.a.createElement("div",{className:"lock-icon"})),l.a.createElement("div",{className:"right-section"},l.a.createElement("div",{className:"title"},"This "+(this.props.entityType?this.props.entityType+" ":"")+"is for Pro Members"),l.a.createElement("div",{className:"copy"},"We like how far you've come. Upgrade today and get access to all of CommonLounge."),l.a.createElement("div",{className:"copy"},l.a.createElement("strong",null,"Limited-time discount")," for early adopters: Pro Membership is only ",l.a.createElement("strong",null,n,"/month"),"month"==e?"":" when paid yearly",".",l.a.createElement("span",{className:"discount"},i,"% OFF")),l.a.createElement("div",{className:"copy"},l.a.createElement("strong",null,"Want a free month? "),l.a.createElement(c.Link,{to:"/referral"},"Refer a friend.")),l.a.createElement(c.Link,{to:this.props.paymentUrl,className:"cta-button zoom-on-hover",onClick:this.onUpgradeClick},t?"Subscribe Now →":"Start your free 7-day trial →"),this.props.currentLoggedInUser?null:l.a.createElement("div",{className:"copy sign-in"},"Already a member? ",l.a.createElement(c.Link,{to:"/sign-in"},"Sign in."))))}}]),t}(l.a.PureComponent),g=n.i(u.connect)(r,{fetchPixelInformation:d.a})(n.i(h.a)(m))},,function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){function i(e,t){return o(e)?e:s(e,t)?[e]:r(a(e))}var o=n(135),s=n(1026),r=n(1114),a=n(1117);e.exports=i},function(e,t,n){function i(e){return r(e)?o(e,!0):s(e)}var o=n(349),s=n(1207),r=n(329);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){return{loadedScripts:e.get("loadedScripts")}}n.d(t,"a",function(){return f});var a=n(1),l=n.n(a),c=n(906),u=(n(17),n(37)),p=(n.n(u),n(98)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.state=s.getInitialState(),s.loadAce=s.loadAce.bind(s),s.initializeAce=s.initializeAce.bind(s),s.isAceLoaded=s.isAceLoaded.bind(s),s.onAceValueChanged=s.onAceValueChanged.bind(s),s.setModeAndTheme=s.setModeAndTheme.bind(s),s.onFocus=s.onFocus.bind(s),s.onBlur=s.onBlur.bind(s),s.moveCursorAndFocus=s.moveCursorAndFocus.bind(s),s.editorId=n.i(p.a)(),s}return s(t,e),d(t,[{key:"loadAce",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.isAceLoaded())return void this.initializeAce();n.i(c.b)()}},{key:"getInitialState",value:function(){return{isFocused:!1}}},{key:"setModeAndTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.aceConfig&&(window.ace.config.setModuleUrl(e.aceConfig.getIn(["mode","name"]),e.aceConfig.getIn(["mode","url"])),window.ace.config.setModuleUrl(e.aceConfig.getIn(["theme","name"]),e.aceConfig.getIn(["theme","url"])),this.ace&&(this.ace.session.setMode(e.aceConfig.getIn(["mode","name"])),this.ace.setTheme(e.aceConfig.getIn(["theme","name"]))))}},{key:"initializeAce",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(window.ace){var n=t.options;this.ace=window.ace.edit("ace-editor-"+this.editorId,n),this.ace.session.setUseSoftTabs(!1),this.ace.on("change",this.onAceValueChanged),this.ace.on("focus",this.onFocus),this.ace.on("blur",this.onBlur),t.code&&this.ace.setValue(t.code,this.props.cursorAtEnd?1:-1),this.ace.commands.addCommand({name:"showKeyboardShortcuts",bindKey:{win:"Ctrl-Shift-Enter",mac:"Command-Shift-Enter"},exec:function(t){e.props.onEnter&&e.props.onEnter()}}),this.moveCursorAndFocus(t),this.props.setRef&&this.props.setRef(this.ace),this.setModeAndTheme()}}},{key:"moveCursorAndFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.initialCursorPosition&&(this.ace.moveCursorToPosition(e.initialCursorPosition),e.preventAutoFocus||this.ace.focus())}},{key:"onAceValueChanged",value:function(e){if("insert"==e.action&&e.lines&&1==e.lines.length&&e.lines[0].match(/(“|”|‘|’)/)&&e.start&&e.end)return this.ace.session.replace(new window.ace.Range(e.start.row,e.start.column,e.end.row,e.end.column),e.lines[0].match(/(“|”)/)?'"':"'"),void this.ace.moveCursorTo(e.start.row,e.start.column);this.props.onChange&&this.props.onChange({code:this.ace.getValue()})}},{key:"onFocus",value:function(e){this.props.onChange&&this.props.onChange({isEditorFocused:!0})}},{key:"onBlur",value:function(e){this.props.onChange&&this.props.onChange({isEditorFocused:!1})}},{key:"componentDidMount",value:function(){this.loadAce()}},{key:"componentWillUnmount",value:function(){this.ace&&(this.ace.destroy(),this.ace=null,this.editorId=null)}},{key:"isAceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.loadedScripts&&e.loadedScripts.getIn(["ace","hasLoaded"])}},{key:"componentWillReceiveProps",value:function(e){!this.isAceLoaded(this.props)&&this.isAceLoaded(e)&&this.initializeAce(e),e.aceConfig&&(!this.props.aceConfig||this.props.aceConfig&&this.props.aceConfig.getIn(["mode","name"])!=e.aceConfig.getIn(["mode","name"]))&&this.ace&&this.setModeAndTheme(e),e.aceConfig||this.ace.getSession().setMode(null),this.ace&&void 0!==e.code&&e.code!==this.ace.getValue()&&(this.ace.setValue(e.code,e.cursorAtEnd?1:-1),e.newCursor&&this.ace.moveCursorToPosition(e.newCursor)),this.props.initialCursorPosition!=e.initialCursorPosition&&this.moveCursorAndFocus(e),e.options&&this.props.options&&this.props.options.maxLines!=e.options.maxLines&&this.ace.setOptions({maxLines:e.options.maxLines})}},{key:"focus",value:function(){this.ace&&this.ace.focus()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"code-editor-ace"},l.a.createElement("div",{id:"ace-editor-"+this.editorId,ref:function(t){return e.textareaNode=t},className:"cl-ace-editor"}))}}]),t}(l.a.PureComponent),f=n.i(u.connect)(r,{},null,{withRef:!0})(h)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users")}}n.d(t,"a",function(){return w});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(132)),d=n.n(p),h=n(947),f=n.n(h),m=(n(131),n(133)),g=(n(890),n(1005),n(324),n(58)),v=n(328),y=n(17),b=n(325),k=n(905),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentClick=n.onContentClick.bind(n),n.onPlaylistItemClick=n.onPlaylistItemClick.bind(n),n}return s(t,e),E(t,[{key:"onContentClick",value:function(e,t){var i=this.props.discussion.get("eid");this.props.onClick&&this.props.onClick(e,i),n.i(g.o)(e,""+y.k+t)}},{key:"onPlaylistItemClick",value:function(e){n.i(g.o)(e,y.k+"/discussion/"+this.props.discussion.get("eid"))}},{key:"render",value:function(){var e=this;if(!this.props.discussion)return null;var t=this.props.discussion.get("eid"),i=(this.props.users.getIn([this.props.discussion.get("creator")],null),this.props.discussion.get("typeInfo")),o=(i&&i.get("type"),i&&"AMA"==i.get("type")),s=(i&&i.get("type"),i&&i.get("isPath",!1)),r=n.i(b.c)(this.props.isPlaylistItem?this.props.playlist.getIn(["primaryImage"],null):this.props.discussion.getIn(["primaryImage"],null),null,300),a=null,c=null,p=null;if(o){var h=this.props.discussion.getIn(["typeInfo","host"],null),g=this.props.users.get(h);a=g&&g.get("displayName"),r=g&&g.get("avatarUrl"),c=g&&g.get("avatarUrl"),p=g&&g.get("bio")}var E=this.props.isPlaylistItem?this.props.playlist.getIn(["name"],null)||this.props.playlist.getIn(["snippet20"],""):this.props.discussion.getIn(["name"],null)||this.props.discussion.getIn(["snippet20"],""),C=this.props.isPlaylistItem?"/discussion/"+this.props.playlist.get("eid"):s?"/path/"+t:"/discussion/"+t,w=this.props.isPlaylistItem?this.props.playlist.getIn(["typeInfo","stats","courseCount"],null):this.props.discussion.getIn(["typeInfo","stats","courseCount"],null),I=this.props.isPlaylistItem?this.props.playlist.getIn(["typeInfo","stats","tutorialCount"],null):this.props.discussion.getIn(["typeInfo","stats","tutorialCount"],null),S=this.props.isPlaylistItem?this.props.playlist.getIn(["typeInfo","stats","videoCount"],null):this.props.discussion.getIn(["typeInfo","stats","videoCount"],null),O=this.props.isPlaylistItem?this.props.playlist.getIn(["typeInfo","stats","projectCount"],null):this.props.discussion.getIn(["typeInfo","stats","projectCount"],null),N=this.props.isPlaylistItem?this.props.playlist.getIn(["typeInfo","stats","questionCount"],null):this.props.discussion.getIn(["typeInfo","stats","questionCount"],null),P=this.props.isPlaylistItem?this.props.playlist.getIn(["typeInfo","subscribersCount"],null):this.props.discussion.getIn(["typeInfo","subscribersCount"],null),_=P>99,T=this.props.isPlaylistItem?this.props.playlist.getIn(["rating","avgRating"],null):this.props.discussion.getIn(["rating","avgRating"],null),x=I>0||O>0||N>0,L=null,M=l.a.createElement("div",{className:"stats-line"},this.props.discussion.getIn(["byline"],""));if(this.props.isPlaylistItem){var j=this.props.discussion.getIn(["name"],null)||this.props.discussion.getIn(["snippet20"],"");L=l.a.createElement("div",{className:"playlist-line"},l.a.createElement("span",{className:"from"},"Next item: ",l.a.createElement("span",{className:"playlist-link",onClick:this.onPlaylistItemClick},j)))}var D=s?"featured-card path-featured-card shadow-on-hover no-decoration":"featured-card shadow-on-hover no-decoration";return l.a.createElement(u.Link,{className:D,to:C,onClick:function(t){return e.onContentClick(t,C)}},l.a.createElement("div",{className:"main-content"},S>0&&l.a.createElement("div",{className:"attention-label"},"Featured"),o?l.a.createElement("div",{className:"top-image ama-card"},l.a.createElement(m.a,{className:"profile-picture",size:"98",name:a,src:c,displaySize:"original"})):!r||y.h||this.props.forceShowRightImage?null:l.a.createElement(k.c,{className:"top-image",image:r}),s&&r?l.a.createElement("div",{className:"path-icon"}):null,s&&r?l.a.createElement("div",{className:"path-gradient"}):null,l.a.createElement("div",{className:"text-labels"},o?l.a.createElement("div",{className:"title ama-title"},"Q&A Session with ",a):l.a.createElement("div",{className:"title"},E,T&&l.a.createElement("div",{className:"rating-row"},l.a.createElement("div",{className:"rating-wrapper"},l.a.createElement(f.a,{className:"inline-rating-box",edit:!1,value:T+.25}),l.a.createElement("div",{className:"rating-number"},"(",n.i(v.d)(T,2),")")),_&&l.a.createElement("span",null,l.a.createElement("strong",null,P)," students"))),o?l.a.createElement("div",{className:"bio-line"},p):null,x&&l.a.createElement("div",{className:"pro-content-labels"},w>0&&l.a.createElement("div",{className:"pro-content-label"},"Path with ",l.a.createElement("strong",null,w)," ",d()("Course",w),":"),S>0&&l.a.createElement("div",{className:"pro-content-label videos"},l.a.createElement("strong",null,S," interactive")," ",d()("Video",S)),N>0&&l.a.createElement("div",{className:"pro-content-label quizzes"},l.a.createElement("strong",null,N)," ",d()("Exercise",N)),I>0&&l.a.createElement("div",{className:"pro-content-label tutorials"},l.a.createElement("strong",null,I)," ",d()("Tutorial",I)),O>0&&l.a.createElement("div",{className:"pro-content-label projects"},l.a.createElement("strong",null,O)," ",d()("Project",O))),o||x?null:M,L)),r&&y.h||this.props.forceShowRightImage?l.a.createElement(k.c,{className:"shifted-right-image never-hide",image:r}):null)}}]),t}(l.a.PureComponent),w=n.i(c.connect)(r)(C)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser"),discussions:e.get("discussions")}}n.d(t,"a",function(){return E});var a=n(1),l=n.n(a),c=n(947),u=n.n(c),p=n(37),d=(n.n(p),n(15)),h=(n.n(d),n(326)),f=(n.n(h),n(38)),m=n(323),g=n(97),v=n(59),y=(n.n(v),n(39)),b=(n.n(y),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onRatingChange=n.onRatingChange.bind(n),n.onToggleChoiceSelect=n.onToggleChoiceSelect.bind(n),n.onReviewChange=n.onReviewChange.bind(n),n.onSubmitDiscussionFeedback=n.onSubmitDiscussionFeedback.bind(n),n.onEditDiscussionFeedbackClick=n.onEditDiscussionFeedbackClick.bind(n),n.getInitialState=n.getInitialState.bind(n),n.scrollToFeedbackForm=n.scrollToFeedbackForm.bind(n),n.fetchFeedback=n.fetchFeedback.bind(n),n.getFeedbackPrompt=n.getFeedbackPrompt.bind(n),n.state=n.getInitialState(e),n}return s(t,e),b(t,[{key:"getFeedbackPrompt",value:function(e){var t=[],i=e.discussions&&e.discussions.get(e.discussionId);return i&&(t=n.i(y.fromJS)(i.get("feedbackPrompts")?i.get("feedbackPrompts"):[]).toJS()),t&&t.forEach(function(t){var n=t.eid,i=t.prompt.choices;if("4223a782ede74c1aac692f405b11e16b"==n||"cb269d4f5b114e5892dade3b78984049"==n){var o=i.indexOf("Better Audio");e.videoHack&&-1==o?t.prompt.choices.splice(1,0,"Better Audio"):e.videoHack||-1==o||t.prompt.choices.splice(o,1)}if("bc70b0c814f647929b51870d4da5dfd8"==n||"5acf55580236443e966cc4cbf021cbcc"==n){-1!=t.prompt.prompt.indexOf("Write any other feedback you have on this")&&e.videoHack?t.prompt.prompt="If you could change one thing about this video, what would it be?":t.prompt.prompt="Write any other feedback you have on this tutorial"}}),t}},{key:"getInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getFeedbackPrompt(e),o={showFeedbackForm:!n&&(t&&t.showFeedbackForm||e.showFeedbackForm||e.triggerModal||!1),submittedFeedbackForm:!n&&(t&&t.submittedFeedbackForm||!1),feedbackPrompts:i};return this.fetchFeedback(o),o}},{key:"fetchFeedback",value:function(){0==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state).feedbackPrompts.length&&this.props.currentLoggedInUser&&this.props.getDiscussionFeedback(this.props.discussionId,this.props.displayedPlaylistId)}},{key:"componentWillReceiveProps",value:function(e){this.props.discussionId==e.discussionId&&this.props.showFeedbackForm==e.showFeedbackForm||this.setState(this.getInitialState(e,this.state,this.props.discussionId!=e.discussionId));var t=this.getFeedbackPrompt(this.props),n=this.getFeedbackPrompt(e);(0==t.length&&0!=n.length||this.props.videoHack!=e.videoHack)&&this.setState({feedbackPrompts:n})}},{key:"onRatingChange",value:function(e,t){var n=this,i=Object.assign(this.state.feedbackPrompts[t],{response:e});this.setState({feedbackPrompts:this.state.feedbackPrompts.slice(0,t).concat([i]).concat(this.state.feedbackPrompts.slice(t+1))},function(e){return n.onSubmitDiscussionFeedback(e,!0)})}},{key:"onToggleChoiceSelect",value:function(e,t){var n=this.state.feedbackPrompts[t].prompt.choices[e],i=this.state.feedbackPrompts[t].response;i||(i=[]),-1==i.indexOf(n)?i.push(n):i.splice(i.indexOf(n),1);var o=Object.assign(this.state.feedbackPrompts[t],{response:i});this.setState({feedbackPrompts:this.state.feedbackPrompts.slice(0,t).concat([o]).concat(this.state.feedbackPrompts.slice(t+1))})}},{key:"onReviewChange",value:function(e,t){var n=Object.assign(this.state.feedbackPrompts[t],{response:e.target.value});this.setState({feedbackPrompts:this.state.feedbackPrompts.slice(0,t).concat([n]).concat(this.state.feedbackPrompts.slice(t+1))})}},{key:"onSubmitDiscussionFeedback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.submitDiscussionFeedback(this.props.discussionId,this.state.feedbackPrompts),t||this.setState({submittedFeedbackForm:!0}),this.props.onSaveNotify&&!t&&this.props.onSaveNotify()}},{key:"onEditDiscussionFeedbackClick",value:function(){this.fetchFeedback(),this.setState({showFeedbackForm:!0,submittedFeedbackForm:!1})}},{key:"componentDidMount",value:function(){this.scrollToFeedbackForm()}},{key:"componentDidUpdate",value:function(){this.scrollToFeedbackForm()}},{key:"scrollToFeedbackForm",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.discussions.get(this.props.discussionId);if(!t)return null;var n=this.state.feedbackPrompts&&this.state.feedbackPrompts.filter(function(e){return"default_rating"==e.type&&null!=e.response&&parseFloat(e.response)>=0});n=n&&n[0]?n[0].response:null;var i=n||t.getIn(["rating","myRating"],null),o=this.state.feedbackPrompts.map(function(t,n){var i=t.type,o=null,s=null,r=null;if("standard_rating"!=i&&"default_rating"!=i||(o=l.a.createElement(u.a,{onChange:function(t){return e.onRatingChange(t,n)},className:"rating-box",value:t.response,size:30})),"multiple_choice_review"==i){var a=t.prompt.choices.map(function(i,o){var s=t.response&&-1!=t.response.indexOf(i);return l.a.createElement("div",{className:s?"choice active":"choice",onClick:function(){return e.onToggleChoiceSelect(o,n)}},i)});s=l.a.createElement("div",{className:"options-box"},a)}return"standard_review"!=i&&"default_review"!=i||(r=l.a.createElement("textarea",{rows:"5",maxLength:"1000",className:"review-box",placeholder:t.prompt.placeholder,value:t.response,onChange:function(t){return e.onReviewChange(t,n)}})),l.a.createElement("div",{className:"question-prompt"},l.a.createElement("div",{className:"question"},t.prompt.prompt),o,s,r)}),s=l.a.createElement(h.Element,{name:"feedbackForm",className:"feedback-form",ref:"feedbackForm",id:"feedbackForm"},o.length>0?o:l.a.createElement("div",{className:"loader-div extra-padding"},l.a.createElement(g.a,null),l.a.createElement("div",{className:"loading-text"},"Loading Reviews…")),o.length>0?l.a.createElement("button",{className:"action-button large dark-blue submit-button",onClick:this.onSubmitDiscussionFeedback},"Submit"):null,o.length>0?l.a.createElement("div",{className:"label with-margin"},"CommonLounge contributors rely on your ratings and reviews to understand which tutorials to improve next.",l.a.createElement("br",null),l.a.createElement(d.Link,{to:"/improve"},"Want to help us improve a tutorial?")):null,t.get("isLastPlaylistItem")?l.a.createElement("div",{className:"last-playlist-item"},l.a.createElement("div",{className:"congrats"},"Congrats on finishing the course!"),l.a.createElement("div",{className:"party-popper-emoji"},"🎉"),l.a.createElement("div",{className:"review"},"Would you like to leave a review for the course?"),l.a.createElement("button",{className:"thin-button",onClick:function(){return d.browserHistory.push("/discussion/"+e.props.displayedPlaylistDiscussionId+"/?review=true")}},"Review the course →")):null),r=l.a.createElement("div",{className:"edit-rating",onClick:this.onEditDiscussionFeedbackClick},l.a.createElement(u.a,{className:"inline-rating-box",edit:!1,value:i}),l.a.createElement("div",{className:"thin-button"},"Edit your review")),a=l.a.createElement(m.b,{className:"give-rating",onClick:this.onEditDiscussionFeedbackClick},l.a.createElement(u.a,{className:"inline-rating-box",edit:!1,value:0}),l.a.createElement("div",{className:"thin-button"},"Leave a Review")),c=l.a.createElement("div",{className:"feedback-form-confirmation"},l.a.createElement("div",{className:"label large bold dark-gray"},"Thanks for submitting your review."),r,this.props.triggerModal?l.a.createElement("button",{className:"action-button large dark-blue submit-button",onClick:this.props.onSubmit},"Close"):null);return l.a.createElement("div",{className:"feedback-section"},this.state.showFeedbackForm?this.state.submittedFeedbackForm?c:s:i?r:a)}}]),t}(l.a.PureComponent),E=n.i(p.connect)(r,{getDiscussionFeedback:f.u,submitDiscussionFeedback:f.v})(k)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var r=n(1),a=n.n(r),l=n(17),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadImage=n.loadImage.bind(n),n.state={loadedImg:l.c?e.ssrUrl||e.url:e.url},n}return s(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){this.props.url!=e.url&&(this.numTimesTried=0,this.loadImage(e.url))}},{key:"componentDidMount",value:function(){this.loadImage(this.props.url)}},{key:"loadImage",value:function(e){this.currentlyLoadingImg&&(this.currentlyLoadingImg.onload=null,this.currentlyLoadingImg.onerror=null),this.currentlyLoadingImg=new Image,this.currentlyLoadingImg.onload=this.onLoad.bind(this),this.currentlyLoadingImg.onerror=this.onError.bind(this),this.currentlyLoadingImg.src=e}},{key:"onLoad",value:function(){this.setState({loadedImg:this.currentlyLoadingImg.src})}},{key:"onError",value:function(){var e=this.currentlyLoadingImg.src;if(e==this.props.url)return void(e!=this.props.backupUrl?this.loadImage(this.props.backupUrl):e!=this.props.defaultUrl&&this.loadImage(this.props.defaultUrl));e==this.props.backupUrl&&this.props.defaultUrl&&e!=this.props.defaultUrl&&this.loadImage(this.props.defaultUrl)}},{key:"render",value:function(){return a.a.createElement("div",{className:this.props.className||"cover-image",style:{backgroundImage:"url("+this.state.loadedImg+")"}})}}]),t}(a.a.PureComponent)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var r=n(37),a=(n.n(r),n(1)),l=n.n(a),c=n(888),u=n(204),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){var t=e.getIn(["users",e.get("currentLoggedInUser")]);if(t){var n=t.getIn(["plan","status"]),i=t.getIn(["plan","type"]),o="paypal"===t.getIn(["plan","provider"]),s=t.getIn(["plan","details","frequency"],"");return{user:t,plan:t.get("plan"),membershipStatus:n,isMemberShipActive:"active"==n,membershipLevel:i,displayedMembershipLevel:i&&i.charAt(0).toUpperCase()+i.slice(1),cancellationDate:t.getIn(["plan","cancelOn"])?new Date(t.getIn(["plan","cancelOn"])):null,endDate:t.getIn(["plan","details","expirationDate"])?new Date(t.getIn(["plan","details","expirationDate"])):null,isFutureStartDate:t.getIn(["plan","details","isFutureStartDate"])?new Date(t.getIn(["plan","details","isFutureStartDate"])):null,ppStatus:t.getIn(["plan","details","ppStatus"]),isPaypal:o,isPromo:"promo_plan"===t.getIn(["plan","provider"]),isManual:"manual_payment"===t.getIn(["plan","provider"]),defaultSource:o?"PayPal account":t.getIn(["defaultSource","last4"])?t.getIn(["defaultSource","brand"])+" ending in "+t.getIn(["defaultSource","last4"]):t.getIn(["defaultSource","cardNo"])?t.getIn(["defaultSource","cardNo"]):null,nextBillingDate:t&&t.getIn(["nextBillingDate"]),trialEnd:t.getIn(["plan","trialEnd"])?new Date(t.getIn(["plan","trialEnd"])):null,isInTrialPeriod:t.getIn(["plan","isInTrial"],!1),paymentProviderStatus:t.getIn(["paymentProviderStatus"]),frequency:s,frequencyStr:s+"ly"}}return{}}var a=function(t){function r(){return i(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return s(r,t),d(r,[{key:"render",value:function(){if(!e)return!1;var t="",i=this.props,o=i.membershipStatus,s=i.isMemberShipActive,r=i.displayedMembershipLevel,a=i.cancellationDate,d=i.endDate,h=i.isPaypal,f=i.isPromo,m=i.isManual,g=i.defaultSource,v=i.nextBillingDate,y=i.trialEnd,b=i.isInTrialPeriod,k=i.frequency,E=i.frequencyStr,C=i.ppStatus,w=(u.a.get("price",{frequency:k,currencyType:"USD"}),"/payment");return this.props.user&&this.props.plan&&(w="/payment/update",s?t=m?"user_cancelled"==C?"You've cancelled your "+r+" membership, and your membership privileges will end on "+n.i(c.b)(a)+".":b?"Your trial for the "+r+" membership is ongoing. Once your trial ends on "+n.i(c.b)(y)+", you will have access to CommonLounge "+r+" until "+n.i(c.b)(d)+".":"You are currently a "+r+" member. Your membership is valid until "+n.i(c.b)(d)+".":a?"You've cancelled your "+r+" membership, and your membership privileges will end on "+n.i(c.b)(a)+".":f?"Congratulations! You've received a promotional "+r+" membership. This will expire on: "+n.i(c.b)(d)+".":b?"Your trial for the "+r+" membership is ongoing. Your "+E+" subscription will begin on "+n.i(c.b)(y)+".":"You are currently a "+r+" member. Your "+E+" membership automatically renews at the end of your billing cycle"+(v?", on "+n.i(c.b)(v)+".":"."):"expired"==o?(w="/payment/reinstate",t=m?"Your "+r+" membership expired on "+n.i(c.b)(a)+".":"Your promotional "+r+" membership expired on "+n.i(c.b)(d)+"."):"unpaid"==o?(w="/payment/unpaid",t=["We couldn't charge your ",h?"PayPal account":l.a.createElement("span",{className:"label large bold"},g||"payment method")," and your "+r+" membership expired on "+(a&&n.i(c.b)(a))+". Please update your payment method below to reinstate your membership privileges."]):"user_cancelled"==o&&(w="/payment/reinstate",t=a>y?"You cancelled your "+r+" membership on "+n.i(c.b)(a):b?"You cancelled your trial for "+r+" membership on "+n.i(c.b)(a)+". You trial is still valid till "+n.i(c.b)(y)+".":"Your trial expired on "+n.i(c.b)(y))),l.a.createElement(e,p({},this.props,{paymentStatusStr:t,paymentUrl:w}))}}]),r}(l.a.Component);return n.i(r.connect)(t)(a)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(933),c=n(910),u=n(906),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={secondsRemaining:Math.round(e.secondsRemaining)},n.interval=setInterval(n.tick.bind(n),1e3),n}return s(t,e),p(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"tick",value:function(){this.setState({secondsRemaining:this.state.secondsRemaining-1}),this.state.secondsRemaining<=0&&(this.props.onTimeout(),clearInterval(this.interval))}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"count-down-digit","data-time":this.state.secondsRemaining},0==this.state.secondsRemaining?"":this.state.secondsRemaining))}}]),t}(a.a.PureComponent),h=function(e){function t(e){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.captureCamera=s.captureCamera.bind(s),s.startRecordingTimer=s.startRecordingTimer.bind(s),s.startRecording=s.startRecording.bind(s),s.stopRecording=s.stopRecording.bind(s),s.stopRecordingCallback=s.stopRecordingCallback.bind(s),s.state={isRecording:!1,hasRecordedAnswerOnce:!1,recordingTimerDisplayed:!1},s.recorder=null,n.i(u.a)(s.videoPlayerOnLoad,{namespace:"RecordRTC",urls:[{url:"https://www.WebRTC-Experiment.com/RecordRTC.js",defer:!0}]}),s}return s(t,e),p(t,[{key:"componentDidMount",value:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia}},{key:"captureCamera",value:function(e){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(t){e(t,self=this)}.bind(this)).catch(function(e){console.error(e)})}},{key:"stopRecordingCallback",value:function(){this.refs.video&&(this.refs.video.src=this.refs.video.srcObject=null,this.refs.video.muted=!1,this.refs.video.volume=1,this.refs.video.src=URL.createObjectURL(this.recorder.getBlob())),this.recorder.camera.stop(),this.recorder.destroy(),this.recorder=null}},{key:"startRecordingTimer",value:function(){this.setState({recordingTimerDisplayed:!0})}},{key:"startRecording",value:function(){this.props.isStaticDisplay||this.props.isCreationMode||(this.captureCamera(function(e){self.refs.video.muted=!0,self.refs.video.volume=0,self.refs.video.srcObject=e,self.recorder=RecordRTC(e,{type:"video"}),self.recorder.startRecording(),self.recorder.camera=e}),this.setState({isRecording:!this.state.isRecording,hasRecordedAnswerOnce:!0,recordingTimerDisplayed:!1}))}},{key:"componentWillUnmount",value:function(){this.stopRecording()}},{key:"stopRecording",value:function(){this.props.isStaticDisplay||this.props.isCreationMode||(this.recorder&&this.recorder.stopRecording(this.stopRecordingCallback),this.setState({isRecording:!this.state.isRecording}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"video-prompt-container"},a.a.createElement("div",{className:"input-label"},"Prompt"),a.a.createElement("div",{className:"video-prompt-node"},this.props.isCreationMode?a.a.createElement(l.a,{editorState:this.props.editorState,onEditorChange:this.props.onEditorChange,placeholder:"Imagine you're in a meeting with the Head of Marketing for Acme Corp and are selling our Alterx 360 Marketing Automation Software...",initialHTML:this.props.initialHTML}):a.a.createElement(c.a,{className:"cl-video-node",allowSectionCards:!1,returnRawNodes:!0,html:this.props.html,skipProgressiveLoading:!0})),!this.props.isCreationMode&&a.a.createElement("div",{className:"video-webcam-container"},this.state.recordingTimerDisplayed?a.a.createElement(d,{secondsRemaining:3,onTimeout:this.startRecording}):a.a.createElement("div",null,a.a.createElement("div",{className:"video-container"},a.a.createElement("video",{className:"video-webcam",autoPlay:"true",ref:"video"})),this.state.isRecording?a.a.createElement("div",{className:"bold-button",onClick:this.stopRecording},"End Recording"):a.a.createElement("div",{className:this.state.hasRecordedAnswerOnce?"bold-button secondary":"bold-button",onClick:this.startRecordingTimer},this.state.hasRecordedAnswerOnce?"Discard and record again":"Start Recording"))))}}]),t}(a.a.PureComponent);t.a=h},function(e,t,n){e.exports={default:n(1159),__esModule:!0}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(1163);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=!0},function(e,t,n){var i=n(934),o=n(1179),s=n(1012),r=n(1017)("IE_PROTO"),a=function(){},l=function(){var e,t=n(1064)("iframe"),i=s.length;for(t.style.display="none",n(1169).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[s[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=i(e),n=new a,a.prototype=null,n[r]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(913).f,o=n(924),s=n(898)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var i=n(1018)("keys"),o=n(984);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(912),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(960);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(912),o=n(895),s=n(1013),r=n(1022),a=n(913).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:r.f(e)})}},function(e,t,n){t.f=n(898)},,function(e,t,n){var i=n(85),o=Object.create,s=function(){function e(){}return function(t){if(!i(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=s},function(e,t,n){function i(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(348);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||(a.test(e)||!r.test(e)||null!=t&&e in Object(t))}var o=n(135),s=n(974),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},,,,,function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(59),c=n.n(l),u=n(203),p=n.n(u),d=n(905),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){if(e.isModalOpen&&!this.props.isModalOpen){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1, user-scalable=yes")}if(!e.isModalOpen&&this.props.isModalOpen){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no")}}},{key:"render",value:function(){var e=this.props.loadImage(this.props.src)?this.props.src:this.props.placeHolder;return a.a.createElement(c.a,{isOpen:this.props.isModalOpen,onRequestClose:this.props.onRequestClose,className:"modal-content image-modal-content",overlayClassName:"modal-overlay"},a.a.createElement(p.a,{transitionName:"modal",transitionAppear:!0,transitionAppearTimeout:500},a.a.createElement("div",{className:"close-button",onClick:this.props.onRequestClose}),a.a.createElement("img",{className:"image",src:e})))}}]),t}(a.a.PureComponent);t.a=n.i(d.b)(f)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(1047),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timeout=e.timeout,n.annul=null,n.state={ready:window.MathJax&&window.MathJax.ready},n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;if(this.state.ready)this.typeset();else{var t=this.props.check;this.annul=setInterval(function(){window.MathJax&&window.MathJax.isReady?(e.setState({ready:!0}),clearInterval(e.annul)):(e.timeout<0&&clearInterval(e.annul),e.timeout-=t)},t)}}},{key:"shouldComponentUpdate",value:function(e,t){return e.children!==this.props.children||e.inline!==this.props.inline||t.ready!==this.state.ready}},{key:"componentDidUpdate",value:function(e){var t=e.inline!==this.props.inline;this.typeset(t)}},{key:"componentWillUnmount",value:function(){clearInterval(this.annul),this.clear()}},{key:"setScriptText",value:function(e){var t=this.props.inline;return this.script||(this.script=document.createElement("script"),this.script.type="math/tex; "+(t?"":"mode=display"),this.node.appendChild(this.script)),"text"in this.script?this.script.text=e:this.script.textContent=e,this.script}},{key:"clear",value:function(){var e=window.MathJax;if(this.script&&e&&e.isReady){var t=e.Hub.getJaxFor(this.script);t&&t.Remove()}}},{key:"typeset",value:function(e){var t=this,i=window.MathJax,o=this.props,s=o.children,r=o.onRender,a=s;if(e&&this.clear(),!e&&this.script)i.Hub.Queue(function(){var e=i.Hub.getJaxFor(t.script);if(e)e.Text(a,r);else{var o=t.setScriptText(a);n.i(l.a)(i,o,r)}});else{var c=this.setScriptText(a);i.Hub.Queue(function(){return n.i(l.a)(i,c,r)})}}},{key:"render",value:function(){var e=this;return this.state.ready?a.a.createElement("span",{ref:function(t){e.node=t}}):null}}]),t}(r.Component);u.defaultProps={inline:!1,onRender:function(){},timeout:1e4,check:50},t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"onClick",value:function(e){!0!==this.props.options.get(e).get("disabled")&&this.props.onToggle(this.props.options.get(e).toJS())}},{key:"render",value:function(){var e=this,t=null;this.props.addOption&&(t=a.a.createElement("div",{className:"option"},a.a.createElement("div",{className:"checkbox",onClick:this.props.addOption.get("onAddTagClick")}),a.a.createElement("div",{className:"option-label"},a.a.createElement("div",{className:this.props.addOption.get("type")},this.props.addOption.get("name"))),a.a.createElement("div",{className:"button",onClick:this.props.addOption.get("onAddTagClick")},"Add "+this.props.addOption.get("type"))));var n=this.props.options.map(function(t,n){return a.a.createElement("div",{className:t.get("disabled")?"option disabled":"option",key:n,onClick:function(){return e.onClick(n)}},a.a.createElement("div",{className:(t.get("selected")?"selected ":"")+"option-label"},a.a.createElement("div",{className:t.get("type")},t.get("name"))),a.a.createElement("div",{className:"reason"},void 0!=t.get("reason")?t.get("reason"):"suggested"))});return a.a.createElement("div",{className:"multi-select"},t,n)}}]),t}(a.a.PureComponent);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentUser:e.get("currentLoggedInUser"),users:e.get("users")}}n.d(t,"a",function(){return v});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(38)),p=n(938),d=n.n(p),h=n(58),f=n(17),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasCopiedLink:!1},n.logEvent=n.logEvent.bind(n),n.handleCopyClick=n.handleCopyClick.bind(n),n.getCurrentUrl=n.getCurrentUrl.bind(n),n}return s(t,e),m(t,[{key:"openPopup",value:function(e,t){this.logEvent(t),window.isApp?n.i(h.k)(null,e):window.open(e,"Share","height=640, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no")}},{key:"logEvent",value:function(e){this.props.logEvent({type:"share",payload:{obj:this.props.objId,obj_type:this.props.objType,sub_type:e}})}},{key:"handleCopyClick",value:function(){this.logEvent("link"),this.setState({hasCopiedLink:!0})}},{key:"getCurrentUrl",value:function(e){return e=e?e+"-":"",this.props.currentUser&&!this.props.referralCode?""+f.k+this.props.url+"?ref="+e+"user-share-"+this.props.currentUser:""+f.k+this.props.url}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"social-sharing","data-location":this.props.location},"referral-page"!=this.props.location&&l.a.createElement("div",{className:"section-heading"},this.props.prompt?"":"Share"),this.props.prompt?l.a.createElement("div",{className:"text"},l.a.createElement("p",null),l.a.createElement("p",null,"Hey ",l.a.createElement("strong",null,this.props.users.get(this.props.currentUser).get("firstName"),"!")),l.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.prompt}}),l.a.createElement("p",null)):null,l.a.createElement("div",{className:"social-sharing-tools"},l.a.createElement("div",{className:"link tool"},l.a.createElement(d.a,{"data-clipboard-text":this.getCurrentUrl("link"),onSuccess:this.handleCopyClick},l.a.createElement("span",{className:"link-icon icon"})),l.a.createElement("span",{className:"label"},this.state.hasCopiedLink?"Copied":"Copy Link")),l.a.createElement("div",{className:"messenger tool"},l.a.createElement("span",{className:"messenger-icon icon",onClick:function(){return e.openPopup("https://www.facebook.com/dialog/send?app_id="+window.ai+"&display=popup&link="+e.getCurrentUrl("messenger")+"&redirect_uri="+window.site+e.props.url,"messenger")}}),l.a.createElement("span",{className:"label"},"Messenger")),l.a.createElement("div",{className:"facebook tool"},l.a.createElement("span",{className:"facebook-icon icon",onClick:function(){return e.openPopup("https://www.facebook.com/dialog/share?app_id="+window.ai+"&display=popup&href="+e.getCurrentUrl("facebook")+"&redirect_uri="+window.site+e.props.url,"facebook")}}),l.a.createElement("span",{className:"label"},"Facebook")),l.a.createElement("div",{className:"twitter tool"},l.a.createElement("span",{className:"twitter-icon icon",onClick:function(){return e.openPopup("https://twitter.com/intent/tweet?url="+e.getCurrentUrl("twitter")+"&via=commonlounge&text="+encodeURIComponent(e.props.title),"twitter")}}),l.a.createElement("span",{className:"label"},"Twitter"))))}}]),t}(l.a.PureComponent),v=n.i(c.connect)(r,{logEvent:u.c})(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(981),s=n(906),r=n(131),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){i(this,e);var n=[],s=!0,r=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;n.push(new o.a(u))}}catch(e){r=!0,a=e}finally{try{!s&&c.return&&c.return()}finally{if(r)throw a}}this.blocks=n,this.getNumBlocks=this.getNumBlocks.bind(this),this.getAtIndex=this.getAtIndex.bind(this),this.findVideoDuration=this.findVideoDuration.bind(this),this.findBlockIndex=this.findBlockIndex.bind(this),this.findBlockAtTime=this.findBlockAtTime.bind(this),this.findOverlaidBlocksAtTime=this.findOverlaidBlocksAtTime.bind(this),this.findFirstSlideEnd=this.findFirstSlideEnd.bind(this),this.findSlideIndex=this.findSlideIndex.bind(this),this.findBlockWithName=this.findBlockWithName.bind(this),this.findImages=this.findImages.bind(this)}return a(e,[{key:"getNumBlocks",value:function(){return this.blocks.length}},{key:"getAtIndex",value:function(e){return e>=this.getNumBlocks()?null:this.blocks[e]}},{key:"findVideoDuration",value:function(){var e=this.getAtIndex(this.getNumBlocks()-1);return e?e.getTimeStamp()+(e.getDuration()||1e3):0}},{key:"findBlockIndex",value:function(e){for(var t=this.getNumBlocks()-1,n=0;n<this.getNumBlocks();n++){if(this.getAtIndex(n).getTimeStamp()>e){t=n>0?n-1:0;break}}return t}},{key:"findBlockAtTime",value:function(e,t){for(var n=null,i=0;i<this.getNumBlocks();i++){var o=this.getAtIndex(i);if(t<o.getTimeStamp()&&e>=o.getTimeStamp()){n=i;break}}return null!=n?this.getAtIndex(n):null}},{key:"findOverlaidBlocksAtTime",value:function(e){for(var t=[],n=0;n<this.getNumBlocks();n++){var i=this.getAtIndex(n);["branch","hotspot"].indexOf(i.getContentType())>-1&&e>=i.getTimeStamp()&&e<i.getTimeStamp()+i.getDuration()&&t.push(i)}return t}},{key:"findFirstSlideEnd",value:function(){for(var e=this.getNumBlocks()-1,t=0;t<this.getNumBlocks();t++){var n=this.getAtIndex(t);if(0!=t&&"clear-slide"==n.getOperationType()){e=t-1;break}}return e}},{key:"findSlideIndex",value:function(e){for(var t=this.findBlockIndex(e),n=0,i=t;i>0;i--){if("clear-slide"==this.getAtIndex(i).getOperationType()){n=i;break}}return n}},{key:"findBlockWithName",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t;n<this.getNumBlocks();n++){var i=this.getAtIndex(n);if(i.getProperty("name")==e)return i}return null}},{key:"findImages",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,s=this.blocks[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;if("editor"==r.getContentType()){var a=r.getContent();if(a){var l=a.content;if(l&&-1!=l.indexOf("<img")){var c=document.createElement("div");c.innerHTML=l;var u=Array.from(c.getElementsByTagName("img")),p=u.filter(function(e){return e.src}).map(function(e){return e.src});e=e.concat(p)}}}}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}return e}},{key:"handleCodeBlockScriptLoading",value:function(e){if(e&&0!=e.size){var t=!1,i={},o=!0,a=!1,l=void 0;try{for(var c,u=this.blocks[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var p=c.value;if(p.isCodeBlock()){t=!0;var d=p.getContent().content.config;if(d){var h=n.i(r.f)({text:d}),f=e.getIn(["codeblock",h]);if(f){var m=f&&f.getIn(["init_values",f.get("default_language").toString(),"mode_config"]);i[m.getIn(["mode","name"])]=m.getIn(["mode","url"]),i[m.getIn(["theme","name"])]=m.getIn(["theme","url"])}}}}}catch(e){a=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw l}}if(t){n.i(s.b)();for(var g in i)if(i.hasOwnProperty(g)){var v={namespace:g,urls:[{url:i[g],defer:!0}]};n.i(s.a)(null,v)}}}}}]),e}();t.a=l},,,function(e,t,n){function i(e,t,n){var i=e[t];a.call(e,t)&&s(i,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(1040),s=n(207),r=Object.prototype,a=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(1107);e.exports=i},function(e,t,n){function i(e,t){t=o(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(1e3),s=n(958);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=n(1128);t.Motion=i(o);var s=n(1129);t.StaggeredMotion=i(s);var r=n(1130);t.TransitionMotion=i(r);var a=n(1133);t.spring=i(a);var l=n(1031);t.presets=i(l);var c=n(946);t.stripStyle=i(c);var u=n(1132);t.reorderKeys=i(u)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),links:e.get("links"),topics:e.get("topics"),communities:e.get("communities"),discussions:e.get("discussions"),channels:e.get("channels"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return $});var a=n(1),l=n.n(a),c=n(53),u=n.n(c),p=n(37),d=(n.n(p),n(132)),h=n.n(d),f=(n(133),n(890)),m=n(891),g=n.n(m),v=n(1453),y=n(1434),b=n(1303),k=n(1574),E=n(1298),C=n(1083),w=n(996),I=n(1448),S=n(323),O=n(38),N=n(58),P=n(32),_=n(17),T=n(1268),x=n(131),L=n(1089),M=n(330),j=n(15),D=(n.n(j),n(325)),A=n(1032),R=n(1449),F=n(97),U=n(910),B=n(1057),H=n(1056),q=n(1267),W=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),z={},V=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),W(t,[{key:"render",value:function(){return l.a.createElement("button",{className:"remind-button",onClick:this.props.onClick},"Remind me")}}]),t}(l.a.PureComponent),Q=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),W(t,[{key:"onClick",value:function(e){this.props.onClick(e,this.props.url)}},{key:"render",value:function(){return l.a.createElement("a",{href:this.props.url,className:"no-decoration",target:"_blank",onClick:this.onClick},l.a.createElement(b.a,{link:this.props.link}))}}]),t}(l.a.PureComponent),Y=(n.i(S.a)(V),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),W(t,[{key:"render",value:function(){var e=this.props.importedLinkObject;return l.a.createElement("div",{className:"imported-link-preview"},l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"image-preview clickable":"image-preview",onClick:this.props.onContentClick,style:{backgroundImage:"url("+e.get("img")+")"}}),l.a.createElement("div",{className:"shifted-right"},l.a.createElement("a",{href:e.get("url"),target:"_blank",className:"external title",onClick:this.props.onImportedLinkClick},this.props.name),l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"description clickable":"description",onClick:this.props.onContentClick,dangerouslySetInnerHTML:n.i(x.i)(this.props.html)}),l.a.createElement("a",{href:e.get("url"),target:"_blank",className:"external url",onClick:this.props.onImportedLinkClick},n.i(N.n)(e.get("url")))))}}]),t}(l.a.PureComponent)),G=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),W(t,[{key:"render",value:function(){return this.props.canView?l.a.createElement("div",{className:"read-more",onClick:this.props.onReadMoreClick},l.a.createElement("div",{className:"fadeout"}),this.props.wordCount>0?l.a.createElement("span",{className:"read-more-text"},"Read more…(",this.props.wordCount," ",h()("word",this.props.wordCount),")"):l.a.createElement("span",{className:"read-more-text"},"Read more…"),this.props.isFetching?l.a.createElement("span",{className:"loader-span"},l.a.createElement(F.a,{isSmall:!0})):null):null}}]),t}(l.a.PureComponent),J=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.getRef=n.getRef.bind(n),n}return s(t,e),W(t,[{key:"getRef",value:function(){return this.node}},{key:"setRef",value:function(e){this.node=e}},{key:"render",value:function(){return l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"text-container clickable":"text-container",onClick:this.props.onContentClick},l.a.createElement(U.a,{className:this.props.hasReadMoreBeenClicked?"text":(this.props.isCompact||this.props.isCollapsed&&this.props.isTextCollapsed?"collapsed-2 ":this.props.isTextCollapsed?this.props.linkNodesExist?"collapsed-5 ":"expanded-20 ":"")+"text",html:this.props.html,setRef:this.setRef,canView:this.props.canView,allowSectionCards:this.props.allowSectionCards,allowVideo:this.props.allowVideo,discussionId:this.props.discussionId,ref:"content",additionalHeight:this.props.additionalHeight,onSectionsComplete:this.props.onSectionsComplete,setMode:this.props.setMode,displayedPlaylist:this.props.displayedPlaylist}))}}]),t}(l.a.PureComponent),K=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleFollow=n.toggleFollow.bind(n),n.toggleBookmark=n.toggleBookmark.bind(n),n.onContentClick=n.onContentClick.bind(n),n.onReadMoreClick=n.onReadMoreClick.bind(n),n.onMoreOptionsClick=n.onMoreOptionsClick.bind(n),n.onRequestCloseMoreOptionsModal=n.onRequestCloseMoreOptionsModal.bind(n),n.getDisplayTextForSharing=n.getDisplayTextForSharing.bind(n),n.shouldTextBeUnCollapsed=n.shouldTextBeUnCollapsed.bind(n),n.recalculateCollapsing=n.recalculateCollapsing.bind(n),n.imageModalOnRequestClose=n.imageModalOnRequestClose.bind(n),n.onPublishFn=n.onPublishFn.bind(n),n.onLinkClick=n.onLinkClick.bind(n),n.onLinkNodeScrollLeft=n.onLinkNodeScrollLeft.bind(n),n.onLinkNodeScrollRight=n.onLinkNodeScrollRight.bind(n),n.onDiscussionDelete=n.onDiscussionDelete.bind(n),n.onImportedLinkClick=n.onImportedLinkClick.bind(n),n.getDisplayedDescription=n.getDisplayedDescription.bind(n),n.onAndroidEditClick=n.onAndroidEditClick.bind(n),n.state={isTextCollapsed:!(e.isTextCollapsed||e.discussion&&e.discussion.get("description")),isMoreOptionsModalOpen:!1,hoverCardTop:null,hoverCardLeft:null,isImageModalOpen:!1,modalImageUrlLarge:null,modalImageUrlSmall:null,isFetchingDescription:!1,hasReadMoreBeenClicked:!1},n}return s(t,e),W(t,[{key:"onAndroidEditClick",value:function(e){alert("We are working hard to bring you the editing feature on Android. Please use CommonLounge on a desktop to edit this. Thanks for your patience :)"),e.stopPropagation(),e.preventDefault()}},{key:"onLinkClick",value:function(e,t){n.i(N.o)(e,t)}},{key:"imageModalOnRequestClose",value:function(){this.setState({isImageModalOpen:!1})}},{key:"getDisplayedDescription",value:function(){return this.props.discussion&&(this.props.discussion.get("description")||this.props.discussion.getIn(["snippet40","snippet"],"")||this.props.discussion.getIn(["snippet20","snippet"],""))}},{key:"shouldTextBeUnCollapsed",value:function(){var e=0,t=this.getDisplayedDescription(),i=this.refs.content&&this.refs.content.getRef();if(i&&(void 0!=z[this.props.discussion.get("eid")]?e=z[this.props.discussion.get("eid")]:(e=n.i(x.l)(t)*(22/70)+n.i(x.m)(t),e=Math.max(i.clientHeight,e),z[this.props.discussion.get("eid")]=e)),e<400){if(this.props.isCompact||this.props.isCollapsed)return e<44;if(!(this.props.discussion.get("sources")&&this.props.discussion.get("sources").size>0))return!0;if(e<200)return!0}return!1}},{key:"recalculateCollapsing",value:function(){this.props.shouldLinkToDiscussion?this.state.hasReadMoreBeenClicked||this.shouldTextBeUnCollapsed()?this.setState({isTextCollapsed:!1}):this.setState({isTextCollapsed:!0}):!1===this.props.isCollapsed&&0==this.props.isTextCollapsed&&this.setState({isTextCollapsed:!1})}},{key:"componentDidMount",value:function(){this.recalculateCollapsing()}},{key:"componentDidUpdate",value:function(e,t){e.discussion!=this.props.discussion&&this.recalculateCollapsing()}},{key:"componentWillReceiveProps",value:function(e){void 0!=e.isTextCollapsed?this.setState({isTextCollapsed:e.isTextCollapsed}):void 0!=e.isCollapsed&&(e.isCollapsed&&this.shouldTextBeUnCollapsed()?this.setState({isTextCollapsed:!1}):this.setState({isTextCollapsed:e.isCollapsed})),e.discussion&&e.discussion.get("description")&&!this.props.discussion.get("description")&&this.setState({isFetchingDescription:!1})}},{key:"onMoreOptionsClick",value:function(){this.setState({isMoreOptionsModalOpen:!0})}},{key:"onRequestCloseMoreOptionsModal",value:function(){this.setState({isMoreOptionsModalOpen:!1})}},{key:"toggleFollow",value:function(){this.props.toggleDiscussionFollow(this.props.discussion.get("eid"))}},{key:"toggleBookmark",value:function(){this.props.toggleDiscussionBookmark(this.props.discussion.get("eid"))}},{key:"onImportedLinkClick",value:function(e){"A"==e.target.nodeName&&n.i(N.d)(e)}},{key:"onContentClick",value:function(e){if(e.target.classList.contains("spoiler")){e.target;"spoiler-content"==e.target.firstChild.className&&e.target.classList.toggle("hidden")}else if(e.target.classList.contains("heading-link"))this.props.scrollToHash&&this.props.scrollToHash(e.target.hash);else if("IMG"==e.target.nodeName)this.setState({isImageModalOpen:!0,modalImageUrlLarge:n.i(D.a)(e.target.src),modalImageUrlSmall:e.target.src});else if("A"==e.target.nodeName)n.i(N.d)(e);else if(this.props.shouldLinkToDiscussion){e.preventDefault();var t="/discussion/"+this.props.discussion.get("eid")+"/main";e.metaKey?n.i(P.a)(t):j.browserHistory.push(t)}}},{key:"onReadMoreClick",value:function(){this.props.discussion.get("description")?this.setState({isTextCollapsed:!1,hasReadMoreBeenClicked:!0}):this.state.isFetchingDescription||(this.props.fetchDiscussionMetadata(this.props.discussion.get("eid"),null,["description"]),this.setState({isFetchingDescription:!0,hasReadMoreBeenClicked:!0}))}},{key:"getDisplayTextForSharing",value:function(){var e=this.getDisplayedDescription();return 0==this.props.discussion.get("name").length?'"'+n.i(x.n)(e,v.a)+'"':this.props.discussion.get("name").length>v.a?this.props.discussion.get("name").substr(0,v.a)+"…":this.props.discussion.get("name")}},{key:"onDiscussionDelete",value:function(){var e=this.props.discussion.get("community")?"/community/"+this.props.discussion.get("community"):"/home";this.props.deleteDiscussion(this.props.discussion.get("eid"),e)}},{key:"onPublishFn",value:function(){this.props.publishDiscussion(this.props.discussion.get("eid"))}},{key:"onLinkNodeScrollLeft",value:function(){n.i(L.a)(u.a.findDOMNode(this.refs.carousel),-495,200,!0)}},{key:"onLinkNodeScrollRight",value:function(){n.i(L.a)(u.a.findDOMNode(this.refs.carousel),495,200,!0)}},{key:"render",value:function(){var e=this,t=(this.props.users,this.props.discussion);if(!t)return null;var i=t.get("topics")?t.get("topics").map(function(t,n){return l.a.createElement("div",{className:"topic",key:n},e.props.topics.getIn([t,"name"]))}):null,o=t.get("sources")?t.get("sources").map(function(t,i){var o=e.props.links.get(t).get("url"),s=n.i(N.f)(o);return s?l.a.createElement("div",{key:i},l.a.createElement("div",{className:"preview link-preview"},l.a.createElement(T.a,{id:s}))):l.a.createElement(Q,{key:i,url:o,link:e.props.links.get(t),onClick:e.onLinkClick})}):null,s=this.props.users.get(t.get("creator")),r=t.get("community"),a=t.get("channel"),c=t.get("creator")==this.props.currentLoggedInUser,u=(t.get("isModerator"),this.props.currentLoggedInUser&&this.props.users.get(this.props.currentLoggedInUser).get("isSuperModerator")),p=(s&&s.getIn(["communitiesRank",r],null),s&&s.getIn(["communitiesModeratorStatus",r],null),r&&this.props.communities.get(r)),d=p?p.get("name"):null,h=(!!p&&p.get("accessLevel"),!!p&&p.get("allowPublicToReply")),m=l.a.createElement(j.Link,{to:"/community/"+r},d),v=(a&&this.props.channels.get(a)&&l.a.createElement(j.Link,{to:"/community/"+r+"/"+a},"/"+this.props.channels.get(a).get("name")),t.get("typeInfo")),b=v&&"PLAYLIST"==v.get("type"),O=!b&&t.get("playlists")&&t.get("playlists").get(0);if(_.m&&O){var P=t.get("playlists").find(function(e){return e.get("eid")==_.m});P&&(O=P)}var L=O?this.props.discussions.get(O.get("discussion")):null,D=L?""+L.get("name"):null,F=D?l.a.createElement(j.Link,{to:"/discussion/"+O.get("discussion")},D):null,U=v&&"AMA"==v.get("type"),W=v&&"POLL"==v.get("type"),z=v&&"QUIZ"==v.get("type"),V=v&&"DEFAULT"==v.get("type"),K=t.get("isWiki"),$=t.get("isImported"),X=this.props.links.get(t.getIn(["sources",0],null)),Z=t.get("isPremium");if(U)var ee=this.props.users.get(v.get("host"));var te=null;te=$?"News":U?"Q&A session":b?"course":W?"poll":z?"quiz":K?"tutorial":"discussion";var ne=t.getIn(["schedulingInfo","type"],"PUBLISHED"),ie=this.getDisplayedDescription(),oe=!t.get("description")&&!t.getIn(["snippet40","snippet"],!1),se=!t.get("description")&&!oe,re=se?t.getIn(["snippet40","isTruncated"],!1):!!oe&&t.getIn(["snippet40","isTruncated"],!1),ae=t.get("editableInfo"),le=ae&&"denied"!=ae,ce=t.get("canView");return l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"post discussion-metadata should-link-to-discussion":"post discussion-metadata"},l.a.createElement("div",{className:"index"},this.props.index+1,"."),this.props.shouldLinkToDiscussion&&!this.props.hideEntityLabel?l.a.createElement("div",{className:"entity-label"},te):null,l.a.createElement(R.a,{type:ne}),$&&X?l.a.createElement(Y,{shouldLinkToDiscussion:this.props.shouldLinkToDiscussion,onContentClick:this.onContentClick,importedLinkObject:X,onImportedLinkClick:this.onImportedLinkClick,name:t.get("name"),html:ie}):null,Z&&!this.props.isCompact?l.a.createElement("div",{className:"pro-label-wrapper"},l.a.createElement("div",{className:"pro-label"},"Pro Content")):null,!this.props.isCompact&&U&&ee?l.a.createElement(k.a,{discussion:t,shouldLinkToDiscussion:this.props.shouldLinkToDiscussion,onContentClick:this.onContentClick,toggleFollow:this.toggleFollow}):$?null:l.a.createElement("div",{className:"title-row"},l.a.createElement("div",{className:"left-section"},l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"title collapsible clickable":"title user-content-overview",onClick:this.onContentClick},t.get("name"),!K||this.props.shouldLinkToDiscussion||!le&&this.props.currentLoggedInUser?null:_.b?l.a.createElement(S.g,{onClick:this.onAndroidEditClick,to:"",className:"edit-button no-decoration"},"[ Edit ]"):l.a.createElement(S.g,{to:"/discussion/"+t.get("eid")+"/edit",className:"edit-button no-decoration"},"[ Edit ]"),this.props.isCompact&&s?l.a.createElement("span",{className:"author-name-wrapper"},"by",l.a.createElement(M.c,{userId:s.get("eid"),offsetLeft:10,offsetTop:-35},l.a.createElement("span",{className:"author-name"}," ",s.get("displayName")))):null),!this.props.isCompact&&l.a.createElement("div",{className:"label time-to-read-label"},F&&l.a.createElement("span",null,"From ",F," course"),V&&t.getIn(["timeToRead"],null)&&l.a.createElement("span",null,t.getIn(["timeToRead"],null)," min read"))),this.props.shouldLinkToDiscussion?null:l.a.createElement("div",{className:"right-section"},l.a.createElement("span",{className:"action-container"},l.a.createElement("span",{className:"more-options"},l.a.createElement("span",{className:"more-options-icon clickable",onClick:this.onMoreOptionsClick})),l.a.createElement(I.a,{entityLabel:te,onShareFn:this.props.onShareFn,onCrossPostFn:h?this.props.onCrossPostFn:null,onPublishFn:"PUBLISHED"!=ne?this.onPublishFn:null,isOpen:this.state.isMoreOptionsModalOpen,onRequestClose:this.onRequestCloseMoreOptionsModal,onDeleteFn:c||u?this.onDiscussionDelete:null,editUrl:le||!this.props.currentLoggedInUser?"/discussion/"+t.get("eid")+"/edit":null,editLabel:"allowed"==ae?"Edit this "+te:"suggested_edit"==ae?"Suggest an Edit":null,editHistoryUrl:"/discussion/"+t.get("eid")+"/history",onReportFn:function(){return e.props.reportContent("discussion",t.get("eid"))}})))),this.props.showCourseInfo?l.a.createElement(B.a,{discussionId:t.get("eid"),location:"discussion-metadata"}):null,t.get("userMessage")?l.a.createElement("div",{className:"user-message"},n.i(x.k)(t.get("userMessage").toJS())):null,this.props.allowEmbeddedVideo&&l.a.createElement(q.a,{video:t,placeholderImg:t.get("primaryImage"),isInlineDisplay:!_.a}),b&&l.a.createElement("div",{className:"separator user-content-overview"},"Overview"),ce&&!ie||$?null:l.a.createElement(J,{ref:"content",shouldLinkToDiscussion:this.props.shouldLinkToDiscussion,hasReadMoreBeenClicked:this.state.hasReadMoreBeenClicked,isCompact:this.props.isCompact,isCollapsed:this.props.isCollapsed,isTextCollapsed:this.state.isTextCollapsed,linkNodesExist:o&&o.size>0,html:ie,onContentClick:this.onContentClick,canView:ce,allowSectionCards:this.props.allowSectionCards,allowVideo:this.props.allowVideo,discussionId:t.get("eid"),onSectionsComplete:this.props.onSectionsComplete,additionalHeight:this.props.additionalHeight,setMode:this.props.setMode,displayedPlaylist:O}),this.state.isTextCollapsed||!t.get("description")&&re?l.a.createElement(G,{canView:ce,onReadMoreClick:this.onReadMoreClick,wordCount:t.getIn(["textStats","wordCount"],0),isFetching:this.state.isFetchingDescription}):null,!this.props.isCompact&&W&&ce?l.a.createElement(C.a,{discussion:t}):null,!this.props.isCompact&&z&&ce?l.a.createElement(w.b,{discussion:t,communityId:r,shouldLinkToDiscussion:this.props.shouldLinkToDiscussion,isCollapsed:this.props.shouldLinkToDiscussion||this.props.isCollapsed,onShareFn:this.props.onShareFn}):null,this.props.showCourseEnrollmentInfo?l.a.createElement(H.a,{onSubscribeClick:this.props.onSubscribeClick,onUnSubscribeClick:this.props.onUnSubscribeClick,discussionId:t.get("eid"),location:"discussion-metadata"}):null,!this.props.isCompact&&b&&ce?l.a.createElement(E.a,{ref:"playlistSectionContainer",discussion:t,isListCollapsed:this.props.shouldLinkToDiscussion||this.props.isCollapsed,shouldLinkToDiscussion:this.props.shouldLinkToDiscussion,onContentClick:this.onContentClick,isFeedbackFormDisplayed:this.props.isFeedbackFormDisplayed,onPotentialHeightChange:this.props.onPotentialHeightChange}):null,this.props.showCourseEnrollmentInfo?l.a.createElement(H.a,{onSubscribeClick:this.props.onSubscribeClick,onUnSubscribeClick:this.props.onUnSubscribeClick,discussionId:t.get("eid"),location:"discussion-metadata"}):null,!this.props.isCompact&&!$&&o&&o.size>0?l.a.createElement("div",{className:"carousel-container"},o.size>1?l.a.createElement("div",{className:"scroll-button left",onClick:this.onLinkNodeScrollLeft}):null,l.a.createElement("div",{className:"links-carousel carousel",ref:"carousel"},o),o.size>1?l.a.createElement("div",{className:"scroll-button right",onClick:this.onLinkNodeScrollRight}):null):null,!this.props.isCompact&&!this.props.shouldLinkToDiscussion&&!this.props.hideTopics&&i&&i.size>0?l.a.createElement("div",{className:"topics"},i):null,this.props.hideCompactUserBox?null:l.a.createElement("div",{className:"compact-user-box"},l.a.createElement("div",{className:"left-section"},l.a.createElement("div",{className:"compact-user-info"},r?l.a.createElement("span",{className:"community-name"},"Category: ",m):null,_.c?null:t.get("dtEdited")?l.a.createElement(j.Link,{to:"/discussion/"+t.get("eid")+"/history",className:"timeago no-decoration",onClick:this.onContentClick},"Last updated: ",l.a.createElement(g.a,{date:t.get("dtEdited")})):l.a.createElement("span",{className:"timeago clickable",onClick:this.onContentClick},l.a.createElement(f.a,{date:t.get("dtCreated")}))))),this.props.hideActionsBar?null:l.a.createElement(y.a,{toggleFn:this.toggleFollow,isFollow:!0,isSelected:t.get("isFollowing"),hasBookmarked:t.get("hasBookmarked"),toggleBookmarkFn:this.toggleBookmark,upvoteCount:t.get("followersCount"),upvoteUrl:"/discussion/"+t.get("eid")+"/followers",entityId:t.get("eid"),action:"discussion-follow",objId:t.get("eid"),objType:"Discussion",url:"/discussion/"+t.get("eid"),authRequiredURL:"/discussion/"+t.get("eid")+"?action=discussion-follow",authRequiredBookmarkURL:"/discussion/"+t.get("eid")+"?action=discussion-bookmark",title:this.getDisplayTextForSharing(),postsCount:t.get("postsCount"),postsUrl:"/discussion/"+t.get("eid")+"/main",addPostUrl:this.props.hasAddPost?"/discussion/"+t.get("eid")+"/post":null,addPostString:U&&ee?"Ask "+ee.get("firstName"):null}),l.a.createElement(A.a,{isModalOpen:this.state.isImageModalOpen,onRequestClose:this.imageModalOnRequestClose,src:this.state.modalImageUrlLarge,placeHolder:this.state.modalImageUrlSmall}))}}]),t}(l.a.PureComponent),$=n.i(p.connect)(r,{toggleDiscussionFollow:O._6,toggleDiscussionBookmark:O._7,publishDiscussion:O._8,fetchDiscussionMetadata:O.e,deleteDiscussion:O._9,reportContent:O._10},null,{withRef:!0})(K)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(39),c=(n.n(l),n(891)),u=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),p(t,[{key:"onClick",value:function(e){this.props.onClick(e,this.props.info.get("href"))}},{key:"render",value:function(){var e=this.props.info.toJS(),t="sidebar-label multi discussion-title zoom-on-hover zoom-to-normal";return"h2"==e.type&&(t+=" indented-1"),"editHistory"==e.type&&(t+=" edit-history"),e.href==this.props.currentActiveSection&&(t+=" active"),a.a.createElement("li",{id:""+e.href,className:t,onClick:this.onClick},"editHistory"==e.type?[a.a.createElement("span",null,a.a.createElement(u.a,{date:e.dtEdited})," by ",e.authorName," ","suggested"==e.status?a.a.createElement("span",{className:"label large"}," • Suggested"):"current"==e.status?a.a.createElement("span",{className:"label bold large"}," • Current"):""),a.a.createElement("div",null,a.a.createElement("span",{className:"additions"}," ",e.numAdditions," ++"),a.a.createElement("span",{className:"deletions"}," ",e.numDeletions," --"))]:e.display)}}]),t}(a.a.PureComponent),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onClickDiscussion=n.onClickDiscussion.bind(n),n.getToc=n.getToc.bind(n),n}return s(t,e),p(t,[{key:"getToc",value:function(){var e=this;if(!this.props.discussion)return null;var t=[];if(this.props.showEditHistory)t=this.props.discussion.getIn(["editHistory","history"],n.i(l.List)()).map(function(t,i){return n.i(l.fromJS)({dtEdited:t.get("dtEdited"),authorName:e.props.users.getIn([t.get("author"),"displayName"]),numAdditions:t.get("numAdditions"),numDeletions:t.get("numDeletions"),status:t.get("status"),href:t.get("dtEdited"),type:"editHistory"})});else{t=this.props.discussion.get("toc");var i=this.props.discussion.getIn(["typeInfo","items","toc"]);i&&t&&(t=t.concat(i))}return t}},{key:"onClick",value:function(e,t){this.props.onClick(e,t)}},{key:"onClickDiscussion",value:function(e){this.props.onClick(e,"")}},{key:"render",value:function(){var e=this,t=this.getToc();return t&&t.size>0||this.props.playlistDiscussionId?a.a.createElement("div",null,this.props.playlistDiscussionId?a.a.createElement("div",{className:"sidebar-row current-discussion-row"},a.a.createElement("div",{className:"related-discussion zoom-on-hover zoom-to-normal "},a.a.createElement("div",{className:"sidebar-label multi discussion-title",onClick:this.onClickDiscussion},this.props.discussion.getIn(["name"],"")))):a.a.createElement("div",{className:"section-heading extra-padding-bottom"},this.props.showEditHistory?"Revisions":"Table of contents"),t&&t.size>0?a.a.createElement("div",{className:this.props.playlistDiscussionId?"toc-container with-left-border":"toc-container"},a.a.createElement("ol",{className:"toc"},t.map(function(t,n){return a.a.createElement(d,{onClick:e.onClick,info:t,currentActiveSection:e.props.currentActiveSection})}))):null):null}}]),t}(a.a.PureComponent);t.a=h},,function(e,t,n){"use strict";function i(e){e.Hub.Queue(function(){var t=e.Hub.elementScripts;e.Hub.elementScripts=function(){return s};try{return e.Hub.Process(null,function(){r.forEach(function(e){return e()}),s=[],r=[],a=!1})}catch(e){throw e}finally{e.Hub.elementScripts=t}})}function o(e,t,n){s.push(t),r.push(n),a||(a=!0,setTimeout(function(){return i(e)},0))}t.a=o;var s=[],r=[],a=!1},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1153),s=i(o),r=n(1152),a=i(r),l="function"==typeof a.default&&"symbol"==typeof s.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===l(s.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t,n){var i=n(982),o=n(963),s=n(920),r=n(1020),a=n(924),l=n(1065),c=Object.getOwnPropertyDescriptor;t.f=n(923)?c:function(e,t){if(e=s(e),t=r(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return o(!i.f.call(e,t),e[t])}},,function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t,n){function i(e,t,n,x,L,M){var j,D=t&w,A=t&I,R=t&S;if(n&&(j=L?n(e,x,L,M):n(e)),void 0!==j)return j;if(!E(e))return e;var F=b(e);if(F){if(j=g(e),!D)return u(e,j)}else{var U=m(e),B=U==N||U==P;if(k(e))return c(e,D);if(U==_||U==O||B&&!L){if(j=A||B?{}:y(e),!D)return A?d(e,l(j,e)):p(e,a(j,e))}else{if(!T[U])return L?e:{};j=v(e,U,i,D)}}M||(M=new o);var H=M.get(e);if(H)return H;M.set(e,j);var q=R?A?f:h:A?keysIn:C,W=F?void 0:q(e);return s(W||e,function(o,s){W&&(s=o,o=e[s]),r(j,s,i(o,t,n,s,e,M))}),j}var o=n(334),s=n(1051),r=n(1039),a=n(1100),l=n(1203),c=n(1104),u=n(992),p=n(1221),d=n(1222),h=n(351),f=n(1109),m=n(352),g=n(1232),v=n(1233),y=n(1111),b=n(135),k=n(209),E=n(85),C=n(327),w=1,I=2,S=4,O="[object Arguments]",N="[object Function]",P="[object GeneratorFunction]",_="[object Object]",T={};T[O]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[_]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[N]=T["[object WeakMap]"]=!1,e.exports=i},function(e,t,n){function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=o(e.prototype),i=e.apply(n,t);return s(i)?i:n}}var o=n(1024),s=n(85);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(1),c=i(l),u=n(53),p=i(u),d=n(988),h=i(d),f=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateOffset=function(e){var t=e.inherited,i=e.offset;n.channel.update(function(e){e.inherited=t+i})},n.channel=new h.default({inherited:0,offset:0,node:null}),n}return r(t,e),a(t,[{key:"getChildContext",value:function(){return{"sticky-channel":this.channel}}},{key:"componentWillMount",value:function(){var e=this.context["sticky-channel"];e&&e.subscribe(this.updateOffset)}},{key:"componentDidMount",value:function(){var e=p.default.findDOMNode(this);this.channel.update(function(t){t.node=e})}},{key:"componentWillUnmount",value:function(){this.channel.update(function(e){e.node=null});var e=this.context["sticky-channel"];e&&e.unsubscribe(this.updateOffset)}},{key:"render",value:function(){return c.default.createElement("div",this.props,this.props.children)}}]),t}(c.default.Component);f.contextTypes={"sticky-channel":c.default.PropTypes.any},f.childContextTypes={"sticky-channel":c.default.PropTypes.any},t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),p=i(u),d=n(53),h=i(d),f=function(e){function t(e){s(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateContext=function(e){var t=e.inherited,i=e.node;n.containerNode=i,n.setState({containerOffset:t,distanceFromBottom:n.getDistanceFromBottom()})},n.recomputeState=function(){if(!n.props.isDisabled){var e=n.isSticky(),t=n.getHeight(),i=n.getWidth(),o=n.getXOffset(),s=n.getDistanceFromBottom(),r=n.state.isSticky!==e;n.setState({isSticky:e,height:t,width:i,xOffset:o,distanceFromBottom:s}),r&&(n.channel&&n.channel.update(function(t){t.offset=e?n.state.height:0}),n.props.onStickyStateChange(e))}},n.state={},n}return a(t,e),c(t,[{key:"componentWillMount",value:function(){this.channel=this.context["sticky-channel"],this.channel.subscribe(this.updateContext)}},{key:"componentDidMount",value:function(){this.on(["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],this.recomputeState),this.recomputeState()}},{key:"componentWillReceiveProps",value:function(){this.recomputeState()}},{key:"componentWillUnmount",value:function(){this.off(["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],this.recomputeState),this.channel.unsubscribe(this.updateContext)}},{key:"getXOffset",value:function(){return this.refs.placeholder.getBoundingClientRect().left}},{key:"getWidth",value:function(){return this.refs.placeholder.getBoundingClientRect().width}},{key:"getHeight",value:function(){return h.default.findDOMNode(this.refs.children).getBoundingClientRect().height}},{key:"getDistanceFromTop",value:function(){return this.refs.placeholder.getBoundingClientRect().top}},{key:"getDistanceFromBottom",value:function(){return this.containerNode?this.containerNode.getBoundingClientRect().bottom:0}},{key:"isSticky",value:function(){if(!this.props.isActive)return!1;var e=this.getDistanceFromTop(),t=this.getDistanceFromBottom(),n=this.state.containerOffset-this.props.topOffset,i=this.state.containerOffset+this.props.bottomOffset;return e<=n&&t>=i}},{key:"on",value:function(e,t){e.forEach(function(e){window.addEventListener(e,t)})}},{key:"off",value:function(e,t){e.forEach(function(e){window.removeEventListener(e,t)})}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,i=Object.keys(this.props);if(Object.keys(e).length!=i.length)return!0;if(!i.every(function(t){return e.hasOwnProperty(t)&&e[t]===n.props[t]}))return!0;var o=this.state;if(t.isSticky!==o.isSticky)return!0;if(o.isSticky){if(t.height!==o.height)return!0;if(t.width!==o.width)return!0;if(t.xOffset!==o.xOffset)return!0;if(t.containerOffset!==o.containerOffset)return!0;if(t.distanceFromBottom!==o.distanceFromBottom)return!0}return!1}},{key:"render",value:function(){var e={paddingBottom:0},t=this.props.className,n=l({},{transform:"translateZ(0)"},this.props.style);if(this.state.isSticky){var i={position:"fixed",top:this.state.containerOffset,left:this.state.xOffset,width:this.state.width},s=this.state.distanceFromBottom-this.state.height-this.props.bottomOffset;this.state.containerOffset>s&&(i.top=s),e.paddingBottom=this.state.height,t+=" "+this.props.stickyClassName,n=l({},n,i,this.props.stickyStyle)}var r=this.props,a=(r.topOffset,r.isActive,r.stickyClassName,r.stickyStyle,r.bottomOffset,r.onStickyStateChange,o(r,["topOffset","isActive","stickyClassName","stickyStyle","bottomOffset","onStickyStateChange"]));return p.default.createElement("div",null,p.default.createElement("div",{ref:"placeholder",style:e}),p.default.createElement("div",l({},a,{ref:"children",className:t,style:n}),this.props.children))}}]),t}(p.default.Component);f.propTypes={isActive:p.default.PropTypes.bool,className:p.default.PropTypes.string,style:p.default.PropTypes.object,stickyClassName:p.default.PropTypes.string,stickyStyle:p.default.PropTypes.object,topOffset:p.default.PropTypes.number,bottomOffset:p.default.PropTypes.number,onStickyStateChange:p.default.PropTypes.func},f.defaultProps={isActive:!0,className:"",style:{},stickyClassName:"sticky",stickyStyle:{},topOffset:0,bottomOffset:0,onStickyStateChange:function(){}},f.contextTypes={"sticky-channel":p.default.PropTypes.any},t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),discussions:e.get("discussions"),pricingInfo:e.get("pricingInfo"),experiments:e.get("experiments")}}n.d(t,"a",function(){return b});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(323)),d=n(39),h=(n.n(d),n(204)),f=n(38),m=(n(340),n(132)),g=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=n.i(p.a)("button",p.c),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onEnrollWithProClick=n.onEnrollWithProClick.bind(n),n}return s(t,e),g(t,[{key:"onEnrollWithProClick",value:function(){this.props.fetchPixelInformation("click.course_enroll_with_pro"),u.browserHistory.push("/upgrade")}},{key:"render",value:function(){var e=this,t=(h.a.get("defaultFrequency"),this.props.discussions.getIn([this.props.discussionId]));if(!t)return null;var i=(t.getIn(["typeInfo","type"]),this.props.currentLoggedInUser),o=(this.props.users.getIn([this.props.currentLoggedInUser,"plan","isPromo"],!1),t.getIn(["typeInfo","items","discussions"],n.i(d.List)()).filter(function(t){return e.props.discussions.getIn([t,"isPremium"],!1)}).size),s=t.getIn(["typeInfo","items","discussions"],n.i(d.List)()).size-o,r="active"==this.props.users.getIn([i,"plan","status"]);t.getIn(["typeInfo","stats","projectCount"],0),t.getIn(["typeInfo","stats","quizCount"],0),h.a.get("symbol");return l.a.createElement("div",{className:"course-section course-enrollment-section"},this.props.onSubscribeClick?l.a.createElement(v,{className:"action-button blue large centered block no-max-width very-very-wide zoom-on-hover zoom-to-normal",onClick:this.props.onSubscribeClick,to:"/discussion/"+this.props.discussionId+"?action=playlist-subscribe",entityId:this.props.discussionId,action:"playlist-subscribe"},r||0==s?"Get Started":"Get Started for Free"):null,this.props.onUnSubscribeClick?l.a.createElement("div",{className:"action-button large centered block no-max-width very-very-wide gray with-padding zoom-on-hover zoom-to-normal",onClick:this.props.onUnSubscribeClick},"Enrolled"):null)}}]),t}(l.a.PureComponent),b=n.i(c.connect)(r,{fetchPixelInformation:f.a})(y)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions")}}n.d(t,"a",function(){return v});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(947)),p=n.n(u),d=n(132),h=n.n(d),f=n(15),m=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),m(t,[{key:"render",value:function(){var e=this.props.discussions.getIn([this.props.discussionId]);if(!e)return null;var t=(e.getIn(["typeInfo","prerequisites"],null),e.getIn(["rating","avgRating"])),n=e.getIn(["typeInfo","subscribersCount"],0),i=e.getIn(["hasPremiumItems"]),o=n>99,s=e.getIn(["typeInfo","stats","videoCount"]),r=e.getIn(["typeInfo","stats","questionCount"]),a=e.getIn(["typeInfo","stats","projectCount"],0),c=e.getIn(["typeInfo","stats","tutorialCount"]);return l.a.createElement("div",{className:"course-section","data-location":this.props.location},l.a.createElement("div",{className:"course-info"},"sidebar"==this.props.location?l.a.createElement("div",{className:"course-name"},e.get("name")):null,o||t?l.a.createElement("div",{className:"course-rating-row"},t?l.a.createElement(p.a,{className:"inline-rating-box",edit:!1,value:t+.25}):null,o?l.a.createElement("span",null,l.a.createElement("strong",null,n)," students enrolled"):null):null,l.a.createElement("div",{className:"course-stats"},l.a.createElement("div",{className:"label with-bottom-padding"},"This course consists of:"),s>0&&l.a.createElement("div",{className:"videos course-stat"},l.a.createElement("strong",null,s," Interactive")," ",h()("Video",s)),r>0&&l.a.createElement("div",{className:"quizzes course-stat"},l.a.createElement("strong",null,r)," ",h()("Exercise",r)),c>0&&l.a.createElement("div",{className:"tutorials course-stat"},l.a.createElement("strong",null,c)," ",h()("Tutorial",c)),a>0&&l.a.createElement("div",{className:"projects course-stat"},l.a.createElement("strong",null,a)," ",h()("Project",a)),i?l.a.createElement("div",{className:"certificate course-stat"},"Certificate of Completion"):null),"sidebar"==this.props.location&&l.a.createElement("div",{className:"course-toc"},l.a.createElement("div",{className:"sidebar-row current-discussion-row"},l.a.createElement("a",{href:"#overview",className:"zoom-on-hover zoom-to-normal no-decoration"},"Overview")),l.a.createElement("div",{className:"sidebar-row current-discussion-row"},l.a.createElement("a",{href:"#syllabus",className:"zoom-on-hover zoom-to-normal no-decoration"},"Syllabus")),l.a.createElement("div",{className:"sidebar-row current-discussion-row"},l.a.createElement("a",{href:"#faqs",className:"zoom-on-hover zoom-to-normal no-decoration"},"FAQs")))))}}]),t}(l.a.PureComponent),v=n.i(c.connect)(r)(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users")}}n.d(t,"a",function(){return v});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(132)),d=n.n(p),h=n(131),f=n(324),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentClick=n.onContentClick.bind(n),n.state={showFullText:!1},n}return s(t,e),m(t,[{key:"onContentClick",value:function(){this.props.shouldLinkToDiscussion&&u.browserHistory.push("/discussion/"+this.props.discussion.get("eid"))}},{key:"createMarkup",value:function(e){return{__html:n.i(h.p)(n.i(h.q)(e))}}},{key:"render",value:function(){var e=this,t=this.props.users.get(this.props.discussion.get("creator"));if(t){var i=this.props.discussion.get("postsCount")?this.props.discussion.get("postsCount"):this.props.discussion.getIn(["posts","all","postsCount"],0),o=this.props.discussion.get("name"),s=this.props.discussion.get("description")||this.props.discussion.getIn(["snippet40","snippet"])||this.props.discussion.getIn(["snippet20","snippet"]);return l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"post-preview preview clickable":"post-preview preview",onClick:this.onContentClick},o?l.a.createElement("div",{className:"title"},o):"",l.a.createElement("div",{className:this.state.showFullText?"text show-full-text":"text"},this.state.showFullText?n.i(h.n)(s):n.i(h.n)(s,300)),l.a.createElement("div",{className:"byline"},t.get("displayName")," · ",this.props.discussion.getIn(["byline"],"")," ",!0!==this.props.ignorePostsCount?"· "+i+" "+d()(f.d,i):"",this.props.isTextExpandable?l.a.createElement("span",{className:"clickable",onClick:function(){return e.setState({showFullText:!e.state.showFullText})}},this.state.showFullText?" · Collapse":" · Show full text"):null))}}}]),t}(l.a.PureComponent),v=n.i(c.connect)(r)(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users")}}n.d(t,"a",function(){return h});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(131)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showFullText:!1},n}return s(t,e),p(t,[{key:"render",value:function(){var e=this;if(!this.props.post)return null;var t=this.props.users.get(this.props.post.get("author"));if(!t)return null;var i=this.props.post.get("text")||this.props.post.getIn(["snippet40","snippet"])||this.props.post.getIn(["snippet20","snippet"]);return l.a.createElement("div",{className:"post-preview preview"},this.props.post.get("name")?l.a.createElement("div",{className:"title"},this.props.post.get("name")):null,l.a.createElement("div",{className:this.state.showFullText?"text show-full-text":"text"},l.a.createElement("span",{className:this.props.post.hasQuote?"hightlight":""},this.state.showFullText?n.i(u.n)(i):n.i(u.n)(i,300))),l.a.createElement("div",{className:"author-name"},t.get("displayName"),this.props.isTextExpandable?l.a.createElement("span",{className:"clickable",onClick:function(){return e.setState({showFullText:!e.state.showFullText})}},this.state.showFullText?" · Collapse":" · Show full text"):null))}}]),t}(l.a.PureComponent),h=n.i(c.connect)(r)(d)},,function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100px";return e||(e=0),e<51?{background:"#00ab6b",borderRadius:"0 "+t+" "+t+" 0",right:0}:{background:"#E1E1E1",borderRadius:t+" 0 0 "+t,left:0}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100px";return e||(e=0),e<51?{background:"#E1E1E1",borderRadius:"0 "+t+" "+t+" 0",right:0,transform:"rotate("+360/(100/e)+"deg)"}:{background:"#00ab6b",borderRadius:t+" 0 0 "+t,left:0,transform:"rotate("+360/(100/e)+"deg)",transformOrigin:"100% 50%"}}function s(e){return e||(e=0),e>50?{background:"#00ab6b"}:{}}t.b=i,t.c=o,t.a=s},,function(e,t,n){"use strict";t.__esModule=!0;var i=n(1148),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){var i=n(960),o=n(912).document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){e.exports=!n(923)&&!n(935)(function(){return 7!=Object.defineProperty(n(1064)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(1009);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var i=n(1013),o=n(911),s=n(1071),r=n(936),a=n(924),l=n(961),c=n(1173),u=n(1016),p=n(1069),d=n(898)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,m,g,v,y){c(n,t,m);var b,k,E,C=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",I="values"==g,S=!1,O=e.prototype,N=O[d]||O["@@iterator"]||g&&O[g],P=N||C(g),_=g?I?C("entries"):P:void 0,T="Array"==t?O.entries||N:N;if(T&&(E=p(T.call(new e)))!==Object.prototype&&E.next&&(u(E,w,!0),i||a(E,d)||r(E,d,f)),I&&N&&"values"!==N.name&&(S=!0,P=function(){return N.call(this)}),i&&!y||!h&&!S&&O[d]||r(O,d,P),l[t]=P,l[w]=f,g)if(b={values:I?P:C("values"),keys:v?P:C("keys"),entries:_},y)for(k in b)k in O||s(O,k,b[k]);else o(o.P+o.F*(h||S),t,b);return b}},function(e,t,n){var i=n(1070),o=n(1012).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(924),o=n(983),s=n(1017)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,n){var i=n(924),o=n(920),s=n(1165)(!1),r=n(1017)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),l=0,c=[];for(n in a)n!=r&&i(a,n)&&c.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~s(c,n)||c.push(n));return c}},function(e,t,n){e.exports=n(936)},function(e,t,n){var i=n(1019),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){"use strict";var i=n(1182)(!0);n(1067)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){function n(e,t,n,i){var o=-1,s=null==e?0:e.length;for(i&&s&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e);return n}e.exports=n},function(e,t,n){var i=n(346),o=n(342),s=n(343),r=n(355),a=Object.getOwnPropertySymbols,l=a?function(e){for(var t=[];e;)i(t,s(e)),e=o(e);return t}:r;e.exports=l},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(85);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.schedulingOptions.options.map(function(t){var n=t.isDefault;return a.a.createElement("span",{className:"save-as-draft-option"},a.a.createElement("button",{className:"draft-option-button"+(n?" post-button":"")+(e.props.optionClass?" "+e.props.optionClass:""),onClick:function(n){return e.props.onClick(n,t.name)}},a.a.createElement("span",{className:n?"":"label"},t.display)))});return a.a.createElement("div",{className:"save-as-draft-options"},t)}}]),t}(a.a.PureComponent);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return w});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(39)),p=(n.n(u),n(132)),d=n.n(p),h=n(1042),f=(n.n(h),n(890)),m=(n(133),n(323)),g=n(15),v=(n.n(g),n(38)),y=n(330),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.calculateBarStyle=n.calculateBarStyle.bind(n),n}return s(t,e),b(t,[{key:"onClick",value:function(e){this.props.onClick&&this.props.onClick(e,this.props.option)}},{key:"calculateBarStyle",value:function(e,t,n){return n?t?{background:"linear-gradient(to right, #a0ddfd "+e+"%, transparent "+e+"%)"}:{background:"linear-gradient(to right, #F5F5F5 "+e+"%, transparent "+e+"%)"}:{}}},{key:"render",value:function(){var e=this,t=this.props.isWinner?"winner":"",i=this.props.usersVoted.slice(0,3).map(function(t){return l.a.createElement(g.Link,{to:"/profile/"+t},l.a.createElement(y.b,{userId:t,offsetLeft:23,offsetTop:-45,className:"avatar-image",size:"30",name:e.props.users.get(t).get("displayName"),src:e.props.users.get(t).get("avatarUrl"),key:t}))});return l.a.createElement("div",{className:"poll-option-row"},l.a.createElement(h.Motion,{defaultStyle:{x:0},style:{x:n.i(h.spring)(this.props.percentVote)}},function(n){return l.a.createElement("div",{className:e.props.isResult?"result poll-option "+t:"poll-option "+t,"data-percent":Math.round(n.x),style:e.calculateBarStyle(Math.round(n.x),e.props.isWinner,e.props.isResult),onClick:e.onClick},e.props.isResult?l.a.createElement("span",{className:"result-percent"},e.props.percentVote,"%"):null,l.a.createElement("span",{className:"option-text"},e.props.optionText),e.props.hasVoted?l.a.createElement("span",{className:"voted-checkmark"}):null)}),this.props.isResult?l.a.createElement("div",{className:"avatar-images"},i):null)}}]),t}(l.a.PureComponent),E=n.i(m.a)(k),C=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.togglePollOptionVote=n.togglePollOptionVote.bind(n),n}return s(t,e),b(t,[{key:"togglePollOptionVote",value:function(e,t){var n=this.props.discussion.get("typeInfo");this.props.togglePollOptionVote(this.props.discussion.get("eid"),n.get("eid"),t.get("eid"))}},{key:"render",value:function(){var e=this,t=this.props.discussion.get("typeInfo"),i="LIVE",o=t.get("dtEnd")?new Date(t.get("dtEnd")):null,s=new Date;o&&s>o&&(i="ENDED");var r=t.get("hasVoted"),a=t.get("participantsCount"),c=this.props.currentLoggedInUser&&(r||"ENDED"==i||!this.props.discussion.get("canContribute")),p=0;t.getIn(["options"],n.i(u.List)()).forEach(function(e){return p=e.get("votesCount")>p?e.get("votesCount"):p});var h=t.getIn(["options"],n.i(u.List)()).map(function(t){return l.a.createElement(E,{optionText:t.get("option"),hasVoted:t.get("hasVoted"),usersVoted:t.get("usersVoted"),isWinner:p==t.get("votesCount")&&"ENDED"==i,isResult:c,to:"/discussion/"+e.props.discussion.get("eid")+"/",percentVote:a>0?Math.round(100*t.get("votesCount")/a):0,onClick:c?null:e.togglePollOptionVote,option:t})});return l.a.createElement("div",{className:"poll-section"},l.a.createElement("div",{className:"poll-options"},h),l.a.createElement("div",{className:"poll-footer"},l.a.createElement("span",{className:"has-separator"},a," ",d()("participant",a)),"LIVE"==i?o?l.a.createElement("span",{className:"has-separator"},"Ends in ",l.a.createElement(f.a,{date:o})):null:l.a.createElement("span",{className:"has-separator"},"Final results")))}}]),t}(l.a.PureComponent),w=n.i(c.connect)(r,{togglePollOptionVote:v.E})(C)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){var n,i,o;e.addEventListener("input",function(e){n=1,i=e.target.value,i!=o&&t(e),o=i}),e.addEventListener("change",function(e){n||t(e)})}var a=n(1),l=n.n(a),c=n(32),u=n(328),p=n(131),d=n(17),h=n(1087),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.calculateMarkers=n.calculateMarkers.bind(n),n.handleInitialState=n.handleInitialState.bind(n),n.state=n.handleInitialState({returnState:!0}),n}return s(t,e),f(t,[{key:"handleInitialState",value:function(e){var t=e.props,n=void 0===t?this.props:t,i=e.returnState,o=void 0!==i&&i,s=n.toc?{markers:this.calculateMarkers(n.toc)}:{markers:null};if(o)return s;this.setState(s)}},{key:"calculateMarkers",value:function(e){if(!e)return null;var t=[],n=null;return e.forEach(function(e,i){var o=e.get("timestamp"),s=e.get("type");if(!(o<100)){if("question"==s)n&&o-n.get("timestamp")<6e3&&"h1"==n.type&&t.pop();else if("h1"==s){if(n&&o-n.get("timestamp")<6e3)return}else if("h2"==s)return;n=e,t.push(e)}}),t}},{key:"componentWillReceiveProps",value:function(e){this.props.toc!=e.toc&&this.handleInitialState({props:e})}},{key:"componentDidMount",value:function(){h.a.setup(this.slider,{});r(this.slider,this.props.onAudioTimeChange)}},{key:"setRef",value:function(e,t){this[e]=t,this.props.setRef(e,t)}},{key:"render",value:function(){var e=this,t=(this.props.toc,this.state.markers);return l.a.createElement("div",{className:"progress",ref:function(t){return e.setRef("progress",t)}},l.a.createElement("input",{type:"range",min:"0",max:""+(this.props.duration||100),step:"0.01",value:this.props.currentAudioTime,className:"audio-slider",onMouseDown:this.props.onAudioMouseDown,onMouseUp:this.props.onAudioMouseUp,onTouchStart:this.props.onAudioMouseDown,onTouchEnd:this.props.onAudioMouseUp,ref:function(t){return e.setRef("slider",t)},style:{"--value":this.props.audioPct+"%"},list:"numbers"}),l.a.createElement("datalist",{id:"numbers"},t&&t.map(function(t){return l.a.createElement("option",null,n.i(u.a)(e.props.externalToInternalTime(t.get("timestamp")),1))})),l.a.createElement("progress",{className:"progress__buffer",min:"0",max:"100",value:"0",role:"progressbar","aria-hidden":"true"},"% buffered"),!d.a&&!n.i(c.e)()&&!d.h&&t&&l.a.createElement("div",{className:"markers"},t.map(function(t){var i=n.i(u.b)(e.props.externalToInternalTime(t.get("timestamp")),2),o=e.props.duration?i/e.props.duration:0;return l.a.createElement("div",{className:"marker "+("question"==t.get("type")?"question":"slide"),style:{left:o*e.props.sliderClientWidth+"px"},onClick:function(t){return e.props.onAudioTimeChange(t,i)}},"question"==t.get("type")?"":"•")})),l.a.createElement("span",{className:"tooltip",ref:function(t){return e.setRef("sliderTooltip",t)}},this.props.getFormattedTime(this.props.currentAudioTime)))}}]),t}(l.a.PureComponent),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={play:!1,showAudioMenu:!1,speed:e.speed||1,currentAudioTime:0,sliderClientWidth:0,showMobileAudioControls:!0},n.startAudioPoller=n.startAudioPoller.bind(n),n.togglePlayViaPlayer=n.togglePlayViaPlayer.bind(n),n.play=n.play.bind(n),n.pause=n.pause.bind(n),n.clearAudioPoller=n.clearAudioPoller.bind(n),n.onTimeUpdate=n.onTimeUpdate.bind(n),n.getExternalCurrentTime=n.getExternalCurrentTime.bind(n),n.setExternalCurrentTime=n.setExternalCurrentTime.bind(n),n.toggleFullScreen=n.toggleFullScreen.bind(n),n.modifySpeed=n.modifySpeed.bind(n),n.toggleAudioMenu=n.toggleAudioMenu.bind(n),n.onAudioTimeChange=n.onAudioTimeChange.bind(n),n.onAudioMouseDown=n.onAudioMouseDown.bind(n),n.onAudioMouseUp=n.onAudioMouseUp.bind(n),n.handleClickOutsideAudioMenu=n.handleClickOutsideAudioMenu.bind(n),n.toggleMobileAudioControls=n.toggleMobileAudioControls.bind(n),n.externalToInternalTime=n.externalToInternalTime.bind(n),n.getSliderClientWidth=n.getSliderClientWidth.bind(n),n.handleSliderTooltip=n.handleSliderTooltip.bind(n),n.onResize=n.onResize.bind(n),n.setRef=n.setRef.bind(n),n.moveDeltaTime=n.moveDeltaTime.bind(n),n.forward=n.forward.bind(n),n.onForwardClick=n.onForwardClick.bind(n),n.getDuration=n.getDuration.bind(n),n.rewind=n.rewind.bind(n),n.onRewindClick=n.onRewindClick.bind(n),n.handleReady=n.handleReady.bind(n),n.handleWaiting=n.handleWaiting.bind(n),n.updateCurrentTime=n.updateCurrentTime.bind(n),n.getFormattedTime=n.getFormattedTime.bind(n),n.handleInitialSpeed=n.handleInitialSpeed.bind(n),n.lastTimeUpdate=0,n.isSeeking=!1,n.isMounted=!1,n.lastSeekingTime=null,n.isInitialSpeedSet=!1,n}return s(t,e),f(t,[{key:"getFormattedNumber",value:function(e){return 0==e?"00":e<10?"0"+e:e}},{key:"getFormattedTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),t=parseInt(e/60),n=parseInt(e%60);return e?this.getFormattedNumber(t)+":"+this.getFormattedNumber(n):"00:00"}},{key:"onAudioMouseDown",value:function(e){this.isSeeking=!0,this.isPlayingBeforeSeeking=this.state.play,this.sliderTooltip&&n.i(p.c)(this.sliderTooltip,"show"),this.state.play&&this.pause()}},{key:"handleInitialSpeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.isMounted&&!this.isInitialSpeedSet){var t=e.speed;this.modifySpeed(t,!0),this.isInitialSpeedSet=!0}}},{key:"onAudioMouseUp",value:function(e){this.isSeeking=!1,this.sliderTooltip&&n.i(p.a)(this.sliderTooltip,"show"),this.onAudioTimeChange(e,this.lastSeekingTime),this.isPlayingBeforeSeeking&&this.play({showMobileAudioControls:!0})}},{key:"onAudioTimeChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=t||e.target.value,this.lastSeekingTime=t,this.isSeeking||(this.audio.currentTime=t),this.onTimeUpdate(e,t,!this.isSeeking,!this.isSeeking,!0)}},{key:"moveDeltaTime",value:function(e){this.audio.currentTime=Math.min(Math.max(0,this.audio.currentTime+e),this.getDuration())}},{key:"onForwardClick",value:function(){this.forward(10)}},{key:"onRewindClick",value:function(){this.rewind(10)}},{key:"forward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.moveDeltaTime(e)}},{key:"rewind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.moveDeltaTime(-1*e)}},{key:"startAudioPoller",value:function(){this.animationFrameId||(this.animationFrameId=n.i(c.h)(this.onTimeUpdate))}},{key:"clearAudioPoller",value:function(){this.animationFrameId&&(n.i(c.i)(this.animationFrameId),this.animationFrameId=null)}},{key:"getExternalCurrentTime",value:function(){return 1e3*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audio.currentTime)}},{key:"externalToInternalTime",value:function(e){return e/1e3}},{key:"getDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.duration?this.externalToInternalTime(e.duration):0}},{key:"setExternalCurrentTime",value:function(e){this.audio.currentTime=e/1e3}},{key:"getSliderClientWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.progress)return null;var t=this.state.sliderClientWidth;return t&&!e||(t=this.progress.clientWidth,this.setState({sliderClientWidth:t})),t}},{key:"onResize",value:function(){this.getSliderClientWidth(!0)}},{key:"handleSliderTooltip",value:function(e,t){if(!this.sliderTooltip)return null;var n=this.getSliderClientWidth();if(n){var i=t/this.slider.max,o=n*i;this.sliderTooltip.style.left=Math.max(0,o)+"px"}}},{key:"updateCurrentTime",value:function(e,t){this.setState({currentAudioTime:t}),this.handleSliderTooltip(e,t)}},{key:"onTimeUpdate",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.play,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.audio&&(s||!this.isSeeking)){t=t||this.audio.currentTime;var r=Date.now(),a=this.getExternalCurrentTime(t);(r-this.lastTimeUpdate>20||0==a||o)&&(this.lastTimeUpdate=r,this.props.onTimeUpdate&&this.props.onTimeUpdate(a)),this.updateCurrentTime(e,t),i&&(this.animationFrameId=n.i(c.h)(this.onTimeUpdate))}}},{key:"handleWaiting",value:function(){var e=this;this.isLoading=!0,setTimeout(function(){e.isLoading&&e.setState({isLoading:!0})},50)}},{key:"handleReady",value:function(){var e=this;this.isLoading=!1,setTimeout(function(){e.isLoading||e.setState({isLoading:!1})},50)}},{key:"componentDidMount",value:function(){var e=this;this.isMounted=!0,this.handleInitialSpeed(),this.audio.addEventListener("timeupdate",this.onTimeUpdate),this.audio.addEventListener("seeking",function(){e.props.onSeekStart&&e.props.onSeekStart(e.getExternalCurrentTime())}),this.audio.addEventListener("seeked",function(){e.props.onSeekStop&&e.props.onSeekStop(e.getExternalCurrentTime())}),this.audio.addEventListener("stalled",this.handleWaiting),this.audio.addEventListener("waiting",this.handleWaiting),this.audio.addEventListener("playing",this.handleReady),document.addEventListener("mousedown",this.handleClickOutsideAudioMenu),document.addEventListener("touchstart",this.handleClickOutsideAudioMenu),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutsideAudioMenu),document.removeEventListener("touchstart",this.handleClickOutsideAudioMenu),window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){this.props.isFullScreenActive!=e.isFullScreenActive&&this.onResize(),this.props.audio!=e.audio&&(this.isInitialSpeedSet=!1,this.handleInitialSpeed(e))}},{key:"togglePlayViaPlayer",value:function(){this.state.play?this.pause({triggeredViaListener:!0}):this.play({triggeredViaListener:!0})}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.triggerAnimation,n=void 0===t||t,i=e.showMobileAudioControls,o=void 0!==i&&i;this.audio&&(this.setState({play:!0,showMobileAudioControls:o}),this.startAudioPoller(),this.audio.play(),this.props.onPlay&&this.props.onPlay({triggerAnimation:n,isSeeking:this.isSeeking}))}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.triggerAnimation,n=void 0===t||t;this.setState({play:!1,showMobileAudioControls:!0}),this.clearAudioPoller(),this.audio.pause(),this.props.onPause&&this.props.onPause({triggerAnimation:n,isSeeking:this.isSeeking})}},{key:"toggleAudioMenu",value:function(){this.setState({showAudioMenu:!this.state.showAudioMenu})}},{key:"modifySpeed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({speed:e,showAudioMenu:!1}),this.audio.playbackRate=e,this.audio.defaultPlaybackRate=e,t||this.props.editProfile&&this.props.editProfile({videoPlaybackSpeed:String(e)})}},{key:"toggleFullScreen",value:function(){this.props.toggleFullScreen()}},{key:"handleClickOutsideAudioMenu",value:function(e){this.refs.audioMenu&&!this.refs.audioMenu.contains(e.target)&&this.refs.audioMenuButton&&!this.refs.audioMenuButton.contains(e.target)&&this.setState({showAudioMenu:!1})}},{key:"toggleMobileAudioControls",value:function(){this.setState({showMobileAudioControls:!this.state.showMobileAudioControls})}},{key:"setRef",value:function(e,t){this[e]=t,"progress"==e&&this.getSliderClientWidth()}},{key:"render",value:function(){var e=this,t=this.getDuration(),i=t?this.state.currentAudioTime/t:0,o=n.i(u.b)(100*i,2),s=l.a.createElement("button",{type:"button",className:"control","data-plyr":"play","aria-label":"Play",onClick:this.togglePlayViaPlayer},this.state.play?[l.a.createElement("svg",{focusable:"false"},l.a.createElement("path",{d:"M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zm6 0c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"})),l.a.createElement("span",{className:"tooltip"},"Pause (k)")]:[l.a.createElement("svg",{focusable:"false"},l.a.createElement("path",{d:"M15.562 8.1L3.87.225c-.818-.562-1.87 0-1.87.9v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"})),l.a.createElement("span",{className:"tooltip"},"Play (k)")]),r=l.a.createElement(m,{duration:t,currentAudioTime:this.state.currentAudioTime,toc:this.props.toc,audioPct:o,getFormattedTime:this.getFormattedTime,onAudioMouseDown:this.onAudioMouseDown,onAudioMouseUp:this.onAudioMouseUp,onAudioTimeChange:this.onAudioTimeChange,setRef:this.setRef,externalToInternalTime:this.externalToInternalTime,sliderClientWidth:this.state.sliderClientWidth}),a=l.a.createElement("div",{style:{height:"10%"},onClick:this.toggleMobileAudioControls},l.a.createElement("div",{className:"mobile-progress-bar",style:{background:"linear-gradient(to right, #4a90e2 "+o+"%, transparent "+o+"%)"}})),c=(l.a.createElement("div",{className:"time",ref:"timeLabel"},this.getFormattedTime()),l.a.createElement("div",{className:"time",ref:"timeLabel"},this.getFormattedTime(this.state.currentAudioTime)+" / "+this.getFormattedTime())),p=l.a.createElement("div",{className:"menu"},l.a.createElement("button",{"aria-expanded":this.state.showAudioMenu,type:"button",className:"control",onClick:this.toggleAudioMenu,ref:"audioMenuButton"},l.a.createElement("svg",{focusable:"false",width:"100%",height:"100%"},l.a.createElement("path",{d:"M16.135 7.784a2 2 0 0 1-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 0 1-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 0 1-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 0 1-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 0 1 1.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 0 1 2.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 0 1 2.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 0 1 1.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}))),this.state.showAudioMenu&&l.a.createElement("div",{className:"menu__container",ref:"audioMenu"},l.a.createElement("div",null,l.a.createElement("span",{className:"label large bold speed-label"},"Speed"),l.a.createElement("div",{role:"menu"},[.5,.75,1,1.25,1.5,1.75,2].map(function(t){return l.a.createElement("button",{type:"button",role:"menuitemradio",className:"control","aria-checked":e.state.speed==t,value:t,onClick:function(){return e.modifySpeed(t)}},l.a.createElement("span",null,1==t?"Normal":t))}))))),h=l.a.createElement("button",{type:"button",className:"control","data-plyr":"captions",onClick:this.props.toggleSubtitles},this.props.showSubtitles?[l.a.createElement("svg",{role:"presentation",focusable:"false"},l.a.createElement("path",{d:"M1,1 C0.4,1 0,1.4 0,2 L0,13 C0,13.6 0.4,14 1,14 L5.6,14 L8.3,16.7 C8.5,16.9 8.7,17 9,17 C9.3,17 9.5,16.9 9.7,16.7 L12.4,14 L17,14 C17.6,14 18,13.6 18,13 L18,2 C18,1.4 17.6,1 17,1 L1,1 Z M5.52,11.15 C7.51,11.15 8.53,9.83 8.8,8.74 L7.51,8.35 C7.32,9.01 6.73,9.8 5.52,9.8 C4.38,9.8 3.32,8.97 3.32,7.46 C3.32,5.85 4.44,5.09 5.5,5.09 C6.73,5.09 7.28,5.84 7.45,6.52 L8.75,6.11 C8.47,4.96 7.46,3.76 5.5,3.76 C3.6,3.76 1.89,5.2 1.89,7.46 C1.89,9.72 3.54,11.15 5.52,11.15 Z M13.09,11.15 C15.08,11.15 16.1,9.83 16.37,8.74 L15.08,8.35 C14.89,9.01 14.3,9.8 13.09,9.8 C11.95,9.8 10.89,8.97 10.89,7.46 C10.89,5.85 12.01,5.09 13.07,5.09 C14.3,5.09 14.85,5.84 15.02,6.52 L16.32,6.11 C16.04,4.96 15.03,3.76 13.07,3.76 C11.17,3.76 9.46,5.2 9.46,7.46 C9.46,9.72 11.11,11.15 13.09,11.15 Z",fillRule:"evenodd"})),l.a.createElement("span",{className:"tooltip"},"Disable captions (c)")]:[l.a.createElement("svg",{role:"presentation",focusable:"false"},l.a.createElement("path",{d:"M1,1 C0.4,1 0,1.4 0,2 L0,13 C0,13.6 0.4,14 1,14 L5.6,14 L8.3,16.7 C8.5,16.9 8.7,17 9,17 C9.3,17 9.5,16.9 9.7,16.7 L12.4,14 L17,14 C17.6,14 18,13.6 18,13 L18,2 C18,1.4 17.6,1 17,1 L1,1 Z M5.52,11.15 C7.51,11.15 8.53,9.83 8.8,8.74 L7.51,8.35 C7.32,9.01 6.73,9.8 5.52,9.8 C4.38,9.8 3.32,8.97 3.32,7.46 C3.32,5.85 4.44,5.09 5.5,5.09 C6.73,5.09 7.28,5.84 7.45,6.52 L8.75,6.11 C8.47,4.96 7.46,3.76 5.5,3.76 C3.6,3.76 1.89,5.2 1.89,7.46 C1.89,9.72 3.54,11.15 5.52,11.15 Z M13.09,11.15 C15.08,11.15 16.1,9.83 16.37,8.74 L15.08,8.35 C14.89,9.01 14.3,9.8 13.09,9.8 C11.95,9.8 10.89,8.97 10.89,7.46 C10.89,5.85 12.01,5.09 13.07,5.09 C14.3,5.09 14.85,5.84 15.02,6.52 L16.32,6.11 C16.04,4.96 15.03,3.76 13.07,3.76 C11.17,3.76 9.46,5.2 9.46,7.46 C9.46,9.72 11.11,11.15 13.09,11.15 Z",fillRule:"evenodd",fillOpacity:".5"})),l.a.createElement("span",{className:"tooltip"},"Enable captions (c)")]),f=l.a.createElement("button",{type:"button",className:"control",onClick:this.onRewindClick},l.a.createElement("svg",{role:"presentation",focusable:"false"},l.a.createElement("polygon",{points:"10.125 1 0 9 10.125 17 10.125 10.8285714 18 17 18 1 10.125 7.17142857"})),l.a.createElement("span",{className:"tooltip"},"Rewind (10s)")),g=l.a.createElement("button",{type:"button",className:"control",onClick:this.onForwardClick},l.a.createElement("svg",{role:"presentation",focusable:"false"},l.a.createElement("polygon",{points:"7.875 7.17142857 0 1 0 17 7.875 10.8285714 7.875 17 18 9 7.875 1"})),l.a.createElement("span",{className:"tooltip"},"Forward (10s)")),v=this.props.isFullScreenEnabled&&l.a.createElement("button",{type:"button",className:"control","data-plyr":"fullscreen",onClick:this.toggleFullScreen},this.props.isFullScreenActive?[l.a.createElement("svg",{role:"presentation",focusable:"false"},l.a.createElement("path",{d:"M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"})),l.a.createElement("span",{className:"tooltip"},"Exit fullscreen (f)")]:[l.a.createElement("svg",{role:"presentation",focusable:"false"},l.a.createElement("path",{d:"M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"})),l.a.createElement("span",{className:"tooltip"},"Enter fullscreen (f)")]),y=l.a.createElement("div",{className:"spacer"});return l.a.createElement("div",{className:"cl-audio",ref:"audioWrapper"},l.a.createElement("audio",{src:this.props.audio,ref:function(t){e.audio=t},className:"audio-player "+this.props.additionalClassName,preload:"auto"}),l.a.createElement("div",{className:"audio "+(this.state.isLoading?"loading":"")},d.a?this.state.showMobileAudioControls||this.isSeeking||!this.props.isFullScreenActive?[l.a.createElement("div",{className:"controls"},s,c,y,f,g,p,h,v),l.a.createElement("div",{className:"controls"},r)]:a:l.a.createElement("div",{className:"controls"},s,r,c,p,h,v)))}}]),t}(l.a.PureComponent);t.a=g},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{customIdInfo:e.get("customIdInfo")}}n.d(t,"a",function(){return S});var l=n(1),c=n.n(l),u=n(37),p=(n.n(u),n(1002)),d=n(131),h=n(328),f=n(980),m=n(331),g=n(17),v=n(32),y=n(39),b=(n.n(y),n(345)),k=n(991),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options={highlightActiveLine:!0,showPrintMargin:!1,highlightSelectedWord:!0,minLines:1,maxLines:parseInt(e.maxLines||40),animatedScroll:!0},n}return r(t,e),C(t,[{key:"shouldComponentUpdate",value:function(e){return!n.i(k.a)(this.props,e)}},{key:"componentWillReceiveProps",value:function(e){this.props.maxLines!=e.maxLines&&(this.options=E({},this.options,{maxLines:parseInt(e.maxLines||this.options.maxLines)}))}},{key:"render",value:function(){return c.a.createElement(p.a,{code:this.props.codeStr,aceConfig:this.props.aceConfig,options:this.options,setRef:this.props.setAceRef,ref:"aceRef",cursorAtEnd:!0,newCursor:this.props.cursor,preventAutoFocus:this.props.preventAutoFocus})}}]),t}(c.a.Component),I=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleInitialState=n.handleInitialState.bind(n),n.getCodeLines=n.getCodeLines.bind(n),n.getCodeLinesStartingHelper=n.getCodeLinesStartingHelper.bind(n),n.getCodeLinesHelper=n.getCodeLinesHelper.bind(n),n.getCodeLinesAsString=n.getCodeLinesAsString.bind(n),n.getCode=n.getCode.bind(n),n.onClick=n.onClick.bind(n),n.onResume=n.onResume.bind(n),n.getAnimateProperties=n.getAnimateProperties.bind(n),n.handleModifications=n.handleModifications.bind(n),n.handleHighlights=n.handleHighlights.bind(n),n.handleScroll=n.handleScroll.bind(n),n.extractBlockId=n.extractBlockId.bind(n),n.handleCursor=n.handleCursor.bind(n),n.handleNumbering=n.handleNumbering.bind(n),n.setAceRef=n.setAceRef.bind(n),n.handleInitialState(n.props),n}return r(t,e),C(t,[{key:"handleInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.extractBlockId(e),this.markerMap={},this.state={},this.lastScrollData=null}},{key:"handleModifications",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.highlight&&this.handleHighlights(e.highlight),e.scrollData&&this.handleScroll(e),this.handleCursor(e),this.handleNumbering(e)}},{key:"handleCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.ace){this.getAnimateProperties(e)?this.ace.getHighlightGutterLine()||(this.ace.renderer.$cursorLayer.element.style.opacity=1,this.ace.setHighlightGutterLine(!0)):this.ace.getHighlightGutterLine()&&(this.ace.renderer.$cursorLayer.element.style.opacity=0,this.ace.setHighlightGutterLine(!1))}}},{key:"handleNumbering",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.ace&&(e.isNumbered?(this.ace.renderer.getShowGutter()||this.ace.renderer.setShowGutter(!0),this.ace.setOption("highlightActiveLine",!0)):(this.ace.renderer.getShowGutter()&&this.ace.renderer.setShowGutter(!1),this.ace.setOption("highlightActiveLine",!1)))}},{key:"componentDidMount",value:function(){this.handleModifications(),this.props.setRef&&this.props.setRef(this,this.props.blockName)}},{key:"componentWillUnmount",value:function(){this.props.setRef&&this.props.setRef(null,this.props.blockName)}},{key:"componentDidUpdate",value:function(e,t){e.highlight!=this.props.highlight&&this.handleHighlights(this.props.highlight),e.scrollData!=this.props.scrollData&&this.handleScroll(),this.getAnimateProperties(e)!=this.getAnimateProperties()&&this.handleCursor(),e.isNumbered!=this.props.isNumbered&&this.handleNumbering()}},{key:"handleScroll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.ace){var n=t.scrollData;if(!(n=n?n.toJS():null)||!this.lastScrollData||this.lastScrollData.targetLine!=n.targetLine){var i=parseInt(n?n.targetLine||0:0),o=!(!n||!n.animate),s=function(){e.ace.scrollToLine(i,!1,o,function(){return{}}),e.lastScrollData=n};setTimeout(s,0)}}}},{key:"handleHighlights",value:function(e){if(this.ace){e=e?e.toJS():[];var t=this.ace.getSession(),o={},s=!0,r=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;if(u.range){var p=[u.range.from.line,u.range.from.character,u.range.to.line,u.range.to.character].filter(h.c).map(function(e){return parseInt(e)});if(4==p.length){o[u.name]=!0;var d=this.markerMap[u.name];if(d){if(!this.props.staticDisplay)continue;if(n.i(y.fromJS)(p).equals(n.i(y.fromJS)(d.range)))continue;t.removeMarker(d.id),delete this.markerMap[u.name]}var f=new(Function.prototype.bind.apply(ace.Range,[null].concat(i(p)))),m=t.addMarker(f,"code-highlight-ace","text",!0);this.markerMap[u.name]={id:m,range:p}}}}}catch(e){r=!0,a=e}finally{try{!s&&c.return&&c.return()}finally{if(r)throw a}}for(var g in this.markerMap)this.markerMap.hasOwnProperty(g)&&(o[g]||(t.removeMarker(this.markerMap[g].id),delete this.markerMap[g]))}}},{key:"componentWillReceiveProps",value:function(e){this.props.blockName!=e.blockName&&this.handleInitialState(e),!this.props.isPlaying&&e.isPlaying&&e.animate&&this.onResume(),this.props.highlight!=e.highlight&&this.handleHighlights(e.highlight),this.props.scrollData!=e.scrollData&&this.handleScroll(e),this.props.content&&e.content&&this.props.content.config!=e.content.config&&this.extractBlockId(e)}},{key:"extractBlockId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(!e.content)return null;e.content.config&&(this.codeBlockId=n.i(d.f)({text:e.content.config}))}},{key:"getCodeLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=[].concat(i(this.getCodeLinesHelper(e)));if(!this.getAnimateProperties(e))return{lines:t};t=[].concat(i(this.getCodeLinesStartingHelper(e)));for(var n=this.getAnimateProperties(e),o=n.type,s=(n.speed,this.getAnimateOperations(e)),r=s.length,a=0;a<s.length;a++){if(s[a].timestamp>e.time){r=a;break}}for(var l={},c=0;c<r;c++){var u=s[c];if("char"==o){var p=u.index[0],d=u.index[1],h=t[u.index[0]]||"";"insert"==u.operation?"\n"==u.text?(t.splice(p+1,0,h.slice(d)),h=h.slice(0,d),l={row:p+1,column:0}):(h=h.slice(0,d)+u.text+h.slice(d),l={row:p,column:d+u.text.length}):"\n"==u.text?(h+=t[p+1]||"",t.splice(p+1,1),l={row:p,column:h.length}):(h=h.slice(0,d)+h.slice(d+u.text.length),l={row:p,column:d}),t[p]=h}else if("insert"==u.operation)t.splice(u.index,0,u.text),l={row:u.index,column:u.text.length};else{t.splice(u.index,1);var f=Math.max(u.index-1,0);l={row:f,column:t[f].length}}}return{lines:t,cursor:l}}},{key:"getCodeLinesHelper",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).content.lines||[]}},{key:"getCodeLinesStartingHelper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.initialContent&&e.initialContent.lines||[]}},{key:"getCodeLinesAsString",value:function(e){var t=e.props,n=this.getCodeLines(t),i=n.lines,o=n.cursor;return i?{codeStr:i.join("\n"),cursor:o}:null}},{key:"getCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.getCodeLinesAsString(e)}},{key:"onClick",value:function(e){if(this.props.staticDisplay||!this.props.isExecutable)return e.stopPropagation(),void e.preventDefault();n.i(b.a)(e.target),this.bodyScrollPos={scrollTop:document.body.scrollTop},this.initialCursorPosition=this.ace.getCursorPosition(),this.setState({isInEditCodeMode:!0,savedCode:this.ace.getValue()}),this.ace.setReadOnly(!1),this.props.onToggleEditCodeMode&&this.props.onToggleEditCodeMode(!0),this.props.pause()}},{key:"onResume",value:function(e){this.setState({isInEditCodeMode:!1,shouldResumePostAnimation:!0}),this.props.onToggleEditCodeMode&&this.props.onToggleEditCodeMode(!1),this.props.play(),n.i(v.e)()&&this.bodyScrollPos&&(document.body.scrollTop=this.bodyScrollPos.scrollTop),this.bodyScrollPos=null}},{key:"setAceRef",value:function(e){this.ace=e,this.ace.setReadOnly(!0),n.i(v.e)()&&(this.ace.container.style.pointerEvents="none"),this.handleModifications()}},{key:"shouldComponentUpdate",value:function(e,t){return!n.i(k.a)(this.props,e)||!n.i(k.a)(this.state,t)}},{key:"getAnimateProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.preventAnimation?null:e.animate}},{key:"getAnimateOperations",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).animateOperations}},{key:"render",value:function(){if(!this.props.content)return null;var e=this.props.customIdInfo&&this.props.customIdInfo.getIn(["codeblock",this.codeBlockId]),t=this.props.isExecutable?e&&e.getIn(["init_values",e.get("default_language").toString(),"mode_config"]):null,i=this.getCode();return c.a.createElement("div",{className:this.props.className},this.state.isInEditCodeMode?c.a.createElement(m.a,{contentClass:"active-code-container",onClick:this.onResume,bottomCloseClass:"label blue centered-text dnr-video-overlay-codeblock-resume-button",bottomCloseText:"Resume Video",bodyClass:g.a&&"distraction-free-2"},c.a.createElement(f.a,{initialCode:this.state.savedCode,codeBlockId:this.codeBlockId,additionalHeight:0,rendered:!0,initialCursorPosition:this.initialCursorPosition,preventFullScreen:!0,hideTryItNow:!0,preventAutoFocus:n.i(v.e)()})):c.a.createElement("div",{onMouseDown:this.onClick,className:"code-editor"},this.props.isExecutable&&c.a.createElement("div",{className:"try-it-now"},c.a.createElement("span",{className:"click-target",onClick:this.onClick},"Click code to run 👇")),c.a.createElement(w,{codeStr:i&&i.codeStr?i.codeStr:void 0,aceConfig:t,cursor:i&&i.cursor?i.cursor:void 0,setAceRef:this.setAceRef,maxLines:this.props.maxLines})))}}]),t}(c.a.Component),S=n.i(u.connect)(a,{logGenericClick:b.a},null,{withRef:!0})(I)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function a(e,t){if(e&&t){var n=new Event(t);e.dispatchEvent(n)}}function l(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function c(e,t){if(1>t){var n=l(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var u={addCSS:!0,thumbWidth:15,watch:!0},p=function(e){return null!=e?e.constructor:null},d=function(e,t){return!!(e&&t&&e instanceof t)},h=function(e){return null==e},f=function(e){return p(e)===Object},m=function(e){return p(e)===Number&&!Number.isNaN(e)},g=function(e){return p(e)===String},v=function(e){return p(e)===Boolean},y=function(e){return p(e)===Function},b=function(e){return Array.isArray(e)},k=function(e){return d(e,NodeList)},E=function(e){return d(e,Element)},C=function(e){return d(e,Event)},w=function(e){return h(e)||(g(e)||b(e)||k(e))&&!e.length||f(e)&&!Object.keys(e).length},I={nullOrUndefined:h,object:f,number:m,string:g,boolean:v,function:y,array:b,nodeList:k,element:E,event:C,empty:w},S=function(){function e(t,n){i(this,e),I.element(t)?this.element=t:I.string(t)&&(this.element=document.querySelector(t)),I.element(this.element)&&I.empty(this.element.rangeTouch)&&(this.config=Object.assign({},u,n),this.init())}return s(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(e){t.element[n](e,function(e){return t.set(e)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!I.event(t))return null;var n,i=t.target,o=t.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,r=parseFloat(i.getAttribute("max"))||100,a=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(o.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*u:50<n&&(n+=2*(n-50)*u),s+c(n/100*(r-s),a)}},{key:"set",value:function(t){e.enabled&&I.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),a(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(I.empty(t)||I.string(t)?i=Array.from(document.querySelectorAll(I.string(t)?t:'input[type="range"]')):I.element(t)?i=[t]:I.nodeList(t)?i=Array.from(t):I.array(t)&&(i=t.filter(I.element)),I.empty(i))return null;var o=Object.assign({},u,n);return I.string(t)&&o.watch&&new MutationObserver(function(n){Array.from(n).forEach(function(n){Array.from(n.addedNodes).forEach(function(n){I.element(n)&&r(n,t)&&new e(n,o)})})}).observe(document.body,{childList:!0,subtree:!0}),i.map(function(t){return new e(t,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();t.a=S},function(e,t,n){"use strict";function i(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.children,i=[],o=0;o<t.children.length;o++){var s=n[o];if(s.classList&&s.classList.contains("code")){for(var r="",a=!1,l=0;l<s.children.length;l++){var c=s.children[l];c.classList.contains("custom-code-ref")?a=!0:r+=c.textContent.replace(new RegExp(" ","g")," ")+"\n"}i.push({code:r,preamble:a,language:s.getAttribute("data-language")})}}return i}function o(e,t){if(!e)return null;var n=document.createElement("div");n.innerHTML=e;for(var i=n.children,o=0,s=0;s<n.children.length;s++){var r=i[s];if(r.classList&&r.classList.contains("code")){var a=t[o],l=a.code.split("\n"),c=0;a.preamble&&(c=1);for(var u=c;u<r.children.length;u++){r.children[u].innerHTML=l[u-c]}o++}}return n.innerHTML}function s(e,t){var n=o(e,t);f[e]={status:"finished",val:n},r(e)}function r(e){u.a.dispatch(n.i(p.p)(["codeHighlightedText",e],f[e].val))}function a(e){if(!h||d.c||!e)return null;if(!(f[e]||-1==e.indexOf('class="code"')&&-1==e.indexOf("class='code'"))){f[e]={status:"pending"};var t=i(e);return h.postMessage({codeBlocks:t,text:e}),null}}t.a=a;var l=n(1090),c=n.n(l),u=n(137),p=n(38),d=n(17),h=null,f={};try{h=new Worker(window.URL.createObjectURL(new Blob([c.a]))),h.onmessage=function(e){var t=e.data;s(t.text,t.blockArr)}}catch(e){}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=i?0:t;if(o=Math.round(o),(n=Math.round(n))<0)return Promise.reject("bad duration");if(0===n)return e.scrollLeft=o,Promise.resolve();var s=Date.now(),r=s+n,a=e.scrollLeft,l=i?t:o-a,c=function(e,t,n){if(n<=e)return 0;if(n>=t)return 1;var i=(n-e)/(t-e);return i*i*(3-2*i)};return new Promise(function(t,n){var i=e.scrollLeft,o=function o(){if(e.scrollLeft!=i)return void n("interrupted");var u=Date.now(),p=c(s,r,u),d=Math.round(a+l*p);return e.scrollLeft=d,u>=r?void t():e.scrollLeft===i&&e.scrollLeft!==d?void t():(i=e.scrollLeft,void setTimeout(o,0))};setTimeout(o,0)})}}},function(e,t){e.exports="//Does Code Highlighting in a worker process\n//Given an array of strings, it will return a dictionary from that string to the code highlighted\n//version of that string.\nonmessage = function onmessage(event) {\n\timportScripts('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js');\n\timportScripts('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/swift.min.js');\n\n\tvar _event$data = event.data,\n\t    codeBlocks = _event$data.codeBlocks,\n\t    text = _event$data.text;\n\n\n\tvar blockArr = [];\n\n\tfor (var j = 0; j < codeBlocks.length; j++) {\n\t\tvar block = codeBlocks[j];\n\n\t\tvar b = null;\n\n\t\tif (block.language) b = self.hljs.highlightAuto(block.code, [block.language]);else b = self.hljs.highlightAuto(block.code);\n\n\t\tblockArr.push({ code: b.value, preamble: block.preamble });\n\t}\n\n\tpostMessage({ text: text, blockArr: blockArr });\n};"},,,,,,,function(e,t,n){function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=r,this.__views__=[]}var o=n(1024),s=n(1103),r=4294967295;i.prototype=o(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var o=n(1024),s=n(1103);i.prototype=o(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function i(e,t){return e&&o(t,s(t),e)}var o=n(937),s=n(327);e.exports=i},function(e,t,n){var i=n(1225),o=i();e.exports=o},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?a(e)?s(e[0],e[1]):o(e):l(e)}var o=n(1208),s=n(1209),r=n(986),a=n(135),l=n(1249);e.exports=i},function(e,t){function n(){}e.exports=n},function(e,t,n){(function(e){function i(e,t){if(t)return e.slice();var n=e.length,i=c?c(n):new e.constructor(n);return e.copy(i),i}var o=n(48),s="object"==typeof t&&t&&!t.nodeType&&t,r=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=r&&r.exports===s,l=a?o.Buffer:void 0,c=l?l.allocUnsafe:void 0;e.exports=i}).call(t,n(141)(e))},function(e,t,n){function i(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(1025);e.exports=i},function(e,t,n){function i(e,t,n,i,C,w,I,S){var O=t&g;if(!O&&"function"!=typeof e)throw new TypeError(f);var N=i?i.length:0;if(N||(t&=~(b|k),i=C=void 0),I=void 0===I?I:E(h(I),0),S=void 0===S?S:h(S),N-=C?C.length:0,t&k){var P=i,_=C;i=C=void 0}var T=O?void 0:c(e),x=[e,t,n,i,C,P,_,w,I,S];if(T&&u(x,T),e=x[0],t=x[1],n=x[2],i=x[3],C=x[4],S=x[9]=void 0===x[9]?O?0:e.length:E(x[9]-N,0),!S&&t&(v|y)&&(t&=~(v|y)),t&&t!=m)L=t==v||t==y?r(e,t,S):t!=b&&t!=(m|b)||C.length?a.apply(void 0,x):l(e,t,n,i);else var L=s(e,t,n);return d((T?o:p)(L,x),e,t)}var o=n(1212),s=n(1347),r=n(1348),a=n(1226),l=n(1350),c=n(1110),u=n(1356),p=n(1239),d=n(1240),h=n(1250),f="Expected a function",m=1,g=2,v=8,y=16,b=32,k=64,E=Math.max;e.exports=i},function(e,t,n){var i=n(73),o=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function i(e){return r(s(e,void 0,o),e+"")}var o=n(1369),s=n(1238),r=n(1113);e.exports=i},function(e,t,n){function i(e){return o(e,r,s)}var o=n(350),s=n(1075),r=n(1001);e.exports=i},function(e,t,n){var i=n(1236),o=n(1382),s=i?function(e){return i.get(e)}:o;e.exports=s},function(e,t,n){function i(e){return"function"!=typeof e.constructor||r(e)?{}:o(s(e))}var o=n(1024),s=n(342),r=n(335);e.exports=i},function(e,t){function n(e,t){for(var n=-1,o=e.length,s=0,r=[];++n<o;){var a=e[n];a!==t&&a!==i||(e[n]=i,r[s++]=n)}return r}var i="__lodash_placeholder__";e.exports=n},function(e,t,n){var i=n(1342),o=n(1241),s=o(i);e.exports=s},function(e,t,n){var i=n(1235),o=/^\./,s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=i(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(s,function(e,n,i,o){t.push(i?o.replace(r,"$1"):n||e)}),t});e.exports=a},function(e,t){e.exports={}},function(e,t,n){var i=n(999),o=n(1052),s=n(1344),r=n(1e3),a=n(937),l=n(1351),c=n(1108),u=n(1109),p=c(function(e,t){var n={};if(null==e)return n;var c=!1;t=i(t,function(t){return t=r(t,e),c||(c=t.length>1),t}),a(e,u(e),n),c&&(n=o(n,7,l));for(var p=t.length;p--;)s(n,t[p]);return n});e.exports=p},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(1213);e.exports=i},function(e,t,n){function i(e){return null==e?[]:o(e,s(e))}var o=n(1345),s=n(327);e.exports=i},function(e,t,n){(function(t){(function(){var n,i,o,s,r,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-r)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},s=n(),a=1e9*t.uptime(),r=s-a):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n(139))},,,,,,,,function(e,t,n){"use strict";var i=n(1063),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s={id:"__id__",display:"__display__",type:"__type__"},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=function(e,t){return e=null===e?Number.MAX_VALUE:e,t=null===t?Number.MAX_VALUE:t,e-t};e.exports={escapeHtml:function(e){var t=function(t){return e[t]},n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);var o="(?:"+n.join("|")+")",s=RegExp(o),r=RegExp(o,"g");return function(e){return e=null==e?"":""+e,s.test(e)?e.replace(r,t):e}}(r),escapeRegex:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},markupToRegex:function(e,t){var n=this.escapeRegex(e);return n=n.replace(s.display,"(.+?)"),n=n.replace(s.id,"(.+?)"),n=n.replace(s.type,"(.+?)"),t&&(n+="$"),new RegExp(n,"g")},spliceString:function(e,t,n,i){return e.substring(0,t)+i+e.substring(n)},extend:function(e){for(var t,n,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(n in t)hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)},getPositionOfCapturingGroup:function(e,t){if("id"!==t&&"display"!==t&&"type"!==t)throw new Error("parameterName must be 'id', 'display', or 'type'");var n=e.indexOf(s.display),i=e.indexOf(s.id),o=e.indexOf(s.type);if(n<0&&(n=null),i<0&&(i=null),o<0&&(o=null),null===n&&null===i)throw new Error("The markup `"+e+"` must contain at least one of the placeholders `__id__` or `__display__`");if(null===o&&"type"===t)return null;var r=[n,i,o].sort(a);return null===n&&(n=i),null===i&&(i=n),"id"===t?r.indexOf(i):"display"===t?r.indexOf(n):"type"===t?null===o?null:r.indexOf(o):void 0},iterateMentionsMarkup:function(e,t,n,i,o){for(var s,r=this.markupToRegex(t),a=this.getPositionOfCapturingGroup(t,"display"),l=this.getPositionOfCapturingGroup(t,"id"),c=this.getPositionOfCapturingGroup(t,"type"),u=0,p=0;null!==(s=r.exec(e));){var d=s[l+1],h=s[a+1],f=null!==c?s[c+1]:null;o&&(h=o(d,h,f));var m=e.substring(u,s.index);n(m,u,p),p+=m.length,i(s[0],s.index,p,d,h,f,u),p+=h.length,u=r.lastIndex}u<e.length&&n(e.substring(u),u,p)},mapPlainTextIndex:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"START",o=arguments[4];if(!this.isNumber(n))return n;var s,r=function(e,t,i){void 0===s&&i+e.length>=n&&(s=t+n-i)},a=function(e,t,o,r,a,l,c){void 0===s&&o+a.length>n&&(s="NULL"===i?null:t+("END"===i?e.length:0))};return this.iterateMentionsMarkup(e,t,r,a,o),void 0===s?e.length:s},findStartOfMentionInPlainText:function(e,t,n,i){var o=n,s=!1,r=function(e,t,i,r,a,l,c){i<=n&&i+a.length>n&&(o=i,s=!0)};if(this.iterateMentionsMarkup(e,t,function(){},r,i),s)return o},isInsideOfMention:function(e,t,n,i){var o=this.findStartOfMentionInPlainText(e,t,n,i);return void 0!==o&&o!==n},applyChangeToValue:function(e,t,n,i,o,s,r){var a=this.getPlainText(e,t,r),l=a.length-n.length;"undefined"===i&&(i=s+l),"undefined"===o&&(o=i),i===o&&o===s&&a.length===n.length&&(i-=1);var c=n.slice(i,s),u=Math.min(i,s),p=o;i===s&&(p=Math.max(o,i+l));var d=this.mapPlainTextIndex(e,t,u,"START",r),h=this.mapPlainTextIndex(e,t,p,"END",r),f=this.mapPlainTextIndex(e,t,u,"NULL",r),m=this.mapPlainTextIndex(e,t,p,"NULL",r),g=null===f||null===m,v=this.spliceString(e,d,h,c);if(!g){var y=this.getPlainText(v,t,r);if(y!==n){for(u=0;n[u]===y[u];)u++;c=n.slice(u,s),p=a.lastIndexOf(n.substring(s)),d=this.mapPlainTextIndex(e,t,u,"START",r),h=this.mapPlainTextIndex(e,t,p,"END",r),v=this.spliceString(e,d,h,c)}}return v},getPlainText:function(e,t,n){var i=this.markupToRegex(t),o=this.getPositionOfCapturingGroup(t,"id"),s=this.getPositionOfCapturingGroup(t,"display"),r=this.getPositionOfCapturingGroup(t,"type");return e.replace(i,function(){var e=arguments[o+1],t=arguments[s+1],i=arguments[r+1];return n&&(t=n(e,t,i)),t})},getMentions:function(e,t){var n=[];return this.iterateMentionsMarkup(e,t,function(){},function(e,t,i,o,s,r,a){n.push({id:o,display:s,type:r,index:t,plainTextIndex:i})}),n},makeMentionsMarkup:function(e,t,n,i){var o=e.replace(s.id,t);return o=o.replace(s.display,n),o=o.replace(s.type,i)},countSuggestions:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&(t+=e[n].results.length);return t},getSuggestions:function(e){var t=[];for(var n in e){if(!e.hasOwnProperty(n))return;t=t.concat({suggestions:e[n].results,descriptor:e[n]})}return t},getSuggestion:function(e,t){return this.getSuggestions(e).reduce(function(e,t){var n=t.suggestions,i=t.descriptor;return[].concat((0,o.default)(e),(0,o.default)(n.map(function(e){return{suggestion:e,descriptor:i}})))},[])[t]}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(977),r=i(s),a=n(946),l=i(a),c=n(979),u=i(c),p=n(975),d=i(p),h=n(976),f=i(h),m=n(978),g=i(m),v=n(1),y=i(v),b=n(31),k=i(b),E=n(202),C=i(E),w=C.default({propTypes:{defaultStyle:k.default.objectOf(k.default.number),style:k.default.objectOf(k.default.oneOfType([k.default.number,k.default.object])).isRequired,children:k.default.func.isRequired,onRest:k.default.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,i=t||l.default(n),o=r.default(i);return{currentStyle:i,currentVelocity:o,lastIdealStyle:i,lastIdealVelocity:o}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,i=n.currentStyle,s=n.currentVelocity,r=n.lastIdealStyle,a=n.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var c=e[l];"number"==typeof c&&(t||(t=!0,i=o({},i),s=o({},s),r=o({},r),a=o({},a)),i[l]=c,s[l]=0,r[l]=c,a[l]=0)}t&&this.setState({currentStyle:i,currentVelocity:s,lastIdealStyle:r,lastIdealVelocity:a})},startAnimationIfNecessary:function(){var e=this;this.animationID=f.default(function(t){var n=e.props.style;if(g.default(e.state.currentStyle,n,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var i=t||d.default(),o=i-e.prevTime;if(e.prevTime=i,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var s=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),r=Math.floor(e.accumulatedTime/(1e3/60)),a={},l={},c={},p={};for(var h in n)if(Object.prototype.hasOwnProperty.call(n,h)){var f=n[h];if("number"==typeof f)c[h]=f,p[h]=0,a[h]=f,l[h]=0;else{for(var m=e.state.lastIdealStyle[h],v=e.state.lastIdealVelocity[h],y=0;y<r;y++){var b=u.default(1e3/60/1e3,m,v,f.val,f.stiffness,f.damping,f.precision);m=b[0],v=b[1]}var k=u.default(1e3/60/1e3,m,v,f.val,f.stiffness,f.damping,f.precision),E=k[0],C=k[1];c[h]=m+(E-m)*s,p[h]=v+(C-v)*s,a[h]=m,l[h]=v}}e.animationID=null,e.accumulatedTime-=r*(1e3/60),e.setState({currentStyle:c,currentVelocity:p,lastIdealStyle:a,lastIdealVelocity:l}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=d.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=d.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(f.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&y.default.Children.only(e)}});t.default=w,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){for(var i=0;i<e.length;i++)if(!v.default(e[i],t[i],n[i]))return!1;return!0}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(977),a=i(r),l=n(946),c=i(l),u=n(979),p=i(u),d=n(975),h=i(d),f=n(976),m=i(f),g=n(978),v=i(g),y=n(1),b=i(y),k=n(31),E=i(k),C=n(202),w=i(C),I=w.default({propTypes:{defaultStyles:E.default.arrayOf(E.default.objectOf(E.default.number)),styles:E.default.func.isRequired,children:E.default.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,i=t||n().map(c.default),o=i.map(function(e){return a.default(e)});return{currentStyles:i,currentVelocities:o,lastIdealStyles:i,lastIdealVelocities:o}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,i=t.currentVelocities,o=t.lastIdealStyles,r=t.lastIdealVelocities,a=!1,l=0;l<e.length;l++){var c=e[l],u=!1;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var d=c[p];"number"==typeof d&&(u||(u=!0,a=!0,n[l]=s({},n[l]),i[l]=s({},i[l]),o[l]=s({},o[l]),r[l]=s({},r[l])),n[l][p]=d,i[l][p]=0,o[l][p]=d,r[l][p]=0)}}a&&this.setState({currentStyles:n,currentVelocities:i,lastIdealStyles:o,lastIdealVelocities:r})},startAnimationIfNecessary:function(){var e=this;this.animationID=m.default(function(t){var n=e.props.styles(e.state.lastIdealStyles);if(o(e.state.currentStyles,n,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var i=t||h.default(),s=i-e.prevTime;if(e.prevTime=i,e.accumulatedTime=e.accumulatedTime+s,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var r=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),a=Math.floor(e.accumulatedTime/(1e3/60)),l=[],c=[],u=[],d=[],f=0;f<n.length;f++){var m=n[f],g={},v={},y={},b={};for(var k in m)if(Object.prototype.hasOwnProperty.call(m,k)){var E=m[k];if("number"==typeof E)g[k]=E,v[k]=0,y[k]=E,b[k]=0;else{for(var C=e.state.lastIdealStyles[f][k],w=e.state.lastIdealVelocities[f][k],I=0;I<a;I++){var S=p.default(1e3/60/1e3,C,w,E.val,E.stiffness,E.damping,E.precision);C=S[0],w=S[1]}var O=p.default(1e3/60/1e3,C,w,E.val,E.stiffness,E.damping,E.precision),N=O[0],P=O[1];g[k]=C+(N-C)*r,v[k]=w+(P-w)*r,y[k]=C,b[k]=w}}u[f]=g,d[f]=v,l[f]=y,c[f]=b}e.animationID=null,e.accumulatedTime-=a*(1e3/60),e.setState({currentStyles:u,currentVelocities:d,lastIdealStyles:l,lastIdealVelocities:c}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=h.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=h.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(m.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&b.default.Children.only(e)}});t.default=I,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i=t;return null==i?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,t){for(var o=0;o<i.length;o++)if(i[o].key===e.key)return{key:i[o].key,data:i[o].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}})}function s(e,t,n,i){if(i.length!==t.length)return!1;for(var o=0;o<i.length;o++)if(i[o].key!==t[o].key)return!1;for(var o=0;o<i.length;o++)if(!E.default(e[o],t[o].style,n[o]))return!1;return!0}function r(e,t,n,i,o,s,r,a,l){for(var u=m.default(i,o,function(e,i){var o=t(i);return null==o?(n({key:i.key,data:i.data}),null):E.default(s[e],o,r[e])?(n({key:i.key,data:i.data}),null):{key:i.key,data:i.data,style:o}}),p=[],d=[],h=[],f=[],g=0;g<u.length;g++){for(var v=u[g],y=null,b=0;b<i.length;b++)if(i[b].key===v.key){y=b;break}if(null==y){var k=e(v);p[g]=k,h[g]=k;var C=c.default(v.style);d[g]=C,f[g]=C}else p[g]=s[y],h[g]=a[y],d[g]=r[y],f[g]=l[y]}return[u,p,d,h,f]}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n(977),c=i(l),u=n(946),p=i(u),d=n(979),h=i(d),f=n(1131),m=i(f),g=n(975),v=i(g),y=n(976),b=i(y),k=n(978),E=i(k),C=n(1),w=i(C),I=n(31),S=i(I),O=n(202),N=i(O),P=N.default({propTypes:{defaultStyles:S.default.arrayOf(S.default.shape({key:S.default.string.isRequired,data:S.default.any,style:S.default.objectOf(S.default.number).isRequired})),styles:S.default.oneOfType([S.default.func,S.default.arrayOf(S.default.shape({key:S.default.string.isRequired,data:S.default.any,style:S.default.objectOf(S.default.oneOfType([S.default.number,S.default.object])).isRequired}))]).isRequired,children:S.default.func.isRequired,willEnter:S.default.func,willLeave:S.default.func,didLeave:S.default.func},getDefaultProps:function(){return{willEnter:function(e){return p.default(e.style)},willLeave:function(){return null},didLeave:function(){}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,i=e.willEnter,o=e.willLeave,s=e.didLeave,a="function"==typeof n?n(t):n,l=void 0;l=null==t?a:t.map(function(e){for(var t=0;t<a.length;t++)if(a[t].key===e.key)return a[t];return e});var u=null==t?a.map(function(e){return p.default(e.style)}):t.map(function(e){return p.default(e.style)}),d=null==t?a.map(function(e){return c.default(e.style)}):t.map(function(e){return c.default(e.style)}),h=r(i,o,s,l,a,u,d,u,d),f=h[0];return{currentStyles:h[1],currentVelocities:h[2],lastIdealStyles:h[3],lastIdealVelocities:h[4],mergedPropsStyles:f}},unmounting:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=r(this.props.willEnter,this.props.willLeave,this.props.didLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],i=t[1],o=t[2],s=t[3],l=t[4],c=0;c<e.length;c++){var u=e[c].style,p=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var h=u[d];"number"==typeof h&&(p||(p=!0,i[c]=a({},i[c]),o[c]=a({},o[c]),s[c]=a({},s[c]),l[c]=a({},l[c]),n[c]={key:n[c].key,data:n[c].data,style:a({},n[c].style)}),i[c][d]=h,o[c][d]=0,s[c][d]=h,l[c][d]=0,n[c].style[d]=h)}}this.setState({currentStyles:i,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:s,lastIdealVelocities:l})},startAnimationIfNecessary:function(){var e=this;this.unmounting||(this.animationID=b.default(function(t){if(!e.unmounting){var n=e.props.styles,i="function"==typeof n?n(o(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):n;if(s(e.state.currentStyles,i,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var a=t||v.default(),l=a-e.prevTime;if(e.prevTime=a,e.accumulatedTime=e.accumulatedTime+l,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var c=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),u=Math.floor(e.accumulatedTime/(1e3/60)),p=r(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,i,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),d=p[0],f=p[1],m=p[2],g=p[3],y=p[4],b=0;b<d.length;b++){var k=d[b].style,E={},C={},w={},I={};for(var S in k)if(Object.prototype.hasOwnProperty.call(k,S)){var O=k[S];if("number"==typeof O)E[S]=O,C[S]=0,w[S]=O,I[S]=0;else{for(var N=g[b][S],P=y[b][S],_=0;_<u;_++){var T=h.default(1e3/60/1e3,N,P,O.val,O.stiffness,O.damping,O.precision);N=T[0],P=T[1]}var x=h.default(1e3/60/1e3,N,P,O.val,O.stiffness,O.damping,O.precision),L=x[0],M=x[1];E[S]=N+(L-N)*c,C[S]=P+(M-P)*c,w[S]=N,I[S]=P}}g[b]=w,y[b]=I,f[b]=E,m[b]=C}e.animationID=null,e.accumulatedTime-=u*(1e3/60),e.setState({currentStyles:f,currentVelocities:m,lastIdealStyles:g,lastIdealVelocities:y,mergedPropsStyles:d}),e.unreadPropStyles=null,e.startAnimationIfNecessary()}}))},componentDidMount:function(){this.prevTime=v.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=v.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){this.unmounting=!0,null!=this.animationID&&(b.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&w.default.Children.only(t)}});t.default=P,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){for(var i={},o=0;o<e.length;o++)i[e[o].key]=o;for(var s={},o=0;o<t.length;o++)s[t[o].key]=o;for(var r=[],o=0;o<t.length;o++)r[o]=t[o];for(var o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(s,e[o].key)){var a=n(o,e[o]);null!=a&&r.push(a)}return r.sort(function(e,n){var o=s[e.key],r=s[n.key],a=i[e.key],l=i[n.key];if(null!=o&&null!=r)return s[e.key]-s[n.key];if(null!=a&&null!=l)return i[e.key]-i[n.key];if(null!=o){for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(o<s[u]&&l>i[u])return-1;if(o>s[u]&&l<i[u])return 1}}return 1}for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(r<s[u]&&a>i[u])return 1;if(r>s[u]&&a<i[u])return-1}}return-1})}t.__esModule=!0,t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){}t.__esModule=!0,t.default=i;e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return o({},a,t,{val:e})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=i;var s=n(1031),r=function(e){return e&&e.__esModule?e:{default:e}}(s),a=o({},r.default.noWobble,{precision:.01});e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),topics:e.get("topics"),communities:e.get("communities"),channels:e.get("channels"),discussions:e.get("discussions"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return x});var a=n(1),l=n.n(a),c=n(53),u=n.n(c),p=n(37),d=(n.n(p),n(15)),h=(n.n(d),n(39)),f=(n.n(h),n(132)),m=(n.n(f),n(899)),g=n.n(m),v=n(896),y=(n.n(v),n(887),n(1553)),b=n(830),k=n(1003),E=(n(324),n(1452)),C=n(38),w=n(131),I=n(32),S=n(1089),O=n(907),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),P=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onEnter=n.onEnter.bind(n),n.onLeave=n.onLeave.bind(n),n}return s(t,e),N(t,[{key:"onEnter",value:function(e){this.props.onWaypointEnter(e,this.props.scrollEventId,this.props.scrollEventType,this.props.direction)}},{key:"onLeave",value:function(e){this.props.onWaypointLeave(e,this.props.scrollEventId,this.props.scrollEventType,this.props.direction)}},{key:"render",value:function(){return l.a.createElement(g.a,{onEnter:this.onEnter,onLeave:this.onLeave,scrollableAncestor:n.i(I.f)()?window:null})}}]),t}(l.a.PureComponent),_=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),N(t,[{key:"onClick",value:function(e){this.props.onClick(e,this.props.refName)}},{key:"render",value:function(){return l.a.createElement("div",{className:this.props.className,onClick:this.onClick})}}]),t}(l.a.PureComponent),T=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visibleIds=[],n.scrollEvents={},n.state={isFeedCollapsed:!0},n.onWaypointEnter=n.onWaypointEnter.bind(n),n.onWaypointLeave=n.onWaypointLeave.bind(n),n.logScrollActivity=n.logScrollActivity.bind(n),n.logScrollActivityOnLeave=n.logScrollActivityOnLeave.bind(n),n.logFeedEvent=n.logFeedEvent.bind(n),n.isFeedCollapsed=n.isFeedCollapsed.bind(n),n.doesPortalExist=n.doesPortalExist.bind(n),n.unCollapseFeed=n.unCollapseFeed.bind(n),n.onLoadMore=n.onLoadMore.bind(n),n.scrollLeft=n.scrollLeft.bind(n),n.scrollRight=n.scrollRight.bind(n),n}return s(t,e),N(t,[{key:"logScrollActivityOnLeave",value:function(){var e=this;this.scrollEvents&&(Object.keys(this.scrollEvents).forEach(function(t){e.scrollEvents[t]&&e.logScrollActivity(t,e.scrollEvents[t].type,"exit")}),this.scrollEvents={})}},{key:"componentWillUnmount",value:function(){this.logScrollActivityOnLeave()}},{key:"componentWillReceiveProps",value:function(e){e.feed!=this.props.feed&&this.props.location&&e.location&&this.props.location.pathname!=e.location.pathname&&this.logScrollActivityOnLeave(),e.feed!=this.props.feed&&this.props.location&&e.location&&this.props.location.pathname==e.location.pathname&&(this.checkHeight=!0)}},{key:"logFeedEvent",value:function(e,t,n,i){var o=null;switch(t){case"discussion":o="Discussion";break;case"post":o="DiscussionPost";break;case"user":o="ComposeUser";break;case"community":o="Community";break;case"topic":o="Topic";break;default:console.log("Unhandled case in logFeedEvent: ",t)}this.props.logEvent({type:"scroll",payload:{obj:e,obj_type:o,scroll_in:n,scroll_out:i,related_info:this.props.feedType}})}},{key:"logScrollActivity",value:function(e,t,n){var i=new Date;if(this.scrollEvents[e]&&"exit"==n){var o=this.scrollEvents[e].dt;i-o>E.a&&this.logFeedEvent(e,t,o,i),delete this.scrollEvents[e]}else"enter"==n&&(this.scrollEvents[e]={dt:new Date,type:t})}},{key:"onWaypointEnter",value:function(e,t,n,i){"top"!=i||"below"!=e.previousPosition&&null!=e.previousPosition?"bottom"!=i||"above"!=e.previousPosition&&null!=e.previousPosition||-1==this.visibleIds.indexOf(t)&&(this.visibleIds.push(t),this.logScrollActivity(t,n,"enter")):-1==this.visibleIds.indexOf(t)&&(this.visibleIds.push(t),this.logScrollActivity(t,n,"enter"))}},{key:"onWaypointLeave",value:function(e,t,n,i){if("top"==i&&"below"==e.currentPosition||"bottom"==i&&"above"==e.currentPosition){var o=this.visibleIds.indexOf(t);o>-1&&(this.visibleIds=this.visibleIds.slice(0,o).concat(this.visibleIds.slice(o+1)),this.logScrollActivity(t,n,"exit"))}}},{key:"doesPortalExist",value:function(){return this.props.feed&&this.props.feed.find(function(e){return"portal_items"==e.get("type")||"subscriptions_portal"==e.get("type")})}},{key:"isFeedCollapsed",value:function(){return!this.props.currentLoggedInUser&&this.doesPortalExist()&&this.state.isFeedCollapsed}},{key:"unCollapseFeed",value:function(){this.setState({isFeedCollapsed:!1})}},{key:"componentDidUpdate",value:function(){this.props.updateScroll&&this.props.updateScroll(),this.checkHeight&&document&&document.getElementsByClassName("feed-item")&&this.props.feed&&document.getElementsByClassName("feed-item").length==this.props.feed.size&&document.documentElement.scrollHeight<=document.documentElement.clientHeight&&(this.props.onLoadMore(),this.checkHeight=!1)}},{key:"onLoadMore",value:function(){this.props.onLoadMore&&this.props.onLoadMore()}},{key:"scrollLeft",value:function(e,t){n.i(S.a)(u.a.findDOMNode(this.refs[t]),-800,200,!0)}},{key:"scrollRight",value:function(e,t){n.i(S.a)(u.a.findDOMNode(this.refs[t]),800,200,!0)}},{key:"scrollToHash",value:function(e){"#"==e.substr(0,1)&&(e=e.substr(1));var t=document.getElementsByClassName("portal-"+e)[0];t&&n.i(O.b)(t.offsetTop-t.offsetHeight-40,200)}},{key:"getHashfromString",value:function(e){return e.replace(/\s+/g,"-").toLowerCase()}},{key:"render",value:function(){var e=this,t=-1,i=!1,o=this.props.isVeryWide?4:3,s=n.i(h.List)();this.props.feed.map(function(t,i){"tags"==t.get("type")&&(s=s.concat(t.getIn(["tags"],n.i(h.List)()).map(function(t){return l.a.createElement("div",{className:"portal-tag zoom-on-hover",onClick:function(){return e.scrollToHash(e.getHashfromString(t))}},t)})))});var r=this.props.feed.map(function(s,r){if(i="compact_item_card"==s.get("type"),s.get("feedStart")&&(t=r),"item_card"==s.get("type")||"compact_item_card"==s.get("type")){var a=n.i(h.List)();"item_card"==s.get("type")?a=s.get("subitems")&&s.get("subitems").size>0?s.get("subitems"):h.List.of(s.get("item")):"compact_item_card"==s.get("type")&&(a=h.List.of(s.get("item")));var c=s.get("justifications")&&s.get("justifications").map(function(e){return n.i(w.k)(e.toJS())}),u=s.get("item")?s.get("item").get("eid"):a.get(0)?a.get(0).get("eid"):null,p=s.get("item")?s.get("item").get("type"):a.get(0)?a.get(0).get("type"):null;return l.a.createElement("div",{key:r,className:i?"feed-item feed-card compact-card":"feed-item feed-card"},l.a.createElement(P,{scrollEventId:u,scrollEventType:p,direction:"top",onWaypointEnter:e.onWaypointEnter,onWaypointLeave:e.onWaypointLeave}),!i&&c&&c.size>0?l.a.createElement("div",{className:"justification-container"},c.map(function(e,t){return l.a.createElement("div",{className:"justification",key:"justification-"+t},c)})):null,l.a.createElement(y.a,{items:a,item:s.get("item"),isCompact:i,index:r-t}),l.a.createElement(P,{scrollEventId:u,scrollEventType:p,direction:"bottom",onWaypointEnter:e.onWaypointEnter,onWaypointLeave:e.onWaypointLeave}))}if("heading"==s.get("type")){var d="feed-item section-heading";return s.getIn(["extra","tags"],n.i(h.List)()).map(function(t){d+=" portal-"+e.getHashfromString(t)}),l.a.createElement("div",{className:d},s.get("heading"))}if("tags"==s.get("type"))return null;if("portal_items"==s.get("type")){var f=s.get("items").map(function(t){return l.a.createElement(k.a,{discussion:e.props.discussions.getIn([t.get("eid")],null)})});return l.a.createElement("div",{className:f.size>o?"feed-item carousel-container":"feed-item"},l.a.createElement("div",{className:f.size>o?"carousel featured-cards":"featured-cards",ref:"carousel-"+r},l.a.createElement(_,{className:"scroll-button left",onClick:e.scrollLeft,refName:"carousel-"+r}),f,l.a.createElement(_,{className:"scroll-button right",onClick:e.scrollRight,refName:"carousel-"+r})))}if("subscriptions_portal"==s.get("type")){var m=s.get("items").map(function(t){var n=e.props.discussions.getIn([t.get("eid"),"typeInfo","nextUncompletedDiscussion"],null);if(!n)return null;var i=e.props.discussions.get(n);if(!i)return null;var o=e.props.discussions.getIn([t.get("eid")],null);return l.a.createElement(k.a,{discussion:i,isPlaylistItem:!0,playlist:o})});return l.a.createElement("div",{className:"feed-item featured-cards"},m)}}),a=this.props.hasDiscussionMetadataComposer?l.a.createElement(b.DiscussionMetadataComposerContainer,{isPage:!1,parentRouter:this.props.parentRouter,parentRoute:this.props.parentRoute,communityId:this.props.communityId,channelId:this.props.channelId,disableCourseCreationOptions:!0,location:this.props.location,disableCommunityEdit:this.props.disableCommunityEdit}):null,c=!1!==this.props.isFetching||this.props.noMoreItems?null:l.a.createElement("div",{className:"show-feed-button section-heading",onClick:this.onLoadMore}," Load More "),u="feed";this.props.isWide&&(u+=" wide"),this.props.isVeryWide&&(u+=" very-wide"),this.props.isYTranslated&&(u+=" translated");var p=0==s.size?null:l.a.createElement("div",{className:"portal-tags"},s);return l.a.createElement("div",{className:u},r.size>0?l.a.createElement("div",null,t<0?[p,r,c]:0==t?[this.props.communityInfoPin?this.props.communityInfoPin:null,a,this.props.stickyTabsBar?this.props.stickyTabsBar:null,this.props.communityFeedPrompt?this.props.communityFeedPrompt:null,p,r,c]:t<=0?[p,r,c]:[r.slice(0,t-1),this.isFeedCollapsed()?l.a.createElement("div",{className:"show-feed-button section-heading",onClick:this.unCollapseFeed},"Show recent activity"):[r.slice(t-1,t),this.props.communityInfoPin?this.props.communityInfoPin:null,a,this.props.stickyTabsBar?this.props.stickyTabsBar:null,this.props.communityFeedPrompt?this.props.communityFeedPrompt:null,p,r.slice(t),c]]):l.a.createElement("div",null,this.props.communityInfoPin?this.props.communityInfoPin:null,a,this.props.stickyTabsBar?this.props.stickyTabsBar:null,this.props.communityFeedPrompt?this.props.communityFeedPrompt:null,this.props.emptyStateTextDiv),l.a.createElement(g.a,{onEnter:this.onLoadMore,scrollableAncestor:n.i(I.f)()?window:null,bottomOffset:"-200px"}))}}]),t}(l.a.PureComponent),x=n.i(p.connect)(r,{logEvent:C.c},null,{withRef:!0})(T)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{topics:e.get("topics")}}n.d(t,"a",function(){return f});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(132)),p=n.n(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"render",value:function(){var e=this.props.topics.get(this.props.topicId);return e?l.a.createElement("div",{className:"topic-box box"},l.a.createElement("div",{className:"shifted-right"},l.a.createElement("div",{className:"title"},e.get("name")),l.a.createElement("div",{className:"label"},e.get("followersCount")," ",p()("follower",e.get("followersCount"))))):null}}]),t}(l.a.PureComponent),f=n.i(c.connect)(r)(h)},function(e,t,n){e.exports={default:n(1158),__esModule:!0}},function(e,t,n){var i=n(911),o=n(895),s=n(935);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*s(function(){n(1)}),"Object",r)}},,function(e,t,n){function i(e,t){return e&&o(e,t,s)}var o=n(1101),s=n(327);e.exports=i},,,,,,,,,function(e,t,n){e.exports={default:n(1155),__esModule:!0}},function(e,t,n){e.exports={default:n(1156),__esModule:!0}},function(e,t,n){e.exports={default:n(1157),__esModule:!0}},function(e,t,n){e.exports={default:n(1160),__esModule:!0}},function(e,t,n){e.exports={default:n(1161),__esModule:!0}},function(e,t,n){e.exports={default:n(1162),__esModule:!0}},,function(e,t,n){n(1073),n(1185),e.exports=n(895).Array.from},function(e,t,n){n(1187),e.exports=n(895).Object.assign},function(e,t,n){n(1188);var i=n(895).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(1189);var i=n(895).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){n(1190),e.exports=n(895).Object.getPrototypeOf},function(e,t,n){n(1191),e.exports=n(895).Object.setPrototypeOf},function(e,t,n){n(1193),n(1192),n(1194),n(1195),e.exports=n(895).Symbol},function(e,t,n){n(1073),n(1196),e.exports=n(1022).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(920),o=n(1072),s=n(1183);e.exports=function(e){return function(t,n,r){var a,l=i(t),c=o(l.length),u=s(r,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var i=n(1009),o=n(898)("toStringTag"),s="Arguments"==i(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=r(t=Object(e),o))?n:s?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){"use strict";var i=n(913),o=n(963);e.exports=function(e,t,n){t in e?i.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var i=n(962),o=n(1015),s=n(982);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var r,a=n(e),l=s.f,c=0;a.length>c;)l.call(e,r=a[c++])&&t.push(r);return t}},function(e,t,n){var i=n(912).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(961),o=n(898)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},function(e,t,n){var i=n(1009);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(934);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){var s=e.return;throw void 0!==s&&i(s.call(e)),t}}},function(e,t,n){"use strict";var i=n(1014),o=n(963),s=n(1016),r={};n(936)(r,n(898)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(r,{next:o(1,n)}),s(e,t+" Iterator")}},function(e,t,n){var i=n(898)("iterator"),o=!1;try{var s=[7][i]();s.return=function(){o=!0},Array.from(s,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var s=[7],r=s[i]();r.next=function(){return{done:n=!0}},s[i]=function(){return r},e(s)}catch(e){}return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(962),o=n(920);e.exports=function(e,t){for(var n,s=o(e),r=i(s),a=r.length,l=0;a>l;)if(s[n=r[l++]]===t)return n}},function(e,t,n){var i=n(984)("meta"),o=n(960),s=n(924),r=n(913).f,a=0,l=Object.isExtensible||function(){return!0},c=!n(935)(function(){return l(Object.preventExtensions({}))}),u=function(e){r(e,i,{value:{i:"O"+ ++a,w:{}}})},p=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},d=function(e,t){if(!s(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},h=function(e){return c&&f.NEED&&l(e)&&!s(e,i)&&u(e),e},f=e.exports={KEY:i,NEED:!1,fastKey:p,getWeak:d,onFreeze:h}},function(e,t,n){"use strict";var i=n(962),o=n(1015),s=n(982),r=n(983),a=n(1066),l=Object.assign;e.exports=!l||n(935)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=r(e),l=arguments.length,c=1,u=o.f,p=s.f;l>c;)for(var d,h=a(arguments[c++]),f=u?i(h).concat(u(h)):i(h),m=f.length,g=0;m>g;)p.call(h,d=f[g++])&&(n[d]=h[d]);return n}:l},function(e,t,n){var i=n(913),o=n(934),s=n(962);e.exports=n(923)?Object.defineProperties:function(e,t){o(e);for(var n,r=s(t),a=r.length,l=0;a>l;)i.f(e,n=r[l++],t[n]);return e}},function(e,t,n){var i=n(920),o=n(1068).f,s={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(e){return r.slice()}};e.exports.f=function(e){return r&&"[object Window]"==s.call(e)?a(e):o(i(e))}},function(e,t,n){var i=n(960),o=n(934),s=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(1010)(Function.call,n(1049).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:s}},function(e,t,n){var i=n(1019),o=n(1011);e.exports=function(e){return function(t,n){var s,r,a=String(o(t)),l=i(n),c=a.length;return l<0||l>=c?e?"":void 0:(s=a.charCodeAt(l),s<55296||s>56319||l+1===c||(r=a.charCodeAt(l+1))<56320||r>57343?e?a.charAt(l):s:e?a.slice(l,l+2):r-56320+(s-55296<<10)+65536)}}},function(e,t,n){var i=n(1019),o=Math.max,s=Math.min;e.exports=function(e,t){return e=i(e),e<0?o(e+t,0):s(e,t)}},function(e,t,n){var i=n(1166),o=n(898)("iterator"),s=n(961);e.exports=n(895).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||s[i(e)]}},function(e,t,n){"use strict";var i=n(1010),o=n(911),s=n(983),r=n(1172),a=n(1170),l=n(1072),c=n(1167),u=n(1184);o(o.S+o.F*!n(1174)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,p,d=s(e),h="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,y=u(d);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==y||h==Array&&a(y))for(t=l(d.length),n=new h(t);t>v;v++)c(n,v,g?m(d[v],v):d[v]);else for(p=y.call(d),n=new h;!(o=p.next()).done;v++)c(n,v,g?r(p,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var i=n(1164),o=n(1175),s=n(961),r=n(920);e.exports=n(1067)(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var i=n(911);i(i.S+i.F,"Object",{assign:n(1178)})},function(e,t,n){var i=n(911);i(i.S,"Object",{create:n(1014)})},function(e,t,n){var i=n(911);i(i.S+i.F*!n(923),"Object",{defineProperty:n(913).f})},function(e,t,n){var i=n(983),o=n(1069);n(1137)("getPrototypeOf",function(){return function(e){return o(i(e))}})},function(e,t,n){var i=n(911);i(i.S,"Object",{setPrototypeOf:n(1181).set})},function(e,t){},function(e,t,n){"use strict";var i=n(912),o=n(924),s=n(923),r=n(911),a=n(1071),l=n(1177).KEY,c=n(935),u=n(1018),p=n(1016),d=n(984),h=n(898),f=n(1022),m=n(1021),g=n(1176),v=n(1168),y=n(1171),b=n(934),k=n(920),E=n(1020),C=n(963),w=n(1014),I=n(1180),S=n(1049),O=n(913),N=n(962),P=S.f,_=O.f,T=I.f,x=i.Symbol,L=i.JSON,M=L&&L.stringify,j=h("_hidden"),D=h("toPrimitive"),A={}.propertyIsEnumerable,R=u("symbol-registry"),F=u("symbols"),U=u("op-symbols"),B=Object.prototype,H="function"==typeof x,q=i.QObject,W=!q||!q.prototype||!q.prototype.findChild,z=s&&c(function(){return 7!=w(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P(B,t);i&&delete B[t],_(e,t,n),i&&e!==B&&_(B,t,i)}:_,V=function(e){var t=F[e]=w(x.prototype);return t._k=e,t},Q=H&&"symbol"==typeof x.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof x},Y=function(e,t,n){return e===B&&Y(U,t,n),b(e),t=E(t,!0),b(n),o(F,t)?(n.enumerable?(o(e,j)&&e[j][t]&&(e[j][t]=!1),n=w(n,{enumerable:C(0,!1)})):(o(e,j)||_(e,j,C(1,{})),e[j][t]=!0),z(e,t,n)):_(e,t,n)},G=function(e,t){b(e);for(var n,i=v(t=k(t)),o=0,s=i.length;s>o;)Y(e,n=i[o++],t[n]);return e},J=function(e,t){return void 0===t?w(e):G(w(e),t)},K=function(e){var t=A.call(this,e=E(e,!0));return!(this===B&&o(F,e)&&!o(U,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,j)&&this[j][e])||t)},$=function(e,t){if(e=k(e),t=E(t,!0),e!==B||!o(F,t)||o(U,t)){var n=P(e,t);return!n||!o(F,t)||o(e,j)&&e[j][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=T(k(e)),i=[],s=0;n.length>s;)o(F,t=n[s++])||t==j||t==l||i.push(t);return i},Z=function(e){for(var t,n=e===B,i=T(n?U:k(e)),s=[],r=0;i.length>r;)!o(F,t=i[r++])||n&&!o(B,t)||s.push(F[t]);return s};H||(x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(U,n),o(this,j)&&o(this[j],e)&&(this[j][e]=!1),z(this,e,C(1,n))};return s&&W&&z(B,e,{configurable:!0,set:t}),V(e)},a(x.prototype,"toString",function(){return this._k}),S.f=$,O.f=Y,n(1068).f=I.f=X,n(982).f=K,n(1015).f=Z,s&&!n(1013)&&a(B,"propertyIsEnumerable",K,!0),f.f=function(e){return V(h(e))}),r(r.G+r.W+r.F*!H,{Symbol:x});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=N(h.store),ie=0;ne.length>ie;)m(ne[ie++]);r(r.S+r.F*!H,"Symbol",{for:function(e){return o(R,e+="")?R[e]:R[e]=x(e)},keyFor:function(e){if(Q(e))return g(R,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),r(r.S+r.F*!H,"Object",{create:J,defineProperty:Y,defineProperties:G,getOwnPropertyDescriptor:$,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),L&&r(r.S+r.F*(!H||c(function(){var e=x();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Q(e)){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);return t=i[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Q(t))return t}),i[1]=t,M.apply(L,i)}}}),x.prototype[D]||n(936)(x.prototype,D,x.prototype.valueOf),p(x,"Symbol"),p(Math,"Math",!0),p(i.JSON,"JSON",!0)},function(e,t,n){n(1021)("asyncIterator")},function(e,t,n){n(1021)("observable")},function(e,t,n){n(1186);for(var i=n(912),o=n(936),s=n(961),r=n(898)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],u=i[c],p=u&&u.prototype;p&&!p[r]&&o(p,r,c),s[c]=s.Array}},,,,function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},function(e,t){function n(e,t){return e.add(t),e}e.exports=n},function(e,t,n){function i(e,t,n){(void 0===n||s(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}var o=n(1040),s=n(207);e.exports=i},function(e,t,n){function i(e,t){return e&&o(t,s(t),e)}var o=n(937),s=n(1001);e.exports=i},function(e,t,n){var i=n(1139),o=n(1224),s=o(i);e.exports=s},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n,i){var l=n.length,c=l,u=!i;if(null==e)return!c;for(e=Object(e);l--;){var p=n[l];if(u&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++l<c;){p=n[l];var d=p[0],h=e[d],f=p[1];if(u&&p[2]){if(void 0===h&&!(d in e))return!1}else{var m=new o;if(i)var g=i(h,f,d,e,t,m);if(!(void 0===g?s(f,h,r|a,i,m):g))return!1}}return!0}var o=n(334),s=n(341),r=1,a=2;e.exports=i},function(e,t,n){function i(e){if(!o(e))return r(e);var t=s(e),n=[];for(var i in e)("constructor"!=i||!t&&l.call(e,i))&&n.push(i);return n}var o=n(85),s=n(335),r=n(1237),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=s(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(1206),s=n(1230),r=n(1077);e.exports=i},function(e,t,n){function i(e,t){return a(e)&&l(t)?c(u(e),t):function(n){var i=s(n,e);return void 0===i&&i===t?r(n,e):o(t,i,p|d)}}var o=n(341),s=n(1244),r=n(1245),a=n(1026),l=n(1076),c=n(1077),u=n(958),p=1,d=2;e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(1041);e.exports=i},function(e,t,n){var i=n(986),o=n(1236),s=o?function(e,t){return o.set(e,t),e}:i;e.exports=s},function(e,t,n){function i(e){if("string"==typeof e)return e;if(r(e))return s(e,i)+"";if(a(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var o=n(138),s=n(999),r=n(135),a=n(974),l=1/0,c=o?o.prototype:void 0,u=c?c.toString:void 0;e.exports=i},function(e,t,n){function i(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(1025);e.exports=i},function(e,t,n){function i(e,t,n){var i=t?n(r(e),a):r(e);return s(i,o,new e.constructor)}var o=n(1200),s=n(1074),r=n(353),a=1;e.exports=i},function(e,t){function n(e){var t=new e.constructor(e.source,i.exec(e));return t.lastIndex=e.lastIndex,t}var i=/\w*$/;e.exports=n},function(e,t,n){function i(e,t,n){var i=t?n(r(e),a):r(e);return s(i,o,new e.constructor)}var o=n(1201),s=n(1074),r=n(354),a=1;e.exports=i},function(e,t,n){function i(e){return r?Object(r.call(e)):{}}var o=n(138),s=o?o.prototype:void 0,r=s?s.valueOf:void 0;e.exports=i},function(e,t){function n(e,t,n,o){for(var s=-1,r=e.length,a=n.length,l=-1,c=t.length,u=i(r-a,0),p=Array(c+u),d=!o;++l<c;)p[l]=t[l];for(;++s<a;)(d||s<r)&&(p[n[s]]=e[s]);for(;u--;)p[l++]=e[s++];return p}var i=Math.max;e.exports=n},function(e,t){function n(e,t,n,o){for(var s=-1,r=e.length,a=-1,l=n.length,c=-1,u=t.length,p=i(r-l,0),d=Array(p+u),h=!o;++s<p;)d[s]=e[s];for(var f=s;++c<u;)d[f+c]=t[c];for(;++a<l;)(h||s<r)&&(d[f+n[a]]=e[s++]);return d}var i=Math.max;e.exports=n},function(e,t,n){function i(e,t){return o(e,s(e),t)}var o=n(937),s=n(343);e.exports=i},function(e,t,n){function i(e,t){return o(e,s(e),t)}var o=n(937),s=n(1075);e.exports=i},function(e,t,n){function i(e){return o(function(t,n){var i=-1,o=n.length,r=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,a&&s(n[0],n[1],a)&&(r=o<3?void 0:r,o=1),t=Object(t);++i<o;){var l=n[i];l&&e(t,l,i,r)}return t})}var o=n(1341),s=n(1355);e.exports=i},function(e,t,n){function i(e,t){return function(n,i){if(null==n)return n;if(!o(n))return e(n,i);for(var s=n.length,r=t?s:-1,a=Object(n);(t?r--:++r<s)&&!1!==i(a[r],r,a););return n}}var o=n(329);e.exports=i},function(e,t){function n(e){return function(t,n,i){for(var o=-1,s=Object(t),r=i(t),a=r.length;a--;){var l=r[e?a:++o];if(!1===n(s[l],l,s))break}return t}}e.exports=n},function(e,t,n){function i(e,t,n,b,k,E,C,w,I,S){function O(){for(var h=arguments.length,f=Array(h),m=h;m--;)f[m]=arguments[m];if(T)var g=c(O),v=r(f,g);if(b&&(f=o(f,b,k,T)),E&&(f=s(f,E,C,T)),h-=v,T&&h<S){var y=p(f,g);return l(e,t,i,O.placeholder,n,f,y,w,I,S-h)}var M=P?n:this,j=_?M[e]:e;return h=f.length,w?f=u(f,w):x&&h>1&&f.reverse(),N&&I<h&&(f.length=I),this&&this!==d&&this instanceof O&&(j=L||a(j)),j.apply(M,f)}var N=t&v,P=t&h,_=t&f,T=t&(m|g),x=t&y,L=_?void 0:a(e);return O}var o=n(1219),s=n(1220),r=n(1346),a=n(1053),l=n(1227),c=n(1229),u=n(1359),p=n(1112),d=n(48),h=1,f=2,m=8,g=16,v=128,y=512;e.exports=i},function(e,t,n){function i(e,t,n,i,h,f,m,g,v,y){var b=t&u,k=b?m:void 0,E=b?void 0:m,C=b?f:void 0,w=b?void 0:f;t|=b?p:d,(t&=~(b?d:p))&c||(t&=~(a|l));var I=[e,t,h,C,k,w,E,g,v,y],S=n.apply(void 0,I);return o(e)&&s(S,I),S.placeholder=i,r(S,e,t)}var o=n(1234),s=n(1239),r=n(1240),a=1,l=2,c=4,u=8,p=32,d=64;e.exports=i},function(e,t,n){function i(e){for(var t=e.name+"",n=o[t],i=r.call(o,t)?n.length:0;i--;){var s=n[i],a=s.func;if(null==a||a==e)return s.name}return t}var o=n(1358),s=Object.prototype,r=s.hasOwnProperty;e.exports=i},function(e,t){function n(e){return e.placeholder}e.exports=n},function(e,t,n){function i(e){for(var t=s(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,o(r)]}return t}var o=n(1076),s=n(327);e.exports=i},function(e,t,n){function i(e,t,n){t=o(t,e);for(var i=-1,u=t.length,p=!1;++i<u;){var d=c(t[i]);if(!(p=null!=e&&n(e,d)))break;e=e[d]}return p||++i!=u?p:!!(u=null==e?0:e.length)&&l(u)&&a(d,u)&&(r(e)||s(e))}var o=n(1e3),s=n(337),r=n(135),a=n(336),l=n(211),c=n(958);e.exports=i},function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,o=i.hasOwnProperty;e.exports=n},function(e,t,n){function i(e,t,n,i){var T=e.constructor;switch(t){case b:return o(e);case p:case d:return new T(+e);case k:return s(e,i);case E:case C:case w:case I:case S:case O:case N:case P:case _:return u(e,i);case h:return r(e,i,n);case f:case v:return new T(e);case m:return a(e);case g:return l(e,i,n);case y:return c(e)}}var o=n(1025),s=n(1214),r=n(1215),a=n(1216),l=n(1217),c=n(1218),u=n(1105),p="[object Boolean]",d="[object Date]",h="[object Map]",f="[object Number]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",k="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",w="[object Int8Array]",I="[object Int16Array]",S="[object Int32Array]",O="[object Uint8Array]",N="[object Uint8ClampedArray]",P="[object Uint16Array]",_="[object Uint32Array]";e.exports=i},function(e,t,n){function i(e){var t=r(e),n=a[t];if("function"!=typeof n||!(t in o.prototype))return!1;if(e===n)return!0;var i=s(n);return!!i&&e===i[0]}var o=n(1097),s=n(1110),r=n(1228),a=n(1388);e.exports=i},function(e,t,n){function i(e){var t=o(e,function(e){return n.size===s&&n.clear(),e}),n=t.cache;return t}var o=n(1247),s=500;e.exports=i},function(e,t,n){var i=n(359),o=i&&new i;e.exports=o},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){function i(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=s(i.length-t,0),l=Array(a);++r<a;)l[r]=i[t+r];r=-1;for(var c=Array(t+1);++r<t;)c[r]=i[r];return c[t]=n(l),o(e,this,c)}}var o=n(1099),s=Math.max;e.exports=i},function(e,t,n){var i=n(1212),o=n(1241),s=o(i);e.exports=s},function(e,t,n){function i(e,t,n){var i=t+"";return r(e,s(i,a(o(i),n)))}var o=n(1352),s=n(1353),r=n(1113),a=n(1361);e.exports=i},function(e,t){function n(e){var t=0,n=0;return function(){var r=s(),a=o-(r-n);if(n=r,a>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,o=16,s=Date.now;e.exports=n},function(e,t,n){function i(e,t){return(a(e)?o:s)(e,r(t,3))}var o=n(360),s=n(1334),r=n(1102),a=n(135);e.exports=i},function(e,t,n){function i(e,t,n){return o(s,e,t,n)}var o=n(1372),s=n(1374);e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(1041);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&s(e,t,o)}var o=n(1205),s=n(1231);e.exports=i},function(e,t,n){function i(e){return"string"==typeof e||!s(e)&&r(e)&&o(e)==a}var o=n(87),s=n(135),r=n(86),a="[object String]";e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(s);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var r=e.apply(this,i);return n.cache=s.set(o,r)||s,r};return n.cache=new(i.Cache||o),n}var o=n(210),s="Expected a function";i.Cache=o,e.exports=i},function(e,t,n){var i=n(1339),o=n(1223),s=o(function(e,t,n){i(e,t,n)});e.exports=s},function(e,t,n){function i(e){return r(e)?o(a(e)):s(e)}var o=n(1210),s=n(1211),r=n(1026),a=n(958);e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(1384);e.exports=i},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=i(o),r=n(31),a=i(r),l=n(995),c=(0,l.defaultStyle)({fontWeight:"inherit"}),u=c(function(e){var t=e.display,n=e.style;return s.default.createElement("strong",n,t)});u.propTypes={onAdd:a.default.func,onRemove:a.default.func,renderSuggestion:a.default.func,trigger:a.default.oneOfType([a.default.string,a.default.instanceOf(RegExp)]),isLoading:a.default.bool},u.defaultProps={trigger:"@",onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1},t.default=u},,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e){var t=e.style,n=e.className,i=e.classNames,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.default,l=(0,v.default)(t),u=n||A(i),d=l?t:function(e,n){var l=D(e);(0,T.default)((0,p.default)(l),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),(0,T.default)(!n||(0,m.default)(n),"Optional second parameter must be a plain object.");var d=(0,c.default)(j.isModifier,l),h=(0,c.default)(j.isElement,l),f=h.length>0?function(e){return(0,S.default)((0,M.pickNestedStyles)(e,h))}:function(e){return[e]},g=(0,a.default)(f,function(e){return(0,M.hoistModifierStylesRecursive)(e,d)}),v=R(u,h,d);return s(P({},(t||n)&&{style:w.default.apply(void 0,[{}].concat(o(g(n)),o(g(t))))},v&&{className:v.join(" ")},i&&{classNames:i}),r)},h=P({},l?t:{style:t}),f=[].concat(o(h.className?h.className.split(" "):[]),o(u?u.split(" "):[])),g=i?(0,b.default)(f.map(function(e){return i[e]})):f,y=r(P({},h,g.length>0&&{className:g.join(" ")}));return(0,E.default)(d,y),d}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1375),a=i(r),l=n(1376),c=i(l),u=n(135),p=i(u),d=n(1246),h=i(d),f=n(338),m=i(f),g=n(206),v=i(g),y=n(1366),b=i(y),k=n(1364),E=i(k),C=n(1248),w=i(C),I=n(1118),S=i(I),O=n(327),N=i(O),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=n(18),T=i(_),x=n(1427),L=i(x),M=n(1265),j=n(1264),D=function(e){return e?(0,h.default)(e)?[e]:(0,m.default)(e)?(0,N.default)(e).reduce(function(t,n){return t.concat(e[n]?[n]:[])},[]):e:[]},A=function(e){var t=e&&(0,N.default)(e)[0];return t&&t.split("__")[0].split("--")[0]},R=function(e,t,n){if(e){var i=e.split(" ")[0],s=[].concat(o(0===t.length?n.map(function(e){return i+"--"+e.substring(1)}):[]),o(t.map(function(e){return i+"__"+e})));return 0===t.length?[e].concat(o(s)):s}};t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=t.isModifier=void 0;var i=n(1381),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=t.isModifier=function(e){return"&"===e[0]};t.isElement=(0,o.default)(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hoistModifierStylesRecursive=t.pickNestedStyles=t.pickDirectStyles=void 0;var s=n(1242),r=i(s),a=n(1118),l=i(a),c=n(1116),u=i(c),p=n(1248),d=i(p),h=n(327),f=i(h),m=n(1264),g=function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},v=(t.pickDirectStyles=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,f.default)(e),i={},o=0,s=n.length;o<s;o+=1){var r=n[o];("[object Object]"!==Object.prototype.toString.call(e[r])||":"===r[0]||"@"===r[0]||t.indexOf(r)>=0)&&(i[r]=e[r])}return i},t.pickNestedStyles=function(e,t){for(var n=t.map(g),i=(0,f.default)(e),o={},s=0,r=i.length;s<r;s+=1){var a=i[s];(t.indexOf(a)>=0||n.indexOf(g(a))>=0)&&(o[a]=e[a])}return o});t.hoistModifierStylesRecursive=function e(t,n){for(var i=d.default.apply(void 0,[{},(0,u.default)(t,n)].concat(o((0,l.default)(v(t,n))))),s=(0,r.default)((0,f.default)(i),m.isModifier),a=0,c=s.length;a<c;a+=1){var p=s[a],h=e(i[p],n);n.indexOf(p)>=0?(delete i[p],i=(0,d.default)({},i,h)):i[p]=h}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextTypes=t.PropTypes=t.ENHANCER_CONTEXT_NAME=void 0;var i=n(31),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=t.ENHANCER_CONTEXT_NAME="__substyle__Enhancer",r=o.default.oneOfType([o.default.func,o.default.object]),a=o.default.objectOf(o.default.string);t.PropTypes={style:r,className:o.default.string,classNames:a},t.ContextTypes=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},s,o.default.func)},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),l=n.n(a),c=n(59),u=n.n(c),p=n(826),d=n(17),h=n(32),f=n(357),m=n(905),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n.toggleModal=n.toggleModal.bind(n),n.onStatusUpdate=n.onStatusUpdate.bind(n),n}return r(t,e),g(t,[{key:"componentDidUpdate",value:function(e){e.open!=this.state.open&&(this.state.open&&!this.props.isInlineDisplay?n.i(h.e)()?n.i(f.a)(this.refs.overlay):document.body.style.overflow="hidden":n.i(h.e)()?n.i(f.b)(this.refs.overlay):document.body.style.overflow="auto")}},{key:"onStatusUpdate",value:function(e){e&&this.toggleModal()}},{key:"toggleModal",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){if(!this.props.video)return null;if(!this.props.hasVideo&&!this.props.video.get("hasVideo"))return null;var e=this.props.isInlineDisplay,t=l.a.createElement(p.CLVideoPlayerContainer,i({onStatusUpdate:this.onStatusUpdate,audio:this.props.video.getIn(["videoInfo","video","audioUrl"],null),blocks:this.props.video.getIn(["videoInfo","video","outputConfig"],null),toc:this.props.video.getIn(["videoInfo","video","additionalOutputData","tableOfContents"],null),videoId:this.props.video.getIn(["videoInfo","video","eid"],null),videoClass:(e?"":"video-in-modal")+" "+(d.i?"":"full-screen-disabled"),autoplay:!0,forceAutoplay:!0},"onStatusUpdate",this.onStatusUpdate)),n=this.props.placeholderImg?this.props.placeholderImg.replace(m.d,""):null;return l.a.createElement("div",{className:"video-outline-thumb-wrapper"},(e&&!this.state.open||!e)&&l.a.createElement("div",{className:(e?"video-outline-thumb":"video-outline-thumb-modal")+" play",onClick:this.toggleModal,style:this.props.placeholderImg?{backgroundImage:'url("'+n+'")',backgroundSize:"cover"}:{}},l.a.createElement("div",{className:"play"})),e?this.state.open?t:null:l.a.createElement(u.a,{isOpen:this.state.open,overlayClassName:"modal-overlay black",onRequestClose:this.toggleModal,ref:"overlay",className:"modal-video-content"},l.a.createElement("div",{className:"modal-video-content-inner"},d.a&&l.a.createElement("button",{className:"button close-button-custom",onClick:this.toggleModal}),t)))}}]),t}(l.a.PureComponent);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return p});var r=n(1),a=n.n(r),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){return a.a.createElement("div",{className:"videoWrapper"},a.a.createElement("iframe",{src:"https://www.youtube.com/embed/"+e.id+"?rel=0",frameBorder:"0",allowFullScreen:!0}))},u=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"spoiler"},this.props.children)}}]),t}(a.a.Component),p=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"caption"},this.props.children)}}]),t}(a.a.Component)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{tagsMap:e.get("tags"),communities:e.get("communities"),discussions:e.get("discussions")}}n.d(t,"a",function(){return E});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(829),n(131)),d=n(889),h=n(330),f=n(1045),m=n(132),g=(n.n(m),n(324)),v=n(39),y=(n.n(v),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),b=n.i(h.e)(d.a),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTagClick=n.onTagClick.bind(n),n}return s(t,e),y(t,[{key:"onTagClick",value:function(){this.props.onClose&&this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props.discussions.getIn([this.props.discussionId]),i=null;this.props.tags&&(i=this.props.tags.map(function(t,n){return e.props.tagsMap.get(t)?l.a.createElement(u.Link,{className:"no-decoration",to:"/discussion/"+e.props.discussionId+"/"+t,onClick:e.onTagClick},l.a.createElement("div",{className:e.props.activeTagId==t?"sidebar-label tag-label active":"sidebar-label tag-label"},e.props.tagsMap.get(t).get("name")," ",l.a.createElement("span",{className:"posts-count"},e.props.tagsMap.get(t).get("postsCount")))):null}));var o=(this.props.communities.getIn([this.props.communityId,"groupThreads",0],null),this.props.communities.getIn([this.props.communityId,"liveUsersCount"],null),this.props.discussions.getIn([this.props.discussionId,"relatedDiscussions"],n.i(v.List)()).map(function(t){if("heading"==t.get("type"))return l.a.createElement("div",{className:"section-heading"},t.get("data"));var i=t.get("item"),o=e.props.discussions.get(i),s=o.get("description")||o.getIn(["snippet40","snippet"],"")||o.getIn(["snippet20","snippet"],"");return l.a.createElement("div",{className:"sidebar-row zoom-on-hover zoom-to-normal"},l.a.createElement("div",{className:"related-discussion "+(t.get("campaign")?t.get("campaign"):"")},l.a.createElement(u.Link,{to:"/discussion/"+i},l.a.createElement("div",{className:"sidebar-label multi discussion-title"},o.get("name")),l.a.createElement("div",{className:"sidebar-label multi description-label"},n.i(p.n)(s,200)))))}),null);this.props.acButtons&&(o=this.props.acButtons.map(function(e){return l.a.createElement("a",{href:e.url,target:"_blank"},l.a.createElement("button",{className:"label with-right-padding"},e.display))}));var s=t&&t.get("ah")?{__html:t.get("ah")}:null,r=((this.props.discussions.getIn([this.props.discussionId,"contributionInfo","contributionInfo"])||n.i(v.List)()).map(function(t){var n=Math.round(parseFloat(t.get("percent")));return l.a.createElement(b,{isCompact:!0,percent:n?n+"%":"Minor",hideFollowButton:!0,userId:t.get("author"),shouldLinkToUser:!0,offsetTop:-40,offsetLeft:120,key:"contributor-"+t.get("author"),communityId:e.props.communityId})}),this.props.discussions.getIn([this.props.discussionId,"creator"])||null),a=(r&&l.a.createElement(b,{isCompact:!0,hideFollowButton:!0,userId:r,shouldLinkToUser:!0,offsetTop:-40,offsetLeft:120,communityId:this.props.communityId}),"sidebar discussion right fixed");this.props.inModal&&(a+=" in-modal"),this.props.isFaded&&(a+=" faded");var c=this.props.inModal&&0==(this.props.discussions.getIn([this.props.discussionId,"toc"],n.i(v.List)())||n.i(v.List)()).size&&0==(this.props.discussions.getIn([this.props.discussionId,"typeInfo","items","toc"],n.i(v.List)())||n.i(v.List)()).size&&(this.props.isDiscussionCollapsed||0==i.size);return l.a.createElement("div",{className:a},l.a.createElement("div",{className:"content"},o&&o.length>0?o:null,s?l.a.createElement("div",{dangerouslySetInnerHTML:s}):null,this.props.autolinkURL?l.a.createElement(u.Link,{to:this.props.autolinkURL},l.a.createElement("button",{className:"label"},"Autolink")):null,this.props.inModal?l.a.createElement(f.a,{onClick:this.props.onClickTOC,discussion:t}):null,!this.props.isDiscussionCollapsed&&this.props.inModal&&i.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Discussion Filters"),l.a.createElement(u.Link,{className:"no-decoration",to:"/discussion/"+this.props.discussionId+"/main",onClick:this.onTagClick},l.a.createElement("div",{className:"main"==this.props.activeTagId?"sidebar-label active":"sidebar-label"},this.props.shouldShowAllTag?"Summary":l.a.createElement("span",null,"All ",g.b," ",l.a.createElement("span",{className:"posts-count"},this.props.discussions.getIn([this.props.discussionId,"postsCount"],0))))),this.props.shouldShowAllTag?l.a.createElement(u.Link,{className:"no-decoration",to:"/discussion/"+this.props.discussionId+"/all",onClick:this.onTagClick},l.a.createElement("div",{className:"all"==this.props.activeTagId?"sidebar-label active has-extra-margin":"sidebar-label has-extra-margin"},"All ",g.b," ",l.a.createElement("span",{className:"posts-count"},this.props.discussions.getIn([this.props.discussionId,"postsCount"],0)))):null,i):null,c?l.a.createElement("div",{className:"onboarding-text-label"},"This tutorial doesn't have a table of contents."):null))}}]),t}(l.a.PureComponent),E=n.i(c.connect)(r)(k)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{tags:e.get("tags"),postRecommendations:e.get("newDiscussionPostRecommendation")}}n.d(t,"a",function(){return E});var a=n(1),l=n.n(a),c=n(59),u=n.n(c),p=n(39),d=(n.n(p),n(15)),h=(n.n(d),n(37)),f=(n.n(h),n(38)),m=n(1308),g=n(203),v=n.n(g),y=n(1082),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.TYPE="tag",n.fetchRecommendations=n.fetchRecommendations.bind(n),n.onSearch=n.onSearch.bind(n),n.onClose=n.onClose.bind(n),n.hasNoTagsSelected=n.hasNoTagsSelected.bind(n),n.clearState=n.clearState.bind(n),n.state={currentSearchQuery:"",isFetchingRecommendations:!1,fetchRecommendationsDeferredParams:null},n}return s(t,e),b(t,[{key:"fetchRecommendations",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentSearchQuery,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.html;this.state.isFetchingRecommendations?this.setState({fetchRecommendationsDeferredParams:{query:t,html:n}}):(this.setState({isFetchingRecommendations:!0}),this.props.fetchDiscussionPostRecommendations(n,t,this.props.discussionId,this.props.postId,this.props.parent),window.setTimeout(function(){if(e.state.fetchRecommendationsDeferredParams){var t=e.state.fetchRecommendationsDeferredParams;e.setState({fetchRecommendationsDeferredParams:null,isFetchingRecommendations:!1}),e.fetchRecommendations(t.query,t.html)}else e.setState({isFetchingRecommendations:!1})},500))}},{key:"onSearch",value:function(e){this.setState({currentSearchQuery:e}),this.fetchRecommendations(e)}},{key:"hasNoTagsSelected",value:function(){return 0==this.props.selectedTags.length}},{key:"onClose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];this.props.onRequestClose(this.props.postId,t,n)}},{key:"clearState",value:function(){this.setState({currentSearchQuery:""})}},{key:"render",value:function(){var e=this;return l.a.createElement(u.a,{isOpen:this.props.isOpen,onRequestClose:this.onClose,className:"modal-content",overlayClassName:"modal-overlay"},l.a.createElement(v.a,{transitionName:"modal",transitionAppear:!0,transitionAppearTimeout:200},this.props.shouldAllowDirectPosting?l.a.createElement("div",{className:"modal-header"},l.a.createElement("div",{className:"left"},l.a.createElement("button",{className:"button back-button",onClick:this.onClose},"Back to reply")),l.a.createElement("div",{className:"shifted-right"},l.a.createElement(y.a,{schedulingOptions:this.props.schedulingOptions,onClick:function(t,n){return e.onClose(t,!0,n)}}))):l.a.createElement("button",{className:"button done-button",onClick:this.onClose},"Done"),l.a.createElement("div",{className:"section-heading tags"},"Tags"),l.a.createElement(m.a,{fetchRecommendations:this.fetchRecommendations,onSearch:this.onSearch,postRecommendations:this.props.postRecommendations,currentSearchQuery:this.state.currentSearchQuery,updateSelectedTags:this.props.updateSelectedTags,tags:this.props.tags,newlySelectedTags:this.props.selectedTags,initialTags:this.props.initialTags,onClear:this.clearState,useBackendIsSelected:this.props.useBackendIsSelected||!1}),l.a.createElement("div",{className:"onboarding-text-label"},'Tags allow participants in a discussion to organize the posts better. For example, if you expect people to debate two sides in a discussion, "For" and "Against" are probably good tags to add. Some tags are added automatically by us and are always allowed to be used, but you can also add more tags above.')))}}]),t}(l.a.PureComponent),E=n.i(h.connect)(r,{fetchDiscussionPostRecommendations:f._16})(n.i(d.withRouter)(k))},function(e,t,n){e.exports=n.p+"9a30e6c6c75344e5bd217bbe9720ef3e.png"},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var r=n(1),a=n.n(r),l=n(15),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"continue-where-you-left-off-section"},a.a.createElement("div",{className:"label uppercase dark-blue"},this.props.isUpNextFirstItem?"First item for you:":"Next item for you:"),a.a.createElement("div",{className:"split-section"},a.a.createElement("div",{className:"left-section"},a.a.createElement("div",{className:"title"},a.a.createElement(l.Link,{to:"/discussion/"+this.props.upNextDiscussionId,className:"no-decoration"},this.props.name))),a.a.createElement("div",{className:"right-section"},a.a.createElement(l.Link,{to:"/discussion/"+this.props.upNextDiscussionId,className:"no-decoration"},a.a.createElement("button",{className:"action-button blue large very-very-wide no-max-width"},this.props.isUpNextFirstItem?"Start":"Continue"," ",this.props.isPath?"path":"course"," →")))))}}]),t}(a.a.PureComponent)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),discussions:e.get("discussions"),currentLoggedInUser:e.get("currentLoggedInUser"),experiments:e.get("experiments")}}n.d(t,"a",function(){return O});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(132)),p=n.n(u),d=(n(890),n(323)),h=n(15),f=(n.n(h),n(38)),m=n(97),g=n(1004),v=n(910),y=(n(340),n(17)),b=n(131),k=n(39),E=(n.n(k),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),C=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),E(t,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.isSubscribed?"action-button very-wide subscribed":"action-button wide subscribe",onClick:this.props.onClick},l.a.createElement("span",{className:"button-section"},this.props.isSubscribed?"Enrolled":"Enroll"),this.props.subscribersCount>10?l.a.createElement("span",{className:"button-section"},this.props.subscribersCount):null)}}]),t}(l.a.PureComponent),w=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),E(t,[{key:"render",value:function(){return l.a.createElement("span",{className:"checkbox",onClick:this.props.onClick})}}]),t}(l.a.PureComponent),I=(n.i(d.a)(C,d.c),n.i(d.a)(w,d.e)),S=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleToggleSubscribe=n.handleToggleSubscribe.bind(n),n.handleToggleCompleted=n.handleToggleCompleted.bind(n),n.updateSubscription=n.updateSubscription.bind(n),n.getHasSubscribed=n.getHasSubscribed.bind(n),n.getPlaylistId=n.getPlaylistId.bind(n),n.toggleSectionCollapse=n.toggleSectionCollapse.bind(n),n.toggleSectionDescriptionCollapse=n.toggleSectionDescriptionCollapse.bind(n),n.state={uncollapsedSectionsIndices:[0],uncollapsedSectionDescriptionIndices:[0]},n}return s(t,e),E(t,[{key:"toggleSectionCollapse",value:function(e){var t=this.state.uncollapsedSectionsIndices.indexOf(e);-1==t?this.setState({uncollapsedSectionsIndices:this.state.uncollapsedSectionsIndices.concat([e])}):this.setState({uncollapsedSectionsIndices:this.state.uncollapsedSectionsIndices.slice(0,t).concat(this.state.uncollapsedSectionsIndices.slice(t+1))})}},{key:"toggleSectionDescriptionCollapse",value:function(e){var t=this.state.uncollapsedSectionDescriptionIndices.indexOf(e);-1==t?this.setState({uncollapsedSectionDescriptionIndices:this.state.uncollapsedSectionDescriptionIndices.concat([e])}):this.setState({uncollapsedSectionDescriptionIndices:this.state.uncollapsedSectionDescriptionIndices.slice(0,t).concat(this.state.uncollapsedSectionDescriptionIndices.slice(t+1))})}},{key:"getHasSubscribed",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).discussion.getIn(["typeInfo","subscription","hasSubscribed"],!1)}},{key:"getPlaylistId",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).discussion.getIn(["typeInfo","eid"],!1)}},{key:"handleToggleSubscribe",value:function(){var e=this.getHasSubscribed();this.updateSubscription(!e,[])}},{key:"updateSubscription",value:function(e,t){t.length>0&&-1==t[0].value&&(t=[{value:0},{value:1},{value:2},{value:3},{value:4},{value:5},{value:6}]),this.props.updateDiscussionSubscription(this.props.discussion.get("eid"),e,t.map(function(e){return e.value}))}},{key:"handleToggleCompleted",value:function(e){this.props.toggleDiscussionCompleted(e,this.props.discussion.get("eid"),!1)}},{key:"convertPlaylistItemsToPlaylistSections",value:function(e){var t=[],n={content:null,items:[]};if(0==e.length)return t;var i=0;for("playlist_section"==e[i].type&&(n.content=e[i].playlistSection,i+=1);i<e.length;i++)"playlist_section"==e[i].type?(t.push(n),n={content:e[i].playlistSection,items:[]}):n.items.push(e[i].eid);return t.push(n),t}},{key:"render",value:function(){var e=this,t=this.props.discussion.get("typeInfo");if(!t)return null;for(var i=this.props.discussion.getIn(["rating","isRateable"],!1),o=this.props.discussion.hasIn(["typeInfo","subscription","hasSubscribed"]),s=this.getHasSubscribed(),r=this.props.discussion.getIn(["textStats","playlistitemCount"],0),a=r,c=t.getIn(["items","discussions"],n.i(k.List)()).size,u=0,d=(t.get("subscribersCount"),this.convertPlaylistItemsToPlaylistSections(t.getIn(["items","ordering"],n.i(k.List)()).toJS())),f=[],E=0,C=null,w=!1,S=this.props.disallowMarkingAsComplete,O=0;O<d.length;O++)!function(t){var i=d[t],o=i.items.map(function(t){var n=e.props.discussions.get(t),i=n?n.getIn(["timeToRead"],null):null;if(!n)return null;u+=n.get("hasCompleted")?1:0,C||n.get("hasCompleted")||(C=t,w=!(u>0));var o=n.get("canView"),s=n.get("isPremium"),r=n.get("displayType");return r=n.get("hasVideo")?"video":r,l.a.createElement("li",{className:n.get("hasCompleted")?"done":""},o?S?l.a.createElement(h.Link,{to:"/discussion/"+n.get("eid")}," ",l.a.createElement("span",{className:"checkbox"})," "):l.a.createElement(I,{onClick:function(){return e.handleToggleCompleted(t)},to:"/discussion/"+e.props.discussion.get("eid"),allowLurker:!0}):l.a.createElement(h.Link,{to:"/upgrade",className:"lock"}),l.a.createElement("div",{className:"link"},l.a.createElement(h.Link,{to:"/discussion/"+t},n.get("name"))),!s&&l.a.createElement("div",{className:"label"},"Free"),r&&l.a.createElement("div",{title:""+r,className:"type-icon "+r.toLowerCase()}),i&&l.a.createElement("div",{className:"label"},i," ",p()("min",i)))}),s=-1==e.state.uncollapsedSectionsIndices.indexOf(t),r=i.content,a=-1==e.state.uncollapsedSectionDescriptionIndices.indexOf(t),c=y.a&&n.i(b.l)(i.content)>75,m=a&&c,g=l.a.createElement("div",null,i.content&&l.a.createElement("div",null,l.a.createElement(v.a,{className:"playlist-section-content text "+(m?"collapsed-6 ":""),html:r,onClick:function(){return e.toggleSectionDescriptionCollapse(t)}}),c&&l.a.createElement("div",{className:"label large blue playlist-section-read-more",onClick:function(){return e.toggleSectionDescriptionCollapse(t)}},a?"Read More...":"Collapse")),l.a.createElement("ul",{className:"checklist"},d.length>1&&l.a.createElement("button",{className:"show-all "+(s?"":"reversed"),onClick:function(){return e.toggleSectionCollapse(t)}},s?"View section ("+i.items.length+" items)":"Collapse section"),!s&&o));f.push(g),E+=i.items.length}(O);return l.a.createElement("div",{className:"playlist-section"},l.a.createElement("div",{className:"user-content-syllabus separator"},"Syllabus"),f,a>c?l.a.createElement("span",{className:"loader-span extra-padding-left"},l.a.createElement(m.a,null)):null,o?l.a.createElement("div",{className:"playlist-options-box inside-metadata"},s&&l.a.createElement("div",{className:"compact-progress-section"},l.a.createElement("span",{className:"progress-line label"},u," out of ",r," ",p()("item",r)," completed.")),i?l.a.createElement("div",{className:"feedback-section-wrapper"},l.a.createElement(g.a,{discussionId:this.props.discussion.get("eid"),displayedPlaylistId:this.getPlaylistId()})):null,C?l.a.createElement("div",{className:"split-section"},l.a.createElement("div",{className:"next-section",onClick:function(){return h.browserHistory.push("/discussion/"+C)}},l.a.createElement("div",{className:"next-label"},w?"Start this course":"Next up for you"),l.a.createElement("div",{className:"label"},this.props.discussions.getIn([C,"name"],null)))):null):null)}}]),t}(l.a.PureComponent);S.contextTypes={location:l.a.PropTypes.object};var O=n.i(c.connect)(r,{toggleDiscussionCompleted:f.t,updateDiscussionSubscription:f.M},null,{withRef:!0})(S)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),tags:e.get("tags"),postsMap:e.get("discussionPosts"),discussions:e.get("discussions"),communities:e.get("communities"),currentLoggedInUser:e.get("currentLoggedInUser"),newDiscussionPostRecommendation:e.get("newDiscussionPostRecommendation")}}n.d(t,"a",function(){return R});var a=n(1),l=n.n(a),c=n(53),u=(n.n(c),n(37)),p=(n.n(u),n(890)),d=n(15),h=(n.n(d),n(132)),f=n.n(h),m=n(133),g=n(1453),v=n(1434),y=n(1272),b=n(1448),k=n(38),E=n(1059),C=n(1058),w=n(1436),I=n(1032),S=n(131),O=n(39),N=(n.n(O),n(330)),P=n(58),_=n(325),T=n(32),x=n(203),L=(n.n(x),n(1449)),M=n(910),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),A=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getInitialState=n.getInitialState.bind(n),n.onReadMoreClick=n.onReadMoreClick.bind(n),n.areTagsEditable=n.areTagsEditable.bind(n),n.onTagsClick=n.onTagsClick.bind(n),n.onRequestCloseTagsModal=n.onRequestCloseTagsModal.bind(n),n.onMoreOptionsClick=n.onMoreOptionsClick.bind(n),n.onRequestCloseMoreOptionsModal=n.onRequestCloseMoreOptionsModal.bind(n),n.toggleUpvote=n.toggleUpvote.bind(n),n.toggleBookmark=n.toggleBookmark.bind(n),n.updateSelectedTags=n.updateSelectedTags.bind(n),n.onPostDelete=n.onPostDelete.bind(n),n.onContentClick=n.onContentClick.bind(n),n.onSharePost=n.onSharePost.bind(n),n.uncollapse=n.uncollapse.bind(n),n.expandPreview=n.expandPreview.bind(n),n.getTextRelatedState=n.getTextRelatedState.bind(n),n.onParticipantsModalRequestClose=n.onParticipantsModalRequestClose.bind(n),n.fetchRecommendations=n.fetchRecommendations.bind(n),n.inviteToDiscussion=n.inviteToDiscussion.bind(n),n.imageModalOnRequestClose=n.imageModalOnRequestClose.bind(n),n.onPublishFn=n.onPublishFn.bind(n),n.state=n.getInitialState(),n.setRef=n.setRef.bind(n),n}return s(t,e),D(t,[{key:"getInitialState",value:function(){var e=this.props.post.get("text")||this.props.post.getIn(["snippet40","snippet"],"")||this.props.post.getIn(["snippet20","snippet"],"");return j({isCollapsed:this.props.isCollapsed,isPreview:this.props.isPreview,isTextCollapsed:!0,isTagsModalOpen:!1,isInviteParticipantsModalOpen:!1,isImageModalOpen:!1,prompt:null,onlyShowExternalShares:!1,potentialHeightChangeInNextRender:!1,selectedTags:[],isMoreOptionsModalOpen:!1,modalImageUrlLarge:null,modalImageUrlSmall:null},this.getTextRelatedState(e))}},{key:"getTextRelatedState",value:function(e){var t=n.i(S.n)(e,[50,g.a]);return{textLength:n.i(S.l)(e),wordCount:this.props.post.getIn(["textStats","wordCount"],0),snippetTweet:t[g.a],snippet:t[50]}}},{key:"setRef",value:function(e){this.textRef=e}},{key:"componentDidMount",value:function(){var e=this.props.post.get("text")||this.props.post.getIn(["snippet40","snippet"],"")||this.props.post.getIn(["snippet20","snippet"],""),t=this.state.textLength*(22/70)+n.i(S.m)(e);((t=Math.max(this.textRef?this.textRef.clientHeight:0,t))<220||this.props.fixedTextHeight||this.props.isExpanded&&t<440)&&this.setState({isTextCollapsed:!1,potentialHeightChangeInNextRender:!0})}},{key:"componentDidUpdate",value:function(){this.state.potentialHeightChangeInNextRender&&(this.setState({potentialHeightChangeInNextRender:!1}),this.props.onPotentialHeightChange&&this.props.onPotentialHeightChange())}},{key:"componentWillReceiveProps",value:function(e){if(e.post.hasIn(["schedulingInfo","type"])&&"true"===n.i(P.c)("pc")){if("PUBLISHED"!=e.post.getIn(["schedulingInfo","type"])||!1===e.showPostReplySharingPrompt)return void e.router.replace(window.location.pathname);e.isHighlighted&&"PUBLISHED"==e.post.getIn(["schedulingInfo","type"])&&(this.props.router.replace(window.location.pathname),this.state.textLength>400&&this.setState({isInviteParticipantsModalOpen:!0,onlyShowExternalShares:!0,prompt:!0}))}if(e.tag!=this.props.tag&&this.setState({isCollapsed:e.isCollapsed,isPreview:e.isPreview}),e.post!=this.props.post){var t=e.post.get("text")||e.post.getIn(["snippet40","snippet"],"")||e.post.getIn(["snippet20","snippet"],"");this.setState(this.getTextRelatedState(t))}}},{key:"onParticipantsModalRequestClose",value:function(){this.setState({isInviteParticipantsModalOpen:!1,onlyShowExternalShares:!1,prompt:null})}},{key:"onPublishFn",value:function(){this.props.publishDiscussionPost(this.props.post.get("eid"))}},{key:"fetchRecommendations",value:function(e,t){this.props.fetchDiscussionPostRecommendations(null,e,null,this.props.post.get("eid"),null,"users")}},{key:"inviteToDiscussion",value:function(e,t,n){this.props.inviteToDiscussionPost(this.props.post.get("eid"),t)}},{key:"imageModalOnRequestClose",value:function(){this.setState({isImageModalOpen:!1})}},{key:"onSharePost",value:function(){this.setState({isMoreOptionsModalOpen:!1}),this.setState({isInviteParticipantsModalOpen:!0})}},{key:"toggleUpvote",value:function(){this.props.toggleDiscussionPostLike(this.props.post.get("eid"))}},{key:"toggleBookmark",value:function(){this.props.toggleDiscussionPostBookmark(this.props.post.get("eid"))}},{key:"areTagsEditable",value:function(){var e=this.props.post.get("author")==this.props.currentLoggedInUser,t=this.props.discussions.getIn([this.props.discussionId,"isModerator"]),n=this.props.discussions.getIn([this.props.discussionId,"isCommunityModerator"]),i=this.props.currentLoggedInUser&&this.props.users.getIn([this.props.currentLoggedInUser,"isSuperModerator"]);return!(this.props.restrictTagsModal||!this.props.currentLoggedInUser||!e&&!t&&!n&&!i)}},{key:"onTagsClick",value:function(){this.areTagsEditable()&&(this.setState({isTagsModalOpen:!0}),this.props.onTagsModalOpen&&this.props.onTagsModalOpen())}},{key:"updateSelectedTags",value:function(e){this.setState({selectedTags:e})}},{key:"onRequestCloseTagsModal",value:function(e){var t=this.state.selectedTags.filter(function(e){return"local"==e.get("type")}).map(function(e){return e.get("eid")}),i=this.state.selectedTags.filter(function(e){return"local"!=e.get("type")}).map(function(e){return e.toJS()}),o=n.i(O.Set)(this.props.post.get("tags")),s=n.i(O.Set)(t),r=s.subtract(o).toJS(),a=o.subtract(s).toJS();if(0==this.state.selectedTags.length&&n.i(S.o)(this.getDisplayedText())>30)return alert("You need to select some tags."),!1;this.setState({isTagsModalOpen:!1}),(r.length>0||a.length>0||i.length>0)&&this.props.editDiscussionPostTags(e,i,r,a),this.props.onTagsModalClose&&this.props.onTagsModalClose(),this.setState({selectedTags:[]}),this.props.clearState(["newDiscussionPostRecommendation","tags"],n.i(O.Map)())}},{key:"onMoreOptionsClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({isMoreOptionsModalOpen:!0})}},{key:"onRequestCloseMoreOptionsModal",value:function(){this.setState({isMoreOptionsModalOpen:!1})}},{key:"onReadMoreClick",value:function(){this.props.logEvent({type:"view",payload:{sub_type:"read_more",obj:this.props.post.get("eid"),obj_type:"DiscussionPost"}}),this.setState({isTextCollapsed:!1,potentialHeightChangeInNextRender:!0})}},{key:"onPostDelete",value:function(){this.props.deleteDiscussionPost(this.props.post.get("eid"),this.props.discussionId,this.props.redirectAfterDeleteUrl)}},{key:"onContentClick",value:function(e){if(this.props.shouldLinkToPost){e.stopPropagation(),e.preventDefault();var t="/discussion/"+this.props.discussionId+"/all/"+this.props.post.get("eid");e.metaKey?n.i(T.a)(t):d.browserHistory.push(t)}else if(e.target.classList.contains("spoiler")){e.target;"spoiler-content"==e.target.firstChild.className&&e.target.classList.toggle("hidden")}else"IMG"==e.target.nodeName?this.setState({isImageModalOpen:!0,modalImageUrlLarge:n.i(_.a)(e.target.src),modalImageUrlSmall:e.target.src}):n.i(P.d)(e)}},{key:"uncollapse",value:function(){this.setState({isCollapsed:!1}),this.props.logEvent({type:"view",payload:{obj:this.props.post.get("eid"),obj_type:"DiscussionPost",sub_type:"uncollapsed"}})}},{key:"expandPreview",value:function(){this.setState({isPreview:!1}),this.props.logEvent({type:"view",payload:{obj:this.props.post.get("eid"),obj_type:"DiscussionPost",sub_type:"expanded_preview"}})}},{key:"getDisplayedText",value:function(){return this.props.post.get("text")||this.props.post.getIn(["snippet40","snippet"],"")||this.props.post.getIn(["snippet20","snippet"],"")}},{key:"render",value:function(){var e=this;if(!this.props.post)return null;if(!this.props.discussionId)return null;if(this.state.isCollapsed)return l.a.createElement("div",{className:"collapsed-reply",onClick:this.uncollapse},"1 reply collapsed");var t=this.props.users,i=t.get(this.props.post.get("author"));if(!i)return null;var o=this.props.post.get("author")==this.props.currentLoggedInUser,s=this.props.currentLoggedInUser&&this.props.users.get(this.props.currentLoggedInUser).get("isSuperModerator"),r="/discussion/"+this.props.discussionId+"/post/"+this.props.post.get("eid")+"/edit",a=this.props.post.get("parent")?"/discussion/"+this.props.discussionId+"/all/"+this.props.post.get("parent"):"",c=this.props.post.get("tags")&&this.props.post.get("tags").map(function(t,n){return e.props.tags.get(t)?l.a.createElement(d.Link,{className:"no-decoration",to:"/discussion/"+e.props.discussionId+"/"+t},l.a.createElement("div",{className:"tag",key:n},e.props.tags.get(t).get("name"))):null}),u=this.props.discussions.get(this.props.discussionId)||n.i(O.fromJS)({eid:this.props.discussionId}),h=u.get("community")?this.props.communities.get(u.get("community")):null,g=this.state.prompt?"Thanks for contributing to "+(h?"<strong>"+h.get("name")+"</strong>":"the platform")+". "+(h?"This community is still in its early stages and growing thanks to contributions like yours! <br /><br />Would you like to share your reply and spread the word to help the community grow faster?":"We are still in our early stages and growing thanks to contributions like yours! <br /><br />Would you like to share your reply and spread the word so that we can bring CommonLounge to more people"):null,k=u.get("typeInfo")&&"AMA"==u.get("typeInfo").get("type")&&u.get("typeInfo").get("host")==this.props.post.get("author"),P=this.props.post.get("canView"),_=this.props.communityId||u.get("community"),T=i.getIn(["communitiesRank",_],null)||null,x=i.getIn(["communitiesModeratorStatus",_],null)||null,j=i.getIn(["communitiesBio",_],i.get("bio"))||null;if(this.props.fixedBylineLength&&j&&j.length>this.props.fixedBylineLength&&(j=j.substr(0,this.props.fixedBylineLength)+"…"),this.state.isPreview)return l.a.createElement(N.d,{className:"post-line-preview",onClick:this.expandPreview,userId:i.get("eid")},l.a.createElement("span",null,l.a.createElement(m.a,{className:"avatar-image",size:"20",name:i.get("displayName"),src:i.get("avatarUrl")}),l.a.createElement("span",{className:"author-name"},i.get("displayName"))),l.a.createElement("span",{className:"timeago"},l.a.createElement(p.a,{date:this.props.post.get("dtCreated")})),l.a.createElement("span",null,this.state.snippet));var D=this.props.post.getIn(["schedulingInfo","type"],"PUBLISHED"),A=u.getIn(["schedulingInfo","type"],null),R=this.getDisplayedText();return l.a.createElement("div",{className:(this.props.isHighlighted?"highlighted ":"")+(this.props.isCollapsed?"opaque ":"")+"post"},this.props.showPostLabel?l.a.createElement("div",{className:"entity-label no-bottom-padding"},"Post"):null,l.a.createElement(L.a,{type:D}),l.a.createElement(N.d,{className:this.props.showPostLabel?"user-box less-padding":"user-box",userId:i.get("eid")},l.a.createElement(d.Link,{to:"/profile/"+i.get("eid")},l.a.createElement(m.a,{className:T?"avatar-image flair crown":x?"avatar-image flair moderator":"avatar-image",size:"30",name:i.get("displayName"),src:i.get("avatarUrl")})),l.a.createElement("div",{className:"shifted-right"},l.a.createElement(d.Link,{to:"/profile/"+i.get("eid")},l.a.createElement("span",{className:k?"name op":"name"},i.get("displayName"))),l.a.createElement("span",{className:"timeago clickable",onClick:this.onContentClick},j||null,j?" · ":null,l.a.createElement(p.a,{date:this.props.post.get("dtCreated")}))),this.props.hideMoreOptions||!this.props.currentLoggedInUser||this.props.users.get(this.props.currentLoggedInUser).get("isLurker")?null:l.a.createElement("div",{className:"action-container"},l.a.createElement("div",{className:"more-options"},l.a.createElement("div",{className:"more-options-icon",onClick:this.onMoreOptionsClick})),l.a.createElement(b.a,{isOpen:this.state.isMoreOptionsModalOpen,onRequestClose:this.onRequestCloseMoreOptionsModal,onPublishFn:"PUBLISHED"!=D&&"PUBLISHED"==A?this.onPublishFn:null,onDeleteFn:(o||s)&&0==this.props.post.get("replyCount")?this.onPostDelete:null,editUrl:o||s?r:null,onShareFn:this.onSharePost,onReportFn:function(){return e.props.reportContent("post",e.props.post.get("eid"))}}))),this.props.hideTags?null:l.a.createElement("div",{className:"tags"},this.props.post.get("tags").size>0?[l.a.createElement("div",{className:"tag-icon"}),l.a.createElement("div",{className:"tag-list"},c,this.areTagsEditable()?l.a.createElement("span",{className:"edit-tags-icon",onClick:this.onTagsClick}):null)]:this.areTagsEditable()?[l.a.createElement("div",{className:"tag-icon"}),l.a.createElement("div",{className:"label add-tag"},l.a.createElement("span",{onClick:this.onTagsClick}," Add tags "))]:null),this.props.post.get("parent")&&this.props.postsMap.get(this.props.post.get("parent"))&&!this.props.hideParent?l.a.createElement("div",{className:"parent-preview"},l.a.createElement(d.Link,{to:a,className:"no-decoration"},l.a.createElement(E.a,{post:this.props.postsMap.get(this.props.post.get("parent"))}))):null,this.props.showDiscussionPreview?l.a.createElement("div",null,l.a.createElement("div",{className:"label label-with-margins"},"Posted under discussion:"),l.a.createElement(d.Link,{to:"/discussion/"+this.props.discussionId,className:"no-decoration"},l.a.createElement(C.a,{discussion:this.props.discussions.get(this.props.discussionId)}))):null,this.props.hideUserMessage?null:this.props.post.get("userMessage")?l.a.createElement("div",{className:"user-message"},n.i(S.k)(this.props.post.get("userMessage").toJS())):null,l.a.createElement("div",{className:this.props.shouldLinkToPost?"text-container clickable":"text-container",onClick:this.onContentClick},l.a.createElement(M.a,{className:(this.state.isTextCollapsed?"collapsed-10 ":"")+"text",style:this.props.fixedTextHeight?{height:this.props.fixedTextHeight,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:"5",webkitBoxOrient:"vertical",textOverflow:"ellipsis"}:null,html:R,canView:P,setRef:this.setRef})),this.state.isTextCollapsed?l.a.createElement("div",{className:"read-more",onClick:this.onReadMoreClick},l.a.createElement("div",{className:"fadeout",style:{maxWidth:"calc(36em - "+(40+20*(this.props.indentLevel-1))+"px)",width:"calc(100% - "+(40+20*(this.props.indentLevel-1))+"px)"}}),this.state.wordCount>0?l.a.createElement("span",{className:"read-more-text"},"Read more… (",this.state.wordCount," ",f()("word",this.state.wordCount),")"):l.a.createElement("span",{className:"read-more-text"},"Read more…")):null,this.props.fixedTextHeight?l.a.createElement("div",{className:"compact-read-more",onClick:this.onContentClick},"Read ",this.state.textLength>180?"more ":" ","(",this.state.wordCount," ",f()("word",this.state.wordCount),")"):null,!this.props.hideTags&&this.areTagsEditable()?l.a.createElement(y.a,{isOpen:this.state.isTagsModalOpen,onRequestClose:this.onRequestCloseTagsModal,discussionId:this.props.discussionId,postId:this.props.post.get("eid"),initialTags:this.props.post.get("tags"),selectedTags:this.state.selectedTags,updateSelectedTags:this.updateSelectedTags,clearState:this.props.clearState}):null,l.a.createElement(v.a,{objId:this.props.post.get("eid"),objType:"DiscussionPost",hasBookmarked:this.props.post.get("hasBookmarked"),toggleBookmarkFn:this.toggleBookmark,isSelected:this.props.post.get("hasUpvoted"),toggleFn:this.toggleUpvote,repliesUrl:"/discussion/"+this.props.discussionId+"/all/"+this.props.post.get("eid"),replyUrl:this.props.hideReplyLink?null:"/discussion/"+this.props.discussionId+"/post/"+this.props.post.get("eid")+"/post",url:"/discussion/"+this.props.discussionId+"/all/"+this.props.post.get("eid"),title:'"'+this.state.snippetTweet+'"',upvoteCount:this.props.post.get("upvoteCount"),upvoteUrl:"/discussion/"+this.props.discussionId+"/post/"+this.props.post.get("eid")+"/upvoters",replyCount:this.props.hideRepliesLink?null:this.props.post.get("replyCount")}),l.a.createElement(w.a,{isOpen:this.state.isInviteParticipantsModalOpen,onRequestClose:this.onParticipantsModalRequestClose,fetchRecommendations:this.fetchRecommendations,users:this.props.users,isModerator:!1,newDiscussionRecommendation:this.props.newDiscussionPostRecommendation,discussionId:this.props.discussionId,inviteToDiscussion:this.inviteToDiscussion,clearState:this.props.clearState,url:"/discussion/"+this.props.discussionId+"/all/"+this.props.post.get("eid"),title:'"'+this.state.snippetTweet+'"',objType:"DiscussionPost",objId:this.props.post.get("eid"),onlyShowExternalShares:this.state.onlyShowExternalShares,prompt:g}),l.a.createElement(I.a,{isModalOpen:this.state.isImageModalOpen,onRequestClose:this.imageModalOnRequestClose,src:this.state.modalImageUrlLarge,placeHolder:this.state.modalImageUrlSmall}))}}]),t}(l.a.PureComponent),R=n.i(u.connect)(r,{toggleDiscussionPostLike:k._11,toggleDiscussionPostBookmark:k._12,editDiscussionPostTags:k._13,deleteDiscussionPost:k._14,fetchDiscussion:k.D,logEvent:k.c,clearState:k._15,fetchDiscussionPostRecommendations:k._16,inviteToDiscussionPost:k._17,publishDiscussionPost:k._18,reportContent:k._10})(n.i(d.withRouter)(A))},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser")}}var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(59)),p=n.n(u),d=n(38),h=n(140),f=n(324),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n}return s(t,e),m(t,[{key:"onClose",value:function(){this.props.onRequestClose(),this.props.setOnboardingStatus(this.props.type)}},{key:"render",value:function(){var e="";switch(this.props.type){case h.c:e="Every "+f.d+" in a discussion is tagged with a few tags. Click on any of the tags to filter by "+f.e+' with that tag.\n\t\t\t\tNote that "Main" and "All '+f.b+'" are always there.';break;case h.d:e="This is the summary view. It appears only when the discussion has\n\t\t\t\tmore than a certain number of "+f.e+". Top "+f.e+" from popular tags are put\n\t\t\t\ttogether so that you can get a quick overview of the discussion.";break;case h.e:e="This is where communities you moderate, follow, or have joined live. You can click this icon to get to them easily.";break;case h.f:e='Channels streamline content within a community as it grows.\n\t\t\t\tClick on any of the channels to filter activity within that channel. Note that "Main" is a default channel that is always there - it showcases the best activity across all the channels.';break;case h.g:e="This is your home feed. It showcases activity we think you'd find most interesting.\n\t\t\t\tIt contains a mix of discussions, communities, topics and people curated for you.";break;case h.h:e="You can tap this icon at any time to start a discussion. Our editor also supports\n\t\t\t\trich media content such as images, videos, links etc.";break;case h.i:e="This view allows you to see all the replies to a "+f.d+".";break;case h.j:e="Use this real-time chat to talk to other members in this community!";break;default:e="This is the onboarding modal. This will come up to help you understand what's going on."}return l.a.createElement(p.a,{isOpen:this.props.isOpen,onRequestClose:this.onClose,overlayClassName:"modal-overlay onboarding-modal-overlay",className:"modal-content onboarding-modal-content"},l.a.createElement("div",{className:"onboarding-message"},e),l.a.createElement("button",{className:"button option-button bottom-done-button",onClick:this.onClose},"Done"))}}]),t}(l.a.PureComponent);n.i(c.connect)(r,{setOnboardingStatus:d.S})(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions"),links:e.get("links")}}n.d(t,"a",function(){return f});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(132)),p=n.n(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.findSourceWithImage=n.findSourceWithImage.bind(n),n}return s(t,e),d(t,[{key:"findSourceWithImage",value:function(){var e=this.props.discussions.get(this.props.discussionId),t=!0,n=!1,i=void 0;try{for(var o,s=e.get("sources")[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value,a=this.props.links.get(r).get("img");if(a)return a}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}return null}},{key:"render",value:function(){var e=this.props.discussions.get(this.props.discussionId);if(!e)return null;var t=this.findSourceWithImage(),n=null!=t,i=e.get("name"),o=null;return o=n?l.a.createElement("div",{className:"link-image-container",style:{backgroundImage:"url("+t+")"}},l.a.createElement("div",{className:"link-icon"})):l.a.createElement("div",{className:"link-icon"}),l.a.createElement("div",{className:"discussion-preview preview"},o,l.a.createElement("div",{className:"title"},i),l.a.createElement("div",{className:"stats-line"},l.a.createElement("div",{className:"stat"},e.get("participantsCount")," ",p()("participant",e.get("participantsCount"))),l.a.createElement("div",{className:"stat"},e.get("postsCount")," ",p()("post",e.get("postsCount")))))}}]),t}(l.a.PureComponent),f=n.i(c.connect)(r)(h)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(15),c=(n.n(l),n(58)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDelete=n.onDelete.bind(n),n}return s(t,e),u(t,[{key:"onDelete",value:function(){this.props.onDeleteLink(this.props.link.get("url"))}},{key:"render",value:function(){var e=this.props.link.get("img")&&this.props.link.get("img").length>0,t=this.props.link.get("img"),i=this.props.link.get("title"),o=this.props.link.get("author"),s=this.props.link.get("snippet"),r=this.props.link.get("url"),l=this.props.link.get("visitedCount"),u=null;return u=e?a.a.createElement("div",{className:"link-image-container",style:{backgroundImage:"url("+t+")"}},this.props.deletable?a.a.createElement("div",{className:"delete-icon",onClick:this.onDelete}):a.a.createElement("div",{className:"link-icon"})):this.props.deletable?a.a.createElement("div",{className:"no-padding"},a.a.createElement("div",{className:"delete-icon",onClick:this.onDelete})):a.a.createElement("div",{className:"link-icon"}),a.a.createElement("div",{className:"link-preview preview"},u,a.a.createElement("div",{className:"title"},i),e?null:a.a.createElement("div",{className:"author-name"},o),e||null==s?null:a.a.createElement("div",{className:"text"},s),a.a.createElement("div",{className:"url-container"},a.a.createElement("div",{className:"url"},n.i(c.n)(r)),l?a.a.createElement("div",{className:"visited-count"},l," visits"):null))}}]),t}(a.a.PureComponent);t.a=p},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions")}}n.d(t,"a",function(){return h});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),p(t,[{key:"render",value:function(){var e=this;return this.props.upNextDiscussionId?l.a.createElement("div",{className:"signup-prompt bottom visible"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"text"},l.a.createElement("div",null,l.a.createElement("span",{className:"free"},this.props.isUpNextFirstItem?"Start this "+(this.props.isPath?"path":"course")+": ":"Next up for you: "),l.a.createElement("strong",null,this.props.discussions.getIn([this.props.upNextDiscussionId,"name"],"")))),l.a.createElement("div",{className:"button main",onClick:function(){return u.browserHistory.push("/discussion/"+e.props.upNextDiscussionId)}},"Go →"))):null}}]),t}(l.a.PureComponent),h=n.i(c.connect)(r)(d)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return y});var r=n(1),a=n.n(r),l=n(37),c=(n.n(l),n(15)),u=(n.n(c),n(132)),p=n.n(u),d=(n(1005),n(324),n(58)),h=n(17),f=n(325),m=n(905),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentClick=n.onContentClick.bind(n),n}return s(t,e),g(t,[{key:"onContentClick",value:function(e,t){var i=this.props.discussion.get("eid");this.props.onClick&&this.props.onClick(e,i),n.i(d.o)(e,""+h.k+t)}},{key:"render",value:function(){var e=this;if(!this.props.discussion)return null;var t=this.props.discussion.get("eid"),i=n.i(f.c)(this.props.isPlaylistItem?this.props.playlist.getIn(["primaryImage"],null):this.props.discussion.getIn(["primaryImage"],null),null,300),o=this.props.discussion.getIn(["name"],null)||this.props.discussion.getIn(["snippet20"],""),s="/discussion/"+t,r=this.props.discussion.getIn(["typeInfo","stats","courseCount"],null),l=r>0,u=this.props.discussion.getIn(["typeInfo","stats","tutorialCount"],null),d=u>0,h=this.props.discussion.getIn(["typeInfo","stats","projectCount"],null),g=h>0,v=this.props.discussion.getIn(["typeInfo","stats","quizCount"],null),y=v>0;return a.a.createElement(c.Link,{className:"search-result course-search-result no-decoration",to:s,onClick:function(t){return e.onContentClick(t,s)}},a.a.createElement("div",{className:"main-content"},a.a.createElement("div",{className:"text-labels"},a.a.createElement("div",{className:"title"},o),a.a.createElement("div",{className:"pro-content-labels"},l?a.a.createElement("div",{className:"pro-content-label courses"},r," ",p()("Course",r)):null,d?a.a.createElement("div",{className:"pro-content-label tutorials"},u," ",p()("Tutorial",u)):null,g?a.a.createElement("div",{className:"pro-content-label projects"},h," ",p()("Project",h)):null,y?a.a.createElement("div",{className:"pro-content-label quizzes"},v," ",p()("Quiz",v)):null))),i?a.a.createElement(m.c,{className:"shifted-right-image",image:i}):null)}}]),t}(a.a.PureComponent),y=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users")}}n.d(t,"a",function(){return y});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(132)),d=(n.n(p),n(1005),n(324),n(58)),h=n(17),f=n(325),m=n(905),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentClick=n.onContentClick.bind(n),n}return s(t,e),g(t,[{key:"onContentClick",value:function(e,t){var i=this.props.discussion.get("eid");this.props.onClick&&this.props.onClick(e,i),n.i(d.o)(e,""+h.k+t)}},{key:"render",value:function(){var e=this;if(!this.props.discussion)return null;var t=this.props.users.get(this.props.discussion.get("creator"));if(t){var i=this.props.discussion.get("eid"),o=n.i(f.c)(this.props.isPlaylistItem?this.props.playlist.getIn(["primaryImage"],null):this.props.discussion.getIn(["primaryImage"],null),null,300),s=this.props.discussion.getIn(["name"],null)||this.props.discussion.getIn(["snippet20"],""),r="/discussion/"+i;return l.a.createElement(u.Link,{className:"search-result tutorial-search-result no-decoration",to:r,onClick:function(t){return e.onContentClick(t,r)}},l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"text-labels"},l.a.createElement("div",{className:"title"},s),l.a.createElement("div",{className:"stats-line"},t.get("displayName")," · ",this.props.discussion.getIn(["byline"],"")))),o?l.a.createElement(m.c,{className:"shifted-right-image",image:o}):null)}}}]),t}(l.a.PureComponent),y=n.i(c.connect)(r)(v)},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),l=n.n(a),c=n(59),u=(n.n(c),n(39)),p=(n.n(u),n(15)),d=(n.n(p),n(37)),h=(n.n(d),n(896)),f=n.n(h),m=n(927),g=n(1034),v=n(97),y=n(324),b=n(132),k=n.n(b),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.TYPE="tag",n.toggleProperty=n.toggleProperty.bind(n),n.addNewTag=n.addNewTag.bind(n),n.onAddClick=n.onAddClick.bind(n),n.getStartingState=n.getStartingState.bind(n),n.resetState=n.resetState.bind(n),n.hasNoTagsSelected=n.hasNoTagsSelected.bind(n),n.findTagIndex=n.findTagIndex.bind(n),n.getSelectedTagAsSelectOptions=n.getSelectedTagAsSelectOptions.bind(n),n.state=n.getStartingState(),n.props.fetchRecommendations(""),n}return r(t,e),E(t,[{key:"getStartingState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=[];return t=e.initialTags?e.initialTags.toJS().map(function(e){return n.i(u.Map)({type:"local",eid:e})}):e.newlySelectedTags?e.newlySelectedTags:[],e.updateSelectedTags(t),{selectedTags:t,unSelectedTags:[],userCreatedTags:[]}}},{key:"resetState",value:function(e){this.setState(this.getStartingState(e))}},{key:"findTagIndex",value:function(e,t){var n=t.get("type");return e.findIndex(function(e){var i=e.get("type");return"new"==n&&"new"==i||"user"==n&&"user"==i?e.get("name")==t.get("name"):"local"==n&&"local"==i?e.get("eid")==t.get("eid"):void 0})}},{key:"componentWillReceiveProps",value:function(e){if(e.initialTags!=this.props.initialTags&&(this.resetState(e),this.props.fetchRecommendation("")),e.postRecommendations!=this.props.postRecommendations){var t=e.postRecommendations.get("tags").get(this.props.currentSearchQuery);if(!t)return;var n=[],i=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var l=r.value,c=void 0;if("local"==l.get("type")){var u=e.tags.get(l.get("eid"));c=!!e.useBackendIsSelected&&u.get("isSelected"),u.get("isEditable")}else c=!!e.useBackendIsSelected&&l.get("isSelected"),l.get("isEditable");-1==this.findTagIndex(this.state.selectedTags,l)&&-1==this.findTagIndex(this.state.unSelectedTags,l)&&!0===c&&n.push({doesNotExist:!0,prop:"selectedTags",tag:l})}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}n.length>0&&this.updateProperty(n)}}},{key:"shouldShowAddTagButton",value:function(e){var t=this;return this.props.currentSearchQuery.length>2&&(0==e.size||0==e.filter(function(e){return e.get("name").toLowerCase()==t.props.currentSearchQuery.toLowerCase()}).size)}},{key:"updateProperty",value:function(e){var t=this.state,n=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var l=r.value,c=l.prop,u=l.tag,p=l.idx;t=l.doesNotExist?f()(t,i({},c,{$push:[u]})):f()(t,i({},c,{$splice:[[p,1]]}))}}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}this.props.updateSelectedTags(t.selectedTags),this.setState(t)}},{key:"toggleProperty",value:function(e){var t=n.i(u.fromJS)(e),i=t.get("tagType"),o=t.get("origItem"),s=this.findTagIndex(this.state.selectedTags,o),r=-1==s,a=[{prop:"selectedTags",tag:o,idx:s,doesNotExist:r}];if("local"==i||"new"==i){var l=this.findTagIndex(this.state.unSelectedTags,o);-1==s&&-1==l||a.push({prop:"unSelectedTags",tag:o,idx:l,doesNotExist:-1==l})}this.updateProperty(a),this.props.onClear()}},{key:"addNewTag",value:function(){var e=n.i(u.Map)({name:this.props.currentSearchQuery,type:"user"});this.updateProperty([{prop:"userCreatedTags",tag:e,doesNotExist:!0},{prop:"selectedTags",tag:e,doesNotExist:!0}]),this.props.onClear()}},{key:"shouldShowCloseButton",value:function(){return this.hasNoTagsSelected()}},{key:"onAddClick",value:function(){this.addNewTag()}},{key:"hasNoTagsSelected",value:function(){return 0==this.state.selectedTags.length}},{key:"getSelectedTagAsSelectOptions",value:function(e){var t=void 0,i=void 0,o=void 0,s=void 0,r=void 0;if("new"==e.get("type"))i=e.get("name"),t=e.get("isSelected"),r=e.get("isEditable"),o="Relevant",s=e.get("type");else if("local"==e.get("type")){var a=this.props.tags.get(e.get("eid"));i=a.get("name"),t=a.get("isSelected"),r=a.get("isEditable"),o=a.get("postsCount")+" "+k()(y.d,a.get("postsCount")),s=e.get("type")}else"user"==e.get("type")&&(i=e.get("name"),r=!0,o="You just created",s=e.get("type"));return r&&(t=-1!=this.findTagIndex(this.state.selectedTags,e)),n.i(u.Map)({selected:t,type:this.TYPE,name:i,reason:o,tagType:s,origItem:e,disabled:!r})}},{key:"render",value:function(){var e=this,t=this.props.postRecommendations.get("tags").get(this.props.currentSearchQuery)?this.props.postRecommendations.get("tags").get(this.props.currentSearchQuery).filter(function(t){return-1==e.findTagIndex(e.state.selectedTags,t)}).map(function(t){return e.getSelectedTagAsSelectOptions(t)}):n.i(u.Map)(),i=this.state.userCreatedTags.filter(function(t){return"user"==t.get("type")&&-1!=t.get("name").toLowerCase().indexOf(e.props.currentSearchQuery.toLowerCase())&&-1==e.findTagIndex(e.state.selectedTags,t)}).map(function(t){return e.getSelectedTagAsSelectOptions(t)}),o=n.i(u.List)(i).concat(t),s=this.state.selectedTags.map(function(t){return e.getSelectedTagAsSelectOptions(t)}),r=null;return this.shouldShowAddTagButton(o.concat(n.i(u.List)(s)))&&(r=n.i(u.Map)({name:this.props.currentSearchQuery,type:"tag",onAddTagClick:this.onAddClick})),l.a.createElement("div",null,l.a.createElement(m.a,{type:this.TYPE,query:this.props.currentSearchQuery,onChange:this.props.onSearch,showAddLanguage:!0,onToggle:this.toggleProperty,selectedOptions:s,maxLength:40}),0==o.size?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null)):l.a.createElement(g.a,{options:o,onToggle:this.toggleProperty,addOption:r}))}}]),t}(l.a.PureComponent);t.a=C},,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),l=n.n(a),c=n(896),u=n.n(c),p=(n(927),n(889),n(1311)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={currentSearchQuery:{moderator:"",member:""},deferredSearchQuery:{moderator:null,member:null},isFetchingSearch:{moderator:!1,member:!1},activeTab:"members"},n.clearState=n.clearState.bind(n),n.setSearchQuery=n.setSearchQuery.bind(n),n.setDeferredSearchQuery=n.setDeferredSearchQuery.bind(n),n.setIsFetchingSearch=n.setIsFetchingSearch.bind(n),n.onSearch=n.onSearch.bind(n),n}return r(t,e),d(t,[{key:"setSearchQuery",value:function(e,t){this.setState(function(n,o){return u()(n,{currentSearchQuery:i({},t,{$set:e})})})}},{key:"setDeferredSearchQuery",value:function(e,t){this.setState(function(n,o){return u()(n,{deferredSearchQuery:i({},t,{$set:e})})})}},{key:"setIsFetchingSearch",value:function(e,t){this.setState(function(n,o){return u()(n,{isFetchingSearch:i({},t,{$set:e})})})}},{key:"onSearch",value:function(e,t){var n=this;this.setSearchQuery(e,t),this.state.isFetchingSearch[t]?this.setDeferredSearchQuery(e,t):(this.setIsFetchingSearch(!0,t),this.props.fetchRecommendations(e,t),window.setTimeout(function(){if(n.state.deferredSearchQuery[t]){var e=n.state.deferredSearchQuery[t];n.setIsFetchingSearch(!1,t),n.setDeferredSearchQuery(null,t),n.onSearch(e,t)}else n.setIsFetchingSearch(!1,t)},500))}},{key:"clearState",value:function(e,t){this.setSearchQuery("",t),this.props.clearState(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"fixed-width-tabs-bar"},l.a.createElement("a",{className:"members"==this.state.activeTab&&this.props.shouldAllowModerators?"active":"",onClick:function(){return e.setState({activeTab:"members"})}},this.props.shouldShowShareMessage?this.props.shouldAllowModerators?"Invite Participants":"Share Within CommonLounge":"Invite Members"),this.props.shouldAllowModerators?l.a.createElement("span",{className:"vertical-separator"}):null,this.props.shouldAllowModerators?l.a.createElement("a",{className:"moderators"==this.state.activeTab?"active":"",onClick:function(){return e.setState({activeTab:"moderators"})}},"Invite Moderators"):null),"members"==this.state.activeTab?l.a.createElement("div",{className:"user-list list no-hr"},l.a.createElement(p.a,{recommendations:this.props.newRecommendation.get("users").get("members").get(this.state.currentSearchQuery.member),updateSelectedUsers:function(t){return e.props.updateSelectedUsers(t,"invitedMembers")},onSearch:function(t){return e.onSearch(t,"member")},currentSearchQuery:this.state.currentSearchQuery.member,users:this.props.users,onClear:function(){return e.clearState("members","member")}})):null,this.props.shouldAllowModerators&&"moderators"==this.state.activeTab?l.a.createElement("div",{className:"user-list list no-hr"},l.a.createElement(p.a,{recommendations:this.props.newRecommendation.get("users").get("moderators").get(this.state.currentSearchQuery.moderator),updateSelectedUsers:function(t){return e.props.updateSelectedUsers(t,"invitedModerators")},onSearch:function(t){return e.onSearch(t,"moderator")},currentSearchQuery:this.state.currentSearchQuery.moderator,users:this.props.users,onClear:function(){return e.clearState("moderators","moderator")}})):null)}}]),t}(l.a.PureComponent);t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(896),c=n.n(l),u=n(133),p=n(927),d=n(889),h=n(1313),f=n.n(h),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedUsers:[],highlightedUsers:[]},n.addUser=n.addUser.bind(n),n.resetHighlights=n.resetHighlights.bind(n),n.userClick=n.userClick.bind(n),n.isHighlighted=n.isHighlighted.bind(n),n.TYPE="user",n}return s(t,e),m(t,[{key:"onSearch",value:function(e){this.props.onSearch(e),this.resetHighlights()}},{key:"addUser",value:function(e){var t=this;this.setState(function(n,i){var o=c()(n,{selectedUsers:{$push:[e]}});return t.props.updateSelectedUsers(o.selectedUsers),o}),this.props.onSearch("")}},{key:"resetHighlights",value:function(){this.setState({highlightedUsers:[]})}},{key:"isHighlighted",value:function(e){return-1!=this.state.highlightedUsers.indexOf(e)}},{key:"userClick",value:function(e){if(console.log("Clicked: ",e),this.isHighlighted(e)){var t=this.state.selectedUsers.filter(function(t){return t!=e});this.props.updateSelectedUsers(t),this.setState({selectedUsers:t,highlightedUsers:this.state.highlightedUsers.filter(function(t){return t!=e})})}else this.setState(function(t,n){return c()(t,{highlightedUsers:{$push:[e]}})})}},{key:"render",value:function(){var e=this,t=this.props.recommendations?this.props.recommendations.filter(function(t){return-1==e.state.selectedUsers.indexOf(t)}).map(function(t,n){return a.a.createElement(d.a,{userId:t,addButton:!0,addUser:e.addUser,shouldLinkToUser:!1})}):null,n=this.state.selectedUsers.map(function(t,n){return a.a.createElement("div",{onClick:function(){return e.userClick(t)}},a.a.createElement(u.a,{className:e.isHighlighted(t)?"avatar-image deletable":"avatar-image",size:"30",name:e.props.users.get(t).get("displayName"),src:e.props.users.get(t).get("avatarUrl")}))});return a.a.createElement("div",null,a.a.createElement("div",{className:"avatar-images",style:{backgroundImage:"url("+f.a+")"}},n),a.a.createElement(p.a,{type:this.TYPE,showAddLanguage:!1,query:this.props.currentSearchQuery,onChange:this.props.onSearch}),a.a.createElement("div",{className:"section-items no-border"},t))}}]),t}(a.a.PureComponent);t.a=g},,function(e,t,n){e.exports=n.p+"0317b88b6f274902736149929c073614.png"},,,,,,,,,,,,,,,,,,,,function(e,t,n){function i(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=n(1337);e.exports=i},function(e,t,n){function i(e,t){var n=[];return o(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n}var o=n(1204);e.exports=i},function(e,t){function n(e,t,n,i){for(var o=e.length,s=n+(i?1:-1);i?s--:++s<o;)if(t(e[s],s,e))return s;return-1}e.exports=n},function(e,t,n){function i(e,t,n,r,a){var l=-1,c=e.length;for(n||(n=s),a||(a=[]);++l<c;){var u=e[l];t>0&&n(u)?t>1?i(u,t-1,n,r,a):o(a,u):r||(a[a.length]=u)}return a}var o=n(346),s=n(1354);e.exports=i},function(e,t,n){function i(e,t,n){return t===t?r(e,t,n):o(e,s,n)}var o=n(1335),s=n(1338),r=n(1360);e.exports=i},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t,n){function i(e,t,n,u,p){e!==t&&r(t,function(r,c){if(l(r))p||(p=new o),a(e,t,c,n,i,u,p);else{var d=u?u(e[c],r,c+"",e,t,p):void 0;void 0===d&&(d=r),s(e,c,d)}},c)}var o=n(334),s=n(1202),r=n(1101),a=n(1340),l=n(85),c=n(1001);e.exports=i},function(e,t,n){function i(e,t,n,i,y,b,k){var E=e[n],C=t[n],w=k.get(C);if(w)return void o(e,n,w);var I=b?b(E,C,n+"",e,t,k):void 0,S=void 0===I;if(S){var O=u(C),N=!O&&d(C),P=!O&&!N&&g(C);I=C,O||N||P?u(E)?I=E:p(E)?I=a(E):N?(S=!1,I=s(C,!0)):P?(S=!1,I=r(C,!0)):I=[]:m(C)||c(C)?(I=E,c(E)?I=v(E):(!f(E)||i&&h(E))&&(I=l(C))):S=!1}S&&(k.set(C,I),y(I,C,i,b,k),k.delete(C)),o(e,n,I)}var o=n(1202),s=n(1104),r=n(1105),a=n(992),l=n(1111),c=n(337),u=n(135),p=n(1378),d=n(209),h=n(206),f=n(85),m=n(338),g=n(216),v=n(1387);e.exports=i},function(e,t,n){function i(e,t){return r(s(e,t,o),e+"")}var o=n(986),s=n(1238),r=n(1113);e.exports=i},function(e,t,n){var i=n(1367),o=n(1107),s=n(986),r=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:s;e.exports=r},function(e,t){function n(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(o);++i<o;)s[i]=e[i+t];return s}e.exports=n},function(e,t,n){function i(e,t){return t=o(t,e),null==(e=r(e,t))||delete e[a(s(t))]}var o=n(1e3),s=n(1380),r=n(1357),a=n(958);e.exports=i},function(e,t,n){function i(e,t){return o(t,function(t){return e[t]})}var o=n(999);e.exports=i},function(e,t){function n(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}e.exports=n},function(e,t,n){function i(e,t,n){function i(){return(this&&this!==s&&this instanceof i?l:e).apply(a?n:this,arguments)}var a=t&r,l=o(e);return i}var o=n(1053),s=n(48),r=1;e.exports=i},function(e,t,n){function i(e,t,n){function i(){for(var s=arguments.length,d=Array(s),h=s,f=l(i);h--;)d[h]=arguments[h];var m=s<3&&d[0]!==f&&d[s-1]!==f?[]:c(d,f);return(s-=m.length)<n?a(e,t,r,i.placeholder,void 0,d,m,void 0,void 0,n-s):o(this&&this!==u&&this instanceof i?p:e,this,d)}var p=s(e);return i}var o=n(1099),s=n(1053),r=n(1226),a=n(1227),l=n(1229),c=n(1112),u=n(48);e.exports=i},function(e,t,n){function i(e){return s(function(t){var n=t.length,i=n,s=o.prototype.thru;for(e&&t.reverse();i--;){var m=t[i];if("function"!=typeof m)throw new TypeError(u);if(s&&!g&&"wrapper"==a(m))var g=new o([],!0)}for(i=g?i:n;++i<n;){m=t[i];var v=a(m),y="wrapper"==v?r(m):void 0;g=y&&c(y[0])&&y[1]==(h|p|d|f)&&!y[4].length&&1==y[9]?g[a(y[0])].apply(g,y[3]):1==m.length&&c(m)?g[v]():g.thru(m)}return function(){var e=arguments,i=e[0];if(g&&1==e.length&&l(i))return g.plant(i).value();for(var o=0,s=n?t[o].apply(this,e):i;++o<n;)s=t[o].call(this,s);return s}})}var o=n(1098),s=n(1108),r=n(1110),a=n(1228),l=n(135),c=n(1234),u="Expected a function",p=8,d=32,h=128,f=256;e.exports=i},function(e,t,n){function i(e,t,n,i){function l(){for(var t=-1,s=arguments.length,a=-1,p=i.length,d=Array(p+s),h=this&&this!==r&&this instanceof l?u:e;++a<p;)d[a]=i[a];for(;s--;)d[a++]=arguments[++t];return o(h,c?n:this,d)}var c=t&a,u=s(e);return l}var o=n(1099),s=n(1053),r=n(48),a=1;e.exports=i},function(e,t,n){function i(e){return o(e)?void 0:e}var o=n(338);e.exports=i},function(e,t){function n(e){var t=e.match(i);return t?t[1].split(o):[]}var i=/\{\n\/\* \[wrapped with (.+)\] \*/,o=/,? & /;e.exports=n},function(e,t){function n(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(i,"{\n/* [wrapped with "+t+"] */\n")}var i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=n},function(e,t,n){function i(e){return r(e)||s(e)||!!(a&&e&&e[a])}var o=n(138),s=n(337),r=n(135),a=o?o.isConcatSpreadable:void 0;e.exports=i},function(e,t,n){function i(e,t,n){if(!a(n))return!1;var i=typeof t;return!!("number"==i?s(n)&&r(t,n.length):"string"==i&&t in n)&&o(n[t],e)}var o=n(207),s=n(329),r=n(336),a=n(85);e.exports=i},function(e,t,n){function i(e,t){var n=e[1],i=t[1],m=n|i,g=m<(l|c|d),v=i==d&&n==p||i==d&&n==h&&e[7].length<=t[8]||i==(d|h)&&t[7].length<=t[8]&&n==p;if(!g&&!v)return e;i&l&&(e[2]=t[2],m|=n&l?0:u);var y=t[3];if(y){var b=e[3];e[3]=b?o(b,y,t[4]):y,e[4]=b?r(e[3],a):t[4]}return y=t[5],y&&(b=e[5],e[5]=b?s(b,y,t[6]):y,e[6]=b?r(e[5],a):t[6]),y=t[7],y&&(e[7]=y),i&d&&(e[8]=null==e[8]?t[8]:f(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}var o=n(1219),s=n(1220),r=n(1112),a="__lodash_placeholder__",l=1,c=2,u=4,p=8,d=128,h=256,f=Math.min;e.exports=i},function(e,t,n){function i(e,t){return t.length<2?e:o(e,s(t,0,-1))}var o=n(1041),s=n(1343);e.exports=i},function(e,t){var n={};e.exports=n},function(e,t,n){function i(e,t){for(var n=e.length,i=r(t.length,n),a=o(e);i--;){var l=t[i];e[i]=s(l,n)?a[l]:void 0}return e}var o=n(992),s=n(336),r=Math.min;e.exports=i},function(e,t){function n(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}e.exports=n},function(e,t,n){function i(e,t){return o(r,function(n){var i="_."+n[0];t&n[1]&&!s(e,i)&&e.push(i)}),e.sort()}var o=n(1051),s=n(1333),r=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=i},function(e,t,n){function i(e){if(e instanceof o)return e.clone();var t=new s(e.__wrapped__,e.__chain__);return t.__actions__=r(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var o=n(1097),s=n(1098),r=n(992);e.exports=i},function(e,t,n){function i(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,o(e,s,void 0,void 0,void 0,void 0,t)}var o=n(1106),s=128;e.exports=i},function(e,t,n){var i=n(1039),o=n(937),s=n(1223),r=n(329),a=n(335),l=n(327),c=Object.prototype,u=c.hasOwnProperty,p=s(function(e,t){if(a(t)||r(t))return void o(t,l(t),e);for(var n in t)u.call(t,n)&&i(e,n,t[n])});e.exports=p},function(e,t,n){function i(e){return o(e,s)}var o=n(1052),s=4;e.exports=i},function(e,t){function n(e){for(var t=-1,n=null==e?0:e.length,i=0,o=[];++t<n;){var s=e[t];s&&(o[i++]=s)}return o}e.exports=n},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){function i(e,t,n){t=n?void 0:t;var r=o(e,s,void 0,void 0,void 0,void 0,void 0,t);return r.placeholder=i.placeholder,r}var o=n(1106),s=8;i.placeholder={},e.exports=i},function(e,t,n){function i(e){return(null==e?0:e.length)?o(e,1):[]}var o=n(1336);e.exports=i},function(e,t,n){var i=n(1349),o=i(!0);e.exports=o},,function(e,t,n){function i(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function o(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function r(e){return function(t){return e({},t)}}function a(e,t){return function(){for(var n=arguments.length,i=n-1,o=Array(n);n--;)o[n]=arguments[n];var s=o[t],r=o.slice(0,t);return s&&d.apply(r,s),t!=i&&d.apply(r,o.slice(t+1)),e.apply(this,r)}}function l(e,t){return function(){var n=arguments.length;if(n){for(var i=Array(n);n--;)i[n]=arguments[n];var o=i[0]=t.apply(void 0,i);return e.apply(void 0,i),o}}}function c(e,t,n,d){function h(e,t){if(N.cap){var n=u.iterateeRearg[e];if(n)return E(t,n);var i=!S&&u.iterateeAry[e];if(i)return k(t,i)}return t}function f(e,t,n){return P||N.curry&&n>1?R(t,n):t}function m(e,t,n){if(N.fixed&&(_||!u.skipFixed[e])){var i=u.methodSpread[e],o=i&&i.start;return void 0===o?j(t,n):a(t,o)}return t}function g(e,t,n){return N.rearg&&n>1&&(T||!u.skipRearg[e])?q(t,u.methodRearg[e]||u.aryRearg[n]):t}function v(e,t){t=z(t);for(var n=-1,i=t.length,o=i-1,s=A(Object(e)),r=s;null!=r&&++n<i;){var a=t[n],l=r[a];null!=l&&(r[t[n]]=A(n==o?l:Object(l))),r=r[a]}return s}function y(e){return Y.runInContext.convert(e)(void 0)}function b(e,t){var n=u.aliasToReal[e]||e,i=u.remap[n]||n,o=d;return function(e){var s=S?L:M,r=S?L[i]:t,a=D(D({},o),e);return c(s,n,r,a)}}function k(e,t){return C(e,function(e){return"function"==typeof e?o(e,t):e})}function E(e,t){return C(e,function(e){var n=t.length;return i(q(o(e,n),t),n)})}function C(e,t){return function(){var n=arguments.length;if(!n)return e();for(var i=Array(n);n--;)i[n]=arguments[n];var o=N.rearg?0:n-1;return i[o]=t(i[o]),e.apply(void 0,i)}}function w(e,t){var n,i=u.aliasToReal[e]||e,o=t,a=Q[i];return a?o=a(t):N.immutable&&(u.mutate.array[i]?o=l(t,s):u.mutate.object[i]?o=l(t,r(t)):u.mutate.set[i]&&(o=l(t,v))),F(V,function(e){return F(u.aryMethod[e],function(t){if(i==t){var s=u.methodSpread[i],r=s&&s.afterRearg;return n=r?m(i,g(i,o,e),e):g(i,m(i,o,e),e),n=h(i,n),n=f(i,n,e),!1}}),!n}),n||(n=o),n==t&&(n=P?R(n,1):function(){return t.apply(this,arguments)}),n.convert=b(i,t),u.placeholder[i]&&(I=!0,n.placeholder=t.placeholder=x),n}var I,S="function"==typeof t,O=t===Object(t);if(O&&(d=n,n=t,t=void 0),null==n)throw new TypeError;d||(d={});var N={cap:!("cap"in d)||d.cap,curry:!("curry"in d)||d.curry,fixed:!("fixed"in d)||d.fixed,immutable:!("immutable"in d)||d.immutable,rearg:!("rearg"in d)||d.rearg},P="curry"in d&&d.curry,_="fixed"in d&&d.fixed,T="rearg"in d&&d.rearg,x=S?n:p,L=S?n.runInContext():void 0,M=S?n:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isFunction:e.isFunction,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},j=M.ary,D=M.assign,A=M.clone,R=M.curry,F=M.forEach,U=M.isArray,B=M.isFunction,H=M.keys,q=M.rearg,W=M.toInteger,z=M.toPath,V=H(u.aryMethod),Q={castArray:function(e){return function(){var t=arguments[0];return U(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],i=e(t,n),s=i.length;return N.cap&&"number"==typeof n?(n=n>2?n-2:1,s&&s<=n?i:o(i,n)):i}},mixin:function(e){return function(t){var n=this;if(!B(n))return e(n,Object(t));var i=[];return F(H(t),function(e){B(t[e])&&i.push([e,n.prototype[e]])}),e(n,Object(t)),F(i,function(e){var t=e[1];B(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]}),n}},nthArg:function(e){return function(t){var n=t<0?1:W(t)+1;return R(e(t),n)}},rearg:function(e){return function(t,n){var i=n?n.length:0;return R(e(t,n),i)}},runInContext:function(t){return function(n){return c(e,t(n),d)}}};if(!O)return w(t,n);var Y=n,G=[];return F(V,function(e){F(u.aryMethod[e],function(e){var t=Y[u.remap[e]||e];t&&G.push([e,w(e,t)])})}),F(H(Y),function(e){var t=Y[e];if("function"==typeof t){for(var n=G.length;n--;)if(G[n][0]==e)return;t.convert=b(e,t),G.push([e,t])}}),F(G,function(e){Y[e[0]]=e[1]}),Y.convert=y,I&&(Y.placeholder=x),F(H(Y),function(e){F(u.realToAlias[e]||[],function(t){Y[t]=Y[e]})}),Y}var u=n(1373),p=n(1115),d=Array.prototype.push;e.exports=c},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,i={};for(var o in n){var s=n[o];e.call(i,s)?i[s].push(o):i[s]=[o]}return i}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t,n){e.exports={ary:n(1363),assign:n(1100),clone:n(1365),curry:n(1368),forEach:n(1051),isArray:n(135),isFunction:n(206),iteratee:n(1379),keys:n(361),rearg:n(1383),toInteger:n(1250),toPath:n(1386)}},function(e,t,n){e.exports=n(1377)},function(e,t,n){var i=n(1243),o=i("filter",n(1242));o.placeholder=n(1115),e.exports=o},function(e,t,n){var i=n(1243),o=i("flowRight",n(1370));o.placeholder=n(1115),e.exports=o},function(e,t,n){function i(e){return s(e)&&o(e)}var o=n(329),s=n(86);e.exports=i},function(e,t,n){function i(e){return s("function"==typeof e?e:o(e,r))}var o=n(1052),s=n(1102),r=1;e.exports=i},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t){function n(e){if("function"!=typeof e)throw new TypeError(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var i="Expected a function";e.exports=n},function(e,t){function n(){}e.exports=n},function(e,t,n){var i=n(1106),o=n(1108),s=o(function(e,t){return i(e,256,void 0,void 0,void 0,t)});e.exports=s},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if((e=o(e))===s||e===-s){return(e<0?-1:1)*r}return e===e?e:0}var o=n(1385),s=1/0,r=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return r;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=c.test(e);return n||u.test(e)?p(e.slice(2),n?2:8):l.test(e)?r:+e}var o=n(85),s=n(974),r=NaN,a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt;e.exports=i},function(e,t,n){function i(e){return r(e)?o(e,c):a(e)?[e]:s(l(u(e)))}var o=n(999),s=n(992),r=n(135),a=n(974),l=n(1114),c=n(958),u=n(1117);e.exports=i},function(e,t,n){function i(e){return o(e,s(e))}var o=n(937),s=n(1001);e.exports=i},function(e,t,n){function i(e){if(l(e)&&!a(e)&&!(e instanceof o)){if(e instanceof s)return e;if(p.call(e,"__wrapped__"))return c(e)}return new s(e)}var o=n(1097),s=n(1098),r=n(1103),a=n(135),l=n(86),c=n(1362),u=Object.prototype,p=u.hasOwnProperty;i.prototype=r.prototype,i.prototype.constructor=i,e.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(922),s=i(o),r=n(1008),a=i(r),l=n(915),c=i(l),u=n(939),p=i(u),d=n(917),h=i(d),f=n(916),m=i(f),g=n(1),v=i(g),y=n(31),b=i(y),k=n(995),E=n(347),C=i(E),w=n(1127),I=i(w),S=n(1255),O=i(S),N=function(e,t){return e.hasOwnProperty(t)?e[t]++:e[t]=0,t+"_"+e[t]},P=function(e){function t(){(0,c.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments));return e.state={lastPosition:{}},e}return(0,m.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.notifyCaretPosition()}},{key:"componentDidUpdate",value:function(){this.notifyCaretPosition()}},{key:"notifyCaretPosition",value:function(){var e=this.refs.caret;if(e){var t={left:e.offsetLeft,top:e.offsetTop},n=this.state.lastPosition;(0,C.default)(n,t)||(this.setState({lastPosition:t}),this.props.onCaretPositionChange(t))}}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.selection,o=n.value,r=n.markup,a=n.displayTransform,l=n.style,c=n.inputStyle;i.start===i.end&&(e=I.default.mapPlainTextIndex(o,r,i.start,"START",a));var u=[],p={},d=u,h=0,f=function(n,i,o){if(I.default.isNumber(e)&&e>=i&&e<=i+n.length){var s=e-i;d.push(t.renderSubstring(n.substring(0,s),h)),d=[t.renderSubstring(n.substring(s),h)]}else d.push(t.renderSubstring(n,h));h++},m=function(e,t,n,i,o,s,r){var a=N(p,i);d.push(this.getMentionComponentForMatch(i,o,s,a))}.bind(this);return I.default.iterateMentionsMarkup(o,r,f,m,a),d.push(" "),d!==u&&u.push(this.renderHighlighterCaret(d)),v.default.createElement("div",(0,s.default)({},l,{style:(0,s.default)({},c,l.style)}),u)}},{key:"renderSubstring",value:function(e,t){return v.default.createElement("span",(0,s.default)({},this.props.style("substring"),{key:t}),e)}},{key:"getMentionComponentForMatch",value:function(e,t,n,i){var o=g.Children.count(this.props.children),s={id:e,display:t,key:i};if(o>1){if(!n)throw new Error("Since multiple Mention components have been passed as children, the markup has to define the __type__ placeholder");var r=null;return g.Children.forEach(this.props.children,function(e){e&&e.props.type===n&&(r=e)}),v.default.cloneElement(r,s)}if(1===o){var a=this.props.children.length?this.props.children[0]:g.Children.only(this.props.children);return v.default.cloneElement(a,s)}return(0,O.default)(s)}},{key:"renderHighlighterCaret",value:function(e){return v.default.createElement("span",(0,s.default)({},this.props.style("caret"),{ref:"caret",key:"caret"}),e)}}]),t}(g.Component);P.propTypes={selection:b.default.shape({start:b.default.number,end:b.default.number}).isRequired,markup:b.default.string.isRequired,value:b.default.string.isRequired,displayTransform:b.default.func.isRequired,onCaretPositionChange:b.default.func.isRequired,inputStyle:b.default.object},P.defaultProps={value:"",inputStyle:{}};var _=(0,k.defaultStyle)({position:"relative",width:"inherit",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(e){return{"&singleLine":e.singleLine}});t.default=_(P)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.style,n=t("spinner");return r.default.createElement("div",t,r.default.createElement("div",n,r.default.createElement("div",n(["element","element1"])),r.default.createElement("div",n(["element","element2"])),r.default.createElement("div",n(["element","element3"])),r.default.createElement("div",n(["element","element4"])),r.default.createElement("div",n(["element","element5"]))))}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),r=i(s),a=n(995),l=i(a);t.default=(0,l.default)(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t._getTriggerRegex=void 0;var o=n(922),s=i(o),r=n(1008),a=i(r),l=n(915),c=i(l),u=n(939),p=i(u),d=n(917),h=i(d),f=n(916),m=i(f),g=n(1),v=i(g),y=n(31),b=i(y),k=n(53),E=i(k),C=n(327),w=i(C),I=n(1118),S=i(I),O=n(1116),N=i(O),P=n(347),_=i(P),T=n(995),x=n(1127),L=i(x),M=n(1423),j=i(M),D=n(1419),A=i(D),R=t._getTriggerRegex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof RegExp)return e;var n=t.allowSpaceInQuery,i=L.default.escapeRegex(e);return new RegExp("(?:^|\\s)("+i+"([^"+(n?"":"\\s")+i+"]*))$")},F=function(e){return e instanceof Array?function(t,n){for(var i=[],o=0,s=e.length;o<s;++o){(e[o].display||e[o].id).toLowerCase().indexOf(t.toLowerCase())>=0&&i.push(e[o])}return i}:e},U={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},B=!1,H=function(e){function t(e){(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return q.call(n),n.suggestions={},n.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:null},n}return(0,m.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){return v.default.createElement("div",(0,s.default)({ref:"container"},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"componentDidMount",value:function(){this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(){this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}}]),t}(v.default.Component);H.propTypes={singleLine:b.default.bool,allowSpaceInQuery:b.default.bool,markup:b.default.string,value:b.default.string,displayTransform:b.default.func,onKeyDown:b.default.func,onSelect:b.default.func,onBlur:b.default.func,onChange:b.default.func,children:b.default.oneOfType([b.default.element,b.default.arrayOf(b.default.element)]).isRequired},H.defaultProps={markup:"@[__display__](__id__)",singleLine:!1,displayTransform:function(e,t,n){return t},onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}};var q=function(){var e=this;this.getInputProps=function(t){var n=e.props,i=n.readOnly,o=n.disabled,r=n.style,a=(0,N.default)(e.props,"style",(0,w.default)(H.propTypes));return(0,s.default)({},a,r("input"),{value:e.getPlainText()},!i&&!o&&{onChange:e.handleChange,onSelect:e.handleSelect,onKeyDown:e.handleKeyDown,onBlur:e.handleBlur,onCompositionStart:e.handleCompositionStart,onCompositionEnd:e.handleCompositionEnd})},this.renderControl=function(){var t=e.props,n=t.singleLine,i=t.style,o=e.getInputProps(!n);return v.default.createElement("div",i("control"),e.renderHighlighter(o.style),n?e.renderInput(o):e.renderTextarea(o))},this.renderInput=function(e){return v.default.createElement("input",(0,s.default)({type:"text",ref:"input"},e))},this.renderTextarea=function(e){return v.default.createElement("textarea",(0,s.default)({ref:"input"},e))},this.renderSuggestionsOverlay=function(){return L.default.isNumber(e.state.selectionStart)?v.default.createElement(j.default,{style:e.props.style("suggestions"),position:e.state.suggestionsPosition,focusIndex:e.state.focusIndex,scrollFocusedIntoView:e.state.scrollFocusedIntoView,ref:"suggestions",suggestions:e.state.suggestions,onSelect:e.addMention,onMouseDown:e.handleSuggestionsMouseDown,onMouseEnter:function(t){return e.setState({focusIndex:t,scrollFocusedIntoView:!1})},isLoading:e.isLoading()}):null},this.renderHighlighter=function(t){var n=e.state,i=n.selectionStart,o=n.selectionEnd,s=e.props,r=s.markup,a=s.displayTransform,l=s.singleLine,c=s.children,u=s.value,p=s.style;return v.default.createElement(A.default,{ref:"highlighter",style:p("highlighter"),inputStyle:t,value:u,markup:r,displayTransform:a,singleLine:l,selection:{start:i,end:o},onCaretPositionChange:function(t){return e.setState({caretPosition:t})}},c)},this.getPlainText=function(){return L.default.getPlainText(e.props.value||"",e.props.markup,e.props.displayTransform)},this.executeOnChange=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(e.props.onChange){var s;return(s=e.props).onChange.apply(s,[t].concat(i))}if(e.props.valueLink){var r;return(r=e.props.valueLink).requestChange.apply(r,[t.target.value].concat(i))}},this.handleChange=function(t){if(document.activeElement===t.target){var n=e.props.value||"",i=t.target.value,o=L.default.applyChangeToValue(n,e.props.markup,i,e.state.selectionStart,e.state.selectionEnd,t.target.selectionEnd,e.props.displayTransform);i=L.default.getPlainText(o,e.props.markup,e.props.displayTransform);var s=t.target.selectionStart,r=t.target.selectionEnd,a=!1,l=L.default.findStartOfMentionInPlainText(n,e.props.markup,s,e.props.displayTransform);void 0!==l&&e.state.selectionEnd>l&&(s=l,r=s,a=!0),e.setState({selectionStart:s,selectionEnd:r,setSelectionAfterMentionChange:a});var c=L.default.getMentions(o,e.props.markup),u={target:{value:o}};e.executeOnChange(u,o,i,c)}},this.handleSelect=function(t){if(!B){e.setState({selectionStart:t.target.selectionStart,selectionEnd:t.target.selectionEnd});var n=e.refs.input;t.target.selectionStart===t.target.selectionEnd?e.updateMentionsQueries(n.value,t.target.selectionStart):e.clearSuggestions(),e.updateHighlighterScroll(),e.props.onSelect(t)}},this.handleKeyDown=function(t){var n=L.default.countSuggestions(e.state.suggestions),i=e.refs.suggestions;if(0===n||!i)return void e.props.onKeyDown(t);switch((0,S.default)(U).indexOf(t.keyCode)>=0&&t.preventDefault(),t.keyCode){case U.ESC:return void e.clearSuggestions();case U.DOWN:return void e.shiftFocus(1);case U.UP:return void e.shiftFocus(-1);case U.RETURN:case U.TAB:return void e.selectFocused()}},this.shiftFocus=function(t){var n=L.default.countSuggestions(e.state.suggestions);e.setState({focusIndex:(n+e.state.focusIndex+t)%n,scrollFocusedIntoView:!0})},this.selectFocused=function(){var t=e.state,n=t.suggestions,i=t.focusIndex,o=L.default.getSuggestion(n,i),s=o.suggestion,r=o.descriptor;e.addMention(s,r),e.setState({focusIndex:0})},this.handleBlur=function(t){var n=e._suggestionsMouseDown;e._suggestionsMouseDown=!1,n||e.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){e.updateHighlighterScroll()},1),e.props.onBlur(t,n)},this.handleSuggestionsMouseDown=function(t){e._suggestionsMouseDown=!0},this.updateSuggestionsPosition=function(){var t=e.state.caretPosition;if(t&&e.refs.suggestions){var n=e.refs.container,i=E.default.findDOMNode(e.refs.suggestions),o=E.default.findDOMNode(e.refs.highlighter);if(i){var s=t.left-o.scrollLeft,r={};s+i.offsetWidth>n.offsetWidth?r.right=0:r.left=s,r.top=t.top-o.scrollTop,(0,_.default)(r,e.state.suggestionsPosition)||e.setState({suggestionsPosition:r})}}},this.updateHighlighterScroll=function(){if(e.refs.input&&e.refs.highlighter){var t=e.refs.input;E.default.findDOMNode(e.refs.highlighter).scrollLeft=t.scrollLeft}},this.handleCompositionStart=function(){B=!0},this.handleCompositionEnd=function(){B=!1},this.setSelection=function(t,n){if(null!==t&&null!==n){var i=e.refs.input;if(i.setSelectionRange)i.setSelectionRange(t,n);else if(i.createTextRange){var o=i.createTextRange();o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",t),o.select()}}},this.updateMentionsQueries=function(t,n){e._queryId++,e.suggestions={},e.setState({suggestions:{}});var i=e.props.value||"";if(!L.default.isInsideOfMention(i,e.props.markup,n,e.props.displayTransform)&&!L.default.isInsideOfMention(i,e.props.markup,n-1,e.props.displayTransform)){var o=t.substring(0,n);v.default.Children.forEach(e.props.children,function(n){if(n){var i=R(n.props.trigger,e.props),s=o.match(i);if(s){var r=o.indexOf(s[1],s.index);e.queryData(s[2],n,r,r+s[1].length,t)}}})}},this.clearSuggestions=function(){e._queryId++,e.suggestions={},e.setState({suggestions:{},focusIndex:0})},this.queryData=function(t,n,i,o,s){var r=F(n.props.data),a=r(t,e.updateSuggestions.bind(null,e._queryId,n,t,i,o,s));a instanceof Array&&e.updateSuggestions(e._queryId,n,t,i,o,s,a)},this.updateSuggestions=function(t,n,i,o,s,r,a){if(t===e._queryId){var l={};l[n.props.type]={query:i,mentionDescriptor:n,querySequenceStart:o,querySequenceEnd:s,results:a,plainTextValue:r},e.suggestions=L.default.extend({},e.suggestions,l);var c=e.state.focusIndex,u=L.default.countSuggestions(e.suggestions);e.setState({suggestions:e.suggestions,focusIndex:c>=u?Math.max(u-1,0):c})}},this.addMention=function(t,n){var i=n.mentionDescriptor,o=n.querySequenceStart,s=n.querySequenceEnd,r=n.plainTextValue,a=e.props.value||"",l=L.default.mapPlainTextIndex(a,e.props.markup,o,"START",e.props.displayTransform),c=l+s-o,u=L.default.makeMentionsMarkup(e.props.markup,t.id,t.display,i.props.type);i.props.appendSpaceOnAdd&&(u+=" ");var p=L.default.spliceString(a,l,c,u);e.refs.input.focus();var d=e.props.displayTransform(t.id,t.display,i.props.type);i.props.appendSpaceOnAdd&&(d+=" ");var h=o+d.length;e.setState({selectionStart:h,selectionEnd:h,setSelectionAfterMentionChange:!0});var f={target:{value:p}},m=L.default.getMentions(p,e.props.markup),g=L.default.spliceString(r,o,s,d);e.executeOnChange(f,p,g,m);var v=i.props.onAdd;v&&v(t.id,t.display),e.clearSuggestions()},this.isLoading=function(){var t=!1;return v.default.Children.forEach(e.props.children,function(e){t=t||e&&e.props.isLoading}),t},this._queryId=0},W="undefined"!=typeof navigator&&/iPhone|iPad|iPod/i.test(navigator.userAgent),z=(0,T.defaultStyle)({position:"relative",overflowY:"visible",input:{display:"block",position:"absolute",top:0,boxSizing:"border-box",backgroundColor:"transparent",width:"inherit"},"&multiLine":{input:(0,s.default)({width:"100%",height:"100%",bottom:0,overflow:"hidden",resize:"none"},W?{marginTop:1,marginLeft:-3}:null)}},function(e){var t=e.singleLine;return{"&singleLine":t,"&multiLine":!t}});t.default=z(H)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(922),s=i(o),r=n(1008),a=i(r),l=n(915),c=i(l),u=n(939),p=i(u),d=n(917),h=i(d),f=n(916),m=i(f),g=n(1),v=i(g),y=n(31),b=i(y),k=n(995),E=n(1116),C=i(E),w=n(327),I=i(w),S=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=(0,C.default)(this.props,"style",(0,I.default)(t.propTypes));return v.default.createElement("li",(0,s.default)({},e,this.props.style),this.renderContent())}},{key:"renderContent",value:function(){var e=this.props,t=(e.id,e.query),n=e.descriptor,i=e.suggestion,o=e.index,s=this.getDisplay(),r=this.renderHighlightedDisplay(s,t);return n.props.renderSuggestion?n.props.renderSuggestion(i,t,r,o):r}},{key:"getDisplay",value:function(){var e=this.props.suggestion;if(e instanceof String)return e;var t=e.id,n=e.display;return t&&n?n:t}},{key:"renderHighlightedDisplay",value:function(e){var t=this.props,n=t.query,i=t.style,o=e.toLowerCase().indexOf(n.toLowerCase());return-1===o?v.default.createElement("span",i("display"),e):v.default.createElement("span",i("display"),e.substring(0,o),v.default.createElement("b",i("highlight"),e.substring(o,o+n.length)),e.substring(o+n.length))}}]),t}(g.Component);S.propTypes={id:b.default.string.isRequired,query:b.default.string.isRequired,index:b.default.number.isRequired,suggestion:b.default.oneOfType([b.default.string,b.default.shape({id:b.default.string.isRequired,display:b.default.string})]).isRequired,descriptor:b.default.object.isRequired,focused:b.default.bool};var O=(0,k.defaultStyle)({cursor:"pointer"},function(e){return{"&focused":e.focused}});t.default=O(S)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1063),s=i(o),r=n(922),a=i(r),l=n(1008),c=i(l),u=n(915),p=i(u),d=n(939),h=i(d),f=n(917),m=i(f),g=n(916),v=i(g),y=n(1),b=i(y),k=n(31),E=i(k),C=n(995),w=n(1127),I=i(w),S=n(1422),O=i(S),N=n(1420),P=i(N),_=function(e){function t(){return(0,p.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,h.default)(t,[{key:"componentDidUpdate",value:function(){var e=this.refs.suggestions;if(e&&!(e.offsetHeight>=e.scrollHeight)&&this.props.scrollFocusedIntoView){var t=e.scrollTop,n=e.children[this.props.focusIndex].getBoundingClientRect(),i=n.top,o=n.bottom,s=e.getBoundingClientRect(),r=s.top;i=i-r+t,o=o-r+t,i<t?e.scrollTop=i:o>e.offsetHeight&&(e.scrollTop=o-e.offsetHeight)}}},{key:"render",value:function(){var e=this.props,t=e.suggestions,n=e.isLoading,i=e.style,o=e.onMouseDown;return 0!==I.default.countSuggestions(t)||n?b.default.createElement("div",(0,a.default)({},i,{onMouseDown:o}),b.default.createElement("ul",(0,a.default)({ref:"suggestions"},i("list")),this.renderSuggestions()),this.renderLoadingIndicator()):null}},{key:"renderSuggestions",value:function(){var e=this;return I.default.getSuggestions(this.props.suggestions).reduce(function(t,n){var i=n.suggestions,o=n.descriptor;return[].concat((0,s.default)(t),(0,s.default)(i.map(function(n,i){return e.renderSuggestion(n,o,t.length+i)})))},[])}},{key:"renderSuggestion",value:function(e,t,n){var i=this,o=this.getID(e),s=n===this.props.focusIndex,r=t.mentionDescriptor,a=t.query;return b.default.createElement(O.default,{style:this.props.style("item"),key:o,id:o,ref:s?"focused":null,query:a,index:n,descriptor:r,suggestion:e,focused:s,onClick:function(){return i.select(e,t)},onMouseEnter:function(){return i.handleMouseEnter(n)}})}},{key:"getID",value:function(e){return e instanceof String?e:e.id}},{key:"renderLoadingIndicator",value:function(){if(this.props.isLoading)return b.default.createElement(P.default,this.props.style("loadingIndicator"))}},{key:"handleMouseEnter",value:function(e,t){this.props.onMouseEnter&&this.props.onMouseEnter(e)}},{key:"select",value:function(e,t){this.props.onSelect(e,t)}}]),t}(y.Component);_.propTypes={suggestions:E.default.object.isRequired,focusIndex:E.default.number,scrollFocusedIntoView:E.default.bool,isLoading:E.default.bool,onSelect:E.default.func},_.defaultProps={suggestions:{},onSelect:function(){return null}};var T=(0,C.defaultStyle)(function(e){var t=e.position;return(0,a.default)({position:"absolute",zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100},t,{list:{margin:0,padding:0,listStyleType:"none"}})});t.default=T(_)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mention=t.MentionsInput=void 0;var o=n(1421),s=i(o),r=n(1255),a=i(r);t.MentionsInput=s.default,t.Mention=a.default},,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(1),c=n(31),u=function(e){return e&&e.__esModule?e:{default:e}}(c),p=n(1266),d=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"getChildContext",value:function(){return i({},p.ENHANCER_CONTEXT_NAME,this.props.enhancer)}},{key:"render",value:function(){return l.Children.only(this.props.children)}}]),t}(l.PureComponent);t.default=d,d.propTypes={enhancer:u.default.func,children:u.default.element.isRequired},d.childContextTypes=p.ContextTypes,d.displayName="EnhancerProvider",e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(1265),s=["animationName"],r=function(e){var t=e.style,n=e.className;return i({},t?{style:(0,o.pickDirectStyles)(t,s)}:{},n?{className:n}:{})};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(206),c=i(l),u=n(986),p=i(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=n(1),m=n(215),g=i(m),v=n(1263),y=i(v),b=n(1266),k=function(e,t){return function(n){var i=function(i){function l(e,t){s(this,l);var n=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t));return n.setWrappedInstance=n.setWrappedInstance.bind(n),n}return a(l,i),h(l,[{key:"render",value:function(){var n=this.props,i=n.style,s=n.className,r=n.classNames,a=o(n,["style","className","classNames"]),l=(0,y.default)({style:i,className:s,classNames:r}),u=t&&t(a),p=(0,c.default)(e)?e(a):e;return(0,f.createElement)(this.getWrappedComponent(),d({style:l(u,p),ref:this.setWrappedInstance},a))}},{key:"getWrappedComponent",value:function(){var e=this.context[b.ENHANCER_CONTEXT_NAME],t=void 0===e?p.default:e;return this.memoizedEnhance!==t&&(this.memoizedEnhance=t,this.enhancedWrappedComponent=t(n)),this.enhancedWrappedComponent||n}},{key:"getWrappedInstance",value:function(){return this.wrappedInstance}},{key:"setWrappedInstance",value:function(e){this.wrappedInstance=e}}]),l}(f.Component),l=n.displayName||n.name;return i.displayName="withDefaultStyle("+l+")",i.propTypes=d({},n.propTypes,b.PropTypes),i.contextTypes=b.ContextTypes,i.WrappedComponent=n,(0,g.default)(i,n)}};t.default=k,e.exports=t.default},,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return C});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(901)),d=n.n(p),h=n(325),f=n(38),m=n(323),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),g(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"button main",onClick:this.onClick},this.props.isFollowing?"Following":"Follow")}}]),t}(l.a.PureComponent),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),g(t,[{key:"onClick",value:function(){this.props.isMember?window.confirm("Are you sure you want to leave this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"button main zoom-on-hover",onClick:this.onClick},this.props.isMember?"Member":"Join")}}]),t}(l.a.PureComponent),b=n.i(m.a)(v),k=n.i(m.a)(y),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleCommunityFollow=n.toggleCommunityFollow.bind(n),n.toggleCommunityJoin=n.toggleCommunityJoin.bind(n),n.isDataAvailable=n.isDataAvailable.bind(n),n}return s(t,e),g(t,[{key:"toggleCommunityFollow",value:function(){var e=this.props.community.get("eid");this.props.toggleCommunityFollow(e)}},{key:"toggleCommunityJoin",value:function(){var e=this.props.community.get("eid");this.props.toggleCommunityJoin(e)}},{key:"isDataAvailable",value:function(){return this.props.community&&this.props.community.hasIn(["isFollowing",this.props.currentLoggedInUser])&&this.props.community.hasIn(["isMember",this.props.currentLoggedInUser])}},{key:"render",value:function(){if(!this.isDataAvailable())return null;var e=this.props.community.get("isFollowing").get(this.props.currentLoggedInUser),t=this.props.community.get("isMember").get(this.props.currentLoggedInUser),i="closed_contribution"==this.props.community.get("accessLevel"),o=this.props.community.get("eid");return l.a.createElement("div",{className:this.props.isVisible?"signup-prompt bottom visible":"signup-prompt bottom hidden"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+(n.i(h.c)(this.props.community.get("coverImg"),60)||d.a)+")"}}),l.a.createElement("div",{className:"text"},l.a.createElement("div",null,"Never miss updates from ",l.a.createElement("span",{className:"community-name"},this.props.community.get("name"))," community.")),i?l.a.createElement(b,{isFollowing:e,allowLurker:!0,onClick:this.toggleCommunityFollow,to:"/community/"+o+"?action=community-follow",entityId:o,action:"community-follow"}):l.a.createElement(k,{isMember:t,allowLurker:!0,onClick:this.toggleCommunityJoin,to:"/community/"+o+"?action=community-join",entityId:o,action:"community-join"})))}}]),t}(l.a.PureComponent),C=n.i(c.connect)(r,{toggleCommunityFollow:f._4,toggleCommunityJoin:f._5})(n.i(u.withRouter)(E))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return I});var a=n(1),l=n.n(a),c=n(15),u=(n.n(c),n(37)),p=(n.n(u),n(323)),d=n(132),h=n.n(d),f=n(324),m=n(938),g=(n.n(m),n(38)),v=n(58),y=n(17),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"render",value:function(){var e="likes",t="like-follow-button-container like-button";return this.props.isSelected&&(e+=" active",t+=" active"),l.a.createElement("div",{className:t},l.a.createElement("span",{className:e,onClick:this.props.onClick}),this.props.upvoteCount>0?l.a.createElement(c.Link,{to:this.props.upvoteUrl,className:"no-decoration"},l.a.createElement("span",{className:"count"},this.props.upvoteCount)):null)}}]),t}(l.a.PureComponent),E=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),b(t,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.isSelected?"bookmark active":"bookmark",onClick:this.props.onClick})}}]),t}(l.a.PureComponent),C=(n.i(p.a)(k),n.i(p.a)(E)),w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasCopiedLink:!1},n.logEvent=n.logEvent.bind(n),n.openPopup=n.openPopup.bind(n),n.handleCopyClick=n.handleCopyClick.bind(n),n.getCurrentUrl=n.getCurrentUrl.bind(n),n.onFaceBookClick=n.onFaceBookClick.bind(n),n.onTwitterClick=n.onTwitterClick.bind(n),n}return s(t,e),b(t,[{key:"logEvent",value:function(e){this.props.logEvent({type:"share",payload:{obj:this.props.objId,obj_type:this.props.objType,sub_type:e}})}},{key:"openPopup",value:function(e,t){this.logEvent(t),y.f?n.i(v.k)(null,e):window.open(e,"facebook_share","height=640, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no")}},{key:"handleCopyClick",value:function(){var e=this;this.logEvent("link"),this.setState({hasCopiedLink:!0}),this.refs.link&&this.refs.copiedMessage&&(this.refs.copiedMessage.style.top=this.refs.link.offsetTop-50+"px",this.refs.copiedMessage.style.left=this.refs.link.offsetLeft+25+"px"),window.setTimeout(function(){e.setState({hasCopiedLink:!1})},2e3)}},{key:"onFaceBookClick",value:function(){this.openPopup("https://www.facebook.com/dialog/share?app_id="+window.ai+"&display=popup&href="+this.getCurrentUrl("facebook")+"&redirect_uri="+window.site+this.props.url,"facebook")}},{key:"onTwitterClick",value:function(){this.openPopup("https://twitter.com/intent/tweet?url="+this.getCurrentUrl("twitter")+"&via=commonlounge&text="+encodeURIComponent(this.props.title),"twitter")}},{key:"getCurrentUrl",value:function(e){return e=e?e+"-":"",this.props.currentUser?""+y.k+this.props.url+"?ref="+e+"user-share-"+this.props.currentUser:""+y.k+this.props.url}},{key:"render",value:function(){return l.a.createElement("div",{className:"actions-bar bottombar"},l.a.createElement(C,{isSelected:this.props.hasBookmarked,allowLurker:!0,onClick:this.props.toggleBookmarkFn,entityId:this.props.entityId,action:"bookmark",to:this.props.authRequiredBookmarkURL||this.props.url}),this.props.replyUrl?l.a.createElement("span",{className:"right-shifted-button"},l.a.createElement(p.g,{to:this.props.replyUrl},"Reply")):null,this.props.addPostUrl?l.a.createElement("span",{className:"right-shifted-button"},l.a.createElement(p.g,{to:this.props.addPostUrl},this.props.addPostString?this.props.addPostString:f.c)):this.props.postsCount?l.a.createElement("span",{className:"right-shifted-button"},l.a.createElement(c.Link,{to:this.props.postsUrl},this.props.postsCount," ",h()(f.a,this.props.postsCount))):null)}}]),t}(l.a.PureComponent),I=n.i(u.connect)(r,{logEvent:g.c})(w)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(59),c=(n.n(l),n(1447)),u=n(39),p=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchRecommendations=n.fetchRecommendations.bind(n),n.clearState=n.clearState.bind(n),n}return s(t,e),p(t,[{key:"fetchRecommendations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderator";this.props.fetchRecommendations?this.props.fetchRecommendations(e,t):this.props.fetchDiscussionRecommendations("","",[],"user",e,this.props.discussionId,t)}},{key:"clearState",value:function(e){e?(this.props.clearState(["newDiscussionRecommendation","users",e],n.i(u.Map)()),this.props.clearState(["newDiscussionPostRecommendation","users",e],n.i(u.Map)())):(this.props.clearState(["newDiscussionRecommendation","users"],n.i(u.Map)({moderators:n.i(u.Map)(),members:n.i(u.Map)()})),this.props.clearState(["newDiscussionPostRecommendation","users"],n.i(u.Map)({members:n.i(u.Map)()})))}},{key:"render",value:function(){var e=this;return a.a.createElement(c.a,{fetchRecommendations:this.fetchRecommendations,inviteFn:function(t,n){return e.props.inviteToDiscussion(e.props.discussionId,t,n)},newRecommendation:this.props.newDiscussionRecommendation,users:this.props.users,shouldAllowModerators:this.props.isModerator,isOpen:this.props.isOpen,onRequestClose:this.props.onRequestClose,clearState:this.clearState,shouldShowShareMessage:!0,url:this.props.url,title:this.props.title,objType:this.props.objType||"Discussion",objId:this.props.objId||this.props.discussionId,onlyShowExternalShares:this.props.onlyShowExternalShares,prompt:this.props.prompt})}}]),t}(a.a.PureComponent);t.a=d},,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(133),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props.invite;if(null==e||null==e.get("inviter"))return null;var t=this.props.users.get(e.get("inviter"));if(!t)return null;var n="moderator"==e.get("permission")?"moderate":"join";return a.a.createElement("div",{className:"invite-action"},a.a.createElement("div",{className:"action-button-group-byline"},a.a.createElement(l.a,{className:"avatar-image",size:"30",name:t.get("displayName"),src:t.get("avatarUrl")}),a.a.createElement("span",null,t.get("displayName")," invited you to ",n," this ",this.props.isDiscussion?"discussion":"community"," ")),a.a.createElement("div",{className:"action-button-group"},a.a.createElement("button",{className:"action-button large blue",onClick:this.props.onAccept},"Accept Invite"),a.a.createElement("button",{className:"action-button large",onClick:this.props.onIgnore},"Ignore")))}}]),t}(a.a.PureComponent);t.a=u},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{currentUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return b});var l=n(1),c=n.n(l),u=n(37),p=(n.n(u),n(59)),d=n.n(p),h=n(1310),f=n(1035),m=n(203),g=n.n(m),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateSelectedUsers=n.updateSelectedUsers.bind(n),n.onClose=n.onClose.bind(n),n.hasModifiedData=n.hasModifiedData.bind(n),n.resetState=n.resetState.bind(n),n.state=n.resetState(),n}return r(t,e),v(t,[{key:"resetState",value:function(){return{invitedMembers:[],invitedModerators:[]}}},{key:"updateSelectedUsers",value:function(e,t){this.setState(i({},t,e))}},{key:"hasModifiedData",value:function(){return this.state.invitedMembers.length>0||this.state.invitedModerators.length>0}},{key:"onClose",value:function(){this.hasModifiedData()&&(this.props.inviteFn(this.state.invitedMembers,this.state.invitedModerators),this.setState(this.resetState())),this.props.onRequestClose(),this.props.clearState()}},{key:"render",value:function(){return c.a.createElement(d.a,{isOpen:this.props.isOpen,onRequestClose:this.onClose,className:!0===this.props.onlyShowExternalShares?"modal-content external-sharing-modal-content":"modal-content",overlayClassName:"modal-overlay"},c.a.createElement(g.a,{transitionName:"modal",transitionAppear:!0,transitionAppearTimeout:200},this.props.onlyShowExternalShares?c.a.createElement("button",{className:"button close-button",onClick:this.onClose}):c.a.createElement("button",{className:"button done-button",onClick:this.onClose},"Done"),c.a.createElement(f.a,{url:this.props.url,title:this.props.title,objId:this.props.objId,objType:this.props.objType,prompt:this.props.prompt}),this.props.currentUser&&!0!==this.props.onlyShowExternalShares?c.a.createElement("div",null,c.a.createElement(h.a,{fetchRecommendations:this.props.fetchRecommendations,newRecommendation:this.props.newRecommendation,updateSelectedUsers:this.updateSelectedUsers,users:this.props.users,shouldAllowModerators:this.props.shouldAllowModerators,clearState:this.props.clearState,shouldShowShareMessage:this.props.shouldShowShareMessage}),c.a.createElement("div",{className:"onboarding-text-label"},"Users that have already been invited",c.a.createElement("br",null),"don't show up in search results")):null))}}]),t}(c.a.PureComponent),b=n.i(u.connect)(a,{})(y)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(59),c=n.n(l),u=n(15),p=(n.n(u),n(39)),d=(n.n(p),n(324)),h=n(17),f=n(323),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.onDelete=n.onDelete.bind(n),n}return s(t,e),m(t,[{key:"onClose",value:function(){this.props.onRequestClose()}},{key:"onDelete",value:function(){window.confirm("Are you sure you want to delete this "+(this.props.entityLabel||d.d)+"?")&&(this.props.onDeleteFn(),this.onClose())}},{key:"render",value:function(){var e=this,t=this.props.entityLabel||d.d;return a.a.createElement(c.a,{isOpen:this.props.isOpen,onRequestClose:this.onClose,overlayClassName:"modal-overlay options-modal-overlay",className:"modal-content options-modal-content"},this.props.onPublishFn?a.a.createElement("button",{className:"button option-button",onClick:function(){e.props.onPublishFn(),e.onClose()}},"Publish ",t):null,this.props.onShareFn?a.a.createElement("button",{className:"button option-button",onClick:function(){e.props.onShareFn(),e.onClose()}},"Share ",t):null,this.props.onCrossPostFn?a.a.createElement("button",{className:"button option-button",onClick:function(){e.props.onCrossPostFn(),e.onClose()}},"Cross-post ",t):null,a.a.createElement("button",{className:"button option-button",onClick:function(){e.props.onReportFn&&e.props.onReportFn(),e.onClose()}},"Report this ",t),this.props.editHistoryUrl?a.a.createElement("button",{className:"button option-button",onClick:function(){return u.browserHistory.push(e.props.editHistoryUrl)}},"View edit history"):null,this.props.editUrl?a.a.createElement(f.h,{className:"button option-button",onClick:h.b?function(){return alert("We are working hard to bring you the editing feature on Android. Please use CommonLounge on a desktop to edit this. Thanks for your patience :)")}:function(){return u.browserHistory.push(e.props.editUrl)}},this.props.editLabel?this.props.editLabel:"Edit this "+t):null,this.props.onDeleteFn?a.a.createElement("button",{className:"button option-button delete-button",onClick:this.onDelete},"Delete ",t):null,a.a.createElement("button",{className:"button option-button cancel-button",onClick:this.onClose},"Cancel"))}}]),t}(a.a.PureComponent);t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){if(this.props.type){var e="";switch(this.props.type){case"AUTO":e="Auto Publishing Scheduled";break;case"DRAFT":e="Draft"}return"PUBLISHED"!=this.props.type?a.a.createElement("div",{className:"draft entity-label"},e):null}}}]),t}(a.a.PureComponent);t.a=c},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=500},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=80},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),discussions:e.get("discussions"),discussionPosts:e.get("discussionPosts"),tags:e.get("tags"),topics:e.get("topics"),communities:e.get("communities"),channels:e.get("channels"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return N});var a=n(1),l=n.n(a),c=n(53),u=n.n(c),p=n(37),d=(n.n(p),n(15)),h=(n.n(d),n(132)),f=n.n(h),m=n(1044),g=n(1302),v=n(1299),y=(n(1059),n(363)),b=n(1555),k=n(972),E=n(1589),C=(n(1058),n(1089)),w=n(324),I=n(39),S=(n.n(I),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),O=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={entityHeights:{},entityHeightsAssigned:!1,maxEntityHeight:null},n.scrollRight=n.scrollRight.bind(n),n.scrollLeft=n.scrollLeft.bind(n),n}return s(t,e),S(t,[{key:"componentDidMount",value:function(){if(!(this.state.entityHeightsAssigned||this.props.items.size<2)){var e={},t=0,n=!0,i=!1,o=void 0;try{for(var s,r=this.props.items[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var a=s.value,l=a.get("eid");if(u.a.findDOMNode(this.refs["entity-"+l])){var c=u.a.findDOMNode(this.refs["entity-"+l]).clientHeight;e[l]=c,c>t&&(t=c)}}}catch(e){i=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw o}}this.setState({entityHeights:e,entityHeightsAssigned:!0,maxEntityHeight:t})}}},{key:"render",value:function(){var e=this;if(this.props.items.size<1||!this.props.items.get(0))return null;var t=this.props.items.get(0).get("type"),n=this.props.items.size>1,i=n&&"community"!=t,o=this.props.items.map(function(e){return e.get("eid")}),s=null,r=null;switch(t){case"discussion":s=i?l.a.createElement("div",{className:"carousel discussions-carousel",ref:"carousel"},o.map(function(e){return l.a.createElement(d.Link,{className:"no-decoration",to:"/discussion/"+e,key:e},l.a.createElement(g.a,{discussionId:e}))})):l.a.createElement(m.a,{discussion:this.props.discussions.get(o.get(0)),shouldLinkToDiscussion:!0,isCompact:this.props.isCompact,index:this.props.index,hasAddPost:0==this.props.discussions.get(o.get(0)).get("postsCount")&&(this.props.discussions.get(o.get(0)).get("canContribute")||!this.props.currentLoggedInUser||this.props.users.get(this.props.currentLoggedInUser).get("isLurker"))});break;case"post":var a=this.props.item.get("eid"),c=this.props.item.get("type"),u="discussion"==c?this.props.discussions.get(a).get("postsCount"):null,p="discussion"==c?"/discussion/"+a+"/all":null;if("discussion"==c)r=l.a.createElement(m.a,{discussion:this.props.discussions.get(a),shouldLinkToDiscussion:!0,hasAddPost:0==this.props.discussions.get(a).get("postsCount")&&(this.props.discussions.get(a).get("canContribute")||!this.props.currentLoggedInUser||this.props.users.get(this.props.currentLoggedInUser).get("isLurker"))}),s=l.a.createElement("div",null,l.a.createElement("div",{className:"entity-label no-bottom-padding"},"Top ",f()(w.d,o.size)," in this discussion"),l.a.createElement("div",{className:"carousel posts-carousel",ref:"carousel"},o.map(function(t){return l.a.createElement(v.a,{key:t,post:e.props.discussionPosts.get(t),discussionId:e.props.discussionPosts.getIn([t,"discussionId"],null),communityId:e.props.discussions.get(a).get("community"),restrictTagsModal:!0,shouldLinkToPost:!0,fixedTextHeight:120,fixedBylineLength:20,hideTags:!0,hideParent:!0,hideReplyLink:!0,hideMoreOptions:!0,hideUserMessage:!0})}),u-o.size>0&&o.size>1?l.a.createElement("div",{className:"more-replies-card post",style:{height:269}},l.a.createElement(d.Link,{to:p,className:"no-decoration"},"Show ",u-o.size," more",l.a.createElement("br",null),f()(w.d,u-o.size))):null));else if("post"==c){var h=this.props.discussions.getIn([this.props.discussionPosts.getIn([a,"discussionId"],null)],null);r=l.a.createElement(m.a,{discussion:h,shouldLinkToDiscussion:!0,isCompact:!0,hasAddPost:!1}),s=l.a.createElement("div",null,l.a.createElement("div",{className:"entity-label no-bottom-padding"},h?w.d+" in this discussion":""+w.d),l.a.createElement("div",{className:"carousel posts-carousel",ref:"carousel"},l.a.createElement(v.a,{key:a,post:this.props.discussionPosts.get(a),discussionId:this.props.discussionPosts.getIn([a,"discussionId"],null),restrictTagsModal:!0,shouldLinkToPost:!0,isExpanded:!0,hideTags:!0,hideParent:!0,hideMoreOptions:!0})))}break;case"user":s=i?l.a.createElement("div",{className:"carousel users-carousel",ref:"carousel"},o.map(function(e,t){return l.a.createElement(y.a,{userId:e,key:e})})):l.a.createElement(y.a,{userId:o.get(0)});break;case"community":s=n?l.a.createElement("div",{className:"list communities-list no-padding-bottom with-border"},o.map(function(e,t){return l.a.createElement(k.a,{communityId:e,hasFollow:!0,key:e,shouldLinkToCommunity:!0})})):l.a.createElement(b.a,{communityId:o.get(0)});break;case"topic":s=i?l.a.createElement("div",{className:"carousel topics-carousel",ref:"carousel"},o.map(function(t,n){var i=null;return e.state.entityHeightsAssigned&&(i=e.state.maxEntityHeight-e.state.entityHeights[t]),l.a.createElement(E.a,{ref:"entity-"+t,additionalHeight:i,topicId:t,key:t})})):l.a.createElement(E.a,{topicId:o.get(0)});break;default:console.log("An unhandled case encountered in render method of Carousel.")}return l.a.createElement("div",null,r,l.a.createElement("div",{className:"carousel-container"},i?l.a.createElement("div",{className:"scroll-button left",onClick:this.scrollLeft}):null,s,i?l.a.createElement("div",{className:"scroll-button right",onClick:this.scrollRight}):null))}},{key:"scrollLeft",value:function(){n.i(C.a)(u.a.findDOMNode(this.refs.carousel),-352,200,!0)}},{key:"scrollRight",value:function(){n.i(C.a)(u.a.findDOMNode(this.refs.carousel),352,200,!0)}}]),t}(l.a.PureComponent),N=n.i(p.connect)(r)(O)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{catalog:e.get("catalog"),discussions:e.get("discussions")}}n.d(t,"a",function(){return v});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(97),n(132)),p=(n.n(u),n(17)),d=n(39),h=(n.n(d),n(15)),f=(n.n(h),n(1003)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),m(t,[{key:"onClick",value:function(e,t){this.props.onClick(t)}},{key:"render",value:function(){var e=this,t=this.props.catalog&&this.props.catalog.get("categories",n.i(d.List)());if(!t)return null;var i=this.props.catalog?this.props.selectedCategories.map(function(t){return l.a.createElement("div",{className:"feed-item featured-cards"},e.props.catalog.getIn(["items",t],n.i(d.List)()).map(function(t,n){return l.a.createElement(f.a,{discussion:e.props.discussions.get(t,null)})}))}):null,o=this.props.lastSelectedCategory&&this.props.catalog?l.a.createElement("div",{className:"feed-item featured-cards"},this.props.catalog.getIn(["items",this.props.lastSelectedCategory],n.i(d.List)()).map(function(t,n){return l.a.createElement(f.a,{discussion:e.props.discussions.get(t,null)})})):null,s=t.map(function(t,n){var o=p.a?-1!=e.props.selectedCategories.indexOf(t.get("title")):e.props.lastSelectedCategory==t.get("title");return[l.a.createElement("div",{className:"category "+(o?"active ":"")+"zoom-on-hover",onClick:function(n){return e.onClick(n,t.get("title"))}},l.a.createElement("div",{className:"category-logo "+t.get("class")}),l.a.createElement("div",{className:"category-title"},t.get("title")),l.a.createElement("div",{className:"expand-icon"},-1!=e.props.selectedCategories.indexOf(t.get("title"))?"-":"+")),p.a&&-1!=e.props.selectedCategories.indexOf(t.get("title"))&&i[e.props.selectedCategories.indexOf(t.get("title"))]]}),r=l.a.createElement("div",{className:"categories"},s);return l.a.createElement("div",{className:"catalog-explorer"},r,!p.a&&l.a.createElement("div",{className:"section-heading small"},this.props.lastSelectedCategory),!p.a&&o,l.a.createElement("div",{className:"pathfinder-prompt"},l.a.createElement("div",{className:"left"},l.a.createElement("div",{className:"title"},"Not sure where to start?"),l.a.createElement("div",{className:"description"},"Design your own personalized learning path based on your goals and skill level using our Pathfinder tool.")),l.a.createElement("div",{className:"right"},l.a.createElement("button",{onClick:function(){return h.browserHistory.push("/pathfinder")},className:"bold-button"},"Launch Pathfinder →"))))}}]),t}(l.a.PureComponent),v=n.i(c.connect)(r)(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),communities:e.get("communities"),currentUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return y});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(133)),h=n(972),f=n(356),m=n(38),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleCommunityFollow=n.toggleCommunityFollow.bind(n),n.toggleCommunityJoin=n.toggleCommunityJoin.bind(n),n.onContentClick=n.onContentClick.bind(n),n}return s(t,e),g(t,[{key:"toggleCommunityFollow",value:function(){this.props.toggleCommunityFollow(this.props.communityId)}},{key:"toggleCommunityJoin",value:function(){this.props.toggleCommunityJoin(this.props.communityId)}},{key:"onContentClick",value:function(){u.browserHistory.push("/community/"+this.props.communityId)}},{key:"render",value:function(){var e=this,t=this.props.communities.get(this.props.communityId);if(!t)return null;var i="closed_contribution"==t.get("accessLevel"),o=t.get("members")?t.get("members").map(function(t,n){return n>6?null:l.a.createElement(d.a,{className:"avatar-image",size:"30",name:e.props.users.getIn([t,"displayName"]),src:e.props.users.getIn([t,"avatarUrl"]),key:n})}):n.i(p.List)();return l.a.createElement("div",{className:"community-metadata"},l.a.createElement("div",{className:"entity-label"},"Community"),l.a.createElement(h.a,{communityId:this.props.communityId,shouldLinkToCommunity:!0}),o.size>4?l.a.createElement("div",{className:"community-members"},o):null,l.a.createElement("div",{className:"description clickable",onClick:this.onContentClick,style:this.props.additionalHeight?{marginBottom:10+this.props.additionalHeight}:null},l.a.createElement("span",null,t.get("about"))),l.a.createElement(f.a,{entityType:"Community",entityUrl:"/community/"+t.get("eid"),isFollowing:t.get("isFollowing").get(this.props.currentUser),isMember:t.get("isMember").get(this.props.currentUser),toggleJoin:this.toggleCommunityJoin,toggleFollow:this.toggleCommunityFollow,showMembershipToggle:!i}))}}]),t}(l.a.PureComponent),y=n.i(c.connect)(r,{toggleCommunityFollow:m._4,toggleCommunityJoin:m._5})(v)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{communities:e.get("communities"),channels:e.get("channels"),topics:e.get("topics"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return P});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=n.n(d),f=n(889),m=n(829),g=n(901),v=n.n(g),y=n(325),b=n(330),k=n(38),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=n.i(b.e)(f.a),w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),E(t,[{key:"onClick",value:function(){window.confirm("Are you sure you want to leave this community?")&&this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:"action-button large red no-width no-max-width centered block",onClick:this.onClick},"Leave Community")}}]),t}(l.a.PureComponent),I=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),E(t,[{key:"onClick",value:function(){window.confirm("Are you sure you want to unfollow this community?")&&this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:"action-button large red no-width no-max-width centered block",onClick:this.onClick},"Unfollow Community")}}]),t}(l.a.PureComponent),S=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),E(t,[{key:"render",value:function(){var e=this.props.channel,t=this.props.channelId;return l.a.createElement(u.Link,{className:"no-decoration",to:"/community/"+this.props.communityId+"/"+t,title:e.get("name"),onClick:this.props.onChannelsClick},l.a.createElement("div",{className:"sidebar-row"},l.a.createElement("div",{className:this.props.isActive?"sidebar-label active":"sidebar-label"},e.get("name"))))}}]),t}(l.a.PureComponent),O=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),E(t,[{key:"render",value:function(){var e=this,t=this.props.channelNodeIds,n=this.props.communities.getIn([this.props.communityId,"groupThreads",0],null),i=t.map(function(t,n){return l.a.createElement(S,{channel:e.props.channels.get(t),channelId:t,communityId:e.props.communityId,isActive:e.props.activeChannel==t,key:"channel-"+t})}),o=n?l.a.createElement("div",{className:"sidebar-row thin"},l.a.createElement(u.Link,{to:"/community/"+this.props.communityId+"/group-thread/"+n,title:"Chat"},l.a.createElement("div",{className:this.props.isChatTab?"sidebar-label active has-extra-margin":"sidebar-label has-extra-margin"},"Chat"))):null;return i.size>0||n?l.a.createElement("div",{className:"channels-section"},l.a.createElement("div",{className:"section-heading"},"Channels"),l.a.createElement("div",{className:"sidebar-row thin"},l.a.createElement(u.Link,{to:"/community/"+this.props.communityId+"/main",title:"Main"},l.a.createElement("div",{className:"main"!=this.props.activeChannel||this.props.isChatTab?"sidebar-label":"sidebar-label active"},"Main"))),o,i):null}}]),t}(l.a.PureComponent),N=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isEmailConfirmationShown:!1,email:""},n.onEmailChange=n.onEmailChange.bind(n),n.handleEmailSubmit=n.handleEmailSubmit.bind(n),n.onKeyPressForEmailInvite=n.onKeyPressForEmailInvite.bind(n),n.onChannelsClick=n.onChannelsClick.bind(n),n}return s(t,e),E(t,[{key:"onEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"onKeyPressForEmailInvite",value:function(e){13==(e.code||e.which)&&this.handleEmailSubmit()}},{key:"handleEmailSubmit",value:function(){var e=this;this.setState({isEmailConfirmationShown:!0,email:""}),window.setTimeout(function(){e.setState({isEmailConfirmationShown:!1})},3e3),this.props.inviteToCommunity(this.props.communityId,null,null,this.state.email)}},{key:"onChannelsClick",value:function(e){this.props.onClose&&this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props.communityId?this.props.communities.getIn([this.props.communityId,"channels"],n.i(p.List)()):n.i(p.List)(),i=this.props.communities.getIn([this.props.communityId,"moderators"],n.i(p.List)()).map(function(e,t){return l.a.createElement(C,{isCompact:!0,hideByline:!0,hideFollowButton:!0,userId:e,shouldLinkToUser:!0,flair:"moderator",offsetTop:-40,offsetLeft:120,key:"moderator-"+e})}),o=this.props.communities.getIn([this.props.communityId,"leaderboard","topGlobal"],n.i(p.List)()).map(function(e,t){return l.a.createElement(C,{isCompact:!0,hideByline:!0,hideFollowButton:!0,rank:e.get("rank"),userId:e.get("user"),shouldLinkToUser:!0,flair:e.get("shouldShowLeaderFlair")?"crown":null,offsetTop:-40,offsetLeft:120,key:"leader-"+t})}),s=this.props.communities.getIn([this.props.communityId,"leaderboard","topLocal"],n.i(p.List)()).map(function(e,t){return l.a.createElement(C,{isCompact:!0,hideByline:!0,hideFollowButton:!0,rank:e.get("rank"),userId:e.get("user"),shouldLinkToUser:!0,flair:e.get("shouldShowLeaderFlair")?"crown":null,offsetTop:-40,offsetLeft:120,key:"upandcoming-"+t})}),r=this.props.communities.getIn([this.props.communityId,"relatedCommunities"],n.i(p.List)()).map(function(t,i){return l.a.createElement(u.Link,{className:"no-decoration",to:"/community/"+t,title:e.props.communities.get(t).get("name"),key:"related-"+t},l.a.createElement("div",{className:"sidebar-row"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+(n.i(y.c)(e.props.communities.get(t).get("coverImg"),60)||v.a)+")"}}),l.a.createElement("div",{className:"sidebar-label"},e.props.communities.get(t).get("name"))))}),a=this.props.communities.getIn([this.props.communityId,"topics"],n.i(p.List)()).map(function(t,n){return l.a.createElement("div",{className:"topic"},e.props.topics.getIn([t,"name"]))}),c=null;this.props.acButtons&&(c=this.props.acButtons.map(function(e){return l.a.createElement("a",{href:e.url,target:"_blank"},l.a.createElement("button",{className:"label with-right-padding"},e.display))}));var d=this.props.communities.getIn([this.props.communityId,"name"],""),f=this.props.communities.getIn([this.props.communityId,"liveUsersCount"],0),g=this.props.communities.getIn([this.props.communityId,"patreon"],!1),b=this.props.showGroupThread&&this.props.communities.getIn([this.props.communityId,"groupThreads",0],!1),k=!this.props.showGroupThread,E="sidebar right";this.props.inModal&&(E+=" in-modal"),k&&(E+=" fixed");var S=this.props.top?{top:this.props.top}:this.props.inModal?{}:{display:"none"},N=!(g||o.size>0);return l.a.createElement("div",{className:E,style:S},l.a.createElement("div",{className:"content"},c&&c.length>0?c:null,this.props.inModal?l.a.createElement("div",{className:"thin-button-group"},this.props.editUrl?l.a.createElement("button",{onClick:function(){return u.browserHistory.push(e.props.editUrl)},className:"thin-button"},"Edit Community"):null,this.props.onInviteClick?l.a.createElement("button",{className:"thin-button",onClick:this.props.onInviteClick},"Invite Members"):null):null,this.props.inModal?l.a.createElement(O,{communityId:this.props.communityId,channels:this.props.channels,activeChannel:this.props.activeFilter,onChannelsClick:this.onChannelsClick,isChatTab:this.props.isChatTab,communities:this.props.communities,channelNodeIds:t}):null,!this.props.inModal&&b?l.a.createElement("div",{className:"community-chat-section"},l.a.createElement("div",{className:"section-heading"},"Chat ",f>0?l.a.createElement("span",{className:"label bold online-now"},f," online"):null,l.a.createElement(u.Link,{to:"/community/"+this.props.communityId+"/group-thread/"+b,className:"expand-icon no-decoration"})),l.a.createElement(m.GroupThreadContainer,{groupThreadId:b,communityId:this.props.communityId,location:"sidebar"})):null,N&&a.size>0?l.a.createElement("div",{className:"topics-container"},l.a.createElement("div",{className:"section-heading"},"Associated Topics"),l.a.createElement("div",{className:"topics"},a)):null,g?l.a.createElement("div",{className:"support-us-section"},l.a.createElement("div",{className:"section-heading"},"Support Us"),l.a.createElement("a",{href:"https://www.patreon.com/bePatron?u="+g,target:"_blank"},l.a.createElement("button",{className:"action-button large patreon"},"Support on Patreon"))):null,o.size>0?l.a.createElement("div",{className:"leaderboard-section"},l.a.createElement("div",{className:"section-heading"},"Leaderboard"),o):null,s.size>0?l.a.createElement("div",{className:"leaderboard-section"},l.a.createElement("div",{className:"section-heading"},"Friend Leaderboard"),s,l.a.createElement("div",{className:"sidebar-label multi help-label"},"Only your Facebook friends or members you have interacted with are displayed")):null,i.size>0?l.a.createElement("div",{className:"moderators-section"},l.a.createElement("div",{className:"section-heading"},h()("Moderator",i.size)),i):null,r.size>0?l.a.createElement("div",{className:"related-communities-section"},l.a.createElement("div",{className:"section-heading"},"Related Communities"),r):null,this.props.currentLoggedInUser?l.a.createElement("div",{className:"invite-members-section"},l.a.createElement("div",{className:"section-heading"},"Invite Members"),l.a.createElement("div",{className:"invite-label"},"Know someone who would like to join ",l.a.createElement("span",{className:"community-name"},d)," community?"),l.a.createElement("div",{className:"email-row"},l.a.createElement("input",{type:"email",className:"email",placeholder:"+ Enter email address",value:this.state.email,onChange:this.onEmailChange,onKeyPress:this.onKeyPressForEmailInvite}),this.state.isEmailConfirmationShown?l.a.createElement("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},l.a.createElement("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),l.a.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})):l.a.createElement("button",{className:"submit",onClick:this.handleEmailSubmit},"Submit")),l.a.createElement("div",{className:"invite-label"},"or ",l.a.createElement("span",{className:"clickable",onClick:this.props.onShareClick},"share on other platforms"))):null,this.props.showLeaveButton?l.a.createElement(w,{onClick:this.props.toggleCommunityJoin}):null,this.props.showUnfollowButton?l.a.createElement(I,{onClick:this.props.toggleCommunityFollow}):null))}}]),t}(l.a.PureComponent),P=n.i(c.connect)(r,{inviteToCommunity:k._39})(N)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions"),channels:e.get("channels"),users:e.get("users"),currentLoggedInUser:e.get("currentLoggedInUser"),newCommunityRecommendation:e.get("newCommunityRecommendation"),postsMap:e.get("discussionPosts"),pagination:e.get("pagination")}}n.d(t,"a",function(){return Y});var a=n(1),l=n.n(a),c=n(53),u=n.n(c),p=n(37),d=(n.n(p),n(15)),h=(n.n(d),n(132)),f=n.n(h),m=n(59),g=n.n(m),v=n(989),y=(n.n(v),n(1587),n(887)),b=n(914),k=n(973),E=n(1005),C=(n(1044),n(1556)),w=(n(932),n(1558)),I=n(1446),S=n(38),O=n(1134),N=n(1273),P=n.n(N),_=n(323),T=n(97),x=(n(1301),n(140)),L=n(1089),M=n(58),j=n(325),D=n(17),A=(n(205),n(829)),R=n(910),F=n(1586),U=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),B=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),U(t,[{key:"onClick",value:function(){this.props.isLeave?window.confirm("Are you sure you want to leave this community?")&&this.props.onClick():this.props.isPending?window.confirm("Are you sure you want to cancel your request to join this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("span",null,this.props.isLeave?l.a.createElement("button",{className:"action-button large red",onClick:this.onClick},"Unfollow"):this.props.isPending?l.a.createElement("button",{className:"action-button large gray",onClick:this.onClick},"Requested"):l.a.createElement("button",{className:"action-button large blue",onClick:this.onClick},"Follow"))}}]),t}(l.a.PureComponent),H=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),U(t,[{key:"onClick",value:function(){this.props.isFollowing?window.confirm("Are you sure you want to unfollow this community?")&&this.props.onClick():this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:this.props.isFollowing?"action-button large following":"action-button large",onClick:this.onClick},this.props.isFollowing?"Following":"Follow")}}]),t}(l.a.PureComponent),q=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return s(t,e),U(t,[{key:"onClick",value:function(){window.confirm("Are you sure you want to leave this community?")&&this.props.onClick()}},{key:"render",value:function(){return l.a.createElement("button",{className:"thin-button leave zoom-on-hover",onClick:this.onClick},this.props.isModerator?"Leave Moderatorship":"Leave Community")}}]),t}(l.a.PureComponent),W=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),U(t,[{key:"render",value:function(){var e=this.props.channelId;return l.a.createElement(d.Link,{to:"/community/"+this.props.communityId+"/"+e,key:e},l.a.createElement("div",{className:this.props.isActive?"active tab-link":"tab-link",ref:"tab-"+e,"data-filter":e},this.props.name,l.a.createElement("div",{className:"line"})))}}]),t}(l.a.PureComponent),z=n.i(_.a)(B),V=n.i(_.a)(H),Q=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={intervalID:null,scrolledPastCoverImage:!1,isMobile:D.h,hasSidebar:D.c?!D.h:Math.max(document.documentElement.clientWidth,window.innerWidth||0)>832,isInviteMembersModalOpen:!1,tabsBarScrollSet:!1,isOnboardingModalOpen:!1,isGroupChatOnboardingModalOpen:!1,isStickyActive:!1,isCommunityInfoUncollapsedInFeed:!1,isCommunitySidebarOpen:!1,hasSignupPrompt:!e.currentLoggedInUser||!e.users.getIn([e.currentLoggedInUser,"onboardingStatus",x.b],!0),rightSidebarStartingPoint:null,unMountFeed:!1},n.toggleCommunityFollow=n.toggleCommunityFollow.bind(n),n.toggleCommunityJoin=n.toggleCommunityJoin.bind(n),n.onRequestCloseOnboardingModal=n.onRequestCloseOnboardingModal.bind(n),n.onRequestCloseGroupChatOnboardingModal=n.onRequestCloseGroupChatOnboardingModal.bind(n),n.onInviteClick=n.onInviteClick.bind(n),n.canInvite=n.canInvite.bind(n),n.onToggleSidebar=n.onToggleSidebar.bind(n),n.onCloseSidebar=n.onCloseSidebar.bind(n),n.toggleCommunityInfo=n.toggleCommunityInfo.bind(n),n.onDescriptionClick=n.onDescriptionClick.bind(n),n.onSignupPromptDismissClick=n.onSignupPromptDismissClick.bind(n),n.updateRightSidebarStartingPointOffset=n.updateRightSidebarStartingPointOffset.bind(n),setTimeout(function(){n.setState({isStickyActive:!0})},3e3),n}return s(t,e),U(t,[{key:"onRequestCloseOnboardingModal",value:function(){this.setState({isOnboardingModalOpen:!1})}},{key:"onRequestCloseGroupChatOnboardingModal",value:function(){this.setState({isGroupChatOnboardingModalOpen:!1})}},{key:"onDescriptionClick",value:function(e){n.i(M.d)(e)}},{key:"onSignupPromptDismissClick",value:function(){this.props.setOnboardingStatus(x.b),this.setState({hasSignupPrompt:!1})}},{key:"updateRightSidebarStartingPointOffset",value:function(){var e=this.refs.rightSidebarStartingPoint&&this.refs.rightSidebarStartingPoint.offsetTop;this.state.rightSidebarStartingPoint!=e&&this.setState({rightSidebarStartingPoint:e+10})}},{key:"componentDidUpdate",value:function(){if(this.updateRightSidebarStartingPointOffset(),this.state.unMountFeed&&this.setState({unMountFeed:!1}),!this.state.tabsBarScrollSet){var e=0,t=this.props.community,i=this.props.activeFilter||"main",o=t.getIn(["groupThreads",0],!1),s=["main"];o&&s.concat(["chat"]),t.get("channels")&&(s=s.concat(t.get("channels").toJS().map(function(e){return e}))),this.setState({tabsBarScrollSet:!0});for(var r in s){var a=s[r];a==i?n.i(L.a)(u.a.findDOMNode(this.refs["tabs-bar"]),e-100,200):this.refs["channelNode-"+a]&&this.refs["channelNode-"+a].refs["tab-"+a]&&(e+=u.a.findDOMNode(this.refs["channelNode-"+a].refs["tab-"+a]).clientWidth)}}}},{key:"componentWillReceiveProps",value:function(e){e.activeFilter!=this.props.activeFilter&&this.setState({tabsBarScrollSet:!1,unMountFeed:!0,rightSidebarStartingPoint:null})}},{key:"componentDidMount",value:function(){this.updateRightSidebarStartingPointOffset()}},{key:"toggleCommunityFollow",value:function(){this.props.toggleCommunityFollow()}},{key:"toggleCommunityJoin",value:function(){this.props.toggleCommunityJoin()}},{key:"onInviteClick",value:function(){this.setState({isInviteMembersModalOpen:!0})}},{key:"canInvite",value:function(){return!0}},{key:"onToggleSidebar",value:function(){this.setState({isCommunitySidebarOpen:!this.state.isCommunitySidebarOpen})}},{key:"onCloseSidebar",value:function(){this.setState({isCommunitySidebarOpen:!1})}},{key:"toggleCommunityInfo",value:function(){this.setState({isCommunityInfoUncollapsedInFeed:!this.state.isCommunityInfoUncollapsedInFeed})}},{key:"render",value:function(){var e=this,t=this.props.activeFilter,i=this.props.params.communityId,o=this.props.community,s=o.get("feed")&&o.get("feed").get(t),r=null,a=o.get("isMember").get(this.props.currentLoggedInUser),c=o.get("isMembershipPending"),u=o.get("isModerator").get(this.props.currentLoggedInUser),p=this.props.currentLoggedInUser&&this.props.users.get(this.props.currentLoggedInUser).get("isSuperModerator"),h=o.get("isFollowing").get(this.props.currentLoggedInUser),m="closed_contribution"==o.get("accessLevel"),S="public"==o.get("accessLevel"),N=o.get("invite"),_=null!=N&&null!=N.get("inviter"),x=o.getIn(["groupThreads",0],!1),L=o.getIn(["description"],""),U=o.get("canContribute"),B=!u&&!p||D.b||this.state.isMobile&&this.state.scrolledPastCoverImage?null:"/community/"+i+"/edit",H=null,Q=this.props.pagination.getIn(["community",i,this.props.activeFilter,"isFetching"],!1),Y=this.props.pagination.getIn(["community",i,this.props.activeFilter,"noMoreItems"],!1),G=L?this.state.isCommunityInfoUncollapsedInFeed?l.a.createElement("div",{className:"community-info"},l.a.createElement("div",{className:"community-info-label label",onClick:this.toggleCommunityInfo},"Community Info"),l.a.createElement(R.a,{html:L,onClick:this.onDescriptionClick})):l.a.createElement("div",{className:"community-info-pin",onClick:this.toggleCommunityInfo},l.a.createElement("div",{className:"community-info-label label"},"Show community info")):u?l.a.createElement("div",null,l.a.createElement(d.Link,{to:"/community/"+i+"/edit",className:"community-info-pin"},l.a.createElement("div",{className:"community-info-label label"},"Add community info"))):null,J=this.state.hasSignupPrompt?l.a.createElement(F.a,{copy:l.a.createElement("div",{className:"copy"},l.a.createElement("span",{className:"logo"},"CommonLounge")," is a community of learners who learn together. Get started with the featured resources above, ask questions and discuss related stuff with everyone."),onDismissClick:this.onSignupPromptDismissClick}):null,K=o.get("channels")?o.get("channels").map(function(n,o){return l.a.createElement(W,{ref:"channelNode-"+n,communityId:i,channelId:n,name:e.props.channels.getIn([n,"name"]),isActive:t==n,key:"channel-"+n})}):null,$=l.a.createElement(v.Sticky,{stickyStyle:{transform:"translateY(43px)",webkitTransform:"translateY(43px)",zIndex:4},topOffset:-43,isDisabled:!this.state.isStickyActive},l.a.createElement("div",{className:"tabs-bar",ref:"tabs-bar"},l.a.createElement(d.Link,{to:"/community/"+i+"/main"},l.a.createElement("div",{className:"main"!=t||this.props.groupThreadId?"tab-link":"active tab-link",ref:"tab-main","data-filter":"main"},"Main",l.a.createElement("div",{className:"line"}))),x?l.a.createElement(d.Link,{to:"/community/"+i+"/group-thread/"+x},l.a.createElement("div",{className:this.props.groupThreadId?"active tab-link tab-chat":"tab-link tab-chat",ref:"tab-chat","data-filter":"chat"},"Chat",l.a.createElement("div",{className:"line"}))):null,K&&K.size>0?l.a.createElement("span",{className:"separator-dot"}):null,K));if(s){var X="main"==t||null==t?"Community."+i:"CommunityChannel."+this.props.activeFilter;r=l.a.createElement(O.a,{ref:"feed",feed:o.get("feed").get(t),parentRouter:this.props.parentRouter,parentRoute:this.props.parentRoute,onLoadMore:this.props.loadMore,updateScroll:this.updateRightSidebarStartingPointOffset,location:this.props.location,feedType:X,stickyTabsBar:$,communityInfoPin:G,communityFeedPrompt:J,hasDiscussionMetadataComposer:U||!this.props.currentLoggedInUser,communityId:i,isFetching:Q,noMoreItems:Y,channelId:"main"!=t&&null!=t?this.props.activeFilter:null,disableCommunityEdit:!0,emptyStateTextDiv:U?[l.a.createElement("div",{className:"onboarding-text-label"},"There are no discussions in this channel yet!")]:[l.a.createElement("div",{className:"onboarding-text-label"},"There are no discussions in this channel yet!",l.a.createElement("br",null),"Join this community to post something.")]}),H=r}this.props.groupThreadId&&(H=l.a.createElement(A.GroupThreadContainer,{groupThreadId:this.props.groupThreadId,communityId:this.props.params.communityId,location:"in-page"}));var Z=null;Z=m?o.get("followersCount")<100?null:l.a.createElement("div",{className:"label"},o.get("followersCount")," ",f()("follower",o.get("followersCount")),"."):o.get("membersCount")<100?null:l.a.createElement("div",{className:"label"},o.get("membersCount")," ",f()("member",o.get("membersCount")),".");var ee="page community-page";return this.props.groupThreadId&&(ee+=" has-group-thread"),l.a.createElement("div",null,l.a.createElement(w.a,{isOpen:this.state.isInviteMembersModalOpen,fetchCommunityRecommendations:this.props.fetchCommunityRecommendations,onRequestClose:function(){e.setState({isInviteMembersModalOpen:!1})},communityId:i,allowInvite:o.get("allowMembersToInvite")&&U||u,newCommunityRecommendation:this.props.newCommunityRecommendation,isModerator:u,users:this.props.users,inviteToCommunity:this.props.inviteToCommunity,clearState:this.props.clearState,url:"/community/"+i,title:o.get("name")+" community on CommonLounge - "}),l.a.createElement(v.StickyContainer,{className:ee},l.a.createElement(y.a,{noBack:!0,shomHome:!0,showSignUpInfoIfLoggedOut:!0,onToggleSidebar:this.onToggleSidebar,forceShowCommunities:!0,contributeURL:i?"/discussion/new/community/"+i:null,isRightSidebarOpen:this.state.isCommunitySidebarOpen},l.a.createElement(k.a,{activeCommunityId:i})),"main"==t&&!this.props.groupThreadId||!this.state.isMobile?l.a.createElement("div",{className:"community-hero-unit",ref:"herounit"},l.a.createElement(E.a,{className:"cover-image",url:n.i(j.c)(o.get("coverImg"),320)||P.a,backupUrl:o.get("coverImg")||P.a,defaultUrl:P.a,ssrUrl:o.get("coverImg")||P.a}),l.a.createElement("div",{className:"split-section"},l.a.createElement("div",{className:"left"},l.a.createElement("div",{className:"title"},o.get("name")),m?l.a.createElement("div",{className:"label closed-contribution-label"},"Invite Only"):null,m?l.a.createElement("div",{className:"label"},"Only members can start new discussions ",o.get("allowPublicToReply")?"· Everyone can reply":"or reply"):null,Z,l.a.createElement("div",{className:"community-members"},this.props.memberImageNodes,this.canInvite()?l.a.createElement("span",{className:"invite-button",onClick:this.onInviteClick}):null),a||_?null:l.a.createElement("div",{className:"action-button-group"},l.a.createElement(z,{isLeave:a,isPending:c,onClick:this.toggleCommunityJoin,to:"/community/"+i+"?action=community-join",entityId:i,action:"community-join"}),S?null:l.a.createElement(V,{isFollowing:h,allowLurker:!0,onClick:this.toggleCommunityFollow,to:"/community/"+i+"?action=community-follow",entityId:i,action:"community-follow"})),l.a.createElement(I.a,{invite:N,users:this.props.users,onAccept:function(){return e.props.manageCommunityInvite(i,!0)},onIgnore:function(){return e.props.manageCommunityInvite(i,!1)}}),m&&u&&o.get("pendingJoinRequestsCount")>0?l.a.createElement("div",{className:"action-button-group"},l.a.createElement(d.Link,{to:"/community/"+i+"/pending",className:"action-button no-width small"},"Review ",o.get("pendingJoinRequestsCount")," pending ",f()("request",o.get("pendingJoinRequestsCount")))):null,l.a.createElement("div",{className:"description"},l.a.createElement("span",null,o.get("about"))),o.get("isStub")?l.a.createElement("div",{className:"up-and-coming-label"},l.a.createElement("span",{className:"label"},"This community is up-and-coming right now. If it reaches 10000 followers, we will find curators to maintain and create high quality content for it."),l.a.createElement("span",{className:"label link",onClick:function(){return e.setState({isInviteMembersModalOpen:!0})}},"Fix this.")):null),l.a.createElement("div",{className:"right"},this.canInvite()?l.a.createElement("span",{className:"thin-button share zoom-on-hover",onClick:this.onInviteClick},"Share this"):null,this.canInvite()?l.a.createElement("span",{className:"thin-button invite zoom-on-hover",onClick:this.onInviteClick},"Invite Members"):null,B?l.a.createElement(d.Link,{to:B,className:"thin-button settings zoom-on-hover"},"Community Settings"):null,a?l.a.createElement(q,{onClick:this.toggleCommunityJoin,isModerator:u}):null))):null,l.a.createElement("div",{ref:"rightSidebarStartingPoint"}),this.state.unMountFeed?null:H,!Q||this.props.groupThreadId||this.refs.feed&&this.refs.feed.getWrappedInstance().isFeedCollapsed()?null:l.a.createElement("div",{className:"loader-div wide"},l.a.createElement(T.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")),Q||this.props.groupThreadId?null:l.a.createElement(b.a,{isVeryWide:!0,currentLoggedInUser:this.props.currentLoggedInUser,to:"/community/"+i+"?action=community-join",entityId:i,action:"community-join"})),D.a||this.props.groupThreadId?null:l.a.createElement(C.a,{communityId:i,activeFilter:t,createMarkup:this.props.createMarkup,showGroupThread:!this.props.groupThreadId,acButtons:n.i(M.a)({type:"community",eid:i}),isFixedHeight:this.props.groupThreadId,top:this.state.rightSidebarStartingPoint?this.state.rightSidebarStartingPoint:null,onShareClick:function(){return e.setState({isInviteMembersModalOpen:!0})}}),l.a.createElement(g.a,{onRequestClose:this.onCloseSidebar,isOpen:this.state.isCommunitySidebarOpen,overlayClassName:"modal-overlay sidebar-modal-overlay",className:"modal-content sidebar-modal-content"},l.a.createElement(C.a,{communityId:i,activeFilter:t,isChatTab:!!this.props.groupThreadId,createMarkup:this.props.createMarkup,inModal:!0,onClose:this.onCloseSidebar,showLeaveButton:a,toggleCommunityJoin:this.toggleCommunityJoin,showUnfollowButton:h&&!a,toggleCommunityFollow:this.toggleCommunityFollow,editUrl:!u&&!p||D.b||this.state.isMobile&&this.state.scrolledPastCoverImage?null:"/community/"+i+"/edit",onShareClick:function(){return e.setState({isInviteMembersModalOpen:!0})},onInviteClick:this.canInvite()&&!this.state.isMobile?this.onInviteClick:null,acButtons:n.i(M.a)({type:"community",eid:i})})))}}]),t}(l.a.PureComponent),Y=n.i(p.connect)(r,{fetchCommunityRecommendations:S._35,inviteToCommunity:S._39,manageCommunityInvite:S._40,clearState:S._15,setOnboardingStatus:S.S})(n.i(d.withRouter)(Q))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(59),c=(n.n(l),n(1447)),u=n(39),p=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clearState=n.clearState.bind(n),n.fetchRecommendations=n.fetchRecommendations.bind(n),n}return s(t,e),p(t,[{key:"fetchRecommendations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderator";this.props.fetchCommunityRecommendations("","","",[],"user",e,t,this.props.communityId)}},{key:"clearState",value:function(e){e?this.props.clearState(["newCommunityRecommendation","users",e],n.i(u.Map)()):this.props.clearState(["newCommunityRecommendation","users"],n.i(u.Map)({moderators:n.i(u.Map)(),members:n.i(u.Map)()}))}},{key:"render",value:function(){var e=this;return a.a.createElement(c.a,{fetchRecommendations:this.fetchRecommendations,inviteFn:function(t,n){return e.props.inviteToCommunity(e.props.communityId,t,n)},newRecommendation:this.props.newCommunityRecommendation,users:this.props.users,shouldAllowModerators:this.props.isModerator,isOpen:this.props.isOpen,onRequestClose:this.props.onRequestClose,clearState:this.clearState,shouldShowShareMessage:!this.props.allowInvite,url:this.props.url,title:this.props.title,objType:"Community",objId:this.props.communityId})}}]),t}(a.a.PureComponent);t.a=d},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{communities:e.get("communities"),channels:e.get("channels"),crossPostRecommendation:e.get("crossPostRecommendation")}}n.d(t,"a",function(){return b});var a=n(1),l=n.n(a),c=n(59),u=n.n(c),p=n(37),d=(n.n(p),n(39)),h=(n.n(d),n(203)),f=(n.n(h),n(927)),m=n(1034),g=n(38),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.fetchRecommendations=n.fetchRecommendations.bind(n),n.onSearch=n.onSearch.bind(n),n.fetchCommunity=n.fetchCommunity.bind(n),n.selectChannel=n.selectChannel.bind(n),n.selectCommunity=n.selectCommunity.bind(n),n.onCrossPost=n.onCrossPost.bind(n),n.state={selectedCommunity:null,selectedChannel:null,currentSearchQuery:"",isFetchingRecommendations:!1,fetchRecommendationsDeferredParams:null},n}return s(t,e),v(t,[{key:"onClose",value:function(){this.props.onRequestClose()}},{key:"fetchRecommendations",value:function(e){var t=this;this.state.isFetchingRecommendations?this.setState({fetchRecommendationsDeferredParams:{query:e}}):(this.setState({isFetchingRecommendations:!0}),this.props.fetchCrossPostRecommendations(this.props.discussionId,e),window.setTimeout(function(){if(t.state.fetchRecommendationsDeferredParams){var e=t.state.fetchRecommendationsDeferredParams;t.setState({fetchRecommendationsDeferredParams:null,isFetchingRecommendations:!1}),t.fetchRecommendations(e.query)}else t.setState({isFetchingRecommendations:!1})},500))}},{key:"onSearch",value:function(e){this.setState({currentSearchQuery:e,selectedCommunity:null,selectedChannel:null}),this.fetchRecommendations(e)}},{key:"fetchCommunity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.selectedCommunity;if(e){var t=this.props.communities.get(e);t&&t.get("name")&&t.get("channels")||this.props.fetchCommunityMetadata(e,null,["channels","eid","name"])}}},{key:"selectChannel",value:function(e){this.setState({selectedChannel:e.channelId})}},{key:"selectCommunity",value:function(e){this.setState({selectedCommunity:e.communityId,selectedChannel:null}),this.fetchCommunity(e.communityId)}},{key:"onCrossPost",value:function(){this.props.crossPostDiscussion(this.props.discussionId,this.state.selectedCommunity,this.state.selectedChannel),this.onClose()}},{key:"render",value:function(){var e=this,t=null;if(this.props.crossPostRecommendation&&this.props.crossPostRecommendation.getIn([this.props.discussionId,this.state.currentSearchQuery])){var i=this.props.crossPostRecommendation.getIn([this.props.discussionId,this.state.currentSearchQuery]).map(function(t){return n.i(d.Map)({selected:t==e.state.selectedCommunity,type:"community",name:e.props.communities.get(t).get("name"),reason:"",disabled:!1,communityId:t})});t=l.a.createElement(m.a,{options:i,onToggle:this.selectCommunity})}var o=null,s=this.state.selectedCommunity;if(s){var r=this.props.communities.get(s);if(r&&r.get("channels")){var a=r.get("channels").map(function(t){return n.i(d.Map)({selected:t==e.state.selectedChannel,type:"channel",name:e.props.channels.get(t).get("name"),reason:"",disabled:!1,channelId:t})});a.size>0&&(o=l.a.createElement(m.a,{options:a,onToggle:this.selectChannel}))}}return l.a.createElement(u.a,{isOpen:this.props.isOpen,onRequestClose:this.onClose,className:"modal-content",overlayClassName:"modal-overlay"},l.a.createElement("button",{className:"button close-button",onClick:this.onClose}),l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading with-padding-top"},"Select Community"),l.a.createElement(f.a,{type:"community",showAddLanguage:!1,query:this.state.currentSearchQuery,onChange:function(t){return e.onSearch(t)}}),t),o?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Select Channel"),l.a.createElement("div",{className:"onboarding-text-label no-padding"},"(Optional)"),o):null,this.state.selectedCommunity?l.a.createElement("div",{className:"action-button centered",onClick:this.onCrossPost},"Submit"):l.a.createElement("div",{className:"onboarding-text-label no-padding-bottom"},"Communities this discussion has already been cross-posted to won't show up in search results."),l.a.createElement("div",{className:"onboarding-text-label half-padding"},"Cross-posting lets you post a discussion to another community. Use it when a discussion should belong to multiple closely-related communities."))}}]),t}(l.a.PureComponent),b=n.i(p.connect)(r,{fetchCrossPostRecommendations:g._48,fetchCommunityMetadata:g.X,crossPostDiscussion:g._49})(y)},,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{discussions:e.get("discussions"),postsMap:e.get("discussionPosts"),tagsMap:e.get("tags"),pagination:e.get("pagination"),currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users")}}n.d(t,"a",function(){return L});var a=n(1),l=n.n(a),c=n(53),u=(n.n(c),n(37)),p=(n.n(u),n(39)),d=(n.n(p),n(899)),h=n.n(d),f=n(896),m=(n.n(f),n(132)),g=n.n(m),v=n(15),y=(n.n(v),n(326)),b=(n.n(y),n(1299)),k=(n(1575),n(32)),E=n(17),C=n(38),w=n(203),I=n.n(w),S=(n(1301),n(140),n(97)),O=n(324),N=n(1452),P=n(989),_=(n.n(P),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),T=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onEnter=n.onEnter.bind(n),n.onLeave=n.onLeave.bind(n),n}return s(t,e),_(t,[{key:"onEnter",value:function(e){this.props.onWaypointEnter(e,this.props.postId,this.props.direction)}},{key:"onLeave",value:function(e){this.props.onWaypointLeave(e,this.props.postId,this.props.direction)}},{key:"render",value:function(){return l.a.createElement(h.a,{onEnter:this.onEnter,onLeave:this.onLeave,scrollableAncestor:window})}}]),t}(l.a.PureComponent),x=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasScrolledToPostId:!1,highlightedPostId:null,forceScrollToReplies:!1,unfetchedPostsTopCount:0,unfetchedPostsBottomCount:0,isStickyActive:!1,isOnboardingModalOpen:!1,loadingPayload:null},n.fetchPosts=n.fetchPosts.bind(n),n.showMore=n.showMore.bind(n),n.fetchData=n.fetchData.bind(n),n.isDataAvailable=n.isDataAvailable.bind(n),n.getPostIdsFromInfo=n.getPostIdsFromInfo.bind(n),n.getPostContainersFromInfo=n.getPostContainersFromInfo.bind(n),n.hideReplyButton=n.hideReplyButton.bind(n),n.scrollAndHighlight=n.scrollAndHighlight.bind(n),n.scrollToReplies=n.scrollToReplies.bind(n),n.getDiscussion=n.getDiscussion.bind(n),n.isActiveFilterTag=n.isActiveFilterTag.bind(n),n.onRequestCloseOnboardingModal=n.onRequestCloseOnboardingModal.bind(n),n.openOnboardingModal=n.openOnboardingModal.bind(n),n.encapsulateContainer=n.encapsulateContainer.bind(n),n.props.refetch&&n.fetchData(),setTimeout(function(){n.setState({isStickyActive:!0})},5e3),n.visiblePostIds=[],n.scrollEvents={},n.onWaypointEnter=n.onWaypointEnter.bind(n),n.onWaypointLeave=n.onWaypointLeave.bind(n),n.logScrollActivity=n.logScrollActivity.bind(n),n.logScrollActivityOnLeave=n.logScrollActivityOnLeave.bind(n),n.logDiscussionPostEvent=n.logDiscussionPostEvent.bind(n),n}return s(t,e),_(t,[{key:"onWaypointEnter",value:function(e,t,n){"top"!=n||"below"!=e.previousPosition&&null!=e.previousPosition?"bottom"!=n||"above"!=e.previousPosition&&null!=e.previousPosition||-1==this.visiblePostIds.indexOf(t)&&(this.visiblePostIds.push(t),this.logScrollActivity(t,"enter")):-1==this.visiblePostIds.indexOf(t)&&(this.visiblePostIds.push(t),this.logScrollActivity(t,"enter"))}},{key:"onWaypointLeave",value:function(e,t,n){if("top"==n&&"below"==e.currentPosition||"bottom"==n&&"above"==e.currentPosition){var i=this.visiblePostIds.indexOf(t);i>-1&&(this.visiblePostIds=this.visiblePostIds.slice(0,i).concat(this.visiblePostIds.slice(i+1)),this.logScrollActivity(t,"exit"))}}},{key:"componentDidMount",value:function(){this.scrollAndHighlight(),this.scrollToReplies()}},{key:"componentDidUpdate",value:function(){this.scrollAndHighlight(),this.scrollToReplies()}},{key:"logScrollActivity",value:function(e,t){var n=new Date;if(this.scrollEvents[e]&&"exit"==t){var i=this.scrollEvents[e];n-i>N.a&&this.logDiscussionPostEvent(e,i,n),delete this.scrollEvents[e]}else"enter"==t&&(this.scrollEvents[e]=new Date)}},{key:"logScrollActivityOnLeave",value:function(){var e=this;this.scrollEvents&&(Object.keys(this.scrollEvents).forEach(function(t){e.scrollEvents[t]&&e.logScrollActivity(t,"exit")}),this.scrollEvents={})}},{key:"logDiscussionPostEvent",value:function(e,t,n){this.props.logEvent({type:"scroll",payload:{obj:e,obj_type:"DiscussionPost",scroll_in:t,scroll_out:n,related_info:"Discussion."+this.props.discussionId}})}},{key:"getActiveFilter",value:function(e){switch(e){case void 0:case"":return"main";default:return e}}},{key:"getDiscussion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.discussionId;return e.discussions.get(t)}},{key:"isDataAvailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getDiscussion(e),n=t?t.get("posts"):null,i=this.getActiveFilter(e.activeFilter);return t&&!t.get("isFetchingPosts")&&t&&n&&void 0!=n.get(i)&&void 0!=n.get(i).get("posts")}},{key:"componentWillReceiveProps",value:function(e){var t=e.displayedPostId?e.displayedPostId:null,n=this.getDiscussion(e);this.isDataAvailable(e)&&this.props.discussionId==e.discussionId?e.activeFilter!=this.props.activeFilter?(this.props.clearState(["discussions",e.discussionId,"posts",e.activeFilter,"posts"]),"all"==e.activeFilter&&this.setState({forceScrollToReplies:!0}),this.fetchData(e.activeFilter,!1,t),this.logScrollActivityOnLeave()):this.props.displayedPostId!=e.displayedPostId&&(this.fetchData(e.activeFilter,!1,t),this.logScrollActivityOnLeave()):(!n||n&&!n.get("isFetchingView"))&&(this.fetchData(e.activeFilter,!1,t),this.logScrollActivityOnLeave())}},{key:"isActiveFilterTag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.activeFilter;return!("all"==e||"main"==e||!e)}},{key:"fetchPosts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.activeFilter,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.displayedPostId,i=this.isActiveFilterTag(e)?e:null;n=t?null:n,this.props.fetchDiscussionMetadata(this.props.discussionId,i,["view"],n,"all"==e)}},{key:"showMore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.activeFilter,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.displayedPostId,i=this.isActiveFilterTag(t)?t:null;this.props.fetchDiscussionMetadata(this.props.discussionId,i,["morePosts"],n,!0,e)}},{key:"fetchData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.activeFilter,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.displayedPostId,i={};this.fetchPosts(e,t,n),i=n?{type:"view",payload:{obj:n,obj_type:"DiscussionPost",related_info:"thread_view"}}:this.isActiveFilterTag(e)?{type:"view",payload:{events:[{obj:this.props.discussionId,obj_type:"Discussion",related_info:"tag"},{obj:e,obj_type:"DiscussionTag",related_info:"fetch_posts"}]}}:{type:"view",payload:{obj:this.props.discussionId,obj_type:"Discussion",related_info:this.getActiveFilter(e)}},this.props.logEvent(i)}},{key:"componentWillUnmount",value:function(){this.logScrollActivityOnLeave(),this.props.clearState(["discussions",this.props.discussionId,"posts"])}},{key:"hideReplyButton",value:function(){return this.props.isContributionBlocked&&this.props.currentLoggedInUser&&!this.props.users.get(this.props.currentLoggedInUser).get("isLurker")}},{key:"scrollAndHighlight",value:function(){var e=this,t=this.props.displayedPostId;!this.state.hasScrolledToPostId&&t&&this.refs["post-"+t]&&(y.scroller.scrollTo("post-"+t,{duration:500,smooth:!0,offset:-n.i(k.j)().height/2,containerId:null}),this.setState({hasScrolledToPostId:!0,highlightedPostId:t}),window.setTimeout(function(){e.setState({highlightedPostId:null})},3e3))}},{key:"scrollToReplies",value:function(){this.props.displayedPostId;if(this.state.forceScrollToReplies&&this.refs.posts&&this.isDataAvailable()){var e=this.props.discussions&&this.props.discussions.get(this.props.discussionId);!this.props.displayedPostId&&E.a&&e.getIn(["posts",this.props.activeFilter,"posts"],n.i(p.List)()).size>0&&y.scroller.scrollTo("posts",{duration:500,smooth:!0,offset:-50,containerId:null}),this.setState({forceScrollToReplies:!1})}}},{key:"getPostIdsFromInfo",value:function(e){var t=n.i(p.List)(),i=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var l=r.value;l.get("id")&&(t.push(l.get("id")),l.get("replies")&&(t=t.concat(this.getPostIdsFromInfo(l.get("replies")))))}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return t}},{key:"encapsulateContainer",value:function(e,t){var n=e.slice(t);return e.slice(0,t).concat(l.a.createElement(P.StickyContainer,null,n," "))}},{key:"getPostContainersFromInfo",value:function(e,t,n){for(var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=[],a=0;a<e.size;a++)!function(a){var c=e.get(a);if("CLUSTER_TITLE"==c.get("view")){var u=l.a.createElement(I.a,{transitionName:"post",transitionAppear:!0,transitionAppearTimeout:1e3,transitionEnter:!1,transitionLeave:!1},l.a.createElement(P.Sticky,{isDisabled:!i.state.isStickyActive,stickyStyle:{transform:"translateY(33px)",webkitTransform:"translateY(33px)",zIndex:4},bottomOffset:23,topOffset:-33},l.a.createElement("div",{className:"tag-section-heading"},c.get("title"))));void 0!=s.stickyContainer&&(r=i.encapsulateContainer(r,s.stickyContainer)),s.stickyContainer=void 0!=s.stickyContainer?r.length:a,r.push(u)}else if("SHOW_MORE"==c.get("view"))r.push(l.a.createElement(I.a,{transitionName:"post",transitionAppear:!0,transitionAppearTimeout:1e3,transitionEnter:!1,transitionLeave:!1},l.a.createElement("div",{className:"load-more-container",style:{paddingLeft:(0==o?0:20)+"px"},onClick:function(){i.showMore(c.get("payload").toJS()),i.setState({loadingPayload:c.get("payload")})}},l.a.createElement("div",{className:"load-more"},"Show ",c.get("count")," more ",g()("reply",c.get("count")),i.state.loadingPayload==c.get("payload")?l.a.createElement("span",{className:"loader-span"},l.a.createElement(S.a,{isSmall:!0})):null))));else{var p=c.get("id"),d="COLLAPSED"==c.get("view"),h="INLINE"==c.get("view"),f=null;c.get("replies")&&(f=i.getPostContainersFromInfo(c.get("replies"),t,n,o+1)),r.push(l.a.createElement("div",{className:"line"},l.a.createElement(y.Element,{name:"post-"+p},l.a.createElement("div",{className:"post-container",style:{paddingLeft:(0==o?0:20)+"px"}},d?null:l.a.createElement(T,{postId:p,onWaypointEnter:i.onWaypointEnter,onWaypointLeave:i.onWaypointLeave,direction:"top"}),l.a.createElement(b.a,{key:"post-"+p,ref:"post-"+p,post:n.get(p),isCollapsed:d,isPreview:h,view:c.get("view"),tag:i.props.activeFilter,discussionId:t,hideReplyLink:i.hideReplyButton(),hideRepliesLink:!0,hideParent:!0,indentLevel:c.get("indentLevel"),isHighlighted:p==i.state.highlightedPostId,redirectAfterDeleteUrl:"/discussion/"+t+"/"+i.props.activeFilter,showPostReplySharingPrompt:i.props.showPostReplySharingPrompt}),d?null:l.a.createElement(T,{postId:p,onWaypointEnter:i.onWaypointEnter,onWaypointLeave:i.onWaypointLeave,direction:"bottom"}),f?l.a.createElement("div",{className:"line"},f):null))))}}(a);return void 0!=s.stickyContainer&&(r=this.encapsulateContainer(r,s.stickyContainer)),r}},{key:"onRequestCloseOnboardingModal",value:function(){this.setState({isOnboardingModalOpen:!1})}},{key:"openOnboardingModal",value:function(){this.setState({isOnboardingModalOpen:!0})}},{key:"render",value:function(){var e=this,t=this.props.discussionId,n=this.props.discussions.get(t);if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(S.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var i=this.props.postsMap,o=(n.get("tags"),this.props.tagsMap),s=this.props.activeFilter,r=n.get("posts").get(s).get("posts"),a=(this.getPostIdsFromInfo(r),this.getPostContainersFromInfo(r,t,i)),c=this.props.canViewDiscussion,u=("all"==s&&this.props.displayedPostId,""),p=!1,d=!1;if(this.isActiveFilterTag()){var h=o.get(s),f=h&&h.get("name");u=O.e+" with tag: "+f,p=!0}else this.props.displayedPostId?(u="Discussion",p=!0):"CLUSTERS"==n.get("viewType")?(u="Discussion",d=!0):u="Discussion";return l.a.createElement(y.Element,{name:"posts"},l.a.createElement("div",null,l.a.createElement("div",null,0==a.length?c?l.a.createElement("div",{className:"show-discussion-button-wrapper"},l.a.createElement(v.Link,{to:"/discussion/"+t+"/post",className:"show-discussion-button",onClick:function(){return e.setState({isDiscussionCollapsed:!1})}},"Add a comment")):null:l.a.createElement("div",null,l.a.createElement("div",{className:"separator"},u))),l.a.createElement("div",{className:this.props.replyingToDiscussionId?"posts extra-bottom-margin":this.hideReplyButton()?"posts no-reply-input":0==a.length?"posts no-margin":"posts",ref:"posts"},this.props.pagination.getIn(["discussion",t,this.props.activeFilter,"isFetchingTop"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(S.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null,a,this.props.pagination.getIn(["discussion",t,this.props.activeFilter,"isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(S.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null,p||d?l.a.createElement("div",{className:"next-up-buttons"},l.a.createElement(v.Link,{to:"/discussion/"+this.props.discussionId+"/"+(d?"all":"main")},l.a.createElement("div",{className:"next-up-button"},d||n.get("isClusterHidden")?"See All "+O.b:"See Summary"))):null)))}}]),t}(l.a.PureComponent),L=n.i(u.connect)(r,{logEvent:C.c,fetchDiscussionMetadata:C.e,clearState:C._15})(x)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users"),discussions:e.get("discussions")}}n.d(t,"a",function(){return b});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(890),n(323)),d=n(38),h=n(1004),f=n(989),m=(n.n(f),n(39)),g=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),g(t,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.hasCompleted?"mark-as-completed-toggle completed":"mark-as-completed-toggle",onClick:this.props.onClick},this.props.hasCompleted?"Marked":"Mark"," completed")}}]),t}(l.a.PureComponent),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleToggleCompleted=n.handleToggleCompleted.bind(n),n.state={showFeedbackForm:!1},n}return s(t,e),g(t,[{key:"handleToggleCompleted",value:function(e,t,n){this.props.toggleDiscussionCompleted(e,t),n||this.setState({showFeedbackForm:!0})}},{key:"render",value:function(){var e=this;if(!this.props.discussion||!this.props.discussion.get("playlists")||this.props.discussion.get("playlists").size<1||"PLAYLIST"==this.props.discussion.getIn(["typeInfo","type"]))return null;var t=n.i(p.a)(v),i=this.props.discussion.get("eid"),o=this.props.discussion.get("hasCompleted"),s=this.props.discussion.get("canView"),r=this.props.displayedPlaylist?this.props.displayedPlaylist:this.props.discussion.get("playlists")&&this.props.discussion.get("playlists").get(0),a=r?r.getIn(["items","prevDiscussionIds"],n.i(m.List)()).get(-1):null,c=r?r.getIn(["items","nextDiscussionIds"],n.i(m.List)()).get(0):null,d=this.props.discussion.getIn(["rating","isRateable"],!1)&&s,g=l.a.createElement("div",{className:"playlist-options-box prev-next-buttons"},l.a.createElement("div",{className:"split-section"},a?l.a.createElement(u.Link,{to:"/discussion/"+a,className:"previous-section"},l.a.createElement("div",{className:"previous-label"},"Previous"),l.a.createElement("div",{className:"label dark-gray"},this.props.discussions.getIn([a,"name"],null))):null,c?l.a.createElement(u.Link,{to:"/discussion/"+c,className:"next-section"},l.a.createElement("div",{className:"next-label"},"Next"),l.a.createElement("div",{className:"label dark-gray"},this.props.discussions.getIn([c,"name"],null))):null));return l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"playlist-section clickable":"playlist-section",onClick:this.props.onContentClick},l.a.createElement("div",{className:"playlist-options-box"},s?l.a.createElement(t,{onClick:function(){return e.handleToggleCompleted(i,r.get("discussion"),o)},hasCompleted:o,to:"/discussion/"+i}):null,d?l.a.createElement("div",{className:"feedback-section-wrapper"},l.a.createElement(h.a,{discussionId:i,showFeedbackForm:this.state.showFeedbackForm,displayedPlaylistId:r.get("eid"),displayedPlaylistDiscussionId:r.get("discussion")})):null),this.props.stickyStyle?l.a.createElement(f.Sticky,{className:"sticky-playlist-options-box-container",stickyStyle:this.props.stickyStyle,topOffset:this.props.topOffset},g):g)}}]),t}(l.a.PureComponent),b=n.i(c.connect)(r,{toggleDiscussionCompleted:d.t})(y)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{users:e.get("users")}}n.d(t,"a",function(){return v});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(890)),p=n(133),d=n(323),h=n(15),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),f(t,[{key:"render",value:function(){return l.a.createElement("button",{className:"remind-button",onClick:this.props.onClick},"Remind me")}}]),t}(l.a.PureComponent),g=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),f(t,[{key:"render",value:function(){var e=n.i(d.a)(m),t=this.props.discussion.get("typeInfo"),i=this.props.users.get(t.get("host")),o=new Date(t.get("dtStarted")),s=new Date(t.get("dtEnded")),r=new Date,a=r<o?"TAKING_QUESTIONS":r>s?"ENDED":"LIVE";return l.a.createElement("div",{className:this.props.shouldLinkToDiscussion?"ama-section clickable":"ama-section",onClick:this.props.onContentClick},l.a.createElement(h.Link,{to:"/profile/"+i.get("eid")},l.a.createElement(p.a,{displaySize:"original",className:"profile-picture",size:"100",name:i.get("displayName"),src:i.get("avatarUrl")})),l.a.createElement("div",{className:"heading"},"Q&A Session with ",i.get("displayName")),l.a.createElement("div",{className:"label bio"},i.get("bio")),"LIVE"==a?l.a.createElement("div",null,l.a.createElement("div",{className:"status live"},"Live"),l.a.createElement("div",{className:"label"},i.get("firstName")," is answering questions right now")):"ENDED"==a?l.a.createElement("div",null,l.a.createElement("div",{className:"status post-ama"},"Ended"),l.a.createElement("div",{className:"label"},"This Q&A Session has now ended but"),l.a.createElement("div",{className:"label"},i.get("firstName")," may still answer new questions")):l.a.createElement("div",null,l.a.createElement("div",{className:"status pre-ama"},"Taking Questions Now"),l.a.createElement("div",{className:"label"},i.get("firstName")," will start answering questions on"),l.a.createElement("div",{className:"label"},o.toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})," (",l.a.createElement(u.a,{date:o}),") "),this.props.discussion.get("isFollowing")?l.a.createElement("div",{className:"reminder-label-section"},l.a.createElement("div",{className:"label"},"We'll send you an email reminder"),l.a.createElement("div",{className:"label"},"15 minutes before the session starts")):l.a.createElement(e,{allowLurker:!0,onClick:this.props.toggleFollow,entityId:this.props.discussion.get("eid"),action:"discussion-follow",to:"/discussion/"+this.props.discussion.get("eid")+"?action=discussion-follow"})))}}]),t}(l.a.PureComponent),v=n.i(c.connect)(r)(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(132),c=n.n(l),u=n(324),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s(t,e),p(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"stats discussion-stats"+(this.props.shiftedLeft?" shifted-left":"")},a.a.createElement("div",{className:"stats-item"},a.a.createElement("div",{className:"stats-value"},this.props.discussion.get("postsCount")),a.a.createElement("div",{className:"stats-label label"},c()(u.d,this.props.discussion.get("postsCount")))),a.a.createElement("div",{className:"stats-item"},a.a.createElement("div",{className:"stats-value"},this.props.discussion.get("participantsCount")),a.a.createElement("div",{className:"stats-label label"},c()("participant",this.props.discussion.get("participantsCount")))),a.a.createElement("div",{className:"stats-item"},a.a.createElement("div",{className:"stats-value"},this.props.discussion.get("viewsCount")),a.a.createElement("div",{className:"stats-label label"},c()("view",this.props.discussion.get("viewsCount")))))}}])}(a.a.PureComponent)},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser")}}var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(901)),d=n.n(p),h=n(325),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),f(t,[{key:"render",value:function(){var e=this.props.community.get("eid");return l.a.createElement("div",{className:this.props.isVisible?"signup-prompt bottom visible":"signup-prompt bottom hidden"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"avatar-image",style:{backgroundImage:"url("+(n.i(h.c)(this.props.community.get("coverImg"),60)||d.a)+")"}}),l.a.createElement("div",{className:"text"},l.a.createElement("div",null,"See more content from ",l.a.createElement("span",{className:"community-name"},this.props.community.get("name"))," community.")),l.a.createElement("div",{className:"button main",onClick:function(){return u.browserHistory.push("/community/"+e)}},"Let's go →")))}}]),t}(l.a.PureComponent);n.i(c.connect)(r)(n.i(u.withRouter)(m))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=n(37),c=(n.n(l),n(15)),u=(n.n(c),n(205)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}s(t,e),p(t,[{key:"render",value:function(){return a.a.createElement("div",{className:this.props.isVisible?"signup-prompt bottom visible":"signup-prompt bottom hidden"},a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"text"},a.a.createElement("div",null,"This tutorial is part of the course: ",n.i(u.k)(this.props.listName,30))),a.a.createElement(c.Link,{className:"button main",to:"/discussion/"+this.props.discussionId},"Check it out!")))}}])}(a.a.PureComponent)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return g});var a=n(1),l=n.n(a),c=n(15),u=(n.n(c),n(37)),p=(n.n(u),n(834)),d=n(17),h=n(1267),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),f(t,[{key:"render",value:function(){var e=d.a?l.a.createElement("div",{className:"heading"},"A world class education",l.a.createElement("br",null)," for the price of coffee."):l.a.createElement("div",{className:"heading"},"A world class education for the price of coffee.");return l.a.createElement("div",{className:"home-hero"},l.a.createElement("div",{className:"home-hero-content"},l.a.createElement("div",{className:"left-section"},e,l.a.createElement("div",{className:"benefits"},l.a.createElement("div",{className:"benefit"},l.a.createElement("div",{className:"index"}),l.a.createElement("div",{className:"copy"},l.a.createElement("strong",null,"Become an expert in weeks"),", not months.")),l.a.createElement("div",{className:"benefit"},l.a.createElement("div",{className:"index"}),l.a.createElement("div",{className:"copy"},l.a.createElement("strong",null,"No installation required"),". All code runs right here, even in videos.")),l.a.createElement("div",{className:"benefit"},l.a.createElement("div",{className:"index"}),l.a.createElement("div",{className:"copy"},l.a.createElement("strong",null,"Learn on-the-go")," with mobile apps."))),l.a.createElement(p.SearchContainer,{ref:"searchContainer",isPage:!1,params:{filter:"top"},placeholder:"What do you want to learn?"})),l.a.createElement("div",{className:"right-section"},l.a.createElement(h.a,{video:this.props.video,hasVideo:!0,placeholderImg:"https://static.commonlounge.com/fp/original/Fba15E7aRVDHL1dJy3QtRQLb41538003056_kc"}))))}}]),t}(l.a.PureComponent),g=n.i(u.connect)(r,{},null,{withRef:!0})(m)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),discussions:e.get("discussions"),path:e.get("path")}}n.d(t,"a",function(){return g});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(97),n(132)),p=(n.n(u),n(17),n(15)),d=(n.n(p),n(1003)),h=n(1044),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),f(t,[{key:"render",value:function(){if(!this.props.path)return null;var e=this.props.discussions.get(this.props.path);if(!e)return null;var t=this.props.discussions.get(e.getIn(["typeInfo","nextUncompletedDiscussion"]));if(!t)return null;var n=e.getIn(["typeInfo","nextUncompletedCourse"]);if(!n)return null;var i=this.props.discussions.get(n),o=l.a.createElement("div",{className:"course"},l.a.createElement(d.a,{discussion:i}));return l.a.createElement("div",{className:"next-up-on-your-path"},l.a.createElement("div",{className:"left"},l.a.createElement("div",{className:"path"},l.a.createElement("div",{className:"section-heading"},"Course in progress:"),o)),l.a.createElement("div",{className:"right"},l.a.createElement(h.a,{ref:"dmc",discussion:t,hideEntityLabel:!0,hideCompactUserBox:!0,hideActionsBar:!0,shouldLinkToDiscussion:!0}),l.a.createElement("div",{className:"bold-button-row"},l.a.createElement(p.Link,{to:"/discussion/"+t.get("eid"),className:"bold-button"},"Continue reading →"),l.a.createElement(p.Link,{to:"/discussion/"+i.get("eid"),className:"bold-button secondary"},"See complete course →"))))}}]),t}(l.a.PureComponent),g=n.i(c.connect)(r)(m)},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),a=n.n(r),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"prompt"},this.props.copy,a.a.createElement("button",{className:"dismiss-button",onClick:this.props.onDismissClick},"Dismiss"))}}]),t}(a.a.PureComponent);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser")}}var a=n(1),l=n.n(a),c=n(15),u=(n.n(c),n(37)),p=(n.n(u),n(897)),d=n(58),h=n(17),f=n(38),m=n(140),g=n(1605),v=n.n(g),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSignInSignUpModalOpen:!1},n.onLearnMoreClick=n.onLearnMoreClick.bind(n),n.onDismissClick=n.onDismissClick.bind(n),n}return s(t,e),y(t,[{key:"onLearnMoreClick",value:function(e){return!!h.f&&(e.preventDefault(),e.stopPropagation(),n.i(d.k)(e,"https://commonlounge.com/about"))}},{key:"onDismissClick",value:function(e){switch(e){case"home":this.props.setOnboardingStatus(m.k)}this.props.onDismissClick()}},{key:"render",value:function(){var e=this,t=h.a?l.a.createElement("div",{className:"heading"},"Learn faster than your peers — become an expert in weeks, not months."):l.a.createElement("div",{className:"heading"},"Learn faster than your peers.",l.a.createElement("br",null),"Become an expert in weeks, not months."),n=l.a.createElement("div",{className:"copy"},l.a.createElement("span",{className:"logo"},"CommonLounge")," has courses with up-to-date, bite-sized lessons that deliver the most value for the time you invest. You learn by working on quizzes and getting feedback on real-world projects from industry mentors.");return l.a.createElement("div",{className:"signup-prompt"},l.a.createElement("div",{className:"signup-prompt-content"},l.a.createElement("div",{className:"left-section"},t,n,l.a.createElement("div",{className:"button-group"},this.props.currentLoggedInUser?null:l.a.createElement("button",{className:"button main zoom-on-hover",onClick:function(){return e.setState({isSignInSignUpModalOpen:!0})}},"Get started"),l.a.createElement(c.Link,{to:"/about",className:"button secondary no-decoration zoom-on-hover",onClick:this.onLearnMoreClick},"Learn more"),this.props.currentLoggedInUser?l.a.createElement("button",{className:"thin-button zoom-on-hover",onClick:function(){return e.onDismissClick("home")}},"Dismiss"):null)),h.n?null:l.a.createElement("div",{className:"right-section"},l.a.createElement("img",{src:v.a}))),l.a.createElement(p.a,{postSignInSignUpTo:null,isModalOpen:this.state.isSignInSignUpModalOpen,onRequestClose:function(){return e.setState({isSignInSignUpModalOpen:!1})}}))}}]),t}(l.a.PureComponent);n.i(u.connect)(r,{setOnboardingStatus:f.S})(b)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{topics:e.get("topics")}}n.d(t,"a",function(){return g});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(1135)),d=n(356),h=n(38),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleTopicFollow=n.toggleTopicFollow.bind(n),n.onContentClick=n.onContentClick.bind(n),n}return s(t,e),f(t,[{key:"toggleTopicFollow",value:function(){this.props.toggleTopicFollow(this.props.topicId)}},{key:"onContentClick",value:function(){u.browserHistory.push("/topic/"+this.props.topicId)}},{key:"render",value:function(){var e=this.props.topics.get(this.props.topicId);return e?l.a.createElement("div",{className:"topic-metadata"},l.a.createElement("div",{className:"entity-label"},"Topic"),l.a.createElement("div",{className:"clickable",onClick:this.onContentClick},l.a.createElement(p.a,{topicId:this.props.topicId})),l.a.createElement("div",{className:"description clickable",onClick:this.onContentClick,style:this.props.additionalHeight?{marginBottom:this.props.additionalHeight}:null},l.a.createElement("span",null,e.get("description")),l.a.createElement("span",{className:"source"}," (source: Wikipedia)")),l.a.createElement(d.a,{entityType:"Topic",entityUrl:"/topic/"+this.props.topicId,isFollowing:e.get("isFollowing"),toggleFollow:this.toggleTopicFollow})):null}}]),t}(l.a.PureComponent),g=n.i(c.connect)(r,{toggleTopicFollow:h._23})(m)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{topics:e.get("topics"),currentLoggedInUser:e.get("currentLoggedInUser")}}n.d(t,"a",function(){return f});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"render",value:function(){var e=this,t=this.props.topicId?this.props.topics.getIn([this.props.topicId,"relatedTopics"],n.i(p.List)()):n.i(p.List)(),i=t.map(function(t,n){var i=e.props.topics.getIn([t,"name"],"");return l.a.createElement(u.Link,{className:"no-decoration",to:"/topic/"+t,title:i},l.a.createElement("div",{className:"sidebar-row"},l.a.createElement("div",{className:"sidebar-label"},i)))});return l.a.createElement("div",{className:"sidebar right"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"related-topics-section"},l.a.createElement("div",{className:"section-heading"},"Related Topics"),i)))}}]),t}(l.a.PureComponent),f=n.i(c.connect)(r)(h)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),discussions:e.get("discussions"),pagination:e.get("pagination")}}n.d(t,"a",function(){return E});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(899)),f=n.n(h),m=n(38),g=(n(1044),n(1134)),v=n(97),y=n(32),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchBookmarks=n.fetchBookmarks.bind(n),n.loadMore=n.loadMore.bind(n),n.fetchBookmarks(),n}return s(t,e),b(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&t.has("bookmarks")}},{key:"fetchBookmarks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["bookmarks"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"bookmarks"}})}},{key:"loadMore",value:function(){this.fetchBookmarks()}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchBookmarks(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var e=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),t=e.get("bookmarks"),i="User-Bookmarks."+e.get("eid"),o=null;return t&&t.size>0&&(o=l.a.createElement(g.a,{feed:t,isYTranslated:this.props.scrolledPastHeroUnit,location:this.props.location,feedType:i})),l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},l.a.createElement("div",{className:"label large centered centered-text with-left-padding with-right-padding with-top-padding"},"Looking for your course subscriptions? They are ",l.a.createElement(u.Link,{to:"/profile/subscriptions"},"here →")),o||l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You have":e.get("displayName")+" has"," not bookmarked anything yet."),l.a.createElement(f.a,{onEnter:this.loadMore,scrollableAncestor:n.i(y.f)()?window:null,bottomOffset:"-200px"}),this.props.pagination.getIn(["user",this.props.userId,"bookmarks","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null)}}]),t}(l.a.PureComponent),E=n.i(c.connect)(r,{fetchUserMetadata:m.l,logEvent:m.c})(k)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentUser:e.getIn(["users",e.get("currentLoggedInUser")]),users:e.get("users"),discussions:e.get("discussions")}}n.d(t,"a",function(){return v});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(38)),f=n(97),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchCertificates=n.fetchCertificates.bind(n),n.isDataAvailable=n.isDataAvailable.bind(n),n.fetchCertificates(),n}return s(t,e),m(t,[{key:"isDataAvailable",value:function(){var e=this.props.currentUser;return!!e&&e.has("certificates")}},{key:"fetchCertificates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.currentUser;t&&this.props.fetchUserMetadata(t.get("eid"),["certificates"])}},{key:"componentWillReceiveProps",value:function(e){e.currentUser&&!this.props.currentUser&&this.fetchCertificates(e)}},{key:"render",value:function(){if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(f.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var e=this.props.currentUser,t=e.get("certificates");return l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},t?t.map(function(e){var t="/certificate/"+e.get("externalId");return l.a.createElement("div",{className:"certificate"},l.a.createElement("div",{className:"certificate-headline label large"}," Certificate for: ",l.a.createElement(u.Link,{to:"/discussion/"+e.get("discussionId")},e.get("discussionName"))," ",l.a.createElement("span",{className:"label large"},l.a.createElement(u.Link,{to:t},"(Permalink)"))),l.a.createElement("img",{className:"certificate-img",src:e.get("img")}))}):l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},"You have no certificates."))}}]),t}(l.a.PureComponent),v=n.i(c.connect)(r,{fetchUserMetadata:h.l})(g)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),communities:e.get("communities")}}n.d(t,"a",function(){return y});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(972)),f=n(38),m=n(97),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchUserCommunities=n.fetchUserCommunities.bind(n),n.fetchUserCommunities(),n}return s(t,e),g(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&void 0!=t.get("followerCommunities")}},{key:"fetchUserCommunities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["follower_communities","member_communities","moderator_communities"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"communities"}})}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchUserCommunities(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(m.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var e=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),t=e.get("moderatorCommunities"),i=e.get("memberCommunities"),o=e.get("followerCommunities"),s=o.filter(function(e){return-1==i.indexOf(e)&&-1==t.indexOf(e)}),r=i.filter(function(e){return-1==t.indexOf(e)}),a=n.i(p.fromJS)(t).map(function(e,t){return l.a.createElement(h.a,{communityId:e,shouldLinkToCommunity:!0})}),c=n.i(p.fromJS)(r).map(function(e,t){return l.a.createElement(h.a,{communityId:e,shouldLinkToCommunity:!0})}),u=n.i(p.fromJS)(s).map(function(e,t){return l.a.createElement(h.a,{communityId:e,shouldLinkToCommunity:!0})});return l.a.createElement("div",{className:this.props.isYTranslated?"all-communities translated":"all-communities"},l.a.createElement("div",{className:"communities-list list"},a.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Moderator"),l.a.createElement("div",{className:"section-items"},a)):null,c.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Member"),l.a.createElement("div",{className:"section-items"},c)):null,0==a.size&&0==c.size&&0==u.size?l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You do not follow any communities yet.":e.get("displayName")+" does not follow any communities yet."):null,u.size>0?l.a.createElement("div",null,l.a.createElement("div",{className:"section-heading"},"Follower"),l.a.createElement("div",{className:"section-items"},u)):null))}}]),t}(l.a.PureComponent),y=n.i(c.connect)(r,{fetchUserMetadata:f.l,logEvent:f.c})(v)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentUser:e.getIn(["users",e.get("currentLoggedInUser")]),users:e.get("users"),discussions:e.get("discussions")}}n.d(t,"a",function(){return y});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(38)),f=n(97),m=n(1003),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchCourseCompletions=n.fetchCourseCompletions.bind(n),n.isDataAvailable=n.isDataAvailable.bind(n),n.fetchCourseCompletions(),n}return s(t,e),g(t,[{key:"isDataAvailable",value:function(){var e=this.props.currentUser;return!!e&&e.has("completedCourses")}},{key:"fetchCourseCompletions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.currentUser;t&&this.props.fetchUserMetadata(t.get("eid"),["completedCourses"])}},{key:"componentWillReceiveProps",value:function(e){e.currentUser&&!this.props.currentUser&&this.fetchCourseCompletions(e)}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(f.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var t=this.props.currentUser,n=t.get("completedCourses"),i=n&&n.map(function(t,n){return l.a.createElement(m.a,{discussion:e.props.discussions.get(t),key:n})});return l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},i&&i.size>0?l.a.createElement("div",{className:"feed wide"},l.a.createElement("div",{className:"feed-item featured-cards"},i)):l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You have":t.get("displayName")+" has"," not subscribed to any course yet."))}}]),t}(l.a.PureComponent),y=n.i(c.connect)(r,{fetchUserMetadata:h.l})(v)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),discussions:e.get("discussions"),pagination:e.get("pagination")}}n.d(t,"a",function(){return k});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(899)),f=n.n(h),m=n(38),g=n(1044),v=n(97),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchUserDiscussions=n.fetchUserDiscussions.bind(n),n.loadMore=n.loadMore.bind(n),n.fetchUserDiscussions(),n}return s(t,e),y(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&void 0!=t.get("discussions")}},{key:"fetchUserDiscussions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["discussions"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"discussions"}})}},{key:"loadMore",value:function(){this.fetchUserDiscussions()}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchUserDiscussions(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var t=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),n=t.get("discussions"),i=n.map(function(t,n){return l.a.createElement(g.a,{discussion:e.props.discussions.get(t),key:n,shouldLinkToDiscussion:!0})});return l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},i.size>0?i:l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You have":t.get("displayName")+" has"," not started any discussions yet."),l.a.createElement(f.a,{onEnter:this.loadMore,scrollableAncestor:window,bottomOffset:"-200px"}),this.props.pagination.getIn(["user",this.props.userId,"discussions","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null)}}]),t}(l.a.PureComponent),k=n.i(c.connect)(r,{fetchUserMetadata:m.l,logEvent:m.c})(b)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),posts:e.get("discussionPosts"),pagination:e.get("pagination")}}n.d(t,"a",function(){return E});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(899)),f=n.n(h),m=n(38),g=n(1299),v=n(97),y=n(324),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchUserPosts=n.fetchUserPosts.bind(n),n.loadMore=n.loadMore.bind(n),n.fetchUserPosts(),n}return s(t,e),b(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&void 0!=t.get("posts")}},{key:"fetchUserPosts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["posts"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"posts"}})}},{key:"loadMore",value:function(){this.fetchUserPosts()}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchUserPosts(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var t=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),n=t.get("posts"),i=n.map(function(t,n){return l.a.createElement(g.a,{key:n,post:e.props.posts.get(t),restrictTagsModal:!0,discussionId:e.props.posts.getIn([t,"discussion"]),shouldLinkToPost:!0,hideMoreOptions:!0})});return l.a.createElement("div",{className:this.props.isYTranslated?"all-posts translated":"all-posts"},i.size>0?i:l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You have":t.get("displayName")+" has"," not posted any ",y.e," yet."),l.a.createElement(f.a,{onEnter:this.loadMore,scrollableAncestor:window,bottomOffset:"-200px"}),this.props.pagination.getIn(["user",this.props.userId,"posts","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null)}}]),t}(l.a.PureComponent),E=n.i(c.connect)(r,{fetchUserMetadata:m.l,logEvent:m.c})(k)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),discussions:e.get("discussions"),pagination:e.get("pagination")}}n.d(t,"a",function(){return k});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(899)),f=n.n(h),m=n(38),g=n(1003),v=n(97),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchUserSubscriptions=n.fetchUserSubscriptions.bind(n),n.loadMore=n.loadMore.bind(n),n.fetchUserSubscriptions(),n}return s(t,e),y(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&void 0!=t.get("subscriptions")}},{key:"fetchUserSubscriptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["subscriptions"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"subscriptions"}})}},{key:"loadMore",value:function(){this.fetchUserSubscriptions()}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchUserSubscriptions(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){var e=this;if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var t=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),n=t.getIn(["subscriptions",""]),i=n&&n.map(function(t,n){return l.a.createElement(g.a,{discussion:e.props.discussions.get(t),key:n})});return l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},i&&i.size>0?l.a.createElement("div",{className:"feed wide"},l.a.createElement("div",{className:"feed-item featured-cards"},i)):l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You have":t.get("displayName")+" has"," not subscribed to any course yet."),l.a.createElement(f.a,{onEnter:this.loadMore,scrollableAncestor:window,bottomOffset:"-200px"}),this.props.pagination.getIn(["user",this.props.userId,"subscriptions","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null)}}]),t}(l.a.PureComponent),k=n.i(c.connect)(r,{fetchUserMetadata:m.l,logEvent:m.c})(b)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),discussions:e.get("discussions"),pagination:e.get("pagination")}}n.d(t,"a",function(){return k});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(899)),f=n.n(h),m=n(38),g=(n(1044),n(1134)),v=n(97),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchUnpublishedContent=n.fetchUnpublishedContent.bind(n),n.loadMore=n.loadMore.bind(n),n.fetchUnpublishedContent(),n}return s(t,e),y(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&t.has("unpublishedContent")}},{key:"fetchUnpublishedContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["unpublishedContent"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"unpublished_content"}})}},{key:"loadMore",value:function(){this.fetchUnpublishedContent()}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchUnpublishedContent(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var e=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),t=e.get("unpublishedContent"),n="User-Drafts."+e.get("eid"),i=null;return t&&t.size>0&&(i=l.a.createElement(g.a,{feed:t,isYTranslated:this.props.scrolledPastHeroUnit,location:this.props.location,feedType:n})),l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},i||l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},"You have no unpublished content. "),l.a.createElement(f.a,{onEnter:this.loadMore,scrollableAncestor:window,bottomOffset:"-200px"}),this.props.pagination.getIn(["user",this.props.userId,"unpublishedContent","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null)}}]),t}(l.a.PureComponent),k=n.i(c.connect)(r,{fetchUserMetadata:m.l,logEvent:m.c})(b)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{currentLoggedInUser:e.get("currentLoggedInUser"),users:e.get("users"),discussions:e.get("discussions"),pagination:e.get("pagination")}}n.d(t,"a",function(){return E});var a=n(1),l=n.n(a),c=n(37),u=(n.n(c),n(15)),p=(n.n(u),n(39)),d=(n.n(p),n(132)),h=(n.n(d),n(899)),f=n.n(h),m=n(38),g=(n(1044),n(1134)),v=n(97),y=n(32),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchWikiContributions=n.fetchWikiContributions.bind(n),n.loadMore=n.loadMore.bind(n),n.fetchWikiContributions(),n}return s(t,e),b(t,[{key:"isDataAvailable",value:function(){var e=this.props.userId||this.props.currentLoggedInUser;if(!e)return!1;var t=this.props.users.get(e);return void 0!=t&&t.has("wikiContributions")}},{key:"fetchWikiContributions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.userId||this.props.currentLoggedInUser;this.props.fetchUserMetadata(e,["wikiContributions"]),this.props.logEvent({type:"view",payload:{obj:e,obj_type:"User",related_info:"wiki_contributions"}})}},{key:"loadMore",value:function(){this.fetchWikiContributions()}},{key:"componentWillReceiveProps",value:function(e){e.userId!=this.props.userId&&this.fetchWikiContributions(e.userId||nextprops.currentLoggedInUser)}},{key:"render",value:function(){if(!this.isDataAvailable())return l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…"));var e=this.props.users.get(this.props.userId||this.props.currentLoggedInUser),t=e.get("wikiContributions"),i="User-Drafts."+e.get("eid"),o=null;return t&&t.size>0&&(o=l.a.createElement(g.a,{feed:t,isYTranslated:this.props.scrolledPastHeroUnit,location:this.props.location,feedType:i})),l.a.createElement("div",{className:this.props.isYTranslated?"all-discussions translated":"all-discussions"},o||l.a.createElement("div",{className:"onboarding-text-label with-margin-top-bottom"},this.props.currentLoggedInUser==this.props.userId?"You have":e.get("displayName")+" has"," not contributed to any tutorials yet."),l.a.createElement(f.a,{onEnter:this.loadMore,scrollableAncestor:n.i(y.f)()?window:null,bottomOffset:"-200px"}),this.props.pagination.getIn(["user",this.props.userId,"wikiContributions","isFetching"],!1)?l.a.createElement("div",{className:"loader-div"},l.a.createElement(v.a,null),l.a.createElement("div",{className:"loading-text"},"Loading…")):null)}}]),t}(l.a.PureComponent),E=n.i(c.connect)(r,{fetchUserMetadata:m.l,logEvent:m.c})(k)},,,,,function(e,t,n){e.exports=n.p+"df230d508c6743c94164872a528c0b82.png"},,,,,,,,function(e,t,n){e.exports=n.p+"9d36e9be390a6b5a95b414d911c05805.png"}]));